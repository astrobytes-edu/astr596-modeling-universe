{"version":2,"kind":"Article","sha256":"a7e20b1f5dfcd2d1111e59532a3e0e3bb727ae023020104ce9a628eb3b66b2fb","slug":"python-advanced-oop","location":"/03-scientific-computing-with-python/02-scientific-computing-core/10-python-advanced-oop.md","dependencies":[],"frontmatter":{"title":"Chapter 10: Advanced OOP Patterns - Architecting Scientific Software","content_includes_title":false,"authors":[{"nameParsed":{"literal":"Anna Rosen","given":"Anna","family":"Rosen"},"name":"Anna Rosen","orcid":"0000-0003-4423-0660","email":"alrosen@sdsu.edu","affiliations":["San Diego State University"],"id":"contributors-myst-generated-uid-0","corresponding":true}],"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"MIT","url":"https://opensource.org/licenses/MIT","name":"MIT License","free":true,"osi":true}},"github":"https://github.com/astrobytes-edu/astr596-modeling-universe","subject":"Modeling the Universe","venue":{"title":"ASTR 596 - Fall 2025","url":"https://www.anna-rosen.com"},"keywords":["computational astrophysics","python","numerical methods","machine learning","monte carlo","neural networks","radiative transfer","bayesian inference","JAX"],"affiliations":[{"id":"San Diego State University","name":"San Diego State University"}],"numbering":{"title":{"offset":2}},"edit_url":"https://github.com/astrobytes-edu/astr596-modeling-universe/blob/main/03-scientific-computing-with-python/02-scientific-computing-core/10-python-advanced-oop.md","exports":[{"format":"md","filename":"10-python-advanced-oop.md","url":"/10-python-advanced-o-e594e74f10ca5ecb8b0dfe8bec775040.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Learning Objectives","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"KafID9SJFs"}],"identifier":"learning-objectives","label":"Learning Objectives","html_id":"learning-objectives","implicit":true,"key":"Jsw8xc60oy"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"By the end of this chapter, you will be able to:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"cxZNcT8F1F"}],"key":"fxYOpy7XbJ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Design abstract base classes that enforce scientific interfaces and invariants","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"PC7d7dt4df"}],"key":"LFLN080jw7"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Implement advanced inheritance with mixins and multiple inheritance for code reuse","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"YMiwE8efjQ"}],"key":"k5ovm0HJxi"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Apply metaprogramming techniques including descriptors and metaclasses for domain-specific behavior","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"eN2FMHFSs5"}],"key":"uGM90tg68Q"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Use design patterns (Factory, Observer, Strategy) to solve recurring architectural problems","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"oKc8M3qJR6"}],"key":"FxOMCEoKPh"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Implement dataclasses to reduce boilerplate in data-heavy scientific classes","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"wnBSYknD67"}],"key":"dfuMtp836J"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Create asynchronous code for concurrent instrument control and data acquisition","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"jImlmfSIj4"}],"key":"cZIGADXI6A"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Optimize memory and performance using ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"bopBZQqJHk"},{"type":"inlineCode","value":"__slots__","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"RILFz5DyRL"},{"type":"text","value":", caching, and profiling techniques","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"nJ44PNFOTl"}],"key":"cCiuCIw6jl"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Recognize these patterns in NumPy, SciPy, Matplotlib, and Astropy source code","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"iupqi5qBLr"}],"key":"Fs2e6MTOsY"}],"key":"OAuphSuO99"},{"type":"heading","depth":2,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Prerequisites Check","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"aLWcGRDi4b"}],"identifier":"prerequisites-check","label":"Prerequisites Check","html_id":"prerequisites-check","implicit":true,"key":"xF0QdsfJ6K"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Before starting this chapter, verify you can:","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"vqRprxLNyU"}],"key":"rDqvgurfsD"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":18,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"✓ Create classes with methods, properties, and special methods (Chapter 6)","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"jM3VBoA3Tv"}],"key":"r8vYCN3O2Q"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"✓ Use NumPy arrays and vectorized operations (Chapters 7-8)","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"GoTyLFOxHh"}],"key":"nCYHRfQqX7"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"✓ Create Matplotlib figures and subplots (Chapter 9)","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"nfX8SdggQ6"}],"key":"dCVfV6OMfo"},{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"✓ Work with decorators like ","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"tCctnsbmOc"},{"type":"inlineCode","value":"@property","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"ulnzdu99VB"},{"type":"text","value":" (Chapter 6)","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"mXdiAhDubP"}],"key":"oDohy1QZAu"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"✓ Understand array broadcasting and ufuncs (Chapter 8)","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"IbJexnsObz"}],"key":"BsUTwAP9ph"}],"key":"BF0GIuSfbK"},{"type":"paragraph","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Quick diagnostic:","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"R2YPaB0Ima"}],"key":"NVm02ormFe"}],"key":"yYjVfWhw1r"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Can you identify the OOP patterns in this NumPy/Matplotlib code?\nimport numpy as np\nimport matplotlib.pyplot as plt\n\n# Pattern 1: Factory\narr = np.array([1, 2, 3])  # What pattern?\n\n# Pattern 2: Context Manager  \nwith plt.style.context('dark_background'):  # What pattern?\n    fig, ax = plt.subplots()  # Pattern 3: ?\n\n# Pattern 4: Method chaining\nresult = arr.reshape(3, 1).mean(axis=0)  # What pattern?","key":"PUpq6Xevax"},{"type":"output","id":"B9c8UgNsam7iJ1JRUOIi8","data":[],"key":"VNmH4OHota"}],"key":"mwIBlSBp74"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"text","value":"If you recognized factory, context manager, factory again, and fluent interface patterns, you’re ready to understand how they work internally!","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"QQLTDu1MdR"}],"key":"kM8OZjVyOg"},{"type":"heading","depth":2,"position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"text","value":"Chapter Overview","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"clILGf44UK"}],"identifier":"chapter-overview","label":"Chapter Overview","html_id":"chapter-overview","implicit":true,"key":"k13FmjrMPv"},{"type":"paragraph","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"text","value":"You’ve mastered NumPy’s powerful arrays and created stunning visualizations with Matplotlib. You’ve noticed that NumPy arrays somehow work with every mathematical operator, that Matplotlib figures manage complex state across multiple method calls, and that both libraries seem to magically know how to work together. How does ","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"rhpHadMlOA"},{"type":"inlineCode","value":"np.array([1,2,3]) + np.array([4,5,6])","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"zREgDSh2xj"},{"type":"text","value":" know to add element-wise? Why can you pass NumPy arrays directly to Matplotlib functions? How do these libraries coordinate thousands of classes and millions of lines of code while remaining so elegant to use? The answer lies in advanced object-oriented patterns - the architectural principles that make scientific Python possible.","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"KXQV5lTKU6"}],"key":"zISsaxRaB6"},{"type":"paragraph","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"text","value":"This chapter reveals the design patterns hidden throughout the scientific Python ecosystem you’ve been using. You’ll discover that NumPy’s universal functions (ufuncs) rely on abstract base classes to ensure every array type supports the same operations. Matplotlib’s figure and axes use mixins to compose dozens of plotting capabilities without code duplication. Astropy’s units system uses descriptors and metaclasses to catch unit errors at assignment time, not after your spacecraft crashes into Mars. These aren’t academic exercises - they’re the exact patterns that power the tools enabling modern astronomical discoveries, from detecting gravitational waves to imaging black holes.","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"IdI5eAeyXL"}],"key":"eWp7I03B9V"},{"type":"paragraph","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"children":[{"type":"text","value":"Most importantly, you’ll develop the architectural thinking needed to contribute to these packages or build your own research-grade software. You’ll understand why certain design decisions were made, recognize patterns when reading source code, and know when to apply these techniques in your own work. By the end, you’ll see NumPy, Matplotlib, and Astropy not as black boxes but as masterclasses in software architecture, and you’ll have the skills to architect systems at the same level. This isn’t just about learning advanced Python - it’s about joining the community of developers who build the tools that enable scientific discovery.","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"key":"ggXVfbZIMI"}],"key":"wTOo0l8Mp2"},{"type":"heading","depth":2,"position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"children":[{"type":"text","value":"10.1 Abstract Base Classes: Defining Scientific Interfaces","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"LYKl36shwv"}],"identifier":"id-10-1-abstract-base-classes-defining-scientific-interfaces","label":"10.1 Abstract Base Classes: Defining Scientific Interfaces","html_id":"id-10-1-abstract-base-classes-defining-scientific-interfaces","implicit":true,"key":"HzcUkCRi5n"},{"type":"paragraph","position":{"start":{"line":53,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"text","value":"{margin} ","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"cRQb5Vk96L"},{"type":"strong","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"children":[{"type":"text","value":"Abstract Base Class (ABC)","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"iq8PYTj7az"}],"key":"hK46AyDJs7"},{"type":"text","value":"\nA class that cannot be instantiated and defines methods that subclasses must implement.","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"wcVHZg7CLW"}],"key":"qF1LaUvhf4"},{"type":"paragraph","position":{"start":{"line":56,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"text","value":"{margin} ","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"otpzSbeQuz"},{"type":"strong","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"text","value":"Interface","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"wWptOQsk7K"}],"key":"Tf8GrVVslN"},{"type":"text","value":"\nA contract specifying what methods a class must provide, ensuring compatibility between components.","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"kX9ziMxSyH"}],"key":"B6dOuPDyUY"},{"type":"paragraph","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"children":[{"type":"text","value":"Now that you’ve used NumPy and Matplotlib extensively, you’ve encountered abstract base classes without realizing it. Every time NumPy performs an operation on different array types, it’s using ABCs to ensure compatibility. Let’s understand how this works.","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"QYst73oSKP"}],"key":"pdiyAWvSbL"}],"key":"F4kDwnmYU4"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from abc import ABC, abstractmethod\nimport numpy as np\n\n# First, see the problem ABCs solve in astronomy\nclass BadCCDArray:\n    def read_counts(self): \n        return np.array([100, 200, 300])  # photon counts\n\nclass BadIRArray:\n    def get_flux(self):  # Different method name!\n        return np.array([50, 60, 70])  # flux in erg/s/cm²\n\n# Without ABCs, incompatible interfaces cause runtime errors\n# You've seen this problem when different instruments use different formats","key":"OnZCp3UsCm"},{"type":"output","id":"IgaRbseoxxVputEzbdPES","data":[],"key":"KkAFv2bPKL"}],"key":"PF9a5WQAtP"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"children":[{"type":"text","value":"Now let’s solve this with ABCs, using CGS units throughout:","position":{"start":{"line":78,"column":1},"end":{"line":78,"column":1}},"key":"fQHacAWspk"}],"key":"bEgyWc4qFF"}],"key":"sXUoiPYZZ9"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from abc import ABC, abstractmethod\n\nclass AstronomicalDetector(ABC):\n    \"\"\"Abstract base defining detector interface in CGS units.\"\"\"\n    \n    @abstractmethod\n    def read_frame(self) -> np.ndarray:\n        \"\"\"Read one frame of data in erg/s/cm².\"\"\"\n        pass\n    \n    @abstractmethod\n    def get_noise(self) -> float:\n        \"\"\"Return noise in erg/s/cm².\"\"\"\n        pass\n    \n    @abstractmethod\n    def get_area_cm2(self) -> float:\n        \"\"\"Return detector area in cm².\"\"\"\n        pass\n    \n    # Concrete methods provide shared functionality\n    def photons_to_flux(self, counts, wavelength_cm):\n        \"\"\"Convert photon counts to flux in erg/s/cm².\n        \n        E = hν = hc/λ where:\n        h = 6.626e-27 erg·s (Planck in CGS)\n        c = 2.998e10 cm/s (speed of light in CGS)\n        \"\"\"\n        h = 6.626e-27  # erg·s\n        c = 2.998e10   # cm/s\n        energy_per_photon = h * c / wavelength_cm\n        return counts * energy_per_photon\n\n# Now implementations MUST follow the interface\nclass CCDDetector(AstronomicalDetector):\n    \"\"\"CCD implementation with CGS units.\"\"\"\n    \n    def __init__(self, area_cm2=4.0, gain=1.0):\n        self.area = area_cm2  # typically 2x2 cm for astronomy CCDs\n        self.gain = gain\n        self.read_noise = 5.0  # electrons\n    \n    def read_frame(self) -> np.ndarray:\n        \"\"\"Read CCD frame, return flux in erg/s/cm².\"\"\"\n        # Simulate Poisson photon noise\n        photons = np.random.poisson(1000, size=(1024, 1024))\n        # Convert to flux at 550nm (5.5e-5 cm)\n        return self.photons_to_flux(photons, 5.5e-5)\n    \n    def get_noise(self) -> float:\n        \"\"\"RMS noise in erg/s/cm².\"\"\"\n        # Convert read noise to flux\n        return self.photons_to_flux(self.read_noise, 5.5e-5)\n    \n    def get_area_cm2(self) -> float:\n        \"\"\"CCD area in cm².\"\"\"\n        return self.area\n\nclass InfraredArray(AstronomicalDetector):\n    \"\"\"IR array implementation with CGS units.\"\"\"\n    \n    def __init__(self, area_cm2=1.0):\n        self.area = area_cm2  # smaller pixels for IR\n        self.dark_current = 0.1  # e-/s at 77K\n    \n    def read_frame(self) -> np.ndarray:\n        \"\"\"Read IR frame at 2.2 microns.\"\"\"\n        # IR arrays have different noise characteristics\n        signal = np.random.randn(256, 256) * 10 + 100\n        # Convert to flux at 2.2 microns (2.2e-4 cm)\n        return self.photons_to_flux(signal, 2.2e-4)\n    \n    def get_noise(self) -> float:\n        \"\"\"Dark current noise in erg/s/cm².\"\"\"\n        return self.photons_to_flux(self.dark_current, 2.2e-4)\n    \n    def get_area_cm2(self) -> float:\n        return self.area\n\n# Process any detector uniformly\ndef calculate_sensitivity(detector: AstronomicalDetector) -> float:\n    \"\"\"Calculate sensitivity for any detector in erg/s/cm².\"\"\"\n    signal = detector.read_frame()\n    noise = detector.get_noise()\n    area = detector.get_area_cm2()\n    \n    # Signal-to-noise ratio calculation\n    snr = np.mean(signal) / noise if noise > 0 else 0\n    sensitivity = noise * 3 / area  # 3-sigma detection limit\n    \n    return sensitivity\n\n# Works with ANY detector implementing the interface!\nccd = CCDDetector(area_cm2=4.0)\nir = InfraredArray(area_cm2=1.0)\n\nprint(f\"CCD sensitivity: {calculate_sensitivity(ccd):.2e} erg/s/cm³\")\nprint(f\"IR sensitivity: {calculate_sensitivity(ir):.2e} erg/s/cm³\")","key":"iliMOx2Rgk"},{"type":"output","id":"1Y4XaizzUQsRnWQat50CF","data":[],"key":"SseQ4DwAxZ"}],"key":"KXRp2Bc7rt"},{"type":"block","children":[{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🎯 The More You Know: How ABCs Saved the Event Horizon Telescope","position":{"start":{"line":181,"column":1},"end":{"line":181,"column":1}},"key":"HQ9hDMjzwM"}],"key":"zvO7UzFxBW"},{"type":"paragraph","position":{"start":{"line":184,"column":1},"end":{"line":184,"column":1}},"children":[{"type":"text","value":"In April 2019, the world saw the first image of a black hole - that stunning orange ring around M87*. Behind this image was a software nightmare that abstract base classes solved. The Event Horizon Telescope wasn’t one telescope but eight, scattered from Hawaii to Antarctica to Spain, each with completely different hardware, data formats, and recording systems.","position":{"start":{"line":184,"column":1},"end":{"line":184,"column":1}},"key":"bxxG3CyQ1q"}],"key":"U85kHQeqi1"},{"type":"paragraph","position":{"start":{"line":186,"column":1},"end":{"line":186,"column":1}},"children":[{"type":"text","value":"The challenge was staggering. ALMA in Chile produced 16 terabytes per night in FITS format at 230 GHz. The South Pole Telescope recorded 8 TB in Mark5B format at 240 GHz. The IRAM 30-meter used VDIF format. Early integration attempts were disasters - as Katie Bouman’s team discovered, code written for one telescope would crash catastrophically with another’s data.","position":{"start":{"line":186,"column":1},"end":{"line":186,"column":1}},"key":"cEyWIQRZsc"}],"key":"wyn6mbchUG"},{"type":"paragraph","position":{"start":{"line":188,"column":1},"end":{"line":188,"column":1}},"children":[{"type":"text","value":"The breakthrough came when they defined abstract interfaces that each telescope had to implement:","position":{"start":{"line":188,"column":1},"end":{"line":188,"column":1}},"key":"ze6Kue0iFw"}],"key":"lsPAXDVvwL"},{"type":"code","lang":"python","value":"class EHTStation(ABC):\n    @abstractmethod\n    def get_visibility(self, time, baseline_cm):\n        \"\"\"Return visibility in Jy at baseline in cm.\"\"\"\n        pass\n    \n    @abstractmethod\n    def get_uv_coverage(self, hour_angle):\n        \"\"\"Return (u,v) in megalambda.\"\"\"\n        pass\n    \n    @abstractmethod\n    def correct_atmosphere(self, data, pwv_mm):\n        \"\"\"Correct for atmosphere with precipitable water vapor in mm.\"\"\"\n        pass","position":{"start":{"line":190,"column":1},"end":{"line":206,"column":1}},"key":"XX2OPobXyo"},{"type":"paragraph","position":{"start":{"line":208,"column":1},"end":{"line":208,"column":1}},"children":[{"type":"text","value":"Each telescope team could implement these methods however they needed. ALMA’s implementation was 5,000 lines handling their 66-dish array correlator. The single-dish stations were just 500 lines. But the correlation pipeline didn’t care - it just called ","position":{"start":{"line":208,"column":1},"end":{"line":208,"column":1}},"key":"bXvc1PHXCJ"},{"type":"inlineCode","value":"get_visibility()","position":{"start":{"line":208,"column":1},"end":{"line":208,"column":1}},"key":"fBKeDvuLzR"},{"type":"text","value":" and trusted each station to handle the details.","position":{"start":{"line":208,"column":1},"end":{"line":208,"column":1}},"key":"LucRF5eZZa"}],"key":"w6oJy7aYIt"},{"type":"paragraph","position":{"start":{"line":210,"column":1},"end":{"line":210,"column":1}},"children":[{"type":"text","value":"This abstraction proved critical during the final week of processing. When they discovered the South Pole Telescope’s hydrogen maser clock was drifting by 100 nanoseconds per day (catastrophic for interferometry where timing must be precise to picoseconds), they only had to fix SPT’s ","position":{"start":{"line":210,"column":1},"end":{"line":210,"column":1}},"key":"wChEsj3Fei"},{"type":"inlineCode","value":"correct_timing()","position":{"start":{"line":210,"column":1},"end":{"line":210,"column":1}},"key":"iJ50Cmdq2E"},{"type":"text","value":" method. The rest of the pipeline, processing petabytes of data, continued running without modification.","position":{"start":{"line":210,"column":1},"end":{"line":210,"column":1}},"key":"BPykTP0LNT"}],"key":"BMhF0KZ6yD"},{"type":"paragraph","position":{"start":{"line":212,"column":1},"end":{"line":212,"column":1}},"children":[{"type":"text","value":"The image of the black hole’s event horizon - that first glimpse of spacetime bent to its breaking point - exists because abstract base classes let eight incompatible telescopes pretend to be one Earth-sized instrument. It’s the same pattern you’re learning, applied to one of astronomy’s greatest achievements!","position":{"start":{"line":212,"column":1},"end":{"line":212,"column":1}},"key":"oC2ybam9Oz"}],"key":"i73TuggALn"}],"class":"note, story","key":"t4S48w3hQs"},{"type":"heading","depth":3,"position":{"start":{"line":215,"column":1},"end":{"line":215,"column":1}},"children":[{"type":"text","value":"Advanced ABC Patterns with NumPy Integration","position":{"start":{"line":215,"column":1},"end":{"line":215,"column":1}},"key":"ZXOFAoiWB7"}],"identifier":"advanced-abc-patterns-with-numpy-integration","label":"Advanced ABC Patterns with NumPy Integration","html_id":"advanced-abc-patterns-with-numpy-integration","implicit":true,"key":"p1xvm1Phq3"}],"key":"T5sldOIXT6"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from abc import ABC, abstractmethod\nfrom typing import Tuple\nimport numpy as np\n\nclass SpectralAnalyzer(ABC):\n    \"\"\"Advanced ABC using NumPy arrays and CGS units.\"\"\"\n    \n    @property\n    @abstractmethod\n    def wavelength_range_cm(self) -> Tuple[float, float]:\n        \"\"\"Wavelength coverage in cm.\"\"\"\n        pass\n    \n    @abstractmethod\n    def find_lines(self, flux: np.ndarray, \n                   threshold_sigma: float = 3.0) -> np.ndarray:\n        \"\"\"Find emission lines in flux [erg/s/cm²/cm].\n        \n        Returns wavelengths in cm of detected lines.\n        \"\"\"\n        pass\n    \n    def flux_to_photons(self, flux_cgs, wavelength_cm):\n        \"\"\"Convert flux to photon rate using CGS units.\n        \n        flux: erg/s/cm²/cm\n        returns: photons/s/cm²/cm\n        \"\"\"\n        h = 6.626e-27  # erg·s\n        c = 2.998e10   # cm/s\n        return flux_cgs * wavelength_cm / (h * c)\n\nclass OpticalSpectrograph(SpectralAnalyzer):\n    \"\"\"Optical spectrograph with CGS units.\"\"\"\n    \n    @property\n    def wavelength_range_cm(self):\n        # 380-750 nm in cm\n        return (3.8e-5, 7.5e-5)\n    \n    def find_lines(self, flux, threshold_sigma=3.0):\n        \"\"\"Find emission lines using median filtering.\"\"\"\n        # Simple line finding with NumPy\n        median = np.median(flux)\n        std = np.std(flux)\n        peaks = np.where(flux > median + threshold_sigma * std)[0]\n        \n        # Convert indices to wavelengths in cm\n        wave_start, wave_end = self.wavelength_range_cm\n        wavelengths = np.linspace(wave_start, wave_end, len(flux))\n        \n        return wavelengths[peaks]\n\n# Using the abstract interface with NumPy\nspectrograph = OpticalSpectrograph()\nmock_flux = np.random.randn(1000) * 1e-12 + 5e-12  # erg/s/cm²/cm\nlines = spectrograph.find_lines(mock_flux)\nprint(f\"Found {len(lines)} emission lines\")\nprint(f\"Wavelength range: {spectrograph.wavelength_range_cm} cm\")","key":"VUhA85VGZW"},{"type":"output","id":"mkJh4VOQMNWbiG6X_S9mk","data":[],"key":"wodR1lMFaA"}],"key":"qTE0TQdJih"},{"type":"block","children":[{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🔍 Check Your Understanding","position":{"start":{"line":279,"column":1},"end":{"line":279,"column":1}},"key":"VGWyMhZl6V"}],"key":"bk3hNumApk"},{"type":"paragraph","position":{"start":{"line":282,"column":1},"end":{"line":282,"column":1}},"children":[{"type":"text","value":"Why does NumPy’s ","position":{"start":{"line":282,"column":1},"end":{"line":282,"column":1}},"key":"AUhogHj8ZA"},{"type":"inlineCode","value":"np.asarray()","position":{"start":{"line":282,"column":1},"end":{"line":282,"column":1}},"key":"cOCOGxWpqf"},{"type":"text","value":" work with so many different input types (lists, tuples, other arrays)? How do ABCs enable this?","position":{"start":{"line":282,"column":1},"end":{"line":282,"column":1}},"key":"OUpybMZj1K"}],"key":"bNiCQo3gZg"},{"type":"details","children":[{"type":"summary","children":[{"type":"text","value":"Answer","position":{"start":{"line":284,"column":1},"end":{"line":284,"column":1}},"key":"APrq8Xo921"}],"key":"qsItyWR5oA"},{"type":"paragraph","position":{"start":{"line":285,"column":1},"end":{"line":285,"column":1}},"children":[{"type":"text","value":"NumPy uses the Array API protocol (similar to an ABC) that defines what methods an object needs to be “array-like”. Any object implementing ","position":{"start":{"line":285,"column":1},"end":{"line":285,"column":1}},"key":"BzwLDKFk3e"},{"type":"inlineCode","value":"__array__()","position":{"start":{"line":285,"column":1},"end":{"line":285,"column":1}},"key":"sijDTblLAY"},{"type":"text","value":" or ","position":{"start":{"line":285,"column":1},"end":{"line":285,"column":1}},"key":"RSIFR7WAFn"},{"type":"inlineCode","value":"__array_interface__","position":{"start":{"line":285,"column":1},"end":{"line":285,"column":1}},"key":"bjgXkzjo9F"},{"type":"text","value":" can be converted to a NumPy array.","position":{"start":{"line":285,"column":1},"end":{"line":285,"column":1}},"key":"FCVUFy7xXX"}],"key":"kEwmih33qv"},{"type":"paragraph","position":{"start":{"line":287,"column":1},"end":{"line":287,"column":1}},"children":[{"type":"text","value":"This is why you can do:","position":{"start":{"line":287,"column":1},"end":{"line":287,"column":1}},"key":"Yt9xqoeAWz"}],"key":"uE9dQaHuUa"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":288,"column":1},"end":{"line":292,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":288,"column":1},"end":{"line":288,"column":1}},"children":[{"type":"inlineCode","value":"np.asarray([1,2,3])","position":{"start":{"line":288,"column":1},"end":{"line":288,"column":1}},"key":"GbvP82PLpy"},{"type":"text","value":" - lists work","position":{"start":{"line":288,"column":1},"end":{"line":288,"column":1}},"key":"SahRtAgvuy"}],"key":"PWirQOmryk"},{"type":"listItem","spread":true,"position":{"start":{"line":289,"column":1},"end":{"line":289,"column":1}},"children":[{"type":"inlineCode","value":"np.asarray((1,2,3))","position":{"start":{"line":289,"column":1},"end":{"line":289,"column":1}},"key":"nr3oZ4izEP"},{"type":"text","value":" - tuples work","position":{"start":{"line":289,"column":1},"end":{"line":289,"column":1}},"key":"WQlsZrDBGi"}],"key":"gxne5WJ60M"},{"type":"listItem","spread":true,"position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"children":[{"type":"inlineCode","value":"np.asarray(pandas_series)","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"iYHiHLBlto"},{"type":"text","value":" - Pandas objects work","position":{"start":{"line":290,"column":1},"end":{"line":290,"column":1}},"key":"fBmtuSxeud"}],"key":"BOHZHia7Cz"},{"type":"listItem","spread":true,"position":{"start":{"line":291,"column":1},"end":{"line":292,"column":1}},"children":[{"type":"inlineCode","value":"np.asarray(astropy_quantity)","position":{"start":{"line":291,"column":1},"end":{"line":291,"column":1}},"key":"tt0zFsImj4"},{"type":"text","value":" - Astropy quantities work","position":{"start":{"line":291,"column":1},"end":{"line":291,"column":1}},"key":"pK92MNf8iF"}],"key":"VOa5ytMQa4"}],"key":"PMrX3WfhKY"},{"type":"paragraph","position":{"start":{"line":293,"column":1},"end":{"line":293,"column":1}},"children":[{"type":"text","value":"Each of these types implements the array protocol differently, but NumPy doesn’t care about the implementation - just that the required methods exist. This is ABC-based design enabling the entire scientific Python ecosystem to interoperate!","position":{"start":{"line":293,"column":1},"end":{"line":293,"column":1}},"key":"hCxoawWHM7"}],"key":"UBPrAaRlph"}],"key":"D4I9wneMkx"}],"class":"question","key":"TgIHtlWyIX"},{"type":"code","lang":"","value":"\n## 10.2 Multiple Inheritance and Mixins\n\n{margin} **Mixin**\nA class providing specific functionality to be inherited by other classes, not meant to stand alone.\n\n{margin} **Diamond Problem**\nWhen a class inherits from two classes that share a common base, creating ambiguity in method resolution.\n\nYou've seen matplotlib axes that can plot lines, scatter points, histograms, images, and dozens of other visualizations. How does one class have so many capabilities without becoming a 10,000-line monster? The answer is mixins.\n\n```{code-cell} python\n# First, understand the diamond problem you've seen in NumPy\nclass Array:\n    def sum(self): return \"Array.sum\"\n\nclass MaskedArray(Array):\n    def sum(self): return \"MaskedArray.sum\"\n\nclass SparseArray(Array):\n    def sum(self): return \"SparseArray.sum\"\n\nclass MaskedSparseArray(MaskedArray, SparseArray):\n    pass  # Which sum() method?\n\n# Method Resolution Order (MRO) solves this\nmsa = MaskedSparseArray()\nprint(f\"Calls: {msa.sum()}\")  # MaskedArray.sum (first parent)\nprint(f\"MRO: {[c.__name__ for c in MaskedSparseArray.__mro__]}\")\n```\n\nNow let's build a telescope control system using mixins with proper CGS units:\n\n```{code-cell} python\nimport time\nimport numpy as np\n\n# Mixins provide specific, reusable functionality\nclass PointingMixin:\n    \"\"\"Add telescope pointing capability (CGS units).\"\"\"\n    \n    def __init__(self, *args, **kwargs):\n        super().__init__(*args, **kwargs)\n        self.ra_rad = 0.0  # radians\n        self.dec_rad = 0.0  # radians\n    \n    def point_to(self, ra_hours, dec_degrees):\n        \"\"\"Point telescope to coordinates.\n        \n        Args:\n            ra_hours: Right ascension in hours\n            dec_degrees: Declination in degrees\n        \"\"\"\n        self.ra_rad = ra_hours * 15 * np.pi / 180  # hours to radians\n        self.dec_rad = dec_degrees * np.pi / 180    # degrees to radians\n        \n    def get_altitude_cm(self, latitude_rad, lst_hours):\n        \"\"\"Calculate altitude above horizon in cm at zenith.\n        \n        Uses Earth radius = 6.371e8 cm\n        \"\"\"\n        # Simplified altitude calculation\n        h = np.sin(self.dec_rad) * np.sin(latitude_rad)\n        h += np.cos(self.dec_rad) * np.cos(latitude_rad) * \\\n             np.cos(lst_hours * 15 * np.pi / 180 - self.ra_rad)\n        \n        # Convert to height in cm above horizon\n        earth_radius_cm = 6.371e8\n        return np.arcsin(h) * earth_radius_cm\n\nclass PhotometryMixin:\n    \"\"\"Add photometric capability with CGS flux units.\"\"\"\n    \n    def __init__(self, *args, **kwargs):\n        super().__init__(*args, **kwargs)\n        self.filter_width_cm = 1e-5  # 100 nm default\n    \n    def counts_to_flux(self, counts, exposure_s, area_cm2):\n        \"\"\"Convert counts to flux in erg/s/cm²/Hz.\n        \n        Assumes optical wavelength 550 nm = 5.5e-5 cm\n        \"\"\"\n        wavelength_cm = 5.5e-5\n        c = 2.998e10  # cm/s\n        h = 6.626e-27  # erg·s\n        \n        # Photon energy\n        energy_per_photon = h * c / wavelength_cm\n        \n        # Flux in erg/s/cm²\n        flux = counts * energy_per_photon / (exposure_s * area_cm2)\n        \n        # Convert to per Hz (ν = c/λ)\n        freq_hz = c / wavelength_cm\n        bandwidth_hz = c * self.filter_width_cm / wavelength_cm**2\n        \n        return flux / bandwidth_hz\n\nclass SpectroscopyMixin:\n    \"\"\"Add spectroscopic capability.\"\"\"\n    \n    def __init__(self, *args, **kwargs):\n        super().__init__(*args, **kwargs)\n        self.resolution = 1000  # R = λ/Δλ\n    \n    def velocity_shift_cm_per_s(self, obs_wavelength_cm, \n                                rest_wavelength_cm):\n        \"\"\"Calculate velocity shift in cm/s using Doppler formula.\n        \n        v = c * (λ_obs - λ_rest) / λ_rest\n        \"\"\"\n        c = 2.998e10  # cm/s\n        return c * (obs_wavelength_cm - rest_wavelength_cm) / rest_wavelength_cm\n\n# Base telescope class\nclass Telescope:\n    \"\"\"Base telescope with aperture in cm.\"\"\"\n    \n    def __init__(self, name, aperture_cm):\n        super().__init__()  # Important for mixin chain!\n        self.name = name\n        self.aperture_cm = aperture_cm\n    \n    def light_gathering_power(self):\n        \"\"\"Light gathering power in cm².\"\"\"\n        return np.pi * (self.aperture_cm / 2)**2\n\n# Combine mixins to create specialized telescopes\nclass OpticalTelescope(Telescope, PointingMixin, PhotometryMixin):\n    \"\"\"Optical telescope with pointing and photometry.\"\"\"\n    pass\n\nclass SpectroscopicTelescope(Telescope, PointingMixin, SpectroscopyMixin):\n    \"\"\"Telescope with spectrograph.\"\"\"\n    pass\n\nclass MultiInstrumentTelescope(Telescope, PointingMixin, \n                               PhotometryMixin, SpectroscopyMixin):\n    \"\"\"Telescope with all capabilities.\"\"\"\n    pass\n\n# Create telescopes with different capabilities\nphoto_scope = OpticalTelescope(\"1m Photometric\", 100)  # 100 cm = 1m\nphoto_scope.point_to(ra_hours=5.5, dec_degrees=45.0)\n\n# Photometry-specific methods available\nflux = photo_scope.counts_to_flux(counts=10000, exposure_s=30, \n                                  area_cm2=photo_scope.light_gathering_power())\nprint(f\"Flux: {flux:.2e} erg/s/cm²/Hz\")\n\n# Spectroscopic telescope has different methods\nspec_scope = SpectroscopicTelescope(\"2m Spectroscopic\", 200)  # 200 cm\nvelocity = spec_scope.velocity_shift_cm_per_s(\n    obs_wavelength_cm=6.565e-5,  # H-alpha observed\n    rest_wavelength_cm=6.563e-5  # H-alpha rest\n)\nprint(f\"Velocity: {velocity/1e5:.1f} km/s\")  # Convert to km/s for display\n```\n\n:::{admonition} 🎯 The More You Know: How Mixins Orchestrate the Large Hadron Collider\n:class: note, story\n\nIn 2008, CERN faced a software catastrophe. The Large Hadron Collider's four main detectors - ATLAS, CMS, ALICE, and LHCb - each the size of apartment buildings, produced different data types from 40 million collisions per second. The original monolithic code had become unmaintainable. Every detector class exceeded 10,000 lines with massive duplication.\n\nBenedikt Hegner led the refactoring to mixins. The problem: detectors shared some capabilities but not others. ATLAS and CMS needed muon tracking. ALICE specialized in heavy ion collisions. All needed timing to 25 nanoseconds. Traditional inheritance would create bizarre hierarchies or duplicate code.\n\nThe solution was elegant mixins:\n\n```python\nclass MuonTrackingMixin:\n    def reconstruct_muon_momentum_gev(self, hits):\n        \"\"\"Track muons through iron, return momentum in GeV/c.\"\"\"\n        # 500 lines of Kalman filtering through magnetic field\n        pass\n\nclass CalorimeterMixin:\n    def measure_energy_gev(self, cells):\n        \"\"\"Measure energy deposition in GeV.\"\"\"\n        # 300 lines of calorimetry in CGS then convert\n        pass\n\nclass PrecisionTimingMixin:\n    def get_bunch_crossing(self, time_ns):\n        \"\"\"Identify which 25ns proton bunch caused event.\"\"\"\n        pass\n\n# Each detector picks its capabilities\nclass ATLAS(Detector, MuonTrackingMixin, CalorimeterMixin, \n           PrecisionTimingMixin, JetReconstructionMixin):\n    pass\n\nclass ALICE(Detector, CalorimeterMixin, PrecisionTimingMixin,\n           HeavyIonMixin):  # No muons but handles lead ions\n    pass\n```\n\nThis design proved its worth during the 2012 Higgs discovery. When unusual tau signatures appeared, they created `TauLeptonMixin` and added it to both ATLAS and CMS in days instead of months. The mixin processed 5 billion events, finding the 125 GeV Higgs boson.\n\nToday, this architecture processes 600 million collisions per second, filtering to 1000 \"interesting\" events. When you use mixins, you're using the pattern that found the Higgs boson!","position":{"start":{"line":295,"column":1},"end":{"line":495,"column":1}},"key":"plQZiS5pKO"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"💡 Computational Thinking Box: Composition vs Inheritance","position":{"start":{"line":497,"column":1},"end":{"line":497,"column":1}},"key":"Pr4TPANAhg"}],"key":"MyYYcTGoB2"},{"type":"paragraph","position":{"start":{"line":500,"column":1},"end":{"line":500,"column":1}},"children":[{"type":"strong","position":{"start":{"line":500,"column":1},"end":{"line":500,"column":1}},"children":[{"type":"text","value":"PATTERN: Choosing Between Inheritance, Mixins, and Composition","position":{"start":{"line":500,"column":1},"end":{"line":500,"column":1}},"key":"kC9zZxHFR9"}],"key":"Qxvj7LOaKv"}],"key":"yjwK59XRsT"},{"type":"paragraph","position":{"start":{"line":502,"column":1},"end":{"line":502,"column":1}},"children":[{"type":"text","value":"After using NumPy and Matplotlib, you’ve seen all three patterns:","position":{"start":{"line":502,"column":1},"end":{"line":502,"column":1}},"key":"cXFy7MaOWQ"}],"key":"NLzDMPHwNV"},{"type":"paragraph","position":{"start":{"line":504,"column":1},"end":{"line":504,"column":1}},"children":[{"type":"strong","position":{"start":{"line":504,"column":1},"end":{"line":504,"column":1}},"children":[{"type":"text","value":"Inheritance (IS-A)","position":{"start":{"line":504,"column":1},"end":{"line":504,"column":1}},"key":"f7Na0Hqm1g"}],"key":"Cpta26wN5p"},{"type":"text","value":": “MaskedArray IS-A ndarray”","position":{"start":{"line":504,"column":1},"end":{"line":504,"column":1}},"key":"HLsh75XOvb"}],"key":"wVO0Mr1uvQ"},{"type":"code","lang":"python","value":"class ma.MaskedArray(np.ndarray):  # NumPy's actual design\n    pass","position":{"start":{"line":505,"column":1},"end":{"line":508,"column":1}},"key":"s9pABE5ROZ"},{"type":"paragraph","position":{"start":{"line":510,"column":1},"end":{"line":510,"column":1}},"children":[{"type":"strong","position":{"start":{"line":510,"column":1},"end":{"line":510,"column":1}},"children":[{"type":"text","value":"Mixin (CAN-DO)","position":{"start":{"line":510,"column":1},"end":{"line":510,"column":1}},"key":"eYp985P5du"}],"key":"TwBmXL8rS2"},{"type":"text","value":": “Axes CAN-DO plotting methods”","position":{"start":{"line":510,"column":1},"end":{"line":510,"column":1}},"key":"avkvOnVDu2"}],"key":"qg3xdyp3q7"},{"type":"code","lang":"python","value":"class Axes(Artist, _AxesBase):  # Matplotlib's actual design\n    # Inherits from mixins providing different capabilities\n    pass","position":{"start":{"line":511,"column":1},"end":{"line":515,"column":1}},"key":"RJBExViJVD"},{"type":"paragraph","position":{"start":{"line":517,"column":1},"end":{"line":517,"column":1}},"children":[{"type":"strong","position":{"start":{"line":517,"column":1},"end":{"line":517,"column":1}},"children":[{"type":"text","value":"Composition (HAS-A)","position":{"start":{"line":517,"column":1},"end":{"line":517,"column":1}},"key":"t024IjZIVm"}],"key":"PMalBPvMMQ"},{"type":"text","value":": “Figure HAS-A list of Axes”","position":{"start":{"line":517,"column":1},"end":{"line":517,"column":1}},"key":"eqaJTcA3AQ"}],"key":"oxVPQIDTtN"},{"type":"code","lang":"python","value":"class Figure:\n    def __init__(self):\n        self.axes = []  # Composition - Figure contains Axes","position":{"start":{"line":518,"column":1},"end":{"line":522,"column":1}},"key":"Oj4lPBaw7v"},{"type":"paragraph","position":{"start":{"line":524,"column":1},"end":{"line":524,"column":1}},"children":[{"type":"strong","position":{"start":{"line":524,"column":1},"end":{"line":524,"column":1}},"children":[{"type":"text","value":"Decision Framework","position":{"start":{"line":524,"column":1},"end":{"line":524,"column":1}},"key":"aa1I6T86ZZ"}],"key":"hmJkXoEMRU"},{"type":"text","value":":","position":{"start":{"line":524,"column":1},"end":{"line":524,"column":1}},"key":"NXyhqKlmOb"}],"key":"k9AEk5ZANk"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":525,"column":1},"end":{"line":529,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":525,"column":1},"end":{"line":525,"column":1}},"children":[{"type":"text","value":"Use inheritance for true specialization (rare)","position":{"start":{"line":525,"column":1},"end":{"line":525,"column":1}},"key":"SK2E2BALLZ"}],"key":"bVwPlY6sSd"},{"type":"listItem","spread":true,"position":{"start":{"line":526,"column":1},"end":{"line":526,"column":1}},"children":[{"type":"text","value":"Use mixins for orthogonal capabilities (common)","position":{"start":{"line":526,"column":1},"end":{"line":526,"column":1}},"key":"vxt66jgv6y"}],"key":"zIiF5lfNy7"},{"type":"listItem","spread":true,"position":{"start":{"line":527,"column":1},"end":{"line":527,"column":1}},"children":[{"type":"text","value":"Use composition for complex relationships (very common)","position":{"start":{"line":527,"column":1},"end":{"line":527,"column":1}},"key":"mv1B63Oq7e"}],"key":"kRXa2Ez9dU"},{"type":"listItem","spread":true,"position":{"start":{"line":528,"column":1},"end":{"line":529,"column":1}},"children":[{"type":"text","value":"When in doubt, prefer composition","position":{"start":{"line":528,"column":1},"end":{"line":528,"column":1}},"key":"sR62PlwQn1"}],"key":"P2BTo1yKkI"}],"key":"hbgkIhocey"},{"type":"paragraph","position":{"start":{"line":530,"column":1},"end":{"line":530,"column":1}},"children":[{"type":"text","value":"Real NumPy example: Structured arrays use composition (array HAS-A dtype), not inheritance!","position":{"start":{"line":530,"column":1},"end":{"line":530,"column":1}},"key":"J9GCMA3Lew"}],"key":"lkpGoKjJmo"}],"class":"tip","key":"zjnOZ9ouEe"},{"type":"heading","depth":2,"position":{"start":{"line":533,"column":1},"end":{"line":533,"column":1}},"children":[{"type":"text","value":"10.3 Dataclasses: Modern Python for Scientific Data","position":{"start":{"line":533,"column":1},"end":{"line":533,"column":1}},"key":"h538gLDJCI"}],"identifier":"id-10-3-dataclasses-modern-python-for-scientific-data","label":"10.3 Dataclasses: Modern Python for Scientific Data","html_id":"id-10-3-dataclasses-modern-python-for-scientific-data","implicit":true,"key":"ale23Q4mU1"},{"type":"paragraph","position":{"start":{"line":535,"column":1},"end":{"line":536,"column":1}},"children":[{"type":"text","value":"{margin} ","position":{"start":{"line":535,"column":1},"end":{"line":535,"column":1}},"key":"AXLoJGwHoF"},{"type":"strong","position":{"start":{"line":535,"column":1},"end":{"line":535,"column":1}},"children":[{"type":"text","value":"Dataclass","position":{"start":{"line":535,"column":1},"end":{"line":535,"column":1}},"key":"N9AIuVrLcK"}],"key":"u5EgIqDb4v"},{"type":"text","value":"\nA decorator that automatically generates special methods for classes primarily storing data.","position":{"start":{"line":535,"column":1},"end":{"line":535,"column":1}},"key":"p5YJKajYrt"}],"key":"rBpXonfCWD"},{"type":"paragraph","position":{"start":{"line":538,"column":1},"end":{"line":538,"column":1}},"children":[{"type":"text","value":"Python 3.7 introduced dataclasses, which eliminate boilerplate for data-heavy scientific classes. You’ve been writing ","position":{"start":{"line":538,"column":1},"end":{"line":538,"column":1}},"key":"S0fUqUvmMD"},{"type":"inlineCode","value":"__init__","position":{"start":{"line":538,"column":1},"end":{"line":538,"column":1}},"key":"yOgH5sP96Z"},{"type":"text","value":", ","position":{"start":{"line":538,"column":1},"end":{"line":538,"column":1}},"key":"ZZKQxUJ7Rj"},{"type":"inlineCode","value":"__repr__","position":{"start":{"line":538,"column":1},"end":{"line":538,"column":1}},"key":"UlYjLflN3G"},{"type":"text","value":", and ","position":{"start":{"line":538,"column":1},"end":{"line":538,"column":1}},"key":"CuEcgzL5Cs"},{"type":"inlineCode","value":"__eq__","position":{"start":{"line":538,"column":1},"end":{"line":538,"column":1}},"key":"lJMvjsLnBR"},{"type":"text","value":" manually - dataclasses generate them automatically.","position":{"start":{"line":538,"column":1},"end":{"line":538,"column":1}},"key":"ZGVQ65L6ku"}],"key":"GRh7bDstc8"}],"key":"IIUgKVkomW"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from dataclasses import dataclass, field\nfrom typing import List, Optional\nimport numpy as np\n\n# Before dataclasses - lots of boilerplate\nclass OldStyleObservation:\n    def __init__(self, target: str, ra_deg: float, dec_deg: float,\n                 exposure_s: float, airmass: float, \n                 flux_cgs: Optional[float] = None):\n        self.target = target\n        self.ra_deg = ra_deg\n        self.dec_deg = dec_deg\n        self.exposure_s = exposure_s\n        self.airmass = airmass\n        self.flux_cgs = flux_cgs\n    \n    def __repr__(self):\n        return (f\"OldStyleObservation(target={self.target}, \"\n                f\"ra_deg={self.ra_deg}, ...)\")\n    \n    def __eq__(self, other):\n        return (self.target == other.target and \n                self.ra_deg == other.ra_deg and ...)\n\n# With dataclasses - automatic and clean!\n@dataclass\nclass Observation:\n    \"\"\"Astronomical observation with automatic methods.\"\"\"\n    target: str\n    ra_deg: float\n    dec_deg: float\n    exposure_s: float\n    airmass: float\n    flux_cgs: Optional[float] = None  # erg/s/cm²\n    \n    def __post_init__(self):\n        \"\"\"Validate after auto-generated __init__.\"\"\"\n        if not 0 <= self.ra_deg <= 360:\n            raise ValueError(f\"RA {self.ra_deg} outside [0,360]\")\n        if not -90 <= self.dec_deg <= 90:\n            raise ValueError(f\"Dec {self.dec_deg} outside [-90,90]\")\n        if self.airmass < 1.0:\n            raise ValueError(f\"Airmass {self.airmass} < 1.0\")\n    \n    def extinction_magnitudes(self) -> float:\n        \"\"\"Atmospheric extinction in magnitudes.\n        \n        Uses Rayleigh scattering at sea level.\n        \"\"\"\n        k_extinction = 0.15  # mag/airmass at 550nm\n        return k_extinction * (self.airmass - 1.0)\n\n# Automatic __init__, __repr__, __eq__ and more!\nobs = Observation(\n    target=\"M31\",\n    ra_deg=10.68,\n    dec_deg=41.27,\n    exposure_s=300,\n    airmass=1.2,\n    flux_cgs=1.5e-12\n)\n\nprint(obs)  # Nice automatic __repr__\nprint(f\"Extinction: {obs.extinction_magnitudes():.3f} mag\")","key":"QPiSS6uhQL"},{"type":"output","id":"92qkVQcGJ24yDQE4zMNeG","data":[],"key":"CuW5RUORVc"}],"key":"RLRYvZQDNj"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":607,"column":1},"end":{"line":607,"column":1}},"children":[{"type":"text","value":"Advanced Dataclass Features for Scientific Computing","position":{"start":{"line":607,"column":1},"end":{"line":607,"column":1}},"key":"GfP3KOC3q8"}],"identifier":"advanced-dataclass-features-for-scientific-computing","label":"Advanced Dataclass Features for Scientific Computing","html_id":"advanced-dataclass-features-for-scientific-computing","implicit":true,"key":"NlzLEqgqI6"}],"key":"UgiO80dkEX"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from __future__ import annotations  # Enables forward references\nfrom dataclasses import dataclass, field, asdict\nimport numpy as np\nfrom typing import ClassVar, Optional\n\n@dataclass\nclass SpectralLine:\n    \"\"\"Spectral line with CGS units and validation.\"\"\"\n    \n    # Class variable (shared by all instances)\n    c_cgs: ClassVar[float] = 2.998e10  # cm/s\n    \n    # Instance variables with types\n    wavelength_cm: float\n    flux_cgs: float  # erg/s/cm²\n    width_cm: float\n    name: str = \"Unknown\"\n    \n    # Computed field with default_factory\n    measurements: List[float] = field(default_factory=list)\n    \n    # Field with metadata\n    snr: float = field(default=0.0, metadata={\"unit\": \"dimensionless\"})\n    \n    def __post_init__(self):\n        \"\"\"Calculate SNR after initialization.\"\"\"\n        if self.flux_cgs > 0 and self.width_cm > 0:\n            # Simple SNR estimate\n            self.snr = self.flux_cgs / (self.width_cm * 1e-13)\n    \n    @property\n    def velocity_width_km_s(self) -> float:\n        \"\"\"Line width in velocity space (km/s).\"\"\"\n        return (self.width_cm / self.wavelength_cm) * self.c_cgs / 1e5\n    \n    @property\n    def frequency_hz(self) -> float:\n        \"\"\"Frequency in Hz.\"\"\"\n        return self.c_cgs / self.wavelength_cm\n\n# Create H-alpha line\nh_alpha = SpectralLine(\n    wavelength_cm=6.563e-5,\n    flux_cgs=1e-13,\n    width_cm=1e-7,\n    name=\"H-alpha\"\n)\n\nprint(f\"H-alpha: {h_alpha.frequency_hz:.2e} Hz\")\nprint(f\"Velocity width: {h_alpha.velocity_width_km_s:.1f} km/s\")\nprint(f\"SNR: {h_alpha.snr:.1f}\")\n\n# Convert to dictionary (useful for saving)\nline_dict = asdict(h_alpha)\nprint(f\"As dict: {line_dict}\")\n\n# Frozen (immutable) dataclass for constants\n@dataclass(frozen=True)\nclass PhysicalConstants:\n    \"\"\"Immutable physical constants in CGS.\"\"\"\n    c: float = 2.998e10      # cm/s\n    h: float = 6.626e-27     # erg·s\n    k: float = 1.381e-16     # erg/K\n    m_e: float = 9.109e-28   # g\n    m_p: float = 1.673e-24   # g\n    \n    def photon_energy(self, wavelength_cm: float) -> float:\n        \"\"\"Photon energy in ergs.\"\"\"\n        return self.h * self.c / wavelength_cm\n\n# Constants are immutable\nconstants = PhysicalConstants()\n# constants.c = 3e10  # This would raise FrozenInstanceError\nprint(f\"Photon at 550nm: {constants.photon_energy(5.5e-5):.2e} erg\")","key":"qLtRVjRMFe"},{"type":"output","id":"wNb7zj1f-w8LMDHQk6013","data":[],"key":"MIteeQXUSI"}],"key":"k1h3oBDsC3"},{"type":"block","children":[{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🌟 Why This Matters: Dataclasses in Scientific Python","position":{"start":{"line":686,"column":1},"end":{"line":686,"column":1}},"key":"Blwi6hbHRW"}],"key":"MZG8gkh8Pz"},{"type":"paragraph","position":{"start":{"line":689,"column":1},"end":{"line":689,"column":1}},"children":[{"type":"text","value":"Dataclasses dramatically reduce boilerplate in scientific code. Here’s a real comparison:","position":{"start":{"line":689,"column":1},"end":{"line":689,"column":1}},"key":"hRQcsskU8a"}],"key":"TkhI3xpLFf"},{"type":"code","lang":"python","value":"# Traditional class - lots of boilerplate\nclass Star:\n    def __init__(self, name, ra, dec, magnitude, distance):\n        self.name = name\n        self.ra = ra\n        self.dec = dec\n        self.magnitude = magnitude\n        self.distance = distance\n    \n    def __repr__(self):\n        return (f\"Star(name={self.name!r}, ra={self.ra}, \"\n                f\"dec={self.dec}, magnitude={self.magnitude}, \"\n                f\"distance={self.distance})\")\n    \n    def __eq__(self, other):\n        if not isinstance(other, Star):\n            return NotImplemented\n        return (self.name == other.name and \n                self.ra == other.ra and\n                self.dec == other.dec and\n                self.magnitude == other.magnitude and\n                self.distance == other.distance)\n\n# With dataclass - clean and automatic!\n@dataclass\nclass Star:\n    name: str\n    ra: float\n    dec: float  \n    magnitude: float\n    distance: float\n    # __init__, __repr__, __eq__ all generated automatically!","position":{"start":{"line":691,"column":1},"end":{"line":724,"column":1}},"key":"KZiRjYixSj"},{"type":"paragraph","position":{"start":{"line":726,"column":1},"end":{"line":726,"column":1}},"children":[{"type":"text","value":"Benefits in scientific computing:","position":{"start":{"line":726,"column":1},"end":{"line":726,"column":1}},"key":"AdL98fhSHW"}],"key":"fc8rEdf8kL"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":727,"column":1},"end":{"line":731,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":727,"column":1},"end":{"line":727,"column":1}},"children":[{"type":"text","value":"Type hints make scientific APIs self-documenting","position":{"start":{"line":727,"column":1},"end":{"line":727,"column":1}},"key":"UVJQZEkuQK"}],"key":"BmPfXBIABu"},{"type":"listItem","spread":true,"position":{"start":{"line":728,"column":1},"end":{"line":728,"column":1}},"children":[{"type":"inlineCode","value":"asdict()","position":{"start":{"line":728,"column":1},"end":{"line":728,"column":1}},"key":"wTumvFX7Aj"},{"type":"text","value":" simplifies data export to JSON/HDF5","position":{"start":{"line":728,"column":1},"end":{"line":728,"column":1}},"key":"orCNqtlcNB"}],"key":"cIhZimIrXy"},{"type":"listItem","spread":true,"position":{"start":{"line":729,"column":1},"end":{"line":729,"column":1}},"children":[{"type":"inlineCode","value":"frozen=True","position":{"start":{"line":729,"column":1},"end":{"line":729,"column":1}},"key":"b6gyvEwBwp"},{"type":"text","value":" ensures immutability for coordinate systems","position":{"start":{"line":729,"column":1},"end":{"line":729,"column":1}},"key":"mQwMpOZGcb"}],"key":"jRWFBnttYy"},{"type":"listItem","spread":true,"position":{"start":{"line":730,"column":1},"end":{"line":731,"column":1}},"children":[{"type":"text","value":"Less code means fewer bugs in data structures","position":{"start":{"line":730,"column":1},"end":{"line":730,"column":1}},"key":"tw5ifG0gxW"}],"key":"NzxNZGEuEU"}],"key":"aXWLX4i6QG"},{"type":"paragraph","position":{"start":{"line":732,"column":1},"end":{"line":732,"column":1}},"children":[{"type":"text","value":"Many modern scientific Python packages are adopting dataclasses for their clarity and reduced maintenance burden. You’re learning patterns that represent the future direction of scientific Python!","position":{"start":{"line":732,"column":1},"end":{"line":732,"column":1}},"key":"Zt30K7zhfR"}],"key":"uWaV7Bep5v"}],"class":"info, important","key":"RpP8aylCgF"},{"type":"heading","depth":2,"position":{"start":{"line":735,"column":1},"end":{"line":735,"column":1}},"children":[{"type":"text","value":"10.4 Asynchronous Programming for Instrument Control","position":{"start":{"line":735,"column":1},"end":{"line":735,"column":1}},"key":"TLhG9FeaGX"}],"identifier":"id-10-4-asynchronous-programming-for-instrument-control","label":"10.4 Asynchronous Programming for Instrument Control","html_id":"id-10-4-asynchronous-programming-for-instrument-control","implicit":true,"key":"gtAB6P6Hlt"},{"type":"paragraph","position":{"start":{"line":737,"column":1},"end":{"line":738,"column":1}},"children":[{"type":"text","value":"{margin} ","position":{"start":{"line":737,"column":1},"end":{"line":737,"column":1}},"key":"d15V24LKWq"},{"type":"strong","position":{"start":{"line":737,"column":1},"end":{"line":737,"column":1}},"children":[{"type":"text","value":"Async/Await","position":{"start":{"line":737,"column":1},"end":{"line":737,"column":1}},"key":"yh9HJ0p4hO"}],"key":"vXIa1vhLBB"},{"type":"text","value":"\nPython’s syntax for asynchronous programming, allowing concurrent operations without threads.","position":{"start":{"line":737,"column":1},"end":{"line":737,"column":1}},"key":"x4jZdojA8s"}],"key":"iC04vyqrXs"},{"type":"paragraph","position":{"start":{"line":740,"column":1},"end":{"line":741,"column":1}},"children":[{"type":"text","value":"{margin} ","position":{"start":{"line":740,"column":1},"end":{"line":740,"column":1}},"key":"nkhip8nU8h"},{"type":"strong","position":{"start":{"line":740,"column":1},"end":{"line":740,"column":1}},"children":[{"type":"text","value":"Coroutine","position":{"start":{"line":740,"column":1},"end":{"line":740,"column":1}},"key":"el1ZpCMx5Z"}],"key":"RI4sqqg1Mn"},{"type":"text","value":"\nA function that can pause and resume execution, enabling cooperative multitasking.","position":{"start":{"line":740,"column":1},"end":{"line":740,"column":1}},"key":"ae1ETni07D"}],"key":"q3k4jdDdVg"},{"type":"paragraph","position":{"start":{"line":743,"column":1},"end":{"line":743,"column":1}},"children":[{"type":"text","value":"Modern observatories control multiple instruments simultaneously. While one CCD reads out (30 seconds), you can slew the telescope (10 seconds) and configure the spectrograph (5 seconds). Async programming enables this parallelism.","position":{"start":{"line":743,"column":1},"end":{"line":743,"column":1}},"key":"mhOgQ22gVV"}],"key":"lCEr3ZwA37"}],"key":"UQUZHRQfDG"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import asyncio\nimport time\nimport numpy as np\n\n# Synchronous version - everything waits\ndef sync_observe(target: str) -> dict:\n    \"\"\"Traditional blocking observation.\"\"\"\n    print(f\"Starting observation of {target}\")\n    \n    # Each step blocks\n    print(\"Slewing telescope...\")\n    time.sleep(2)  # Simulate 2 second slew\n    \n    print(\"Exposing CCD...\")\n    time.sleep(3)  # Simulate 3 second exposure\n    \n    print(\"Reading CCD...\")\n    time.sleep(1)  # Simulate 1 second readout\n    \n    return {\"target\": target, \"counts\": 1000}\n\n# Time the synchronous version\nstart = time.perf_counter()\nresult = sync_observe(\"M31\")\nsync_time = time.perf_counter() - start\nprint(f\"Synchronous time: {sync_time:.1f}s\\n\")","key":"axi3LfScO6"},{"type":"output","id":"YlB7WKD5vwg_TqFGnV1_F","data":[],"key":"zyvyWHInP7"}],"key":"YPy7aWFUD7"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":774,"column":1},"end":{"line":774,"column":1}},"children":[{"type":"text","value":"Now the asynchronous version:","position":{"start":{"line":774,"column":1},"end":{"line":774,"column":1}},"key":"h3A6RzFpEj"}],"key":"Wf2ixLEB4J"}],"key":"McEfpKqfXU"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Asynchronous version - operations can overlap\nasync def slew_telescope(ra_deg: float, dec_deg: float):\n    \"\"\"Async telescope slewing.\"\"\"\n    print(f\"Slewing to RA={ra_deg:.1f}, Dec={dec_deg:.1f}\")\n    await asyncio.sleep(2)  # Non-blocking sleep\n    print(\"Slew complete\")\n    return True\n\nasync def expose_ccd(exposure_s: float):\n    \"\"\"Async CCD exposure.\"\"\"\n    print(f\"Starting {exposure_s}s exposure\")\n    await asyncio.sleep(3)  # Simulated exposure\n    \n    # Generate mock data in CGS units\n    photons = np.random.poisson(1000, size=(100, 100))\n    flux_cgs = photons * 3.6e-12  # erg/s/cm² at 550nm\n    \n    print(\"Exposure complete\")\n    return flux_cgs\n\nasync def configure_spectrograph(resolution: int):\n    \"\"\"Async spectrograph configuration.\"\"\"\n    print(f\"Configuring spectrograph R={resolution}\")\n    await asyncio.sleep(1)\n    print(\"Spectrograph ready\")\n    return resolution\n\nasync def async_observe(target: str, ra: float, dec: float):\n    \"\"\"Parallel observation with multiple instruments.\"\"\"\n    print(f\"Starting async observation of {target}\")\n    \n    # Launch operations concurrently!\n    tasks = [\n        slew_telescope(ra, dec),\n        expose_ccd(30.0),\n        configure_spectrograph(5000)\n    ]\n    \n    # Wait for all to complete\n    results = await asyncio.gather(*tasks)\n    \n    return {\n        \"target\": target,\n        \"pointed\": results[0],\n        \"flux\": results[1].mean(),\n        \"resolution\": results[2]\n    }\n\n# Run async version\nasync def main():\n    start = time.perf_counter()\n    result = await async_observe(\"M31\", 10.68, 41.27)\n    async_time = time.perf_counter() - start\n    \n    print(f\"\\nAsync time: {async_time:.1f}s\")\n    print(f\"Speedup: {sync_time/async_time:.1f}x\")\n    print(f\"Mean flux: {result['flux']:.2e} erg/s/cm²\")\n\n# Note: In Jupyter, use await directly\n# In scripts, use asyncio.run(main())\nawait main()","key":"rOTF37hiyy"},{"type":"output","id":"zgNGrcr8Nd4-xjE7X_u2J","data":[],"key":"NpT3RSPKX2"}],"key":"unQvd1hwZm"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":840,"column":1},"end":{"line":840,"column":1}},"children":[{"type":"text","value":"Real-World Async Telescope Control","position":{"start":{"line":840,"column":1},"end":{"line":840,"column":1}},"key":"gOEA0oDJtM"}],"identifier":"real-world-async-telescope-control","label":"Real-World Async Telescope Control","html_id":"real-world-async-telescope-control","implicit":true,"key":"Tzl7lNKebc"}],"key":"LKx4cEzKyP"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from dataclasses import dataclass\nfrom typing import List, Optional\nimport asyncio\n\n# Note: In Jupyter notebooks, use 'await' directly in cells\n# In Python scripts, use asyncio.run(main())\n# Some Jupyter versions may require nest_asyncio:\n# import nest_asyncio\n# nest_asyncio.apply()\n\n@dataclass\nclass TelescopeState:\n    \"\"\"Current telescope state.\"\"\"\n    ra_deg: float = 0.0\n    dec_deg: float = 0.0\n    filter: str = \"V\"\n    focus_mm: float = 0.0\n    dome_azimuth_deg: float = 0.0\n\nclass AsyncTelescope:\n    \"\"\"Async telescope controller with realistic operations.\"\"\"\n    \n    def __init__(self, name: str):\n        self.name = name\n        self.state = TelescopeState()\n        self.is_tracking = False\n    \n    async def slew_to(self, ra: float, dec: float) -> float:\n        \"\"\"Slew to coordinates, return time taken.\"\"\"\n        # Calculate slew time based on distance\n        distance = np.sqrt((ra - self.state.ra_deg)**2 + \n                          (dec - self.state.dec_deg)**2)\n        slew_time = min(distance / 2.0, 30.0)  # 2 deg/s, max 30s\n        \n        print(f\"{self.name}: Slewing {distance:.1f}° ({slew_time:.1f}s)\")\n        await asyncio.sleep(slew_time)\n        \n        self.state.ra_deg = ra\n        self.state.dec_deg = dec\n        self.is_tracking = True\n        \n        return slew_time\n    \n    async def change_filter(self, filter_name: str):\n        \"\"\"Change filter wheel.\"\"\"\n        if filter_name != self.state.filter:\n            print(f\"{self.name}: Changing to {filter_name} filter\")\n            await asyncio.sleep(5.0)  # Filter wheel rotation\n            self.state.filter = filter_name\n    \n    async def auto_focus(self) -> float:\n        \"\"\"Autofocus routine, return FWHM in arcsec.\"\"\"\n        print(f\"{self.name}: Starting autofocus\")\n        \n        best_focus = 0.0\n        best_fwhm = float('inf')\n        \n        # Simulate focus sweep\n        for focus in np.linspace(-2, 2, 5):\n            await asyncio.sleep(1.0)  # Move focus\n            \n            # Simulate FWHM measurement\n            fwhm = abs(focus) + np.random.random() + 0.8\n            if fwhm < best_fwhm:\n                best_fwhm = fwhm\n                best_focus = focus\n        \n        self.state.focus_mm = best_focus\n        print(f\"{self.name}: Focus complete, FWHM={best_fwhm:.2f}\\\"\")\n        return best_fwhm\n\n# Async observation sequence\nasync def observe_targets(telescope: AsyncTelescope, \n                         targets: List[tuple]):\n    \"\"\"Observe multiple targets efficiently.\"\"\"\n    \n    for name, ra, dec, filter_name in targets:\n        print(f\"\\n--- Observing {name} ---\")\n        \n        # Parallel operations where possible\n        tasks = [\n            telescope.slew_to(ra, dec),\n            telescope.change_filter(filter_name)\n        ]\n        \n        # Slew and filter change happen in parallel\n        await asyncio.gather(*tasks)\n        \n        # Focus if needed (every 5 targets)\n        if np.random.random() < 0.2:\n            await telescope.auto_focus()\n        \n        # Simulate exposure\n        print(f\"Exposing {name} in {filter_name}\")\n        await asyncio.sleep(10.0)\n        \n        print(f\"Completed {name}\")\n\n# Run observation sequence\nasync def night_observations():\n    telescope = AsyncTelescope(\"10m Keck\")\n    \n    targets = [\n        (\"M31\", 10.68, 41.27, \"V\"),\n        (\"M42\", 83.82, -5.39, \"R\"),\n        (\"M51\", 202.47, 47.20, \"B\"),\n    ]\n    \n    start = time.perf_counter()\n    await observe_targets(telescope, targets)\n    total_time = time.perf_counter() - start\n    \n    print(f\"\\nTotal observation time: {total_time:.1f}s\")\n\nawait night_observations()","key":"owGOR9lJR7"},{"type":"output","id":"1G7HX1l4solU6oA_z7PMH","data":[],"key":"o86vgJTduv"}],"key":"vaFWGJYXKS"},{"type":"block","children":[{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"⚠️ Common Bug Alert: Mixing Sync and Async","position":{"start":{"line":960,"column":1},"end":{"line":960,"column":1}},"key":"MVFlU9gOVB"}],"key":"d1c3M6zfK8"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# WRONG - Blocking call in async function\nasync def bad_async():\n    print(\"Starting\")\n    time.sleep(1)  # BLOCKS the event loop!\n    print(\"Done\")\n\n# CORRECT - Use async sleep\nasync def good_async():\n    print(\"Starting\")\n    await asyncio.sleep(1)  # Non-blocking\n    print(\"Done\")\n\n# WRONG - Forgetting await\nasync def forgot_await():\n    result = expose_ccd(30)  # Returns coroutine object!\n    # print(result)  # <coroutine object...>\n\n# CORRECT - Use await\nasync def remembered_await():\n    result = await expose_ccd(30)  # Actually runs\n    print(f\"Got flux: {result.mean():.2e}\")","key":"NtCk5jCeCs"},{"type":"output","id":"PEjuikTZmbUhwZb-JgbHH","data":[],"key":"tzmbCFRXuQ"}],"key":"GDsmpqJvlx"},{"type":"paragraph","position":{"start":{"line":987,"column":1},"end":{"line":987,"column":1}},"children":[{"type":"text","value":"Always use ","position":{"start":{"line":987,"column":1},"end":{"line":987,"column":1}},"key":"vnue5PhZQp"},{"type":"inlineCode","value":"await","position":{"start":{"line":987,"column":1},"end":{"line":987,"column":1}},"key":"SpoPg8tkoW"},{"type":"text","value":" with async functions and never use blocking calls in async code!","position":{"start":{"line":987,"column":1},"end":{"line":987,"column":1}},"key":"TBxLH2qhG1"}],"key":"mfTtGCLU3i"}],"class":"warning","key":"EowpDJHgON"},{"type":"heading","depth":2,"position":{"start":{"line":990,"column":1},"end":{"line":990,"column":1}},"children":[{"type":"text","value":"10.5 Metaclasses and Descriptors","position":{"start":{"line":990,"column":1},"end":{"line":990,"column":1}},"key":"Nnqm1GE5QP"}],"identifier":"id-10-5-metaclasses-and-descriptors","label":"10.5 Metaclasses and Descriptors","html_id":"id-10-5-metaclasses-and-descriptors","implicit":true,"key":"EFxfyOHoAn"},{"type":"paragraph","position":{"start":{"line":992,"column":1},"end":{"line":993,"column":1}},"children":[{"type":"text","value":"{margin} ","position":{"start":{"line":992,"column":1},"end":{"line":992,"column":1}},"key":"STqLftsmud"},{"type":"strong","position":{"start":{"line":992,"column":1},"end":{"line":992,"column":1}},"children":[{"type":"text","value":"Metaclass","position":{"start":{"line":992,"column":1},"end":{"line":992,"column":1}},"key":"Y8YJfQgCKo"}],"key":"uW5wC9gDYU"},{"type":"text","value":"\nA class whose instances are classes themselves, controlling class creation.","position":{"start":{"line":992,"column":1},"end":{"line":992,"column":1}},"key":"rvvqVwWGRh"}],"key":"kZBDWOEpv2"},{"type":"paragraph","position":{"start":{"line":995,"column":1},"end":{"line":996,"column":1}},"children":[{"type":"text","value":"{margin} ","position":{"start":{"line":995,"column":1},"end":{"line":995,"column":1}},"key":"JIjeRQj82m"},{"type":"strong","position":{"start":{"line":995,"column":1},"end":{"line":995,"column":1}},"children":[{"type":"text","value":"Descriptor","position":{"start":{"line":995,"column":1},"end":{"line":995,"column":1}},"key":"mquAyZm8sw"}],"key":"pF5t1YOvY3"},{"type":"text","value":"\nAn object that customizes attribute access through ","position":{"start":{"line":995,"column":1},"end":{"line":995,"column":1}},"key":"KpSqx5fsKo"},{"type":"inlineCode","value":"__get__","position":{"start":{"line":995,"column":1},"end":{"line":995,"column":1}},"key":"zCLLoXvHaU"},{"type":"text","value":" and ","position":{"start":{"line":995,"column":1},"end":{"line":995,"column":1}},"key":"XiDpujDEkU"},{"type":"inlineCode","value":"__set__","position":{"start":{"line":995,"column":1},"end":{"line":995,"column":1}},"key":"k11kXuHUVH"},{"type":"text","value":" methods.","position":{"start":{"line":995,"column":1},"end":{"line":995,"column":1}},"key":"tNarkmS5GX"}],"key":"J6aYSuQAyO"},{"type":"paragraph","position":{"start":{"line":998,"column":1},"end":{"line":998,"column":1}},"children":[{"type":"text","value":"Now that you’ve seen how NumPy dtypes work and how Astropy units prevent disasters, let’s understand the metaclasses and descriptors that make them possible.","position":{"start":{"line":998,"column":1},"end":{"line":998,"column":1}},"key":"eqKE2Qnua2"}],"key":"ByYDcmddsO"}],"key":"QKVKg8GfcC"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Descriptors for unit-safe astronomy\nclass UnitProperty:\n    \"\"\"Descriptor ensuring CGS units are maintained.\"\"\"\n    \n    def __init__(self, unit_name: str, cgs_conversion: float = 1.0,\n                 min_val: Optional[float] = None):\n        self.unit_name = unit_name\n        self.cgs_conversion = cgs_conversion\n        self.min_val = min_val\n    \n    def __set_name__(self, owner, name):\n        \"\"\"Called when descriptor is assigned to class.\"\"\"\n        self.name = f\"_{name}\"\n        self.public_name = name\n    \n    def __get__(self, obj, objtype=None):\n        \"\"\"Get value in CGS units.\"\"\"\n        if obj is None:\n            return self\n        return getattr(obj, self.name, None)\n    \n    def __set__(self, obj, value):\n        \"\"\"Set value with validation and conversion.\"\"\"\n        # Handle tuple of (value, unit)\n        if isinstance(value, tuple):\n            val, unit = value\n            if unit != self.unit_name:\n                # Convert to CGS\n                if unit == \"km\" and self.unit_name == \"cm\":\n                    val *= 1e5\n                elif unit == \"AU\" and self.unit_name == \"cm\":\n                    val *= 1.496e13\n                else:\n                    raise ValueError(f\"Cannot convert {unit} to {self.unit_name}\")\n        else:\n            val = value\n        \n        # Validate\n        if self.min_val is not None and val < self.min_val:\n            raise ValueError(f\"{self.public_name} = {val} below minimum {self.min_val}\")\n        \n        setattr(obj, self.name, val)\n\nclass CelestialObject:\n    \"\"\"Object with unit-safe properties.\"\"\"\n    \n    # Descriptors enforce CGS units\n    distance = UnitProperty(\"cm\", min_val=0)\n    mass = UnitProperty(\"g\", min_val=0)\n    radius = UnitProperty(\"cm\", min_val=0)\n    temperature = UnitProperty(\"K\", min_val=0)\n    \n    def __init__(self, name: str):\n        self.name = name\n    \n    @property\n    def escape_velocity_cm_s(self) -> float:\n        \"\"\"Escape velocity in cm/s.\"\"\"\n        if self.mass and self.radius:\n            G = 6.674e-8  # cm³/g/s²\n            return np.sqrt(2 * G * self.mass / self.radius)\n        return 0.0\n\n# Unit-safe usage\nearth = CelestialObject(\"Earth\")\nearth.distance = (1, \"AU\")  # Converts to cm automatically\nearth.mass = 5.972e27  # grams\nearth.radius = (6371, \"km\")  # Converts to cm\n\nprint(f\"Earth distance: {earth.distance:.2e} cm\")\nprint(f\"Earth radius: {earth.radius:.2e} cm\")\nprint(f\"Escape velocity: {earth.escape_velocity_cm_s/1e5:.1f} km/s\")","key":"X6FB1oEf91"},{"type":"output","id":"ypWiiJp7dCPDgJbRgOTOy","data":[],"key":"icuApzkebJ"}],"key":"BhefAW1U7c"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":1075,"column":1},"end":{"line":1075,"column":1}},"children":[{"type":"text","value":"Metaclasses for Automatic Registration","position":{"start":{"line":1075,"column":1},"end":{"line":1075,"column":1}},"key":"IxZn779zZq"}],"identifier":"metaclasses-for-automatic-registration","label":"Metaclasses for Automatic Registration","html_id":"metaclasses-for-automatic-registration","implicit":true,"key":"dpePvgEkJv"}],"key":"Uk8qPGUy2c"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Metaclass for instrument registry (like Astropy's registry)\nclass InstrumentMeta(type):\n    \"\"\"Metaclass that auto-registers instruments.\"\"\"\n    \n    _registry = {}\n    \n    def __new__(mcs, name, bases, namespace):\n        # Create the class\n        cls = super().__new__(mcs, name, bases, namespace)\n        \n        # Register if it has instrument_code\n        if 'instrument_code' in namespace:\n            code = namespace['instrument_code']\n            mcs._registry[code] = cls\n            print(f\"Registered {name} as '{code}'\")\n        \n        return cls\n    \n    @classmethod\n    def create(mcs, code: str, **kwargs):\n        \"\"\"Factory method using registry.\"\"\"\n        if code not in mcs._registry:\n            available = list(mcs._registry.keys())\n            raise ValueError(f\"Unknown instrument '{code}'. \"\n                           f\"Available: {available}\")\n        return mcs._registry[code](**kwargs)\n    \n    @classmethod\n    def list_instruments(mcs):\n        \"\"\"List all registered instruments.\"\"\"\n        return list(mcs._registry.keys())\n\nclass Instrument(metaclass=InstrumentMeta):\n    \"\"\"Base class with metaclass.\"\"\"\n    \n    def __init__(self, **config):\n        self.config = config\n\n# Classes auto-register on definition!\nclass WFC3(Instrument):\n    \"\"\"Hubble Wide Field Camera 3.\"\"\"\n    instrument_code = \"WFC3\"\n    \n    def __init__(self, channel=\"UVIS\", **config):\n        super().__init__(**config)\n        self.channel = channel  # UVIS or IR\n\nclass MIRI(Instrument):\n    \"\"\"JWST Mid-Infrared Instrument.\"\"\"\n    instrument_code = \"MIRI\"\n    \n    def __init__(self, mode=\"imaging\", **config):\n        super().__init__(**config)\n        self.mode = mode\n\nclass HARPS(Instrument):\n    \"\"\"High Accuracy Radial velocity Planet Searcher.\"\"\"\n    instrument_code = \"HARPS\"\n    \n    def __init__(self, resolution=115000, **config):\n        super().__init__(**config)\n        self.resolution = resolution\n\n# Use the registry\nprint(f\"Available: {InstrumentMeta.list_instruments()}\")\n\n# Create instruments by code\nmiri = InstrumentMeta.create(\"MIRI\", mode=\"spectroscopy\")\nharps = InstrumentMeta.create(\"HARPS\")\n\nprint(f\"Created {miri.__class__.__name__} in {miri.mode} mode\")\nprint(f\"HARPS resolution: R={harps.resolution}\")","key":"u5isHc5p8U"},{"type":"output","id":"AhA7ERPgbnDnQwZYHSiz-","data":[],"key":"wgDTkmOvw0"}],"key":"BIq6apuVwG"},{"type":"block","children":[{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🔍 Check Your Understanding","position":{"start":{"line":1152,"column":1},"end":{"line":1152,"column":1}},"key":"TwQh86JnZm"}],"key":"S91XgmrdsQ"},{"type":"paragraph","position":{"start":{"line":1155,"column":1},"end":{"line":1155,"column":1}},"children":[{"type":"text","value":"How do NumPy arrays know which operations they support? How can ","position":{"start":{"line":1155,"column":1},"end":{"line":1155,"column":1}},"key":"F408v1UzGb"},{"type":"inlineCode","value":"arr + 1","position":{"start":{"line":1155,"column":1},"end":{"line":1155,"column":1}},"key":"OXUG2abmBR"},{"type":"text","value":" and ","position":{"start":{"line":1155,"column":1},"end":{"line":1155,"column":1}},"key":"vIoYrzTkX0"},{"type":"inlineCode","value":"arr + another_array","position":{"start":{"line":1155,"column":1},"end":{"line":1155,"column":1}},"key":"SQFCPgg7u4"},{"type":"text","value":" both work?","position":{"start":{"line":1155,"column":1},"end":{"line":1155,"column":1}},"key":"vIQmeUAkos"}],"key":"FP9Zpbpwa0"},{"type":"details","children":[{"type":"summary","children":[{"type":"text","value":"Answer","position":{"start":{"line":1157,"column":1},"end":{"line":1157,"column":1}},"key":"QkkumazSzU"}],"key":"TTA59NZTtp"},{"type":"paragraph","position":{"start":{"line":1158,"column":1},"end":{"line":1158,"column":1}},"children":[{"type":"text","value":"NumPy uses a combination of metaclasses and descriptors:","position":{"start":{"line":1158,"column":1},"end":{"line":1158,"column":1}},"key":"HZAkYR904l"}],"key":"I1o9v84NVc"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":1160,"column":1},"end":{"line":1165,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":1160,"column":1},"end":{"line":1161,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":1160,"column":1},"end":{"line":1160,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1160,"column":1},"end":{"line":1160,"column":1}},"children":[{"type":"text","value":"Metaclass Registration","position":{"start":{"line":1160,"column":1},"end":{"line":1160,"column":1}},"key":"YWFa0j6JLx"}],"key":"dAiBmdbybe"},{"type":"text","value":": When you create array subclasses, NumPy’s metaclass registers which operations they support","position":{"start":{"line":1160,"column":1},"end":{"line":1160,"column":1}},"key":"TaLoynlpPw"}],"key":"gqA2l6CwOT"}],"key":"tIb67EoNwa"},{"type":"listItem","spread":true,"position":{"start":{"line":1162,"column":1},"end":{"line":1163,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":1162,"column":1},"end":{"line":1162,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1162,"column":1},"end":{"line":1162,"column":1}},"children":[{"type":"text","value":"Descriptor Protocol","position":{"start":{"line":1162,"column":1},"end":{"line":1162,"column":1}},"key":"Og4ZSDq55S"}],"key":"zpmGNB8oWg"},{"type":"text","value":": Operations like ","position":{"start":{"line":1162,"column":1},"end":{"line":1162,"column":1}},"key":"nIe2fNQMfs"},{"type":"inlineCode","value":"+","position":{"start":{"line":1162,"column":1},"end":{"line":1162,"column":1}},"key":"rCrZCENxeD"},{"type":"text","value":" call ","position":{"start":{"line":1162,"column":1},"end":{"line":1162,"column":1}},"key":"pzzySsviSR"},{"type":"inlineCode","value":"__add__","position":{"start":{"line":1162,"column":1},"end":{"line":1162,"column":1}},"key":"htXnan5bJd"},{"type":"text","value":", which uses descriptors to check if the operation is valid","position":{"start":{"line":1162,"column":1},"end":{"line":1162,"column":1}},"key":"RMpqTNkcbo"}],"key":"E3nLlFkavM"}],"key":"Lv9PUw2e7N"},{"type":"listItem","spread":true,"position":{"start":{"line":1164,"column":1},"end":{"line":1165,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":1164,"column":1},"end":{"line":1164,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1164,"column":1},"end":{"line":1164,"column":1}},"children":[{"type":"text","value":"Dynamic Dispatch","position":{"start":{"line":1164,"column":1},"end":{"line":1164,"column":1}},"key":"cBOTrAoglc"}],"key":"sYbTI7ieRO"},{"type":"text","value":": Based on the types involved, NumPy dispatches to the appropriate implementation","position":{"start":{"line":1164,"column":1},"end":{"line":1164,"column":1}},"key":"MTuAT22uyT"}],"key":"KFekUM6KGx"}],"key":"hfgYZEGC6H"}],"key":"tXrtlAxFCd"},{"type":"paragraph","position":{"start":{"line":1166,"column":1},"end":{"line":1166,"column":1}},"children":[{"type":"text","value":"This is why:","position":{"start":{"line":1166,"column":1},"end":{"line":1166,"column":1}},"key":"DO27iu0X1U"}],"key":"knesKmCdTF"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":1167,"column":1},"end":{"line":1170,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":1167,"column":1},"end":{"line":1167,"column":1}},"children":[{"type":"inlineCode","value":"np.array([1,2,3]) + 1","position":{"start":{"line":1167,"column":1},"end":{"line":1167,"column":1}},"key":"X02VbFpXs3"},{"type":"text","value":" broadcasts the scalar","position":{"start":{"line":1167,"column":1},"end":{"line":1167,"column":1}},"key":"qIZ1j2Vhdn"}],"key":"lG0GfhlhRx"},{"type":"listItem","spread":true,"position":{"start":{"line":1168,"column":1},"end":{"line":1168,"column":1}},"children":[{"type":"inlineCode","value":"np.array([1,2,3]) + np.array([4,5,6])","position":{"start":{"line":1168,"column":1},"end":{"line":1168,"column":1}},"key":"jImkZjWK1u"},{"type":"text","value":" adds element-wise","position":{"start":{"line":1168,"column":1},"end":{"line":1168,"column":1}},"key":"P6WoGutTYD"}],"key":"dvhkV99eAn"},{"type":"listItem","spread":true,"position":{"start":{"line":1169,"column":1},"end":{"line":1170,"column":1}},"children":[{"type":"inlineCode","value":"np.array([1,2,3]) + \"string\"","position":{"start":{"line":1169,"column":1},"end":{"line":1169,"column":1}},"key":"Nmztj7CiVz"},{"type":"text","value":" raises TypeError","position":{"start":{"line":1169,"column":1},"end":{"line":1169,"column":1}},"key":"GCALpNV7l7"}],"key":"eKit7izIzh"}],"key":"oX2WtdXjqk"},{"type":"paragraph","position":{"start":{"line":1171,"column":1},"end":{"line":1171,"column":1}},"children":[{"type":"text","value":"The same patterns you just learned power NumPy’s flexibility!","position":{"start":{"line":1171,"column":1},"end":{"line":1171,"column":1}},"key":"iwY6OeIBD2"}],"key":"g7z0tc2UGd"}],"key":"olixipQ2bo"}],"class":"question","key":"Wsm3N92rRH"},{"type":"code","lang":"","value":"\n## 10.6 Design Patterns from Scientific Computing\n\n{margin} **Design Pattern**\nA reusable solution to a commonly occurring problem in software design.\n\nYou've used these patterns throughout NumPy and Matplotlib. Now let's understand how they work.\n\n### Factory Pattern: Creating the Right Object\n\n```{code-cell} python\n# How NumPy's array creation works (simplified)\nclass ArrayFactory:\n    \"\"\"Factory pattern like np.array().\"\"\"\n    \n    @staticmethod\n    def create(data, dtype=None):\n        \"\"\"Create appropriate array type based on input.\"\"\"\n        \n        # Determine appropriate array type\n        if hasattr(data, '__array__'):\n            # Object provides array interface\n            return np.asarray(data)\n        \n        elif isinstance(data, (list, tuple)):\n            # Python sequence\n            if dtype == 'object':\n                return ObjectArray(data)\n            else:\n                return NumericArray(data)\n        \n        elif isinstance(data, str):\n            # String array\n            return StringArray(data)\n        \n        else:\n            raise TypeError(f\"Cannot create array from {type(data)}\")\n\nclass NumericArray:\n    def __init__(self, data):\n        self.data = list(data)\n        print(f\"Created numeric array: {self.data}\")\n\nclass ObjectArray:\n    def __init__(self, data):\n        self.data = data\n        print(f\"Created object array: {self.data}\")\n\nclass StringArray:\n    def __init__(self, data):\n        self.data = data\n        print(f\"Created string array: {self.data}\")\n\n# Factory creates appropriate type\narr1 = ArrayFactory.create([1, 2, 3])\narr2 = ArrayFactory.create(['a', 'b'], dtype='object')\narr3 = ArrayFactory.create(\"hello\")\n```\n\n### Strategy Pattern: Swappable Algorithms\n\n```{code-cell} python\nfrom abc import ABC, abstractmethod\n\n# How scipy.optimize works (simplified)\nclass OptimizationStrategy(ABC):\n    \"\"\"Abstract strategy for optimization.\"\"\"\n    \n    @abstractmethod\n    def minimize(self, func, x0):\n        \"\"\"Minimize function starting from x0.\"\"\"\n        pass\n\nclass GradientDescent(OptimizationStrategy):\n    \"\"\"Gradient descent optimization.\"\"\"\n    \n    def minimize(self, func, x0):\n        x = x0\n        learning_rate = 0.01\n        \n        for i in range(100):\n            # Numerical gradient\n            eps = 1e-8\n            grad = (func(x + eps) - func(x - eps)) / (2 * eps)\n            x = x - learning_rate * grad\n            \n            if abs(grad) < 1e-6:\n                break\n        \n        return x\n\nclass NelderMead(OptimizationStrategy):\n    \"\"\"Simplex optimization (gradient-free).\"\"\"\n    \n    def minimize(self, func, x0):\n        # Simplified Nelder-Mead\n        x = x0\n        step = 0.1\n        \n        for i in range(100):\n            # Try points around current\n            if func(x + step) < func(x):\n                x = x + step\n            elif func(x - step) < func(x):\n                x = x - step\n            else:\n                step *= 0.5\n        \n        return x\n\nclass Optimizer:\n    \"\"\"Context using strategy pattern.\"\"\"\n    \n    def __init__(self, strategy: OptimizationStrategy):\n        self.strategy = strategy\n    \n    def minimize(self, func, x0):\n        \"\"\"Minimize using selected strategy.\"\"\"\n        return self.strategy.minimize(func, x0)\n\n# Test with rosenbrock function\ndef rosenbrock(x):\n    \"\"\"Rosenbrock function minimum at x=1.\"\"\"\n    return (1 - x)**2 + 100 * (0 - x**2)**2\n\n# Try different strategies\nopt1 = Optimizer(GradientDescent())\nresult1 = opt1.minimize(rosenbrock, x0=0.5)\nprint(f\"Gradient descent: x = {result1:.4f}\")\n\nopt2 = Optimizer(NelderMead())\nresult2 = opt2.minimize(rosenbrock, x0=0.5)\nprint(f\"Nelder-Mead: x = {result2:.4f}\")\n```\n\n:::{admonition} 🌟 Why This Matters: Design Patterns in SciPy\n:class: info, important\n\nSciPy uses these exact patterns. When you write:\n\n```python\nfrom scipy import optimize\nresult = optimize.minimize(func, x0, method='BFGS')\n```\n\nYou're using:\n- **Factory Pattern**: `minimize` creates the right optimizer\n- **Strategy Pattern**: 'BFGS' selects the algorithm\n- **Template Method**: Each optimizer follows the same interface\n\nThis design lets you swap between 20+ optimization algorithms by changing one parameter!","position":{"start":{"line":1173,"column":1},"end":{"line":1325,"column":1}},"key":"nE2wLdeLsi"},{"type":"heading","depth":2,"position":{"start":{"line":1327,"column":1},"end":{"line":1327,"column":1}},"children":[{"type":"text","value":"10.7 Performance Optimization Techniques","position":{"start":{"line":1327,"column":1},"end":{"line":1327,"column":1}},"key":"C7yYe2H4Tl"}],"identifier":"id-10-7-performance-optimization-techniques","label":"10.7 Performance Optimization Techniques","html_id":"id-10-7-performance-optimization-techniques","implicit":true,"key":"t02xziG9q7"},{"type":"paragraph","position":{"start":{"line":1329,"column":1},"end":{"line":1330,"column":1}},"children":[{"type":"text","value":"{margin} ","position":{"start":{"line":1329,"column":1},"end":{"line":1329,"column":1}},"key":"mPOxFF4MMF"},{"type":"strong","position":{"start":{"line":1329,"column":1},"end":{"line":1329,"column":1}},"children":[{"type":"text","value":"__slots__","position":{"start":{"line":1329,"column":1},"end":{"line":1329,"column":1}},"key":"kbA3myb0Df"}],"key":"dvRkm1eGqM"},{"type":"text","value":"\nClass attribute that restricts instance attributes to a fixed set, saving memory.","position":{"start":{"line":1329,"column":1},"end":{"line":1329,"column":1}},"key":"zvMdaYapdC"}],"key":"imOmb51zhY"},{"type":"paragraph","position":{"start":{"line":1332,"column":1},"end":{"line":1332,"column":1}},"children":[{"type":"text","value":"Understanding performance helps you write efficient code for large-scale astronomical data processing.","position":{"start":{"line":1332,"column":1},"end":{"line":1332,"column":1}},"key":"V4xnjLQ1Vi"}],"key":"cAsF0myQ1k"}],"key":"TivGsuhX45"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import sys\nimport time\nfrom functools import lru_cache\n\n# Memory optimization with __slots__\nclass RegularStar:\n    \"\"\"Normal class - flexible but memory-hungry.\"\"\"\n    \n    def __init__(self, ra, dec, mag, parallax):\n        self.ra = ra  # degrees\n        self.dec = dec  # degrees  \n        self.mag = mag  # magnitude\n        self.parallax = parallax  # milliarcsec\n\nclass OptimizedStar:\n    \"\"\"Using __slots__ for memory efficiency.\"\"\"\n    \n    __slots__ = ['ra', 'dec', 'mag', 'parallax', '_distance_cache']\n    \n    def __init__(self, ra, dec, mag, parallax):\n        self.ra = ra\n        self.dec = dec\n        self.mag = mag\n        self.parallax = parallax\n        self._distance_cache = None\n    \n    @property\n    def distance_pc(self):\n        \"\"\"Distance in parsecs (cached).\"\"\"\n        if self._distance_cache is None:\n            if self.parallax > 0:\n                self._distance_cache = 1000.0 / self.parallax\n            else:\n                self._distance_cache = float('inf')\n        return self._distance_cache\n\n# Compare memory usage\nregular = RegularStar(10.68, 41.27, 3.44, 24.36)\noptimized = OptimizedStar(10.68, 41.27, 3.44, 24.36)\n\nprint(f\"Regular: {sys.getsizeof(regular.__dict__)} bytes\")\nprint(f\"Optimized: {sys.getsizeof(optimized)} bytes\")\n\n# For Gaia catalog (2 billion stars), the difference matters!\nn_stars = 100000  # Subset for demo\nregular_mem = n_stars * sys.getsizeof(regular.__dict__)\noptimized_mem = n_stars * 56  # Approximate slotted size\n\nprint(f\"\\n{n_stars:,} stars:\")\nprint(f\"Regular: {regular_mem/1e6:.1f} MB\")\nprint(f\"Optimized: {optimized_mem/1e6:.1f} MB\")\nprint(f\"Savings: {(regular_mem-optimized_mem)/1e6:.1f} MB\")","key":"fi7Z5ls7ox"},{"type":"output","id":"vSlUv4O1wEUe6o4QTXXVv","data":[],"key":"senVQBc1VN"}],"key":"PTJg2r0rtA"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":1389,"column":1},"end":{"line":1389,"column":1}},"children":[{"type":"text","value":"Method Caching for Expensive Computations","position":{"start":{"line":1389,"column":1},"end":{"line":1389,"column":1}},"key":"Ft6iZGplaB"}],"identifier":"method-caching-for-expensive-computations","label":"Method Caching for Expensive Computations","html_id":"method-caching-for-expensive-computations","implicit":true,"key":"R3hsEJNdTv"}],"key":"EPpm7J2Rmm"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# LRU cache for expensive calculations\nclass GalaxySpectrum:\n    \"\"\"Galaxy spectrum with expensive computations.\"\"\"\n    \n    def __init__(self, wavelengths_cm, fluxes_cgs):\n        self.wavelengths = wavelengths_cm  # cm\n        self.fluxes = fluxes_cgs  # erg/s/cm²/cm\n    \n    @lru_cache(maxsize=128)\n    def find_redshift(self, template_lines_cm):\n        \"\"\"Find redshift by template matching (expensive).\"\"\"\n        print(\"Computing redshift...\")  # Shows when cache misses\n        \n        # Simplified cross-correlation\n        best_z = 0.0\n        best_corr = -float('inf')\n        \n        for z in np.linspace(0, 0.1, 100):\n            # Shift template lines\n            shifted = [line * (1 + z) for line in template_lines_cm]\n            \n            # Simple correlation metric\n            corr = sum(1 for line in shifted \n                      if any(abs(line - w) < 1e-7 \n                            for w in self.wavelengths))\n            \n            if corr > best_corr:\n                best_corr = corr\n                best_z = z\n        \n        return best_z\n    \n    def velocity_km_s(self, template_lines_cm):\n        \"\"\"Recession velocity from cached redshift.\"\"\"\n        z = self.find_redshift(template_lines_cm)\n        c_km_s = 2.998e5\n        return z * c_km_s\n\n# Test caching\nwavelengths = np.linspace(4e-5, 7e-5, 1000)  # 400-700 nm in cm\nfluxes = np.random.randn(1000) * 1e-13\n\ngalaxy = GalaxySpectrum(wavelengths, fluxes)\n\n# H-alpha and H-beta rest wavelengths in cm\nh_lines = tuple([4.861e-5, 6.563e-5])\n\n# First call - computes\nz1 = galaxy.find_redshift(h_lines)\nprint(f\"Redshift: {z1:.4f}\")\n\n# Second call - cached!\nz2 = galaxy.find_redshift(h_lines)\nprint(f\"Cached: {z2:.4f}\")\n\n# Cache info\nprint(f\"Cache stats: {galaxy.find_redshift.cache_info()}\")","key":"gJcGCHDZmJ"},{"type":"output","id":"qB50h8wW46m-VRukGVx8K","data":[],"key":"iC80EYhaKh"}],"key":"itFngmXuuK"},{"type":"block","children":[{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"💡 Computational Thinking Box: Profile Before Optimizing","position":{"start":{"line":1451,"column":1},"end":{"line":1451,"column":1}},"key":"vgKOBdKYXU"}],"key":"SsBlsev6RA"},{"type":"paragraph","position":{"start":{"line":1454,"column":1},"end":{"line":1454,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1454,"column":1},"end":{"line":1454,"column":1}},"children":[{"type":"text","value":"PATTERN: Measure, Don’t Guess","position":{"start":{"line":1454,"column":1},"end":{"line":1454,"column":1}},"key":"fSX8RqAMXC"}],"key":"zz6hE3dE0d"}],"key":"drs1k6K8ep"},{"type":"paragraph","position":{"start":{"line":1456,"column":1},"end":{"line":1456,"column":1}},"children":[{"type":"text","value":"The Vera Rubin Observatory will process 20TB nightly. They profiled their pipeline and found surprising bottlenecks:","position":{"start":{"line":1456,"column":1},"end":{"line":1456,"column":1}},"key":"MeEelVTHty"}],"key":"Mq2AAB2jK9"},{"type":"code","lang":"python","value":"import cProfile\nimport pstats\n\ndef process_image(data):\n    # Complex processing\n    pass\n\n# Profile the code\ncProfile.run('process_image(data)', 'profile.stats')\n\n# Analyze results\nstats = pstats.Stats('profile.stats')\nstats.sort_stats('cumulative')\nstats.print_stats(10)  # Top 10 time consumers","position":{"start":{"line":1458,"column":1},"end":{"line":1473,"column":1}},"key":"JAlBo9MqSb"},{"type":"paragraph","position":{"start":{"line":1475,"column":1},"end":{"line":1475,"column":1}},"children":[{"type":"text","value":"Results showed:","position":{"start":{"line":1475,"column":1},"end":{"line":1475,"column":1}},"key":"nguaOsD3hE"}],"key":"ubyJ09fGWJ"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":1476,"column":1},"end":{"line":1479,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":1476,"column":1},"end":{"line":1476,"column":1}},"children":[{"type":"text","value":"60% time in coordinate transformations (not image processing!)","position":{"start":{"line":1476,"column":1},"end":{"line":1476,"column":1}},"key":"OiF2gmKdVY"}],"key":"nvhdXK52T8"},{"type":"listItem","spread":true,"position":{"start":{"line":1477,"column":1},"end":{"line":1477,"column":1}},"children":[{"type":"text","value":"20% in file I/O","position":{"start":{"line":1477,"column":1},"end":{"line":1477,"column":1}},"key":"bybMRXHddW"}],"key":"yboAVcFlEQ"},{"type":"listItem","spread":true,"position":{"start":{"line":1478,"column":1},"end":{"line":1479,"column":1}},"children":[{"type":"text","value":"Only 10% in the actual detection algorithm","position":{"start":{"line":1478,"column":1},"end":{"line":1478,"column":1}},"key":"qJmwdIVEQM"}],"key":"a7qtx5voUF"}],"key":"qnNiPfcZHT"},{"type":"paragraph","position":{"start":{"line":1480,"column":1},"end":{"line":1480,"column":1}},"children":[{"type":"text","value":"One coordinate optimization gave 3x speedup for the entire pipeline!","position":{"start":{"line":1480,"column":1},"end":{"line":1480,"column":1}},"key":"nPND0tOzPO"}],"key":"jnlDOKxqwH"},{"type":"paragraph","position":{"start":{"line":1482,"column":1},"end":{"line":1482,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1482,"column":1},"end":{"line":1482,"column":1}},"children":[{"type":"text","value":"Lesson","position":{"start":{"line":1482,"column":1},"end":{"line":1482,"column":1}},"key":"pD7ZgYefye"}],"key":"pGYNHijCW7"},{"type":"text","value":": Always profile before optimizing. The bottleneck is rarely where you think.","position":{"start":{"line":1482,"column":1},"end":{"line":1482,"column":1}},"key":"F3CMmzzDEo"}],"key":"r6i6XPqlAr"}],"class":"tip","key":"MofIS5RIuQ"},{"type":"heading","depth":2,"position":{"start":{"line":1485,"column":1},"end":{"line":1485,"column":1}},"children":[{"type":"text","value":"10.8 Practice Exercises","position":{"start":{"line":1485,"column":1},"end":{"line":1485,"column":1}},"key":"prPCpDkClK"}],"identifier":"id-10-8-practice-exercises","label":"10.8 Practice Exercises","html_id":"id-10-8-practice-exercises","implicit":true,"key":"DyV1TV8RPc"},{"type":"heading","depth":3,"position":{"start":{"line":1487,"column":1},"end":{"line":1487,"column":1}},"children":[{"type":"text","value":"Exercise 1: Build a Multi-Instrument Observatory System","position":{"start":{"line":1487,"column":1},"end":{"line":1487,"column":1}},"key":"B9c4LC0oCo"}],"identifier":"exercise-1-build-a-multi-instrument-observatory-system","label":"Exercise 1: Build a Multi-Instrument Observatory System","html_id":"exercise-1-build-a-multi-instrument-observatory-system","implicit":true,"key":"G5b9ix6Pgk"},{"type":"paragraph","position":{"start":{"line":1489,"column":1},"end":{"line":1489,"column":1}},"children":[{"type":"text","value":"Create a complete observatory system using ABCs, mixins, and async:","position":{"start":{"line":1489,"column":1},"end":{"line":1489,"column":1}},"key":"BL3ErKfnS3"}],"key":"E7NgvGmonQ"}],"key":"HTatfgRaLj"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"\"\"\"\nPart A: Abstract base and mixins (10 minutes)\nDesign flexible instrument system with CGS units\n\"\"\"\n\nfrom abc import ABC, abstractmethod\nimport asyncio\nimport numpy as np\nfrom dataclasses import dataclass\nfrom typing import Optional\n\n# Abstract base for all instruments\nclass ObservatoryInstrument(ABC):\n    \"\"\"Base class for observatory instruments.\"\"\"\n    \n    @abstractmethod\n    async def initialize(self) -> bool:\n        \"\"\"Initialize instrument.\"\"\"\n        pass\n    \n    @abstractmethod\n    async def acquire(self, integration_s: float) -> np.ndarray:\n        \"\"\"Acquire data for given time.\"\"\"\n        pass\n    \n    @abstractmethod\n    def get_sensitivity_cgs(self) -> float:\n        \"\"\"Return sensitivity in erg/s/cm².\"\"\"\n        pass\n\n# Mixins for capabilities\nclass TemperatureControlMixin:\n    \"\"\"Temperature control for cooled instruments.\"\"\"\n    \n    def __init__(self, *args, **kwargs):\n        super().__init__(*args, **kwargs)\n        self.temperature_k = 293  # Room temp\n        self.target_temp_k = 150  # Target for CCDs\n    \n    async def cool_down(self):\n        \"\"\"Cool to operating temperature.\"\"\"\n        print(f\"Cooling from {self.temperature_k}K to {self.target_temp_k}K\")\n        \n        while self.temperature_k > self.target_temp_k:\n            await asyncio.sleep(0.1)  # Simulate cooling\n            self.temperature_k -= 10\n            \n        print(f\"Reached {self.temperature_k}K\")\n        return True\n\nclass CalibrationMixin:\n    \"\"\"Calibration capability.\"\"\"\n    \n    def __init__(self, *args, **kwargs):\n        super().__init__(*args, **kwargs)\n        self.dark_frame = None\n        self.flat_frame = None\n    \n    async def take_dark(self, integration_s: float):\n        \"\"\"Take dark frame.\"\"\"\n        print(f\"Taking {integration_s}s dark\")\n        await asyncio.sleep(integration_s)\n        self.dark_frame = np.random.randn(100, 100) * 10\n    \n    async def take_flat(self):\n        \"\"\"Take flat field.\"\"\"\n        print(\"Taking flat field\")\n        await asyncio.sleep(1)\n        self.flat_frame = np.ones((100, 100)) + np.random.randn(100, 100) * 0.01\n\n# Concrete implementations\nclass CCDCamera(ObservatoryInstrument, TemperatureControlMixin, \n                CalibrationMixin):\n    \"\"\"CCD camera with cooling and calibration.\"\"\"\n    \n    def __init__(self, name: str, pixel_size_cm: float = 1.5e-3):\n        super().__init__()\n        self.name = name\n        self.pixel_size = pixel_size_cm  # 15 microns typical\n        self.initialized = False\n    \n    async def initialize(self) -> bool:\n        \"\"\"Initialize CCD with cooling.\"\"\"\n        print(f\"Initializing {self.name}\")\n        \n        # Cool down first\n        await self.cool_down()\n        \n        # Take calibration frames\n        await asyncio.gather(\n            self.take_dark(1.0),\n            self.take_flat()\n        )\n        \n        self.initialized = True\n        return True\n    \n    async def acquire(self, integration_s: float) -> np.ndarray:\n        \"\"\"Acquire CCD frame.\"\"\"\n        if not self.initialized:\n            raise RuntimeError(\"CCD not initialized\")\n        \n        print(f\"Exposing for {integration_s}s\")\n        await asyncio.sleep(integration_s)\n        \n        # Simulate data with Poisson noise\n        signal = np.random.poisson(1000 * integration_s, (100, 100))\n        \n        # Apply calibration if available\n        if self.dark_frame is not None:\n            signal = signal - self.dark_frame\n        if self.flat_frame is not None:\n            signal = signal / self.flat_frame\n        \n        # Convert to flux in erg/s/cm²\n        # Assume 550nm, QE=0.9\n        h = 6.626e-27  # erg·s\n        c = 2.998e10   # cm/s\n        wavelength = 5.5e-5  # cm\n        \n        photon_energy = h * c / wavelength\n        area_per_pixel = self.pixel_size**2\n        \n        flux_cgs = signal * photon_energy / (integration_s * area_per_pixel)\n        \n        return flux_cgs\n    \n    def get_sensitivity_cgs(self) -> float:\n        \"\"\"3-sigma sensitivity in erg/s/cm².\"\"\"\n        # Depends on temperature\n        read_noise = 5 if self.temperature_k < 200 else 20\n        \n        # Convert to flux\n        h = 6.626e-27\n        c = 2.998e10\n        photon_energy = h * c / 5.5e-5\n        \n        return 3 * read_noise * photon_energy / self.pixel_size**2\n\n# Test the system\nasync def test_observatory():\n    ccd = CCDCamera(\"Main CCD\", pixel_size_cm=1.5e-3)\n    \n    # Initialize (cooling + calibration)\n    await ccd.initialize()\n    \n    # Take science frame\n    data = await ccd.acquire(30.0)\n    \n    print(f\"Mean flux: {data.mean():.2e} erg/s/cm²\")\n    print(f\"Sensitivity: {ccd.get_sensitivity_cgs():.2e} erg/s/cm²\")\n\nawait test_observatory()","key":"ZQbmMzDOmF"},{"type":"output","id":"hxbB7QyI4DsTPWi3jp9yR","data":[],"key":"hCGanRIcs4"}],"key":"oMCabi1CPW"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"\"\"\"\nPart B: Complete observatory with async control (15 minutes)\nMultiple instruments operating in parallel\n\"\"\"\n\n@dataclass\nclass ObservationRequest:\n    \"\"\"Request for observation with units.\"\"\"\n    target: str\n    ra_deg: float\n    dec_deg: float\n    exposures_s: list\n    filters: list\n    priority: int = 5\n\nclass Observatory:\n    \"\"\"Complete observatory with multiple instruments.\"\"\"\n    \n    def __init__(self, name: str):\n        self.name = name\n        self.instruments = {}\n        self.queue = []\n        self.completed = []\n    \n    def add_instrument(self, name: str, instrument: ObservatoryInstrument):\n        \"\"\"Register instrument.\"\"\"\n        self.instruments[name] = instrument\n    \n    async def initialize_all(self):\n        \"\"\"Initialize all instruments in parallel.\"\"\"\n        print(f\"Initializing {self.name} observatory\")\n        \n        tasks = [\n            inst.initialize() \n            for inst in self.instruments.values()\n        ]\n        \n        results = await asyncio.gather(*tasks)\n        \n        if all(results):\n            print(\"All instruments ready\")\n        else:\n            print(\"Some instruments failed initialization\")\n    \n    async def observe(self, request: ObservationRequest):\n        \"\"\"Execute observation request.\"\"\"\n        print(f\"\\nObserving {request.target}\")\n        \n        results = {}\n        \n        for exp_time, filter_name in zip(request.exposures_s, \n                                         request.filters):\n            print(f\"  {filter_name}: {exp_time}s\")\n            \n            # Use primary CCD\n            ccd = self.instruments.get('ccd')\n            if ccd:\n                data = await ccd.acquire(exp_time)\n                results[filter_name] = {\n                    'data': data,\n                    'mean_flux': data.mean(),\n                    'peak_flux': data.max()\n                }\n        \n        self.completed.append((request.target, results))\n        return results\n    \n    async def observe_queue(self):\n        \"\"\"Process observation queue.\"\"\"\n        while self.queue:\n            request = self.queue.pop(0)\n            await self.observe(request)\n    \n    def add_request(self, request: ObservationRequest):\n        \"\"\"Add to queue sorted by priority.\"\"\"\n        self.queue.append(request)\n        self.queue.sort(key=lambda r: r.priority, reverse=True)\n\n# Create and run observatory\nasync def full_observatory_demo():\n    # Create observatory\n    obs = Observatory(\"Mauna Kea\")\n    \n    # Add instruments\n    obs.add_instrument('ccd', CCDCamera(\"Primary CCD\"))\n    \n    # Initialize everything\n    await obs.initialize_all()\n    \n    # Queue observations\n    obs.add_request(ObservationRequest(\n        target=\"M31\",\n        ra_deg=10.68,\n        dec_deg=41.27,\n        exposures_s=[30, 60, 60],\n        filters=['B', 'V', 'R'],\n        priority=10\n    ))\n    \n    obs.add_request(ObservationRequest(\n        target=\"Calibration Star\",\n        ra_deg=0.0,\n        dec_deg=0.0,\n        exposures_s=[5, 5],\n        filters=['V', 'R'],\n        priority=15  # Higher priority\n    ))\n    \n    # Process queue (high priority first)\n    await obs.observe_queue()\n    \n    # Summary\n    print(f\"\\nCompleted {len(obs.completed)} observations\")\n    for target, results in obs.completed:\n        print(f\"  {target}: {list(results.keys())}\")\n\nawait full_observatory_demo()","key":"MiNiOEyO5N"},{"type":"output","id":"UwJYCzc75kiyxYV6r4Iql","data":[],"key":"caGlkoZo7A"}],"key":"xpmO5ACC9Z"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":1767,"column":1},"end":{"line":1767,"column":1}},"children":[{"type":"text","value":"Exercise 2: Design Pattern Implementation","position":{"start":{"line":1767,"column":1},"end":{"line":1767,"column":1}},"key":"FlQ1ZmDUA1"}],"identifier":"exercise-2-design-pattern-implementation","label":"Exercise 2: Design Pattern Implementation","html_id":"exercise-2-design-pattern-implementation","implicit":true,"key":"tkRKb2ANch"},{"type":"paragraph","position":{"start":{"line":1769,"column":1},"end":{"line":1769,"column":1}},"children":[{"type":"text","value":"Implement key design patterns for astronomical software:","position":{"start":{"line":1769,"column":1},"end":{"line":1769,"column":1}},"key":"JWH8mxqmw6"}],"key":"MyV1FcBmkB"}],"key":"GaZvl1Iozq"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"\"\"\"\nImplement Factory, Strategy, and Observer patterns\nfor a data reduction pipeline\n\"\"\"\n\nfrom abc import ABC, abstractmethod\nfrom typing import List, Callable\nimport numpy as np\n\n# Strategy pattern for reduction algorithms\nclass ReductionStrategy(ABC):\n    \"\"\"Abstract strategy for data reduction.\"\"\"\n    \n    @abstractmethod\n    def reduce(self, data: np.ndarray) -> np.ndarray:\n        \"\"\"Reduce data using specific algorithm.\"\"\"\n        pass\n\nclass MedianCombine(ReductionStrategy):\n    \"\"\"Median combination strategy.\"\"\"\n    \n    def reduce(self, data: np.ndarray) -> np.ndarray:\n        \"\"\"Median combine along first axis.\"\"\"\n        return np.median(data, axis=0)\n\nclass SigmaClipping(ReductionStrategy):\n    \"\"\"Sigma-clipped mean strategy.\"\"\"\n    \n    def __init__(self, sigma: float = 3.0):\n        self.sigma = sigma\n    \n    def reduce(self, data: np.ndarray) -> np.ndarray:\n        \"\"\"Sigma-clipped mean combination.\"\"\"\n        mean = np.mean(data, axis=0)\n        std = np.std(data, axis=0)\n        \n        # Mask outliers\n        mask = np.abs(data - mean) < self.sigma * std\n        \n        # Recalculate with mask\n        masked_data = np.where(mask, data, np.nan)\n        return np.nanmean(masked_data, axis=0)\n\n# Observer pattern for pipeline monitoring\nclass PipelineObserver(ABC):\n    \"\"\"Abstract observer for pipeline events.\"\"\"\n    \n    @abstractmethod\n    def update(self, event: str, data: dict):\n        \"\"\"Called when pipeline state changes.\"\"\"\n        pass\n\nclass LogObserver(PipelineObserver):\n    \"\"\"Logs pipeline events.\"\"\"\n    \n    def update(self, event: str, data: dict):\n        \"\"\"Log the event.\"\"\"\n        print(f\"[LOG] {event}: {data}\")\n\nclass QualityObserver(PipelineObserver):\n    \"\"\"Monitors data quality.\"\"\"\n    \n    def __init__(self):\n        self.quality_metrics = []\n    \n    def update(self, event: str, data: dict):\n        \"\"\"Check quality metrics.\"\"\"\n        if event == \"reduction_complete\":\n            result = data.get('result')\n            if result is not None:\n                snr = np.mean(result) / np.std(result)\n                self.quality_metrics.append(snr)\n                \n                if snr < 10:\n                    print(f\"[QUALITY WARNING] Low SNR: {snr:.1f}\")\n\n# Factory pattern for pipeline creation\nclass PipelineFactory:\n    \"\"\"Factory for creating appropriate pipelines.\"\"\"\n    \n    @staticmethod\n    def create_pipeline(obs_type: str) -> 'ReductionPipeline':\n        \"\"\"Create pipeline based on observation type.\"\"\"\n        \n        if obs_type == \"imaging\":\n            pipeline = ReductionPipeline()\n            pipeline.set_strategy(MedianCombine())\n            pipeline.attach(LogObserver())\n            return pipeline\n        \n        elif obs_type == \"spectroscopy\":\n            pipeline = ReductionPipeline()\n            pipeline.set_strategy(SigmaClipping(sigma=2.5))\n            pipeline.attach(LogObserver())\n            pipeline.attach(QualityObserver())\n            return pipeline\n        \n        elif obs_type == \"photometry\":\n            pipeline = ReductionPipeline()\n            pipeline.set_strategy(SigmaClipping(sigma=3.0))\n            pipeline.attach(QualityObserver())\n            return pipeline\n        \n        else:\n            raise ValueError(f\"Unknown observation type: {obs_type}\")\n\n# Main pipeline using all patterns\nclass ReductionPipeline:\n    \"\"\"Data reduction pipeline with patterns.\"\"\"\n    \n    def __init__(self):\n        self.strategy: Optional[ReductionStrategy] = None\n        self.observers: List[PipelineObserver] = []\n    \n    def set_strategy(self, strategy: ReductionStrategy):\n        \"\"\"Set reduction strategy.\"\"\"\n        self.strategy = strategy\n        self.notify(\"strategy_changed\", \n                   {\"strategy\": strategy.__class__.__name__})\n    \n    def attach(self, observer: PipelineObserver):\n        \"\"\"Attach observer.\"\"\"\n        self.observers.append(observer)\n    \n    def notify(self, event: str, data: dict):\n        \"\"\"Notify all observers.\"\"\"\n        for observer in self.observers:\n            observer.update(event, data)\n    \n    def process(self, frames: np.ndarray) -> np.ndarray:\n        \"\"\"Process frames using current strategy.\"\"\"\n        if not self.strategy:\n            raise RuntimeError(\"No reduction strategy set\")\n        \n        self.notify(\"reduction_started\", {\"n_frames\": len(frames)})\n        \n        # Apply strategy\n        result = self.strategy.reduce(frames)\n        \n        self.notify(\"reduction_complete\", {\n            \"result_shape\": result.shape,\n            \"result\": result\n        })\n        \n        return result\n\n# Demonstrate all patterns together\nprint(\"=== Design Patterns Demo ===\\n\")\n\n# Create different pipelines using factory\nimaging_pipeline = PipelineFactory.create_pipeline(\"imaging\")\nspectro_pipeline = PipelineFactory.create_pipeline(\"spectroscopy\")\n\n# Generate mock data\nframes = np.random.randn(10, 100, 100) * 100 + 1000\n\n# Process with different pipelines\nprint(\"Imaging Pipeline:\")\nimaging_result = imaging_pipeline.process(frames)\n\nprint(\"\\nSpectroscopy Pipeline:\")\nspectro_result = spectro_pipeline.process(frames)\n\n# Change strategy at runtime\nprint(\"\\nChanging strategy at runtime:\")\nimaging_pipeline.set_strategy(SigmaClipping(sigma=2.0))\nnew_result = imaging_pipeline.process(frames)\n\nprint(\"\\n✅ Patterns demonstrated:\")\nprint(\"  - Factory: Created specialized pipelines\")\nprint(\"  - Strategy: Swappable reduction algorithms\")\nprint(\"  - Observer: Monitoring and logging\")","key":"sy3G10RNao"},{"type":"output","id":"9KjloZzfEFGmsXSkHzMTv","data":[],"key":"GgGh1MkE2x"}],"key":"YX0ozYXhjy"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":1946,"column":1},"end":{"line":1946,"column":1}},"children":[{"type":"text","value":"Exercise 3: Performance Optimization Challenge","position":{"start":{"line":1946,"column":1},"end":{"line":1946,"column":1}},"key":"SaKxwzvPh3"}],"identifier":"exercise-3-performance-optimization-challenge","label":"Exercise 3: Performance Optimization Challenge","html_id":"exercise-3-performance-optimization-challenge","implicit":true,"key":"oVs3nKkvRE"}],"key":"lfVBN3RMUU"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"\"\"\"\nDebug This! Can you find and fix the performance issue?\n\"\"\"\n\n# Inefficient implementation\nclass SlowGalaxy:\n    def __init__(self, name, redshift):\n        self.name = name\n        self.redshift = redshift\n    \n    def distance_mpc(self):\n        \"\"\"Calculate distance in Mpc (SLOW!).\"\"\"\n        # Hubble constant\n        H0 = 70  # km/s/Mpc\n        c = 3e5  # km/s\n        \n        # This recalculates every time!\n        return c * self.redshift / H0\n    \n    def luminosity_distance(self):\n        \"\"\"Luminosity distance (calls distance repeatedly).\"\"\"\n        d = self.distance_mpc()\n        \n        # Cosmological correction (simplified)\n        for i in range(1000):  # Unnecessary loop!\n            d = d * (1 + self.redshift * 0.001)\n        \n        return d\n\n# Test slow version\nimport time\n\ngalaxies = [SlowGalaxy(f\"Galaxy{i}\", 0.01 * i) \n           for i in range(100)]\n\nstart = time.perf_counter()\nfor g in galaxies:\n    for _ in range(10):  # Multiple calls\n        d = g.luminosity_distance()\nslow_time = time.perf_counter() - start\n\nprint(f\"Slow version: {slow_time*1000:.1f} ms\")\n\n# SOLUTION: Optimized implementation\nfrom functools import lru_cache\n\nclass FastGalaxy:\n    __slots__ = ['name', 'redshift', '_distance_cache']\n    \n    def __init__(self, name, redshift):\n        self.name = name\n        self.redshift = redshift\n        self._distance_cache = None\n    \n    @property\n    def distance_mpc(self):\n        \"\"\"Cached distance calculation.\"\"\"\n        if self._distance_cache is None:\n            H0 = 70\n            c = 3e5\n            self._distance_cache = c * self.redshift / H0\n        return self._distance_cache\n    \n    @lru_cache(maxsize=1)\n    def luminosity_distance(self):\n        \"\"\"Cached luminosity distance.\"\"\"\n        d = self.distance_mpc\n        \n        # Vectorized calculation instead of loop\n        correction = (1 + self.redshift) ** 1.0\n        \n        return d * correction\n\n# Test fast version\ngalaxies_fast = [FastGalaxy(f\"Galaxy{i}\", 0.01 * i) \n                for i in range(100)]\n\nstart = time.perf_counter()\nfor g in galaxies_fast:\n    for _ in range(10):\n        d = g.luminosity_distance()\nfast_time = time.perf_counter() - start\n\nprint(f\"Fast version: {fast_time*1000:.1f} ms\")\nprint(f\"Speedup: {slow_time/fast_time:.1f}x\")\n\nprint(\"\\n🐛 Performance issues found and fixed:\")\nprint(\"  1. Recalculating distance every call\")\nprint(\"  2. Unnecessary loop in luminosity_distance\")\nprint(\"  3. No caching of expensive calculations\")\nprint(\"  4. Using dict instead of __slots__\")","key":"Lj3wgl7nT2"},{"type":"output","id":"3j0aiKdmZd8fapGSCkKuv","data":[],"key":"bIJHzo1M3f"}],"key":"fGsF3IBeuq"},{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":2042,"column":1},"end":{"line":2042,"column":1}},"children":[{"type":"text","value":"Main Takeaways","position":{"start":{"line":2042,"column":1},"end":{"line":2042,"column":1}},"key":"Ypd6ZJ4v9u"}],"identifier":"main-takeaways","label":"Main Takeaways","html_id":"main-takeaways","implicit":true,"key":"H0cUKcb6oD"},{"type":"paragraph","position":{"start":{"line":2044,"column":1},"end":{"line":2044,"column":1}},"children":[{"type":"text","value":"You’ve completed a transformative journey from using scientific Python packages to understanding their architectural foundations. The abstract base classes, mixins, design patterns, and optimization techniques you’ve mastered aren’t just advanced features - they’re the pillars supporting every major scientific Python package you use. When NumPy seamlessly handles different array types, when Matplotlib coordinates thousands of plot elements, when Astropy prevents unit conversion disasters, they’re using exactly the patterns you now understand. You’ve moved beyond being a consumer of these tools to understanding how they’re built, why they work, and how to contribute at the same level.","position":{"start":{"line":2044,"column":1},"end":{"line":2044,"column":1}},"key":"pk2frSBJVv"}],"key":"e0r16K9zvE"},{"type":"paragraph","position":{"start":{"line":2046,"column":1},"end":{"line":2046,"column":1}},"children":[{"type":"text","value":"The progression through this chapter mirrors your growth as a computational scientist. You started by understanding how ABCs enabled the Event Horizon Telescope to coordinate incompatible telescopes into one Earth-sized instrument. You discovered how mixins let CERN process billions of particle collisions without code duplication. You learned how async programming enables modern observatories to control dozens of instruments simultaneously. These aren’t just programming techniques - they’re the engineering principles that enable modern scientific discovery. Every gravitational wave detection, every exoplanet discovery, every galaxy survey relies on software architected with these patterns.","position":{"start":{"line":2046,"column":1},"end":{"line":2046,"column":1}},"key":"xvkuAZZjEX"}],"key":"TQAD0tXgQx"},{"type":"paragraph","position":{"start":{"line":2048,"column":1},"end":{"line":2048,"column":1}},"children":[{"type":"text","value":"The practical skills you’ve developed prepare you for real research challenges. Dataclasses eliminate the boilerplate that clutters scientific code, letting you focus on science instead of syntax. Async programming enables you to build instrument control systems that maximize precious telescope time. Descriptors and metaclasses let you build domain-specific languages that make unit errors impossible. Performance optimization techniques ensure your code scales from prototype to production, from analyzing one galaxy to processing entire surveys. You now have the tools to build software that not only works but scales to the demands of modern astronomy.","position":{"start":{"line":2048,"column":1},"end":{"line":2048,"column":1}},"key":"mogiEABwER"}],"key":"iFjCmWZuLD"},{"type":"paragraph","position":{"start":{"line":2050,"column":1},"end":{"line":2050,"column":1}},"children":[{"type":"text","value":"Looking forward, you’re equipped to recognize these patterns throughout the scientific Python ecosystem and apply them in your own work. When you see NumPy’s factory functions creating appropriate array types, you understand the factory pattern at work. When SciPy swaps optimization algorithms, you recognize the strategy pattern. When Matplotlib manages complex figure state, you see context managers and mixins in action. More importantly, you know when to apply these patterns in your own code - using ABCs when defining interfaces for collaboration, mixins when composing behaviors, async when controlling hardware, and optimization techniques when processing large datasets. You’ve transformed from someone who writes scripts to someone who architects systems, ready to build the next generation of tools that will enable tomorrow’s discoveries.","position":{"start":{"line":2050,"column":1},"end":{"line":2050,"column":1}},"key":"Yo6WCSzplz"}],"key":"c9CDDPpg8B"},{"type":"heading","depth":2,"position":{"start":{"line":2052,"column":1},"end":{"line":2052,"column":1}},"children":[{"type":"text","value":"Definitions","position":{"start":{"line":2052,"column":1},"end":{"line":2052,"column":1}},"key":"ETA3hXp1Pk"}],"identifier":"definitions","label":"Definitions","html_id":"definitions","implicit":true,"key":"nngw5vUfwz"},{"type":"paragraph","position":{"start":{"line":2054,"column":1},"end":{"line":2054,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2054,"column":1},"end":{"line":2054,"column":1}},"children":[{"type":"text","value":"Abstract Base Class (ABC)","position":{"start":{"line":2054,"column":1},"end":{"line":2054,"column":1}},"key":"ujzWj0e7XD"}],"key":"Fo6XvXtFKK"},{"type":"text","value":": A class that cannot be instantiated and defines methods that subclasses must implement, enforcing interfaces.","position":{"start":{"line":2054,"column":1},"end":{"line":2054,"column":1}},"key":"BtDHvExq3v"}],"key":"KvZOXsHLka"},{"type":"paragraph","position":{"start":{"line":2056,"column":1},"end":{"line":2056,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2056,"column":1},"end":{"line":2056,"column":1}},"children":[{"type":"text","value":"Async/Await","position":{"start":{"line":2056,"column":1},"end":{"line":2056,"column":1}},"key":"FdcidQlIy7"}],"key":"YaSHiR9DBX"},{"type":"text","value":": Python’s syntax for asynchronous programming, allowing concurrent operations without threads.","position":{"start":{"line":2056,"column":1},"end":{"line":2056,"column":1}},"key":"onzlYDPPwX"}],"key":"zAXQ03C0PE"},{"type":"paragraph","position":{"start":{"line":2058,"column":1},"end":{"line":2058,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2058,"column":1},"end":{"line":2058,"column":1}},"children":[{"type":"text","value":"Context Manager","position":{"start":{"line":2058,"column":1},"end":{"line":2058,"column":1}},"key":"bngmplOhS7"}],"key":"miuaqvjj8G"},{"type":"text","value":": An object implementing ","position":{"start":{"line":2058,"column":1},"end":{"line":2058,"column":1}},"key":"ZCdcS5aSuo"},{"type":"inlineCode","value":"__enter__","position":{"start":{"line":2058,"column":1},"end":{"line":2058,"column":1}},"key":"KBTkrWac7A"},{"type":"text","value":" and ","position":{"start":{"line":2058,"column":1},"end":{"line":2058,"column":1}},"key":"K0m9t3hZWa"},{"type":"inlineCode","value":"__exit__","position":{"start":{"line":2058,"column":1},"end":{"line":2058,"column":1}},"key":"iBSFKzG6jx"},{"type":"text","value":" methods for guaranteed resource cleanup with ","position":{"start":{"line":2058,"column":1},"end":{"line":2058,"column":1}},"key":"EaWM9Dyoyi"},{"type":"inlineCode","value":"with","position":{"start":{"line":2058,"column":1},"end":{"line":2058,"column":1}},"key":"WyTuwnRKJB"},{"type":"text","value":" statements.","position":{"start":{"line":2058,"column":1},"end":{"line":2058,"column":1}},"key":"n8EYz0BSB4"}],"key":"pGIB7upKQ8"},{"type":"paragraph","position":{"start":{"line":2060,"column":1},"end":{"line":2060,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2060,"column":1},"end":{"line":2060,"column":1}},"children":[{"type":"text","value":"Coroutine","position":{"start":{"line":2060,"column":1},"end":{"line":2060,"column":1}},"key":"B6vfk7M1fo"}],"key":"nZI6IGtwaZ"},{"type":"text","value":": A function that can pause and resume execution, enabling cooperative multitasking with ","position":{"start":{"line":2060,"column":1},"end":{"line":2060,"column":1}},"key":"kCxA65REDK"},{"type":"inlineCode","value":"async def","position":{"start":{"line":2060,"column":1},"end":{"line":2060,"column":1}},"key":"qBm9NUoRBB"},{"type":"text","value":".","position":{"start":{"line":2060,"column":1},"end":{"line":2060,"column":1}},"key":"t5j7kxoJ3L"}],"key":"oLbsPEAG7c"},{"type":"paragraph","position":{"start":{"line":2062,"column":1},"end":{"line":2062,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2062,"column":1},"end":{"line":2062,"column":1}},"children":[{"type":"text","value":"Dataclass","position":{"start":{"line":2062,"column":1},"end":{"line":2062,"column":1}},"key":"FRxX0iBg02"}],"key":"GL4VClrt3C"},{"type":"text","value":": A decorator that automatically generates special methods for classes primarily storing data.","position":{"start":{"line":2062,"column":1},"end":{"line":2062,"column":1}},"key":"kPRy0J6XgB"}],"key":"w682pTpn3X"},{"type":"paragraph","position":{"start":{"line":2064,"column":1},"end":{"line":2064,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2064,"column":1},"end":{"line":2064,"column":1}},"children":[{"type":"text","value":"Descriptor","position":{"start":{"line":2064,"column":1},"end":{"line":2064,"column":1}},"key":"cAyascOvtr"}],"key":"QaKhYjcQtG"},{"type":"text","value":": An object implementing ","position":{"start":{"line":2064,"column":1},"end":{"line":2064,"column":1}},"key":"L4QCT4Pj3f"},{"type":"inlineCode","value":"__get__","position":{"start":{"line":2064,"column":1},"end":{"line":2064,"column":1}},"key":"Gqaw6Sy8rU"},{"type":"text","value":", ","position":{"start":{"line":2064,"column":1},"end":{"line":2064,"column":1}},"key":"XwMpmDQDl3"},{"type":"inlineCode","value":"__set__","position":{"start":{"line":2064,"column":1},"end":{"line":2064,"column":1}},"key":"KGhVV5JDrW"},{"type":"text","value":", or ","position":{"start":{"line":2064,"column":1},"end":{"line":2064,"column":1}},"key":"JdzFPBb6eN"},{"type":"inlineCode","value":"__delete__","position":{"start":{"line":2064,"column":1},"end":{"line":2064,"column":1}},"key":"DI5AbxuRBA"},{"type":"text","value":" to customize attribute access behavior.","position":{"start":{"line":2064,"column":1},"end":{"line":2064,"column":1}},"key":"t1XBpJJ76k"}],"key":"EjDi0nwgwa"},{"type":"paragraph","position":{"start":{"line":2066,"column":1},"end":{"line":2066,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2066,"column":1},"end":{"line":2066,"column":1}},"children":[{"type":"text","value":"Design Pattern","position":{"start":{"line":2066,"column":1},"end":{"line":2066,"column":1}},"key":"Bv9As9dZwA"}],"key":"ker91i8PTc"},{"type":"text","value":": A reusable solution to a commonly occurring problem in software design.","position":{"start":{"line":2066,"column":1},"end":{"line":2066,"column":1}},"key":"oOD5ahgnla"}],"key":"B7GDRYZ0EL"},{"type":"paragraph","position":{"start":{"line":2068,"column":1},"end":{"line":2068,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2068,"column":1},"end":{"line":2068,"column":1}},"children":[{"type":"text","value":"Diamond Problem","position":{"start":{"line":2068,"column":1},"end":{"line":2068,"column":1}},"key":"RN9Lgv7Ofy"}],"key":"nvdNmemY7L"},{"type":"text","value":": Ambiguity in method resolution when a class inherits from two classes sharing a common base.","position":{"start":{"line":2068,"column":1},"end":{"line":2068,"column":1}},"key":"si4kBTEOqs"}],"key":"X7hhWIEirE"},{"type":"paragraph","position":{"start":{"line":2070,"column":1},"end":{"line":2070,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2070,"column":1},"end":{"line":2070,"column":1}},"children":[{"type":"text","value":"Factory Pattern","position":{"start":{"line":2070,"column":1},"end":{"line":2070,"column":1}},"key":"VToDHosGQ8"}],"key":"xRpBrS6qjl"},{"type":"text","value":": A design pattern that creates objects without specifying their exact classes.","position":{"start":{"line":2070,"column":1},"end":{"line":2070,"column":1}},"key":"zfRrt9CycK"}],"key":"Kltj7ZgnoF"},{"type":"paragraph","position":{"start":{"line":2072,"column":1},"end":{"line":2072,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2072,"column":1},"end":{"line":2072,"column":1}},"children":[{"type":"text","value":"Generator","position":{"start":{"line":2072,"column":1},"end":{"line":2072,"column":1}},"key":"kfiBGxfaR5"}],"key":"LqV2lde7b5"},{"type":"text","value":": A function that returns an iterator, yielding values one at a time to conserve memory.","position":{"start":{"line":2072,"column":1},"end":{"line":2072,"column":1}},"key":"q7yvUQQKr6"}],"key":"ipZTAxt6vD"},{"type":"paragraph","position":{"start":{"line":2074,"column":1},"end":{"line":2074,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2074,"column":1},"end":{"line":2074,"column":1}},"children":[{"type":"text","value":"Interface","position":{"start":{"line":2074,"column":1},"end":{"line":2074,"column":1}},"key":"kC8K9wLLCj"}],"key":"VHEEmXVCbt"},{"type":"text","value":": A contract specifying what methods a class must provide, ensuring compatibility between components.","position":{"start":{"line":2074,"column":1},"end":{"line":2074,"column":1}},"key":"lHHx27uJr3"}],"key":"b9TdSwy8Pf"},{"type":"paragraph","position":{"start":{"line":2076,"column":1},"end":{"line":2076,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2076,"column":1},"end":{"line":2076,"column":1}},"children":[{"type":"text","value":"Metaclass","position":{"start":{"line":2076,"column":1},"end":{"line":2076,"column":1}},"key":"okAWkXy9Ea"}],"key":"yWGST8MAyG"},{"type":"text","value":": A class whose instances are classes themselves, controlling class creation and behavior.","position":{"start":{"line":2076,"column":1},"end":{"line":2076,"column":1}},"key":"NYDJ8UWM6l"}],"key":"jCSnOM7NST"},{"type":"paragraph","position":{"start":{"line":2078,"column":1},"end":{"line":2078,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2078,"column":1},"end":{"line":2078,"column":1}},"children":[{"type":"text","value":"Method Resolution Order (MRO)","position":{"start":{"line":2078,"column":1},"end":{"line":2078,"column":1}},"key":"GHJAcqa9df"}],"key":"L8OWl8OBfa"},{"type":"text","value":": The order Python searches through classes when looking for methods in inheritance hierarchies.","position":{"start":{"line":2078,"column":1},"end":{"line":2078,"column":1}},"key":"PAopixoM60"}],"key":"zw9I2Keclt"},{"type":"paragraph","position":{"start":{"line":2080,"column":1},"end":{"line":2080,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2080,"column":1},"end":{"line":2080,"column":1}},"children":[{"type":"text","value":"Mixin","position":{"start":{"line":2080,"column":1},"end":{"line":2080,"column":1}},"key":"oJOUrp4nSW"}],"key":"SB2rEEg1gd"},{"type":"text","value":": A class providing specific functionality to be inherited by other classes, not meant to stand alone.","position":{"start":{"line":2080,"column":1},"end":{"line":2080,"column":1}},"key":"sWWqgQKjrn"}],"key":"swT7yzljk7"},{"type":"paragraph","position":{"start":{"line":2082,"column":1},"end":{"line":2082,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2082,"column":1},"end":{"line":2082,"column":1}},"children":[{"type":"text","value":"Observer Pattern","position":{"start":{"line":2082,"column":1},"end":{"line":2082,"column":1}},"key":"s9HjAPTdj5"}],"key":"hMutsZ5lCm"},{"type":"text","value":": A design pattern where objects notify registered observers of state changes.","position":{"start":{"line":2082,"column":1},"end":{"line":2082,"column":1}},"key":"ZWv2sX5YqU"}],"key":"bQ3wxX9deR"},{"type":"paragraph","position":{"start":{"line":2084,"column":1},"end":{"line":2084,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2084,"column":1},"end":{"line":2084,"column":1}},"children":[{"type":"text","value":"Protocol","position":{"start":{"line":2084,"column":1},"end":{"line":2084,"column":1}},"key":"nkbPlUO2vr"}],"key":"sm7FT5GYfU"},{"type":"text","value":": A structural type system defining what methods/attributes an object must have for duck typing.","position":{"start":{"line":2084,"column":1},"end":{"line":2084,"column":1}},"key":"QfwHayU5NE"}],"key":"cRYzB9CGQg"},{"type":"paragraph","position":{"start":{"line":2086,"column":1},"end":{"line":2086,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2086,"column":1},"end":{"line":2086,"column":1}},"children":[{"type":"text","value":"Strategy Pattern","position":{"start":{"line":2086,"column":1},"end":{"line":2086,"column":1}},"key":"aHRnALeOGI"}],"key":"NScMvuhLQc"},{"type":"text","value":": A design pattern that defines a family of algorithms and makes them interchangeable.","position":{"start":{"line":2086,"column":1},"end":{"line":2086,"column":1}},"key":"lYwiFQhOvE"}],"key":"IOyf3aenzv"},{"type":"paragraph","position":{"start":{"line":2088,"column":1},"end":{"line":2088,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2088,"column":1},"end":{"line":2088,"column":1}},"children":[{"type":"text","value":"Type Hint","position":{"start":{"line":2088,"column":1},"end":{"line":2088,"column":1}},"key":"HI12sl5jHr"}],"key":"FT0XHLO9A1"},{"type":"text","value":": Optional annotations indicating expected types for variables, parameters, and return values.","position":{"start":{"line":2088,"column":1},"end":{"line":2088,"column":1}},"key":"InWJNlK7vW"}],"key":"nUVQF8t7mm"},{"type":"paragraph","position":{"start":{"line":2090,"column":1},"end":{"line":2090,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2090,"column":1},"end":{"line":2090,"column":1}},"children":[{"type":"text","value":"__slots__","position":{"start":{"line":2090,"column":1},"end":{"line":2090,"column":1}},"key":"NMb6fvxCRq"}],"key":"ji0eIrFyLu"},{"type":"text","value":": Class attribute that restricts instance attributes to a fixed set, saving memory.","position":{"start":{"line":2090,"column":1},"end":{"line":2090,"column":1}},"key":"SRqJwSzuCP"}],"key":"mwONDSC2XQ"},{"type":"heading","depth":2,"position":{"start":{"line":2092,"column":1},"end":{"line":2092,"column":1}},"children":[{"type":"text","value":"Key Takeaways","position":{"start":{"line":2092,"column":1},"end":{"line":2092,"column":1}},"key":"aHfdYQKJmb"}],"identifier":"key-takeaways","label":"Key Takeaways","html_id":"key-takeaways","implicit":true,"key":"rGtxx2KZry"},{"type":"paragraph","position":{"start":{"line":2094,"column":1},"end":{"line":2094,"column":1}},"children":[{"type":"text","value":"✓ ","position":{"start":{"line":2094,"column":1},"end":{"line":2094,"column":1}},"key":"vRmAF1M75O"},{"type":"strong","position":{"start":{"line":2094,"column":1},"end":{"line":2094,"column":1}},"children":[{"type":"text","value":"Abstract base classes enforce interfaces across teams","position":{"start":{"line":2094,"column":1},"end":{"line":2094,"column":1}},"key":"PVXFbMASar"}],"key":"u7JT3eDnbL"},{"type":"text","value":" - ABCs enabled the Event Horizon Telescope’s eight incompatible telescopes to work as one, producing the first black hole image","position":{"start":{"line":2094,"column":1},"end":{"line":2094,"column":1}},"key":"tmfF52QGeu"}],"key":"F9ezk7EAsk"},{"type":"paragraph","position":{"start":{"line":2096,"column":1},"end":{"line":2096,"column":1}},"children":[{"type":"text","value":"✓ ","position":{"start":{"line":2096,"column":1},"end":{"line":2096,"column":1}},"key":"q2FoZ4EJ6V"},{"type":"strong","position":{"start":{"line":2096,"column":1},"end":{"line":2096,"column":1}},"children":[{"type":"text","value":"Mixins compose behaviors without code duplication","position":{"start":{"line":2096,"column":1},"end":{"line":2096,"column":1}},"key":"C65bwdDHhA"}],"key":"cuvIYFr7zD"},{"type":"text","value":" - The LHC uses mixins to give different detectors different capabilities, enabling the Higgs boson discovery","position":{"start":{"line":2096,"column":1},"end":{"line":2096,"column":1}},"key":"yqLUFxyMz9"}],"key":"X1rGi1G7Bg"},{"type":"paragraph","position":{"start":{"line":2098,"column":1},"end":{"line":2098,"column":1}},"children":[{"type":"text","value":"✓ ","position":{"start":{"line":2098,"column":1},"end":{"line":2098,"column":1}},"key":"namiLpVx58"},{"type":"strong","position":{"start":{"line":2098,"column":1},"end":{"line":2098,"column":1}},"children":[{"type":"text","value":"Dataclasses eliminate boilerplate in data-heavy code","position":{"start":{"line":2098,"column":1},"end":{"line":2098,"column":1}},"key":"fVWN1vzUDz"}],"key":"a1cBULavqc"},{"type":"text","value":" - Modern Astropy uses dataclasses to reduce code by 30% while improving type safety","position":{"start":{"line":2098,"column":1},"end":{"line":2098,"column":1}},"key":"R6Qs1ZfuIg"}],"key":"JyhyzIAs5P"},{"type":"paragraph","position":{"start":{"line":2100,"column":1},"end":{"line":2100,"column":1}},"children":[{"type":"text","value":"✓ ","position":{"start":{"line":2100,"column":1},"end":{"line":2100,"column":1}},"key":"SfUu58v3AB"},{"type":"strong","position":{"start":{"line":2100,"column":1},"end":{"line":2100,"column":1}},"children":[{"type":"text","value":"Async programming enables parallel instrument control","position":{"start":{"line":2100,"column":1},"end":{"line":2100,"column":1}},"key":"namJk9fIMK"}],"key":"lNlsTiuGdI"},{"type":"text","value":" - Modern observatories use async to control multiple instruments simultaneously, maximizing observation efficiency","position":{"start":{"line":2100,"column":1},"end":{"line":2100,"column":1}},"key":"aL2HRw9n2z"}],"key":"Q2TgQWr1yG"},{"type":"paragraph","position":{"start":{"line":2102,"column":1},"end":{"line":2102,"column":1}},"children":[{"type":"text","value":"✓ ","position":{"start":{"line":2102,"column":1},"end":{"line":2102,"column":1}},"key":"wm7SKb6cVa"},{"type":"strong","position":{"start":{"line":2102,"column":1},"end":{"line":2102,"column":1}},"children":[{"type":"text","value":"Descriptors and metaclasses enable domain-specific behavior","position":{"start":{"line":2102,"column":1},"end":{"line":2102,"column":1}},"key":"lWDDvCWX8o"}],"key":"eK4032y8lu"},{"type":"text","value":" - Astropy’s units system uses these to catch unit errors at assignment time, preventing Mars Climate Orbiter disasters","position":{"start":{"line":2102,"column":1},"end":{"line":2102,"column":1}},"key":"HX17mPgjJH"}],"key":"b9MzQXl5Aq"},{"type":"paragraph","position":{"start":{"line":2104,"column":1},"end":{"line":2104,"column":1}},"children":[{"type":"text","value":"✓ ","position":{"start":{"line":2104,"column":1},"end":{"line":2104,"column":1}},"key":"vlFbRH94N2"},{"type":"strong","position":{"start":{"line":2104,"column":1},"end":{"line":2104,"column":1}},"children":[{"type":"text","value":"Design patterns solve recurring architectural problems","position":{"start":{"line":2104,"column":1},"end":{"line":2104,"column":1}},"key":"JUJXJl9p1m"}],"key":"ln06T48KfT"},{"type":"text","value":" - SciPy’s 20+ optimization algorithms use the Strategy pattern, letting you swap algorithms with one parameter","position":{"start":{"line":2104,"column":1},"end":{"line":2104,"column":1}},"key":"dt6HlshzIC"}],"key":"bPYdeTWwqX"},{"type":"paragraph","position":{"start":{"line":2106,"column":1},"end":{"line":2106,"column":1}},"children":[{"type":"text","value":"✓ ","position":{"start":{"line":2106,"column":1},"end":{"line":2106,"column":1}},"key":"SjtfOJjr9I"},{"type":"strong","position":{"start":{"line":2106,"column":1},"end":{"line":2106,"column":1}},"children":[{"type":"text","value":"__slots__ saves 40-50% memory for large datasets","position":{"start":{"line":2106,"column":1},"end":{"line":2106,"column":1}},"key":"ygfYcgwc2o"}],"key":"quDwmTfAtW"},{"type":"text","value":" - Critical for processing Gaia’s 2 billion star catalog or Vera Rubin’s 20TB nightly data","position":{"start":{"line":2106,"column":1},"end":{"line":2106,"column":1}},"key":"KZrkq0LoIh"}],"key":"yhNAHxK1sW"},{"type":"paragraph","position":{"start":{"line":2108,"column":1},"end":{"line":2108,"column":1}},"children":[{"type":"text","value":"✓ ","position":{"start":{"line":2108,"column":1},"end":{"line":2108,"column":1}},"key":"Ef88PklV2o"},{"type":"strong","position":{"start":{"line":2108,"column":1},"end":{"line":2108,"column":1}},"children":[{"type":"text","value":"Caching dramatically improves performance","position":{"start":{"line":2108,"column":1},"end":{"line":2108,"column":1}},"key":"W58FvZcllP"}],"key":"rO5jXhGlTW"},{"type":"text","value":" - The ","position":{"start":{"line":2108,"column":1},"end":{"line":2108,"column":1}},"key":"zQZ4VST61A"},{"type":"inlineCode","value":"@lru_cache","position":{"start":{"line":2108,"column":1},"end":{"line":2108,"column":1}},"key":"afMU6LXQkE"},{"type":"text","value":" decorator can provide 10-1000x speedups for expensive calculations","position":{"start":{"line":2108,"column":1},"end":{"line":2108,"column":1}},"key":"TK0xcCzIeZ"}],"key":"TelOoJ5wAr"},{"type":"paragraph","position":{"start":{"line":2110,"column":1},"end":{"line":2110,"column":1}},"children":[{"type":"text","value":"✓ ","position":{"start":{"line":2110,"column":1},"end":{"line":2110,"column":1}},"key":"nspUg06LiG"},{"type":"strong","position":{"start":{"line":2110,"column":1},"end":{"line":2110,"column":1}},"children":[{"type":"text","value":"Type hints make scientific code self-documenting","position":{"start":{"line":2110,"column":1},"end":{"line":2110,"column":1}},"key":"R9Yx4Z3jsv"}],"key":"vA2qdQTKcy"},{"type":"text","value":" - Modern packages use type hints to catch errors early and improve IDE support","position":{"start":{"line":2110,"column":1},"end":{"line":2110,"column":1}},"key":"zubDHdGk73"}],"key":"KR3JCeyjGH"},{"type":"paragraph","position":{"start":{"line":2112,"column":1},"end":{"line":2112,"column":1}},"children":[{"type":"text","value":"✓ ","position":{"start":{"line":2112,"column":1},"end":{"line":2112,"column":1}},"key":"GUQrVwKSfY"},{"type":"strong","position":{"start":{"line":2112,"column":1},"end":{"line":2112,"column":1}},"children":[{"type":"text","value":"Profile before optimizing","position":{"start":{"line":2112,"column":1},"end":{"line":2112,"column":1}},"key":"Yi9DqRgjhJ"}],"key":"ZomDUzRfd9"},{"type":"text","value":" - The Vera Rubin Observatory found 60% of time was in coordinate transforms, not image processing as expected","position":{"start":{"line":2112,"column":1},"end":{"line":2112,"column":1}},"key":"mikrlTVANk"}],"key":"orODZLsjDb"},{"type":"heading","depth":2,"position":{"start":{"line":2114,"column":1},"end":{"line":2114,"column":1}},"children":[{"type":"text","value":"Quick Reference Tables","position":{"start":{"line":2114,"column":1},"end":{"line":2114,"column":1}},"key":"AyCKds1pWH"}],"identifier":"quick-reference-tables","label":"Quick Reference Tables","html_id":"quick-reference-tables","implicit":true,"key":"rD6HyUgkhJ"},{"type":"heading","depth":3,"position":{"start":{"line":2116,"column":1},"end":{"line":2116,"column":1}},"children":[{"type":"text","value":"Design Patterns in Scientific Python","position":{"start":{"line":2116,"column":1},"end":{"line":2116,"column":1}},"key":"UYngFrWRlv"}],"identifier":"design-patterns-in-scientific-python","label":"Design Patterns in Scientific Python","html_id":"design-patterns-in-scientific-python","implicit":true,"key":"EFttgv1ltJ"},{"type":"table","position":{"start":{"line":2118,"column":1},"end":{"line":2124,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":2118,"column":1},"end":{"line":2118,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":2118,"column":1},"end":{"line":2118,"column":1}},"children":[{"type":"text","value":"Pattern","position":{"start":{"line":2118,"column":1},"end":{"line":2118,"column":1}},"key":"uAFZLLhCLd"}],"key":"orbnDYzIIn"},{"type":"tableCell","header":true,"position":{"start":{"line":2118,"column":1},"end":{"line":2118,"column":1}},"children":[{"type":"text","value":"Problem Solved","position":{"start":{"line":2118,"column":1},"end":{"line":2118,"column":1}},"key":"fWLbExVvau"}],"key":"lycpPBCX10"},{"type":"tableCell","header":true,"position":{"start":{"line":2118,"column":1},"end":{"line":2118,"column":1}},"children":[{"type":"text","value":"NumPy/SciPy Example","position":{"start":{"line":2118,"column":1},"end":{"line":2118,"column":1}},"key":"uSKoDkHzTP"}],"key":"EB4fmT20o5"},{"type":"tableCell","header":true,"position":{"start":{"line":2118,"column":1},"end":{"line":2118,"column":1}},"children":[{"type":"text","value":"Your Use Case","position":{"start":{"line":2118,"column":1},"end":{"line":2118,"column":1}},"key":"fte9Bpyrx8"}],"key":"rWgyUx2X9T"}],"key":"r5CBNcLGn8"},{"type":"tableRow","position":{"start":{"line":2120,"column":1},"end":{"line":2120,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":2120,"column":1},"end":{"line":2120,"column":1}},"children":[{"type":"text","value":"Factory","position":{"start":{"line":2120,"column":1},"end":{"line":2120,"column":1}},"key":"koE23HLd2S"}],"key":"dr10mWoaRu"},{"type":"tableCell","position":{"start":{"line":2120,"column":1},"end":{"line":2120,"column":1}},"children":[{"type":"text","value":"Create right object type","position":{"start":{"line":2120,"column":1},"end":{"line":2120,"column":1}},"key":"FpSPkGPxlC"}],"key":"TjASXlYR6W"},{"type":"tableCell","position":{"start":{"line":2120,"column":1},"end":{"line":2120,"column":1}},"children":[{"type":"inlineCode","value":"np.array()","position":{"start":{"line":2120,"column":1},"end":{"line":2120,"column":1}},"key":"hfJS6k1gxm"},{"type":"text","value":" creates appropriate array","position":{"start":{"line":2120,"column":1},"end":{"line":2120,"column":1}},"key":"EkmmcGEf4F"}],"key":"gtpQ6Jdgrc"},{"type":"tableCell","position":{"start":{"line":2120,"column":1},"end":{"line":2120,"column":1}},"children":[{"type":"text","value":"Different detector types","position":{"start":{"line":2120,"column":1},"end":{"line":2120,"column":1}},"key":"rEDh010AYE"}],"key":"giRCOQ7OF5"}],"key":"zN4VMFcfd0"},{"type":"tableRow","position":{"start":{"line":2121,"column":1},"end":{"line":2121,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":2121,"column":1},"end":{"line":2121,"column":1}},"children":[{"type":"text","value":"Strategy","position":{"start":{"line":2121,"column":1},"end":{"line":2121,"column":1}},"key":"clNPqtrnqI"}],"key":"dLRyIlbsAH"},{"type":"tableCell","position":{"start":{"line":2121,"column":1},"end":{"line":2121,"column":1}},"children":[{"type":"text","value":"Swap algorithms","position":{"start":{"line":2121,"column":1},"end":{"line":2121,"column":1}},"key":"EeRrJgybJP"}],"key":"HpsbaL0lh5"},{"type":"tableCell","position":{"start":{"line":2121,"column":1},"end":{"line":2121,"column":1}},"children":[{"type":"inlineCode","value":"scipy.optimize.minimize(method=...)","position":{"start":{"line":2121,"column":1},"end":{"line":2121,"column":1}},"key":"aq88Z6RO5e"}],"key":"jGz0yE5O0V"},{"type":"tableCell","position":{"start":{"line":2121,"column":1},"end":{"line":2121,"column":1}},"children":[{"type":"text","value":"Reduction algorithms","position":{"start":{"line":2121,"column":1},"end":{"line":2121,"column":1}},"key":"xfiQ85n3Cg"}],"key":"XcwJPuiR6l"}],"key":"n5eZqmzOHT"},{"type":"tableRow","position":{"start":{"line":2122,"column":1},"end":{"line":2122,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":2122,"column":1},"end":{"line":2122,"column":1}},"children":[{"type":"text","value":"Observer","position":{"start":{"line":2122,"column":1},"end":{"line":2122,"column":1}},"key":"aO3mZgrPGB"}],"key":"e0sRDwyaqy"},{"type":"tableCell","position":{"start":{"line":2122,"column":1},"end":{"line":2122,"column":1}},"children":[{"type":"text","value":"Event notification","position":{"start":{"line":2122,"column":1},"end":{"line":2122,"column":1}},"key":"tx9Ce9lnne"}],"key":"xgm3lchR9Y"},{"type":"tableCell","position":{"start":{"line":2122,"column":1},"end":{"line":2122,"column":1}},"children":[{"type":"text","value":"Matplotlib figure updates","position":{"start":{"line":2122,"column":1},"end":{"line":2122,"column":1}},"key":"g7guPAVCyF"}],"key":"hdWqVe4p3b"},{"type":"tableCell","position":{"start":{"line":2122,"column":1},"end":{"line":2122,"column":1}},"children":[{"type":"text","value":"Pipeline monitoring","position":{"start":{"line":2122,"column":1},"end":{"line":2122,"column":1}},"key":"rHt0nCxyxV"}],"key":"k0KUcehqax"}],"key":"ovxR6TcDZ7"},{"type":"tableRow","position":{"start":{"line":2123,"column":1},"end":{"line":2123,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":2123,"column":1},"end":{"line":2123,"column":1}},"children":[{"type":"text","value":"Singleton","position":{"start":{"line":2123,"column":1},"end":{"line":2123,"column":1}},"key":"Ss9SWEecZT"}],"key":"PjcXBjlHs5"},{"type":"tableCell","position":{"start":{"line":2123,"column":1},"end":{"line":2123,"column":1}},"children":[{"type":"text","value":"Single instance","position":{"start":{"line":2123,"column":1},"end":{"line":2123,"column":1}},"key":"v5RYYDDvjO"}],"key":"FmCggRuaJd"},{"type":"tableCell","position":{"start":{"line":2123,"column":1},"end":{"line":2123,"column":1}},"children":[{"type":"text","value":"NumPy’s random state","position":{"start":{"line":2123,"column":1},"end":{"line":2123,"column":1}},"key":"Hnt9t5dtm2"}],"key":"s0UT9lp0Vz"},{"type":"tableCell","position":{"start":{"line":2123,"column":1},"end":{"line":2123,"column":1}},"children":[{"type":"text","value":"Hardware controllers","position":{"start":{"line":2123,"column":1},"end":{"line":2123,"column":1}},"key":"REgx5NtvjV"}],"key":"DO2w71JXzQ"}],"key":"JxguAkCinJ"},{"type":"tableRow","position":{"start":{"line":2124,"column":1},"end":{"line":2124,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":2124,"column":1},"end":{"line":2124,"column":1}},"children":[{"type":"text","value":"Template","position":{"start":{"line":2124,"column":1},"end":{"line":2124,"column":1}},"key":"ML1jeA1SD8"}],"key":"N8xBnZp8NU"},{"type":"tableCell","position":{"start":{"line":2124,"column":1},"end":{"line":2124,"column":1}},"children":[{"type":"text","value":"Algorithm skeleton","position":{"start":{"line":2124,"column":1},"end":{"line":2124,"column":1}},"key":"HFpAEzDVpc"}],"key":"u3vPo6Dbpp"},{"type":"tableCell","position":{"start":{"line":2124,"column":1},"end":{"line":2124,"column":1}},"children":[{"type":"text","value":"All SciPy optimizers","position":{"start":{"line":2124,"column":1},"end":{"line":2124,"column":1}},"key":"KL8X1wCjMl"}],"key":"hKO9Y6uilt"},{"type":"tableCell","position":{"start":{"line":2124,"column":1},"end":{"line":2124,"column":1}},"children":[{"type":"text","value":"Analysis pipelines","position":{"start":{"line":2124,"column":1},"end":{"line":2124,"column":1}},"key":"Ce5wSXo5nZ"}],"key":"YNNJBSFbBm"}],"key":"yQGDU0hoHP"}],"key":"T4xuoZAMyT"},{"type":"heading","depth":3,"position":{"start":{"line":2126,"column":1},"end":{"line":2126,"column":1}},"children":[{"type":"text","value":"Performance Optimization Techniques","position":{"start":{"line":2126,"column":1},"end":{"line":2126,"column":1}},"key":"dNMU1W5kPr"}],"identifier":"performance-optimization-techniques","label":"Performance Optimization Techniques","html_id":"performance-optimization-techniques","implicit":true,"key":"OWsTJDqzTY"},{"type":"table","position":{"start":{"line":2128,"column":1},"end":{"line":2134,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":2128,"column":1},"end":{"line":2128,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":2128,"column":1},"end":{"line":2128,"column":1}},"children":[{"type":"text","value":"Technique","position":{"start":{"line":2128,"column":1},"end":{"line":2128,"column":1}},"key":"oM8CjgfOhv"}],"key":"OMDYA2PkAA"},{"type":"tableCell","header":true,"position":{"start":{"line":2128,"column":1},"end":{"line":2128,"column":1}},"children":[{"type":"text","value":"When to Use","position":{"start":{"line":2128,"column":1},"end":{"line":2128,"column":1}},"key":"eHeCxNReo1"}],"key":"kLoc9BUg7Q"},{"type":"tableCell","header":true,"position":{"start":{"line":2128,"column":1},"end":{"line":2128,"column":1}},"children":[{"type":"text","value":"Typical Improvement","position":{"start":{"line":2128,"column":1},"end":{"line":2128,"column":1}},"key":"kgqzanLSnd"}],"key":"vHwcgoPuDA"},{"type":"tableCell","header":true,"position":{"start":{"line":2128,"column":1},"end":{"line":2128,"column":1}},"children":[{"type":"text","value":"Example","position":{"start":{"line":2128,"column":1},"end":{"line":2128,"column":1}},"key":"ZyzZEupk3N"}],"key":"pCrgHw3vEv"}],"key":"LpiF7YylJL"},{"type":"tableRow","position":{"start":{"line":2130,"column":1},"end":{"line":2130,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":2130,"column":1},"end":{"line":2130,"column":1}},"children":[{"type":"inlineCode","value":"__slots__","position":{"start":{"line":2130,"column":1},"end":{"line":2130,"column":1}},"key":"MfloMYWzdl"}],"key":"FZqGlmWjgU"},{"type":"tableCell","position":{"start":{"line":2130,"column":1},"end":{"line":2130,"column":1}},"children":[{"type":"text","value":"Many small objects","position":{"start":{"line":2130,"column":1},"end":{"line":2130,"column":1}},"key":"bz9E2HzD7a"}],"key":"TDUxxc7ucW"},{"type":"tableCell","position":{"start":{"line":2130,"column":1},"end":{"line":2130,"column":1}},"children":[{"type":"text","value":"40-50% memory","position":{"start":{"line":2130,"column":1},"end":{"line":2130,"column":1}},"key":"X0qrTrvgiS"}],"key":"r3vga9SqfW"},{"type":"tableCell","position":{"start":{"line":2130,"column":1},"end":{"line":2130,"column":1}},"children":[{"type":"text","value":"Star catalogs","position":{"start":{"line":2130,"column":1},"end":{"line":2130,"column":1}},"key":"zHdRecogpq"}],"key":"AJ1vMovrRw"}],"key":"CekRvQvPNk"},{"type":"tableRow","position":{"start":{"line":2131,"column":1},"end":{"line":2131,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":2131,"column":1},"end":{"line":2131,"column":1}},"children":[{"type":"inlineCode","value":"@lru_cache","position":{"start":{"line":2131,"column":1},"end":{"line":2131,"column":1}},"key":"aSLjKcwNmN"}],"key":"sNjKWCBKqA"},{"type":"tableCell","position":{"start":{"line":2131,"column":1},"end":{"line":2131,"column":1}},"children":[{"type":"text","value":"Repeated calculations","position":{"start":{"line":2131,"column":1},"end":{"line":2131,"column":1}},"key":"MWCEfN5FjW"}],"key":"AphLvgRCo4"},{"type":"tableCell","position":{"start":{"line":2131,"column":1},"end":{"line":2131,"column":1}},"children":[{"type":"text","value":"10-1000x speed","position":{"start":{"line":2131,"column":1},"end":{"line":2131,"column":1}},"key":"kZWVTCT7ry"}],"key":"vxcz9fHc0w"},{"type":"tableCell","position":{"start":{"line":2131,"column":1},"end":{"line":2131,"column":1}},"children":[{"type":"text","value":"Redshift finding","position":{"start":{"line":2131,"column":1},"end":{"line":2131,"column":1}},"key":"vr4ySF913h"}],"key":"DYxGS71YmC"}],"key":"TMjKp2QLr5"},{"type":"tableRow","position":{"start":{"line":2132,"column":1},"end":{"line":2132,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":2132,"column":1},"end":{"line":2132,"column":1}},"children":[{"type":"text","value":"Async","position":{"start":{"line":2132,"column":1},"end":{"line":2132,"column":1}},"key":"Yx5npswz80"}],"key":"P81T8zSDOl"},{"type":"tableCell","position":{"start":{"line":2132,"column":1},"end":{"line":2132,"column":1}},"children":[{"type":"text","value":"I/O or hardware control","position":{"start":{"line":2132,"column":1},"end":{"line":2132,"column":1}},"key":"w4MyM1ju7k"}],"key":"teBlCWc6H3"},{"type":"tableCell","position":{"start":{"line":2132,"column":1},"end":{"line":2132,"column":1}},"children":[{"type":"text","value":"2-10x throughput","position":{"start":{"line":2132,"column":1},"end":{"line":2132,"column":1}},"key":"zcIj5f16CJ"}],"key":"GG4MnsOccY"},{"type":"tableCell","position":{"start":{"line":2132,"column":1},"end":{"line":2132,"column":1}},"children":[{"type":"text","value":"Telescope control","position":{"start":{"line":2132,"column":1},"end":{"line":2132,"column":1}},"key":"zhmncWciw6"}],"key":"DDYkR2GfQo"}],"key":"bHe5U94BPG"},{"type":"tableRow","position":{"start":{"line":2133,"column":1},"end":{"line":2133,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":2133,"column":1},"end":{"line":2133,"column":1}},"children":[{"type":"text","value":"Vectorization","position":{"start":{"line":2133,"column":1},"end":{"line":2133,"column":1}},"key":"xtykxftqe9"}],"key":"RHOfGwZ4CR"},{"type":"tableCell","position":{"start":{"line":2133,"column":1},"end":{"line":2133,"column":1}},"children":[{"type":"text","value":"Numerical operations","position":{"start":{"line":2133,"column":1},"end":{"line":2133,"column":1}},"key":"jB0hYS3kim"}],"key":"OasDKJE3L3"},{"type":"tableCell","position":{"start":{"line":2133,"column":1},"end":{"line":2133,"column":1}},"children":[{"type":"text","value":"10-100x speed","position":{"start":{"line":2133,"column":1},"end":{"line":2133,"column":1}},"key":"lyESIrpg1c"}],"key":"mOcrJvA4iq"},{"type":"tableCell","position":{"start":{"line":2133,"column":1},"end":{"line":2133,"column":1}},"children":[{"type":"text","value":"Array operations","position":{"start":{"line":2133,"column":1},"end":{"line":2133,"column":1}},"key":"ojdmj7M9U7"}],"key":"G4Hx4mSu86"}],"key":"ld3BjIdaRd"},{"type":"tableRow","position":{"start":{"line":2134,"column":1},"end":{"line":2134,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":2134,"column":1},"end":{"line":2134,"column":1}},"children":[{"type":"text","value":"Dataclasses","position":{"start":{"line":2134,"column":1},"end":{"line":2134,"column":1}},"key":"tVbCgKsN5i"}],"key":"rYOyB3C905"},{"type":"tableCell","position":{"start":{"line":2134,"column":1},"end":{"line":2134,"column":1}},"children":[{"type":"text","value":"Data containers","position":{"start":{"line":2134,"column":1},"end":{"line":2134,"column":1}},"key":"eB3ufOieRk"}],"key":"G4foGHQLgE"},{"type":"tableCell","position":{"start":{"line":2134,"column":1},"end":{"line":2134,"column":1}},"children":[{"type":"text","value":"30% less code","position":{"start":{"line":2134,"column":1},"end":{"line":2134,"column":1}},"key":"m6Q5zyjIO7"}],"key":"WpW7rFIgQf"},{"type":"tableCell","position":{"start":{"line":2134,"column":1},"end":{"line":2134,"column":1}},"children":[{"type":"text","value":"Observations","position":{"start":{"line":2134,"column":1},"end":{"line":2134,"column":1}},"key":"IdlKPbCxym"}],"key":"TlH2J5MloI"}],"key":"wsciJ0hh9j"}],"key":"AUeYrAWzrF"},{"type":"heading","depth":3,"position":{"start":{"line":2136,"column":1},"end":{"line":2136,"column":1}},"children":[{"type":"text","value":"Async Best Practices","position":{"start":{"line":2136,"column":1},"end":{"line":2136,"column":1}},"key":"sfyFGMHcdv"}],"identifier":"async-best-practices","label":"Async Best Practices","html_id":"async-best-practices","implicit":true,"key":"Xxs5F115vm"},{"type":"table","position":{"start":{"line":2138,"column":1},"end":{"line":2144,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":2138,"column":1},"end":{"line":2138,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":2138,"column":1},"end":{"line":2138,"column":1}},"children":[{"type":"text","value":"Pattern","position":{"start":{"line":2138,"column":1},"end":{"line":2138,"column":1}},"key":"ZbBtFXwUUV"}],"key":"DTQoik8ML4"},{"type":"tableCell","header":true,"position":{"start":{"line":2138,"column":1},"end":{"line":2138,"column":1}},"children":[{"type":"text","value":"Use Case","position":{"start":{"line":2138,"column":1},"end":{"line":2138,"column":1}},"key":"dCrkP4P0Q0"}],"key":"Eu2fXDE63W"},{"type":"tableCell","header":true,"position":{"start":{"line":2138,"column":1},"end":{"line":2138,"column":1}},"children":[{"type":"text","value":"Example","position":{"start":{"line":2138,"column":1},"end":{"line":2138,"column":1}},"key":"ItrfsTZ79e"}],"key":"o9eRwyM6wN"}],"key":"UkyI7DUOaQ"},{"type":"tableRow","position":{"start":{"line":2140,"column":1},"end":{"line":2140,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":2140,"column":1},"end":{"line":2140,"column":1}},"children":[{"type":"inlineCode","value":"asyncio.gather()","position":{"start":{"line":2140,"column":1},"end":{"line":2140,"column":1}},"key":"IzEn52fLEd"}],"key":"jrsmcX31WB"},{"type":"tableCell","position":{"start":{"line":2140,"column":1},"end":{"line":2140,"column":1}},"children":[{"type":"text","value":"Run tasks in parallel","position":{"start":{"line":2140,"column":1},"end":{"line":2140,"column":1}},"key":"fo3yeqIQao"}],"key":"o8xFzlgC8t"},{"type":"tableCell","position":{"start":{"line":2140,"column":1},"end":{"line":2140,"column":1}},"children":[{"type":"text","value":"Multiple exposures","position":{"start":{"line":2140,"column":1},"end":{"line":2140,"column":1}},"key":"LzX0xTUoUN"}],"key":"DoH78RooEn"}],"key":"TeRMEEyBoR"},{"type":"tableRow","position":{"start":{"line":2141,"column":1},"end":{"line":2141,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":2141,"column":1},"end":{"line":2141,"column":1}},"children":[{"type":"inlineCode","value":"asyncio.create_task()","position":{"start":{"line":2141,"column":1},"end":{"line":2141,"column":1}},"key":"kytuPfMJLE"}],"key":"th0q5x8rTT"},{"type":"tableCell","position":{"start":{"line":2141,"column":1},"end":{"line":2141,"column":1}},"children":[{"type":"text","value":"Fire and forget","position":{"start":{"line":2141,"column":1},"end":{"line":2141,"column":1}},"key":"GA0uLp4dkm"}],"key":"wsfzvlvbPm"},{"type":"tableCell","position":{"start":{"line":2141,"column":1},"end":{"line":2141,"column":1}},"children":[{"type":"text","value":"Background monitoring","position":{"start":{"line":2141,"column":1},"end":{"line":2141,"column":1}},"key":"QV23nUaQD0"}],"key":"DkO6NOfnJT"}],"key":"hL7gXnEGHe"},{"type":"tableRow","position":{"start":{"line":2142,"column":1},"end":{"line":2142,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":2142,"column":1},"end":{"line":2142,"column":1}},"children":[{"type":"inlineCode","value":"async with","position":{"start":{"line":2142,"column":1},"end":{"line":2142,"column":1}},"key":"ncDsLuxXp2"}],"key":"BlPR4YOdXS"},{"type":"tableCell","position":{"start":{"line":2142,"column":1},"end":{"line":2142,"column":1}},"children":[{"type":"text","value":"Async context managers","position":{"start":{"line":2142,"column":1},"end":{"line":2142,"column":1}},"key":"hu1qHmensQ"}],"key":"u30u8nA6EG"},{"type":"tableCell","position":{"start":{"line":2142,"column":1},"end":{"line":2142,"column":1}},"children":[{"type":"text","value":"Instrument connections","position":{"start":{"line":2142,"column":1},"end":{"line":2142,"column":1}},"key":"RGQlcpok5E"}],"key":"dwRN4WjxT6"}],"key":"eTOK4khQ4z"},{"type":"tableRow","position":{"start":{"line":2143,"column":1},"end":{"line":2143,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":2143,"column":1},"end":{"line":2143,"column":1}},"children":[{"type":"inlineCode","value":"asyncio.Queue","position":{"start":{"line":2143,"column":1},"end":{"line":2143,"column":1}},"key":"WHXT7g2QrF"}],"key":"MwO3lPBOTh"},{"type":"tableCell","position":{"start":{"line":2143,"column":1},"end":{"line":2143,"column":1}},"children":[{"type":"text","value":"Producer-consumer","position":{"start":{"line":2143,"column":1},"end":{"line":2143,"column":1}},"key":"SWOgjcUDrF"}],"key":"N8Im9JaQhu"},{"type":"tableCell","position":{"start":{"line":2143,"column":1},"end":{"line":2143,"column":1}},"children":[{"type":"text","value":"Data pipeline","position":{"start":{"line":2143,"column":1},"end":{"line":2143,"column":1}},"key":"lDI2LNEmpW"}],"key":"AyfxAbYCJI"}],"key":"LjpcNEvKoX"},{"type":"tableRow","position":{"start":{"line":2144,"column":1},"end":{"line":2144,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":2144,"column":1},"end":{"line":2144,"column":1}},"children":[{"type":"inlineCode","value":"asyncio.sleep()","position":{"start":{"line":2144,"column":1},"end":{"line":2144,"column":1}},"key":"v0bo8Esfy2"}],"key":"mk6KCNjoM8"},{"type":"tableCell","position":{"start":{"line":2144,"column":1},"end":{"line":2144,"column":1}},"children":[{"type":"text","value":"Non-blocking delay","position":{"start":{"line":2144,"column":1},"end":{"line":2144,"column":1}},"key":"kVdTUQQgLx"}],"key":"fOey5Fvr5U"},{"type":"tableCell","position":{"start":{"line":2144,"column":1},"end":{"line":2144,"column":1}},"children":[{"type":"text","value":"Hardware timing","position":{"start":{"line":2144,"column":1},"end":{"line":2144,"column":1}},"key":"t2n3qohChP"}],"key":"kL64cfKfOu"}],"key":"Vrhkd2Dam6"}],"key":"FY3Y4sMNGH"},{"type":"heading","depth":3,"position":{"start":{"line":2146,"column":1},"end":{"line":2146,"column":1}},"children":[{"type":"text","value":"Memory Comparison (per object)","position":{"start":{"line":2146,"column":1},"end":{"line":2146,"column":1}},"key":"cjzZkDZGJL"}],"identifier":"memory-comparison-per-object","label":"Memory Comparison (per object)","html_id":"memory-comparison-per-object","implicit":true,"key":"Q07qHTDSwP"},{"type":"table","position":{"start":{"line":2148,"column":1},"end":{"line":2154,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":2148,"column":1},"end":{"line":2148,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":2148,"column":1},"end":{"line":2148,"column":1}},"children":[{"type":"text","value":"Implementation","position":{"start":{"line":2148,"column":1},"end":{"line":2148,"column":1}},"key":"Cm4CHnkRxX"}],"key":"yoqwuScQJw"},{"type":"tableCell","header":true,"position":{"start":{"line":2148,"column":1},"end":{"line":2148,"column":1}},"children":[{"type":"text","value":"Memory Usage","position":{"start":{"line":2148,"column":1},"end":{"line":2148,"column":1}},"key":"Py5SAKdSmj"}],"key":"Un4kEXC60N"},{"type":"tableCell","header":true,"position":{"start":{"line":2148,"column":1},"end":{"line":2148,"column":1}},"children":[{"type":"text","value":"1M Objects","position":{"start":{"line":2148,"column":1},"end":{"line":2148,"column":1}},"key":"rcJyW0qr89"}],"key":"HTm4VHvBni"}],"key":"QzydcRFo3l"},{"type":"tableRow","position":{"start":{"line":2150,"column":1},"end":{"line":2150,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":2150,"column":1},"end":{"line":2150,"column":1}},"children":[{"type":"text","value":"Regular class","position":{"start":{"line":2150,"column":1},"end":{"line":2150,"column":1}},"key":"bM9Jly7EVn"}],"key":"vncu9U4Vej"},{"type":"tableCell","position":{"start":{"line":2150,"column":1},"end":{"line":2150,"column":1}},"children":[{"type":"text","value":"~296 bytes","position":{"start":{"line":2150,"column":1},"end":{"line":2150,"column":1}},"key":"go7a0moo9o"}],"key":"GrESzBhd7n"},{"type":"tableCell","position":{"start":{"line":2150,"column":1},"end":{"line":2150,"column":1}},"children":[{"type":"text","value":"296 MB","position":{"start":{"line":2150,"column":1},"end":{"line":2150,"column":1}},"key":"j2shEjBNyg"}],"key":"ZR0Fqe1pCI"}],"key":"keIZGrqI4O"},{"type":"tableRow","position":{"start":{"line":2151,"column":1},"end":{"line":2151,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":2151,"column":1},"end":{"line":2151,"column":1}},"children":[{"type":"text","value":"With ","position":{"start":{"line":2151,"column":1},"end":{"line":2151,"column":1}},"key":"aNFEXP8DYu"},{"type":"inlineCode","value":"__slots__","position":{"start":{"line":2151,"column":1},"end":{"line":2151,"column":1}},"key":"Xwmt8x2vsV"}],"key":"NR4lMz2tbc"},{"type":"tableCell","position":{"start":{"line":2151,"column":1},"end":{"line":2151,"column":1}},"children":[{"type":"text","value":"~56 bytes","position":{"start":{"line":2151,"column":1},"end":{"line":2151,"column":1}},"key":"I5kK9Ba9I3"}],"key":"d5mo7JbiDd"},{"type":"tableCell","position":{"start":{"line":2151,"column":1},"end":{"line":2151,"column":1}},"children":[{"type":"text","value":"56 MB","position":{"start":{"line":2151,"column":1},"end":{"line":2151,"column":1}},"key":"aEG4GgkJbb"}],"key":"RafDVb4VdY"}],"key":"CP1Q8WzD5F"},{"type":"tableRow","position":{"start":{"line":2152,"column":1},"end":{"line":2152,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":2152,"column":1},"end":{"line":2152,"column":1}},"children":[{"type":"text","value":"Namedtuple","position":{"start":{"line":2152,"column":1},"end":{"line":2152,"column":1}},"key":"MmmCqh06E7"}],"key":"dL6JJle3kS"},{"type":"tableCell","position":{"start":{"line":2152,"column":1},"end":{"line":2152,"column":1}},"children":[{"type":"text","value":"~72 bytes","position":{"start":{"line":2152,"column":1},"end":{"line":2152,"column":1}},"key":"RQq13RbqPv"}],"key":"ShVTKKNa9D"},{"type":"tableCell","position":{"start":{"line":2152,"column":1},"end":{"line":2152,"column":1}},"children":[{"type":"text","value":"72 MB","position":{"start":{"line":2152,"column":1},"end":{"line":2152,"column":1}},"key":"DISdBXkqQQ"}],"key":"OWDq5tGr5F"}],"key":"Zz5KFKzAYm"},{"type":"tableRow","position":{"start":{"line":2153,"column":1},"end":{"line":2153,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":2153,"column":1},"end":{"line":2153,"column":1}},"children":[{"type":"text","value":"Dataclass","position":{"start":{"line":2153,"column":1},"end":{"line":2153,"column":1}},"key":"jKS4FMur4j"}],"key":"HqmNYRoxsV"},{"type":"tableCell","position":{"start":{"line":2153,"column":1},"end":{"line":2153,"column":1}},"children":[{"type":"text","value":"~296 bytes","position":{"start":{"line":2153,"column":1},"end":{"line":2153,"column":1}},"key":"wex1JyImxl"}],"key":"hO3jRk4nvq"},{"type":"tableCell","position":{"start":{"line":2153,"column":1},"end":{"line":2153,"column":1}},"children":[{"type":"text","value":"296 MB","position":{"start":{"line":2153,"column":1},"end":{"line":2153,"column":1}},"key":"LOCVKnFr3h"}],"key":"zH4UmwkBZr"}],"key":"vgZSzIO3Ej"},{"type":"tableRow","position":{"start":{"line":2154,"column":1},"end":{"line":2154,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":2154,"column":1},"end":{"line":2154,"column":1}},"children":[{"type":"text","value":"Dataclass + slots","position":{"start":{"line":2154,"column":1},"end":{"line":2154,"column":1}},"key":"GX1RtdIjTO"}],"key":"zrz2s5Nsm3"},{"type":"tableCell","position":{"start":{"line":2154,"column":1},"end":{"line":2154,"column":1}},"children":[{"type":"text","value":"~56 bytes","position":{"start":{"line":2154,"column":1},"end":{"line":2154,"column":1}},"key":"AGLPlcULdR"}],"key":"vQbN40l6Tq"},{"type":"tableCell","position":{"start":{"line":2154,"column":1},"end":{"line":2154,"column":1}},"children":[{"type":"text","value":"56 MB","position":{"start":{"line":2154,"column":1},"end":{"line":2154,"column":1}},"key":"PcQ2Y3nZ8D"}],"key":"JqzABNMgic"}],"key":"gCakccz1ze"}],"key":"LO8xJpMg7B"},{"type":"heading","depth":2,"position":{"start":{"line":2156,"column":1},"end":{"line":2156,"column":1}},"children":[{"type":"text","value":"References","position":{"start":{"line":2156,"column":1},"end":{"line":2156,"column":1}},"key":"rn6MrX1uLg"}],"identifier":"references","label":"References","html_id":"references","implicit":true,"key":"D4BLzFBft5"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":2158,"column":1},"end":{"line":2207,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2158,"column":1},"end":{"line":2159,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2158,"column":1},"end":{"line":2158,"column":1}},"children":[{"type":"text","value":"van Rossum, G., & Warsaw, B. (2001). ","position":{"start":{"line":2158,"column":1},"end":{"line":2158,"column":1}},"key":"vZzd3f2eMv"},{"type":"strong","position":{"start":{"line":2158,"column":1},"end":{"line":2158,"column":1}},"children":[{"type":"text","value":"PEP 3119 – Introducing Abstract Base Classes","position":{"start":{"line":2158,"column":1},"end":{"line":2158,"column":1}},"key":"TeRXwMbbJX"}],"key":"TkK27UiMUX"},{"type":"text","value":". Python Enhancement Proposals. ","position":{"start":{"line":2158,"column":1},"end":{"line":2158,"column":1}},"key":"nhvZYL5kHn"},{"type":"link","url":"https://www.python.org/dev/peps/pep-3119/","position":{"start":{"line":2158,"column":1},"end":{"line":2158,"column":1}},"children":[{"type":"text","value":"https://​www​.python​.org​/dev​/peps​/pep​-3119/","position":{"start":{"line":2158,"column":1},"end":{"line":2158,"column":1}},"key":"UKgafloMP1"}],"urlSource":"https://www.python.org/dev/peps/pep-3119/","key":"iqtnFURF6k"},{"type":"text","value":" - The original proposal that introduced ABCs to Python.","position":{"start":{"line":2158,"column":1},"end":{"line":2158,"column":1}},"key":"ctbksJuPSn"}],"key":"anYPFg8xK5"}],"key":"vbpzwtG9HY"},{"type":"listItem","spread":true,"position":{"start":{"line":2160,"column":1},"end":{"line":2161,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2160,"column":1},"end":{"line":2160,"column":1}},"children":[{"type":"text","value":"Event Horizon Telescope Collaboration. (2019). ","position":{"start":{"line":2160,"column":1},"end":{"line":2160,"column":1}},"key":"poeGTY5aMm"},{"type":"strong","position":{"start":{"line":2160,"column":1},"end":{"line":2160,"column":1}},"children":[{"type":"text","value":"First M87 Event Horizon Telescope Results. I. The Shadow of the Supermassive Black Hole","position":{"start":{"line":2160,"column":1},"end":{"line":2160,"column":1}},"key":"tJiu7DMDWS"}],"key":"zuHKgm8Zh7"},{"type":"text","value":". ","position":{"start":{"line":2160,"column":1},"end":{"line":2160,"column":1}},"key":"EkUBRTqnCC"},{"type":"emphasis","position":{"start":{"line":2160,"column":1},"end":{"line":2160,"column":1}},"children":[{"type":"text","value":"The Astrophysical Journal Letters","position":{"start":{"line":2160,"column":1},"end":{"line":2160,"column":1}},"key":"A1EW20kwtN"}],"key":"btfzi0ds2T"},{"type":"text","value":", 875(1), L1. - The paper describing the first black hole image and the software coordination required.","position":{"start":{"line":2160,"column":1},"end":{"line":2160,"column":1}},"key":"UlPlXekUnF"}],"key":"eEUMFd5eP0"}],"key":"N8snLGbGX6"},{"type":"listItem","spread":true,"position":{"start":{"line":2162,"column":1},"end":{"line":2163,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2162,"column":1},"end":{"line":2162,"column":1}},"children":[{"type":"text","value":"Bouman, K. L., et al. (2016). ","position":{"start":{"line":2162,"column":1},"end":{"line":2162,"column":1}},"key":"mfJnxQKHKC"},{"type":"strong","position":{"start":{"line":2162,"column":1},"end":{"line":2162,"column":1}},"children":[{"type":"text","value":"Computational Imaging for VLBI Image Reconstruction","position":{"start":{"line":2162,"column":1},"end":{"line":2162,"column":1}},"key":"l9BAywl5Fm"}],"key":"goLh66RedI"},{"type":"text","value":". ","position":{"start":{"line":2162,"column":1},"end":{"line":2162,"column":1}},"key":"W9MhThY5sj"},{"type":"emphasis","position":{"start":{"line":2162,"column":1},"end":{"line":2162,"column":1}},"children":[{"type":"text","value":"Proceedings of the IEEE Conference on Computer Vision and Pattern Recognition","position":{"start":{"line":2162,"column":1},"end":{"line":2162,"column":1}},"key":"qUrXpuWRwh"}],"key":"UyCDsWKndd"},{"type":"text","value":", 913-922. - Details on the software architecture that enabled the EHT collaboration.","position":{"start":{"line":2162,"column":1},"end":{"line":2162,"column":1}},"key":"qsjuQUCfz3"}],"key":"WYK2HLIrhk"}],"key":"KGEYUHuWXW"},{"type":"listItem","spread":true,"position":{"start":{"line":2164,"column":1},"end":{"line":2165,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2164,"column":1},"end":{"line":2164,"column":1}},"children":[{"type":"text","value":"Hegner, B., et al. (2014). ","position":{"start":{"line":2164,"column":1},"end":{"line":2164,"column":1}},"key":"SLxwPFYYuc"},{"type":"strong","position":{"start":{"line":2164,"column":1},"end":{"line":2164,"column":1}},"children":[{"type":"text","value":"The CMS Software Architecture and Framework","position":{"start":{"line":2164,"column":1},"end":{"line":2164,"column":1}},"key":"wwf1MSqorR"}],"key":"w8ZK6oCS8Y"},{"type":"text","value":". ","position":{"start":{"line":2164,"column":1},"end":{"line":2164,"column":1}},"key":"e1NXEnXKtd"},{"type":"emphasis","position":{"start":{"line":2164,"column":1},"end":{"line":2164,"column":1}},"children":[{"type":"text","value":"Journal of Physics: Conference Series","position":{"start":{"line":2164,"column":1},"end":{"line":2164,"column":1}},"key":"qtcmykSYdR"}],"key":"FIhz9dlSOM"},{"type":"text","value":", 513(5), 052017. - Describes the mixin-based architecture used at CERN for the Large Hadron Collider.","position":{"start":{"line":2164,"column":1},"end":{"line":2164,"column":1}},"key":"fIL55zw5ux"}],"key":"GFSZILTQjC"}],"key":"vEw8ZrI90P"},{"type":"listItem","spread":true,"position":{"start":{"line":2166,"column":1},"end":{"line":2167,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2166,"column":1},"end":{"line":2166,"column":1}},"children":[{"type":"text","value":"Smith, E. (2018). ","position":{"start":{"line":2166,"column":1},"end":{"line":2166,"column":1}},"key":"DpWswvd78v"},{"type":"strong","position":{"start":{"line":2166,"column":1},"end":{"line":2166,"column":1}},"children":[{"type":"text","value":"PEP 557 – Data Classes","position":{"start":{"line":2166,"column":1},"end":{"line":2166,"column":1}},"key":"sG7qJewuJ9"}],"key":"QsxXPJT7lf"},{"type":"text","value":". Python Enhancement Proposals. ","position":{"start":{"line":2166,"column":1},"end":{"line":2166,"column":1}},"key":"SKk4u7ruxd"},{"type":"link","url":"https://www.python.org/dev/peps/pep-0557/","position":{"start":{"line":2166,"column":1},"end":{"line":2166,"column":1}},"children":[{"type":"text","value":"https://​www​.python​.org​/dev​/peps​/pep​-0557/","position":{"start":{"line":2166,"column":1},"end":{"line":2166,"column":1}},"key":"aFTIRran52"}],"urlSource":"https://www.python.org/dev/peps/pep-0557/","key":"kQkfqO0adn"},{"type":"text","value":" - The proposal that introduced dataclasses to Python 3.7.","position":{"start":{"line":2166,"column":1},"end":{"line":2166,"column":1}},"key":"VEVZVC2NYj"}],"key":"b08dBIZNwl"}],"key":"nONkJrxIQL"},{"type":"listItem","spread":true,"position":{"start":{"line":2168,"column":1},"end":{"line":2169,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2168,"column":1},"end":{"line":2168,"column":1}},"children":[{"type":"text","value":"van Rossum, G., Lehtosalo, J., & Langa, Ł. (2014). ","position":{"start":{"line":2168,"column":1},"end":{"line":2168,"column":1}},"key":"ub8Xpa7Osa"},{"type":"strong","position":{"start":{"line":2168,"column":1},"end":{"line":2168,"column":1}},"children":[{"type":"text","value":"PEP 484 – Type Hints","position":{"start":{"line":2168,"column":1},"end":{"line":2168,"column":1}},"key":"k6XfByNJr1"}],"key":"SPvZvxbsqD"},{"type":"text","value":". Python Enhancement Proposals. ","position":{"start":{"line":2168,"column":1},"end":{"line":2168,"column":1}},"key":"uBMfoEUxUQ"},{"type":"link","url":"https://www.python.org/dev/peps/pep-0484/","position":{"start":{"line":2168,"column":1},"end":{"line":2168,"column":1}},"children":[{"type":"text","value":"https://​www​.python​.org​/dev​/peps​/pep​-0484/","position":{"start":{"line":2168,"column":1},"end":{"line":2168,"column":1}},"key":"yejInlaTee"}],"urlSource":"https://www.python.org/dev/peps/pep-0484/","key":"WIzRwr3psR"},{"type":"text","value":" - Introduction of type hints to Python.","position":{"start":{"line":2168,"column":1},"end":{"line":2168,"column":1}},"key":"wotior0sNm"}],"key":"JJTctYtYwU"}],"key":"MgTafyj5qA"},{"type":"listItem","spread":true,"position":{"start":{"line":2170,"column":1},"end":{"line":2171,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2170,"column":1},"end":{"line":2170,"column":1}},"children":[{"type":"text","value":"Levkivskyi, I. (2019). ","position":{"start":{"line":2170,"column":1},"end":{"line":2170,"column":1}},"key":"WJXGNa68e8"},{"type":"strong","position":{"start":{"line":2170,"column":1},"end":{"line":2170,"column":1}},"children":[{"type":"text","value":"PEP 563 – Postponed Evaluation of Annotations","position":{"start":{"line":2170,"column":1},"end":{"line":2170,"column":1}},"key":"IW4q7ZbYsp"}],"key":"ybenoWyrvw"},{"type":"text","value":". Python Enhancement Proposals. ","position":{"start":{"line":2170,"column":1},"end":{"line":2170,"column":1}},"key":"c72DZEVZi6"},{"type":"link","url":"https://www.python.org/dev/peps/pep-0563/","position":{"start":{"line":2170,"column":1},"end":{"line":2170,"column":1}},"children":[{"type":"text","value":"https://​www​.python​.org​/dev​/peps​/pep​-0563/","position":{"start":{"line":2170,"column":1},"end":{"line":2170,"column":1}},"key":"eI8Qxk07T9"}],"urlSource":"https://www.python.org/dev/peps/pep-0563/","key":"IhWRiwQpMp"},{"type":"text","value":" - The ","position":{"start":{"line":2170,"column":1},"end":{"line":2170,"column":1}},"key":"m5bmHnURkW"},{"type":"inlineCode","value":"from __future__ import annotations","position":{"start":{"line":2170,"column":1},"end":{"line":2170,"column":1}},"key":"DXiWW8PeBi"},{"type":"text","value":" feature.","position":{"start":{"line":2170,"column":1},"end":{"line":2170,"column":1}},"key":"QWRM0uzy0A"}],"key":"MwaN25s6a7"}],"key":"Iv8FSmEuSm"},{"type":"listItem","spread":true,"position":{"start":{"line":2172,"column":1},"end":{"line":2173,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2172,"column":1},"end":{"line":2172,"column":1}},"children":[{"type":"text","value":"Gamma, E., Helm, R., Johnson, R., & Vlissides, J. (1994). ","position":{"start":{"line":2172,"column":1},"end":{"line":2172,"column":1}},"key":"tFAK1yBjQY"},{"type":"strong","position":{"start":{"line":2172,"column":1},"end":{"line":2172,"column":1}},"children":[{"type":"text","value":"Design Patterns: Elements of Reusable Object-Oriented Software","position":{"start":{"line":2172,"column":1},"end":{"line":2172,"column":1}},"key":"yMDJhfAejp"}],"key":"aqRUubcYm8"},{"type":"text","value":". Addison-Wesley. - The classic “Gang of Four” book defining design patterns including Factory, Observer, and Strategy.","position":{"start":{"line":2172,"column":1},"end":{"line":2172,"column":1}},"key":"ljjiyipCxB"}],"key":"SejEMiG48a"}],"key":"lxdlO3IVR3"},{"type":"listItem","spread":true,"position":{"start":{"line":2174,"column":1},"end":{"line":2175,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2174,"column":1},"end":{"line":2174,"column":1}},"children":[{"type":"text","value":"Selivanov, Y. (2015). ","position":{"start":{"line":2174,"column":1},"end":{"line":2174,"column":1}},"key":"RFdV546hMI"},{"type":"strong","position":{"start":{"line":2174,"column":1},"end":{"line":2174,"column":1}},"children":[{"type":"text","value":"PEP 492 – Coroutines with async and await syntax","position":{"start":{"line":2174,"column":1},"end":{"line":2174,"column":1}},"key":"QaA3KlKyAQ"}],"key":"JxFHe8eY1M"},{"type":"text","value":". Python Enhancement Proposals. ","position":{"start":{"line":2174,"column":1},"end":{"line":2174,"column":1}},"key":"LeF2sxa30Y"},{"type":"link","url":"https://www.python.org/dev/peps/pep-0492/","position":{"start":{"line":2174,"column":1},"end":{"line":2174,"column":1}},"children":[{"type":"text","value":"https://​www​.python​.org​/dev​/peps​/pep​-0492/","position":{"start":{"line":2174,"column":1},"end":{"line":2174,"column":1}},"key":"ZZWeQOsq1n"}],"urlSource":"https://www.python.org/dev/peps/pep-0492/","key":"sjZtYhC2mI"},{"type":"text","value":" - Introduction of async/await to Python.","position":{"start":{"line":2174,"column":1},"end":{"line":2174,"column":1}},"key":"qBfVZPb8Kg"}],"key":"EKWVsz01Pc"}],"key":"hdWYdawSDy"},{"type":"listItem","spread":true,"position":{"start":{"line":2176,"column":1},"end":{"line":2177,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2176,"column":1},"end":{"line":2176,"column":1}},"children":[{"type":"text","value":"Reefe, M., et al. (2022). ","position":{"start":{"line":2176,"column":1},"end":{"line":2176,"column":1}},"key":"peF2ugnH3q"},{"type":"strong","position":{"start":{"line":2176,"column":1},"end":{"line":2176,"column":1}},"children":[{"type":"text","value":"An asynchronous object-oriented approach to the automation of the 0.8-meter George Mason University campus telescope in Python","position":{"start":{"line":2176,"column":1},"end":{"line":2176,"column":1}},"key":"l8pErhFtVP"}],"key":"ydXcyPv6Uu"},{"type":"text","value":". ","position":{"start":{"line":2176,"column":1},"end":{"line":2176,"column":1}},"key":"VMxESE8E4y"},{"type":"emphasis","position":{"start":{"line":2176,"column":1},"end":{"line":2176,"column":1}},"children":[{"type":"text","value":"arXiv preprint arXiv:2206.01780","position":{"start":{"line":2176,"column":1},"end":{"line":2176,"column":1}},"key":"b40EtvI99B"}],"key":"TNRlCXU5Q9"},{"type":"text","value":". - Real-world application of async OOP for telescope control.","position":{"start":{"line":2176,"column":1},"end":{"line":2176,"column":1}},"key":"jpMbeNfUGE"}],"key":"pH10rHNVJK"}],"key":"wBSWRdcNI4"},{"type":"listItem","spread":true,"position":{"start":{"line":2178,"column":1},"end":{"line":2179,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2178,"column":1},"end":{"line":2178,"column":1}},"children":[{"type":"text","value":"Ramalho, L. (2022). ","position":{"start":{"line":2178,"column":1},"end":{"line":2178,"column":1}},"key":"zp1Zy11aLG"},{"type":"strong","position":{"start":{"line":2178,"column":1},"end":{"line":2178,"column":1}},"children":[{"type":"text","value":"Fluent Python","position":{"start":{"line":2178,"column":1},"end":{"line":2178,"column":1}},"key":"YvlOIQGQgT"}],"key":"BKl6C3wNpn"},{"type":"text","value":" (2nd ed.). O’Reilly Media. - Comprehensive coverage of Python’s advanced OOP features including metaclasses and descriptors.","position":{"start":{"line":2178,"column":1},"end":{"line":2178,"column":1}},"key":"WHJfLoYjGv"}],"key":"YhFrQ1QHR5"}],"key":"X6YWf1xbQf"},{"type":"listItem","spread":true,"position":{"start":{"line":2180,"column":1},"end":{"line":2181,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2180,"column":1},"end":{"line":2180,"column":1}},"children":[{"type":"text","value":"Beazley, D., & Jones, B. K. (2013). ","position":{"start":{"line":2180,"column":1},"end":{"line":2180,"column":1}},"key":"j2dz83RwUh"},{"type":"strong","position":{"start":{"line":2180,"column":1},"end":{"line":2180,"column":1}},"children":[{"type":"text","value":"Python Cookbook","position":{"start":{"line":2180,"column":1},"end":{"line":2180,"column":1}},"key":"Aev55CkGLb"}],"key":"Y9fbYBnjLr"},{"type":"text","value":" (3rd ed.). O’Reilly Media. - Practical recipes for advanced Python patterns and optimization techniques.","position":{"start":{"line":2180,"column":1},"end":{"line":2180,"column":1}},"key":"w0M4mAcUtD"}],"key":"ZAbSf2LamO"}],"key":"kYPBxoJDCH"},{"type":"listItem","spread":true,"position":{"start":{"line":2182,"column":1},"end":{"line":2183,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2182,"column":1},"end":{"line":2182,"column":1}},"children":[{"type":"text","value":"Astropy Collaboration. (2022). ","position":{"start":{"line":2182,"column":1},"end":{"line":2182,"column":1}},"key":"F6vdoxUVl5"},{"type":"strong","position":{"start":{"line":2182,"column":1},"end":{"line":2182,"column":1}},"children":[{"type":"text","value":"The Astropy Project: Sustaining and Growing a Community-oriented Open-source Project and the Latest Major Release (v5.0) of the Core Package","position":{"start":{"line":2182,"column":1},"end":{"line":2182,"column":1}},"key":"bnpJllhOm2"}],"key":"pfmCX1I01R"},{"type":"text","value":". ","position":{"start":{"line":2182,"column":1},"end":{"line":2182,"column":1}},"key":"urAhwGA6cU"},{"type":"emphasis","position":{"start":{"line":2182,"column":1},"end":{"line":2182,"column":1}},"children":[{"type":"text","value":"The Astrophysical Journal","position":{"start":{"line":2182,"column":1},"end":{"line":2182,"column":1}},"key":"NfVlafXTrJ"}],"key":"Ev2yLEgjF8"},{"type":"text","value":", 935(2), 167. - Current state of Astropy’s architecture.","position":{"start":{"line":2182,"column":1},"end":{"line":2182,"column":1}},"key":"ux7DnU14FX"}],"key":"ni6t8Hj0Xf"}],"key":"Gan2QzpyRH"},{"type":"listItem","spread":true,"position":{"start":{"line":2184,"column":1},"end":{"line":2185,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2184,"column":1},"end":{"line":2184,"column":1}},"children":[{"type":"text","value":"Harris, C. R., et al. (2020). ","position":{"start":{"line":2184,"column":1},"end":{"line":2184,"column":1}},"key":"svyryCr0Sv"},{"type":"strong","position":{"start":{"line":2184,"column":1},"end":{"line":2184,"column":1}},"children":[{"type":"text","value":"Array programming with NumPy","position":{"start":{"line":2184,"column":1},"end":{"line":2184,"column":1}},"key":"K8wcX86inI"}],"key":"O7k9P1OC8B"},{"type":"text","value":". ","position":{"start":{"line":2184,"column":1},"end":{"line":2184,"column":1}},"key":"hBG7cW65mA"},{"type":"emphasis","position":{"start":{"line":2184,"column":1},"end":{"line":2184,"column":1}},"children":[{"type":"text","value":"Nature","position":{"start":{"line":2184,"column":1},"end":{"line":2184,"column":1}},"key":"xnnz3rY8nt"}],"key":"XFaJbe2dHu"},{"type":"text","value":", 585(7825), 357-362. - NumPy’s design philosophy and architecture.","position":{"start":{"line":2184,"column":1},"end":{"line":2184,"column":1}},"key":"FpqixcyVO8"}],"key":"G7kPQsp8cW"}],"key":"NoDM3SKaDH"},{"type":"listItem","spread":true,"position":{"start":{"line":2186,"column":1},"end":{"line":2187,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2186,"column":1},"end":{"line":2186,"column":1}},"children":[{"type":"text","value":"Virtanen, P., et al. (2020). ","position":{"start":{"line":2186,"column":1},"end":{"line":2186,"column":1}},"key":"MZ4rlC7EMO"},{"type":"strong","position":{"start":{"line":2186,"column":1},"end":{"line":2186,"column":1}},"children":[{"type":"text","value":"SciPy 1.0: fundamental algorithms for scientific computing in Python","position":{"start":{"line":2186,"column":1},"end":{"line":2186,"column":1}},"key":"qqsxC7D7Xz"}],"key":"jQyuESxquC"},{"type":"text","value":". ","position":{"start":{"line":2186,"column":1},"end":{"line":2186,"column":1}},"key":"ojh1N5DZGE"},{"type":"emphasis","position":{"start":{"line":2186,"column":1},"end":{"line":2186,"column":1}},"children":[{"type":"text","value":"Nature Methods","position":{"start":{"line":2186,"column":1},"end":{"line":2186,"column":1}},"key":"MkCHWUYpbD"}],"key":"ZbY1p44mbu"},{"type":"text","value":", 17(3), 261-272. - SciPy’s architectural decisions including the Strategy pattern for optimization.","position":{"start":{"line":2186,"column":1},"end":{"line":2186,"column":1}},"key":"iAIU5sSIMq"}],"key":"ybHnPpSILk"}],"key":"Amdya6yMcf"},{"type":"listItem","spread":true,"position":{"start":{"line":2188,"column":1},"end":{"line":2189,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2188,"column":1},"end":{"line":2188,"column":1}},"children":[{"type":"text","value":"Langa, Ł. (2021). ","position":{"start":{"line":2188,"column":1},"end":{"line":2188,"column":1}},"key":"n7je0nMIOp"},{"type":"strong","position":{"start":{"line":2188,"column":1},"end":{"line":2188,"column":1}},"children":[{"type":"text","value":"asyncio — Asynchronous I/O","position":{"start":{"line":2188,"column":1},"end":{"line":2188,"column":1}},"key":"hnPtSYZuj1"}],"key":"xwmwTsWJkf"},{"type":"text","value":". Python Documentation. ","position":{"start":{"line":2188,"column":1},"end":{"line":2188,"column":1}},"key":"aBAxtWCsYh"},{"type":"link","url":"https://docs.python.org/3/library/asyncio.html","position":{"start":{"line":2188,"column":1},"end":{"line":2188,"column":1}},"children":[{"type":"text","value":"https://​docs​.python​.org​/3​/library​/asyncio​.html","position":{"start":{"line":2188,"column":1},"end":{"line":2188,"column":1}},"key":"jV3NLexO3u"}],"urlSource":"https://docs.python.org/3/library/asyncio.html","key":"G2VOUcxqj9"},{"type":"text","value":" - Official Python asyncio documentation.","position":{"start":{"line":2188,"column":1},"end":{"line":2188,"column":1}},"key":"KpdVZS9LIU"}],"key":"QSxRBjtKZC"}],"key":"rIp6s2A861"},{"type":"listItem","spread":true,"position":{"start":{"line":2190,"column":1},"end":{"line":2191,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2190,"column":1},"end":{"line":2190,"column":1}},"children":[{"type":"text","value":"Martin, R. C. (2017). ","position":{"start":{"line":2190,"column":1},"end":{"line":2190,"column":1}},"key":"oDke1cNpRS"},{"type":"strong","position":{"start":{"line":2190,"column":1},"end":{"line":2190,"column":1}},"children":[{"type":"text","value":"Clean Architecture: A Craftsman’s Guide to Software Structure and Design","position":{"start":{"line":2190,"column":1},"end":{"line":2190,"column":1}},"key":"emxGFAE36f"}],"key":"F3zj5aDYTG"},{"type":"text","value":". Prentice Hall. - Principles of software architecture applicable to scientific computing.","position":{"start":{"line":2190,"column":1},"end":{"line":2190,"column":1}},"key":"Hj9lxViKt7"}],"key":"LKob5xNklW"}],"key":"JFAhNqAt77"},{"type":"listItem","spread":true,"position":{"start":{"line":2192,"column":1},"end":{"line":2193,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2192,"column":1},"end":{"line":2192,"column":1}},"children":[{"type":"text","value":"van der Walt, S., et al. (2014). ","position":{"start":{"line":2192,"column":1},"end":{"line":2192,"column":1}},"key":"o2sS5IwIDk"},{"type":"strong","position":{"start":{"line":2192,"column":1},"end":{"line":2192,"column":1}},"children":[{"type":"text","value":"scikit-image: image processing in Python","position":{"start":{"line":2192,"column":1},"end":{"line":2192,"column":1}},"key":"YsFRPT1vRF"}],"key":"OPBNhszV5G"},{"type":"text","value":". ","position":{"start":{"line":2192,"column":1},"end":{"line":2192,"column":1}},"key":"mSPWzF5Jd6"},{"type":"emphasis","position":{"start":{"line":2192,"column":1},"end":{"line":2192,"column":1}},"children":[{"type":"text","value":"PeerJ","position":{"start":{"line":2192,"column":1},"end":{"line":2192,"column":1}},"key":"BS1Ak654wL"}],"key":"WEe0iAsn1M"},{"type":"text","value":", 2, e453. - Example of ABC usage in scientific Python packages.","position":{"start":{"line":2192,"column":1},"end":{"line":2192,"column":1}},"key":"ztsJ9FNI8A"}],"key":"CZ6hNe09ub"}],"key":"Jw10ONQrjV"},{"type":"listItem","spread":true,"position":{"start":{"line":2194,"column":1},"end":{"line":2195,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2194,"column":1},"end":{"line":2194,"column":1}},"children":[{"type":"text","value":"McKinney, W. (2017). ","position":{"start":{"line":2194,"column":1},"end":{"line":2194,"column":1}},"key":"E7MfTqDQz0"},{"type":"strong","position":{"start":{"line":2194,"column":1},"end":{"line":2194,"column":1}},"children":[{"type":"text","value":"Python for Data Analysis","position":{"start":{"line":2194,"column":1},"end":{"line":2194,"column":1}},"key":"heUFVS6XOr"}],"key":"EyyfIhn7Rj"},{"type":"text","value":" (2nd ed.). O’Reilly Media. - Practical patterns for scientific data processing.","position":{"start":{"line":2194,"column":1},"end":{"line":2194,"column":1}},"key":"TANtChAPrb"}],"key":"gBCPqkIDnT"}],"key":"dJq1UmuABm"},{"type":"listItem","spread":true,"position":{"start":{"line":2196,"column":1},"end":{"line":2197,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2196,"column":1},"end":{"line":2196,"column":1}},"children":[{"type":"text","value":"Price-Whelan, A. M., & Bonaca, A. (2018). ","position":{"start":{"line":2196,"column":1},"end":{"line":2196,"column":1}},"key":"RsbkYL0AW9"},{"type":"strong","position":{"start":{"line":2196,"column":1},"end":{"line":2196,"column":1}},"children":[{"type":"text","value":"Off the Beaten Path: Gaia Reveals GD-1 Stars outside of the Main Stream","position":{"start":{"line":2196,"column":1},"end":{"line":2196,"column":1}},"key":"AQG1wWQAOC"}],"key":"sLEx4z4Ael"},{"type":"text","value":". ","position":{"start":{"line":2196,"column":1},"end":{"line":2196,"column":1}},"key":"BHmTaffSyp"},{"type":"emphasis","position":{"start":{"line":2196,"column":1},"end":{"line":2196,"column":1}},"children":[{"type":"text","value":"The Astrophysical Journal Letters","position":{"start":{"line":2196,"column":1},"end":{"line":2196,"column":1}},"key":"VBe47ZfHYM"}],"key":"UBYNZ4Llo1"},{"type":"text","value":", 863(2), L20. - The paper referenced in Astropy’s Data Carpentry curriculum.","position":{"start":{"line":2196,"column":1},"end":{"line":2196,"column":1}},"key":"CIFlvlkbSL"}],"key":"CZNAB3qco8"}],"key":"DZZwAyQwR8"},{"type":"listItem","spread":true,"position":{"start":{"line":2198,"column":1},"end":{"line":2199,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2198,"column":1},"end":{"line":2198,"column":1}},"children":[{"type":"text","value":"Nygaard, K., & Dahl, O. J. (1978). ","position":{"start":{"line":2198,"column":1},"end":{"line":2198,"column":1}},"key":"O1TIOAGzwp"},{"type":"strong","position":{"start":{"line":2198,"column":1},"end":{"line":2198,"column":1}},"children":[{"type":"text","value":"The development of the SIMULA languages","position":{"start":{"line":2198,"column":1},"end":{"line":2198,"column":1}},"key":"zbadL66ZW6"}],"key":"IqevjCSHbc"},{"type":"text","value":". ","position":{"start":{"line":2198,"column":1},"end":{"line":2198,"column":1}},"key":"kIwfW8W2iu"},{"type":"emphasis","position":{"start":{"line":2198,"column":1},"end":{"line":2198,"column":1}},"children":[{"type":"text","value":"ACM SIGPLAN Notices","position":{"start":{"line":2198,"column":1},"end":{"line":2198,"column":1}},"key":"X2SJXId7AJ"}],"key":"JjmjL56CXw"},{"type":"text","value":", 13(8), 245-272. - Historical origin of object-oriented programming concepts.","position":{"start":{"line":2198,"column":1},"end":{"line":2198,"column":1}},"key":"yfJbQj5OLK"}],"key":"DnNpG6xxj0"}],"key":"MEUwXuPJ5J"},{"type":"listItem","spread":true,"position":{"start":{"line":2200,"column":1},"end":{"line":2201,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2200,"column":1},"end":{"line":2200,"column":1}},"children":[{"type":"text","value":"Meinel, C., & Andres, M. (2018). ","position":{"start":{"line":2200,"column":1},"end":{"line":2200,"column":1}},"key":"iJ2qrBP7W0"},{"type":"strong","position":{"start":{"line":2200,"column":1},"end":{"line":2200,"column":1}},"children":[{"type":"text","value":"pyobs: A Python Framework for Robotic Observatories","position":{"start":{"line":2200,"column":1},"end":{"line":2200,"column":1}},"key":"GDpkX49Wla"}],"key":"DbGw9hN67n"},{"type":"text","value":". ","position":{"start":{"line":2200,"column":1},"end":{"line":2200,"column":1}},"key":"qkrBB9s5xN"},{"type":"emphasis","position":{"start":{"line":2200,"column":1},"end":{"line":2200,"column":1}},"children":[{"type":"text","value":"Proceedings of the SPIE","position":{"start":{"line":2200,"column":1},"end":{"line":2200,"column":1}},"key":"pcRfzrmyWH"}],"key":"UhNApqdmAE"},{"type":"text","value":", 10707, 107072P. - Modern telescope control software architecture.","position":{"start":{"line":2200,"column":1},"end":{"line":2200,"column":1}},"key":"QZRtg6Dupm"}],"key":"kqdfjIk5ZY"}],"key":"ruUmpjrfUf"},{"type":"listItem","spread":true,"position":{"start":{"line":2202,"column":1},"end":{"line":2203,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2202,"column":1},"end":{"line":2202,"column":1}},"children":[{"type":"text","value":"Python Software Foundation. (2024). ","position":{"start":{"line":2202,"column":1},"end":{"line":2202,"column":1}},"key":"AXVBtrK4dG"},{"type":"strong","position":{"start":{"line":2202,"column":1},"end":{"line":2202,"column":1}},"children":[{"type":"text","value":"Abstract Base Classes for Containers","position":{"start":{"line":2202,"column":1},"end":{"line":2202,"column":1}},"key":"ngJa3OKvQD"}],"key":"ER8JXws1Wb"},{"type":"text","value":". ","position":{"start":{"line":2202,"column":1},"end":{"line":2202,"column":1}},"key":"coENkjCSna"},{"type":"link","url":"https://docs.python.org/3/library/collections.abc.html","position":{"start":{"line":2202,"column":1},"end":{"line":2202,"column":1}},"children":[{"type":"text","value":"https://​docs​.python​.org​/3​/library​/collections​.abc​.html","position":{"start":{"line":2202,"column":1},"end":{"line":2202,"column":1}},"key":"KbJhhL2C4d"}],"urlSource":"https://docs.python.org/3/library/collections.abc.html","key":"LWY7nklP2h"},{"type":"text","value":" - Documentation for Python’s built-in ABCs.","position":{"start":{"line":2202,"column":1},"end":{"line":2202,"column":1}},"key":"q1BqHCoY8S"}],"key":"D6Ff6zLSGD"}],"key":"mLg8dQnbBM"},{"type":"listItem","spread":true,"position":{"start":{"line":2204,"column":1},"end":{"line":2205,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2204,"column":1},"end":{"line":2204,"column":1}},"children":[{"type":"text","value":"Tollerud, E., et al. (2023). ","position":{"start":{"line":2204,"column":1},"end":{"line":2204,"column":1}},"key":"YnQNHMyezC"},{"type":"strong","position":{"start":{"line":2204,"column":1},"end":{"line":2204,"column":1}},"children":[{"type":"text","value":"Astropy Affiliated Packages","position":{"start":{"line":2204,"column":1},"end":{"line":2204,"column":1}},"key":"HjRG8w95Z3"}],"key":"HmeM0zC9Ng"},{"type":"text","value":". The Astropy Project. ","position":{"start":{"line":2204,"column":1},"end":{"line":2204,"column":1}},"key":"johcsIJ4Yg"},{"type":"link","url":"https://www.astropy.org/affiliated/","position":{"start":{"line":2204,"column":1},"end":{"line":2204,"column":1}},"children":[{"type":"text","value":"https://​www​.astropy​.org​/affiliated/","position":{"start":{"line":2204,"column":1},"end":{"line":2204,"column":1}},"key":"xDZMWMNSBu"}],"urlSource":"https://www.astropy.org/affiliated/","key":"RP4em4bSwf"},{"type":"text","value":" - Overview of packages using Astropy’s architectural patterns.","position":{"start":{"line":2204,"column":1},"end":{"line":2204,"column":1}},"key":"S70LkfnAQr"}],"key":"OGvlKqKbVu"}],"key":"UToU54MBDn"},{"type":"listItem","spread":true,"position":{"start":{"line":2206,"column":1},"end":{"line":2207,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":2206,"column":1},"end":{"line":2206,"column":1}},"children":[{"type":"text","value":"Beazley, D. (2016). ","position":{"start":{"line":2206,"column":1},"end":{"line":2206,"column":1}},"key":"yTCVVONQR5"},{"type":"strong","position":{"start":{"line":2206,"column":1},"end":{"line":2206,"column":1}},"children":[{"type":"text","value":"Python Concurrency From the Ground Up","position":{"start":{"line":2206,"column":1},"end":{"line":2206,"column":1}},"key":"sB7hg8FlEm"}],"key":"g4QYviMA6H"},{"type":"text","value":". PyCon 2015. ","position":{"start":{"line":2206,"column":1},"end":{"line":2206,"column":1}},"key":"J7pSt67jv9"},{"type":"link","url":"https://www.youtube.com/watch?v=MCs5OvhV9S4","position":{"start":{"line":2206,"column":1},"end":{"line":2206,"column":1}},"children":[{"type":"text","value":"https://​www​.youtube​.com​/watch​?v​=​MCs5OvhV9S4","position":{"start":{"line":2206,"column":1},"end":{"line":2206,"column":1}},"key":"S5dLKCwEcg"}],"urlSource":"https://www.youtube.com/watch?v=MCs5OvhV9S4","key":"HVMgeQ5beW"},{"type":"text","value":" - Deep dive into Python’s concurrency models including asyncio.","position":{"start":{"line":2206,"column":1},"end":{"line":2206,"column":1}},"key":"BlmiAYpspu"}],"key":"Id9oQ9MRk4"}],"key":"heOTK9JzdU"}],"key":"qk0myfgR2P"},{"type":"heading","depth":2,"position":{"start":{"line":2208,"column":1},"end":{"line":2208,"column":1}},"children":[{"type":"text","value":"Next Chapter Preview","position":{"start":{"line":2208,"column":1},"end":{"line":2208,"column":1}},"key":"HiqYnTEhNG"}],"identifier":"next-chapter-preview","label":"Next Chapter Preview","html_id":"next-chapter-preview","implicit":true,"key":"rjLkOsi3AN"},{"type":"paragraph","position":{"start":{"line":2210,"column":1},"end":{"line":2210,"column":1}},"children":[{"type":"text","value":"In Chapter 11, you’ll apply everything you’ve learned to build complete scientific applications. You’ll create a data reduction pipeline using the design patterns from this chapter, implement a real-time observation scheduler with async programming, and build a catalog cross-matching system that scales to billions of objects using the optimization techniques you’ve mastered. You’ll see how ABCs, mixins, and dataclasses combine to create professional-grade astronomical software. Most importantly, you’ll work through a complete research project from raw data to publication-ready results, using the same architectural patterns that power modern astronomical discoveries. The advanced patterns you’ve learned here become the foundation for building software that enables real science!","position":{"start":{"line":2210,"column":1},"end":{"line":2210,"column":1}},"key":"XGM7a2cGkJ"}],"key":"bkvnNmxLJM"}],"key":"mWFz7CCR4e"}],"key":"tIM9AOiWXI"},"references":{"cite":{"order":[],"data":{}}}}