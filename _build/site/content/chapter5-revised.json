{"version":2,"kind":"Article","sha256":"2dbf0181ad3844ef21b833e76797ed7ebf27b39647ec490737d010e58059c6b3","slug":"chapter5-revised","location":"/chapter5-revised.md","dependencies":[],"frontmatter":{"title":"Chapter 5: Functions & Modules - Building Reusable Scientific Code","content_includes_title":false,"authors":[{"nameParsed":{"literal":"Anna Rosen","given":"Anna","family":"Rosen"},"name":"Anna Rosen","orcid":"0000-0003-4423-0660","email":"alrosen@sdsu.edu","affiliations":["San Diego State University"],"id":"contributors-myst-generated-uid-0","corresponding":true}],"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"MIT","url":"https://opensource.org/licenses/MIT","name":"MIT License","free":true,"osi":true}},"github":"https://github.com/astrobytes-edu/astr596-modeling-universe","subject":"Modeling the Universe","venue":{"title":"ASTR 596 - Fall 2025","url":"https://www.anna-rosen.com"},"keywords":["computational astrophysics","python","numerical methods","machine learning","monte carlo","neural networks","radiative transfer","bayesian inference","JAX"],"affiliations":[{"id":"San Diego State University","name":"San Diego State University"}],"edit_url":"https://github.com/astrobytes-edu/astr596-modeling-universe/blob/main/chapter5-revised.md","exports":[{"format":"md","filename":"chapter5-revised.md","url":"/chapter5-revised-f5e9beb4b1fea5270835a4a84c8d1e04.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Learning Objectives","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"GbXlrnSXZa"}],"identifier":"learning-objectives","label":"Learning Objectives","html_id":"learning-objectives","implicit":true,"key":"yutDDnstSm"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"By the end of this chapter, you will be able to:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Y95YhAO0IP"}],"key":"rdhWJzYF8L"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Design functions as clear contracts with well-defined inputs and outputs","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"AVKXklCyVO"}],"key":"AhIreC1pyU"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Understand Python’s scope rules and how they affect variable access","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"aOhlaXRhhY"}],"key":"rJOzvBaTjc"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Write functions with flexible parameter handling using *args and **kwargs","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"jqveDqSjQe"}],"key":"DZLteV8uP8"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Apply functional programming patterns like map, filter, and lambda functions","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"jKb9WPf3aR"}],"key":"QHy3FOpzoZ"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Create and import your own modules for code organization","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"IlSRF8IXvU"}],"key":"uEfz8PhF8B"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Document functions properly using docstrings","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"h3wv5PP9Rm"}],"key":"WYY3HTJ6UN"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Recognize and avoid common function-related bugs","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"OZx1pvJBpm"}],"key":"nUud3qG9pP"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Build modular, reusable code for scientific applications","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"bdP9PRFXQg"}],"key":"VprkknlEjv"}],"key":"SeR6DnzYef"},{"type":"heading","depth":2,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Prerequisites Check","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"Y4ffA5lubN"}],"identifier":"prerequisites-check","label":"Prerequisites Check","html_id":"prerequisites-check","implicit":true,"key":"ct9ghBanB5"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Before starting this chapter, verify you can:","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"xiVzsmZ4Di"}],"key":"ChlUeDns3e"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":18,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"✓ Write loops and conditionals fluently (Chapter 3)","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"WfVQoIeyns"}],"key":"ircgkTs5U7"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"✓ Choose appropriate data structures for different tasks (Chapter 4)","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"qqSlIhRl44"}],"key":"PRZrdGqtiX"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"✓ Handle floating-point arithmetic safely (Chapter 2)","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"CeT3DvBNCq"}],"key":"sUlPJbWkfx"},{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"✓ Use IPython for testing and timing code (Chapter 1)","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"FqLjLlXIsA"}],"key":"p0FguNYKhf"},{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"✓ Design algorithms with pseudocode (Chapter 3)","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"UjwMe976d1"}],"key":"qrEcWd7rzr"}],"key":"NXCuB3jWZz"}],"key":"dPWOblvTZ2"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Quick prerequisite check\ndata = [2.5, 3.7, 1.2, 4.8]\nresult = []\nfor value in data:\n    if value > 2.0:\n        result.append(value * 2)\nprint(f\"If you got {result}, you're ready!\")\n# Expected: [5.0, 7.4, 9.6]","key":"Cc7jDplf4J"},{"type":"output","id":"-9GM643MSF95MvMX0OJax","data":[],"key":"rEIVP4pXo6"}],"key":"PfvbvdNFzc"},{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"Chapter Overview","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"sATbjapl0c"}],"identifier":"chapter-overview","label":"Chapter Overview","html_id":"chapter-overview","implicit":true,"key":"WW3JNssfO3"},{"type":"paragraph","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"text","value":"Functions are the fundamental building blocks of organized code. Without functions, you’d be copying and pasting the same code repeatedly, making bugs harder to fix and improvements impossible to maintain. But functions are more than just a way to avoid repetition—they’re how we create abstractions, manage complexity, and build reliable software. Whether you’re simulating particle trajectories, analyzing statistical distributions, or processing telescope data, every computational project starts with well-designed functions.","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"P3uajSyLuT"}],"key":"j8134PI4AF"},{"type":"paragraph","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"children":[{"type":"text","value":"This chapter teaches you to think about functions as contracts between different parts of your code. When you write a function that calculates kinetic energy or performs numerical integration, you’re creating a promise: given valid input, the function will reliably return the correct output. This contract mindset helps you write functions that others (including future you) can trust and use effectively.","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"key":"IcIdYfa2Tv"}],"key":"vfN1BEIgsk"},{"type":"paragraph","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"text","value":"We’ll explore Python’s scope rules, which determine where variables can be accessed, and learn how seemingly simple concepts like default arguments can create subtle bugs that have plagued even major scientific software packages. You’ll discover how Python’s flexible parameter system enables powerful interfaces, and how functional programming concepts prepare you for modern scientific computing frameworks like JAX. By the end, you’ll be organizing your code into modules that can be shared, tested, and maintained professionally—essential skills for collaborative scientific research.","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"ZFKViChjnX"}],"key":"UVw3bvK4vd"},{"type":"heading","depth":2,"position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"text","value":"5.1 Defining Functions: The Basics","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"ab2mF1pp3m"}],"identifier":"id-5-1-defining-functions-the-basics","label":"5.1 Defining Functions: The Basics","html_id":"id-5-1-defining-functions-the-basics","implicit":true,"key":"H0I1xP5tfa"},{"type":"paragraph","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"text","value":"A function encapsulates a piece of logic that transforms inputs into outputs. Think of a function as a machine: you feed it raw materials (inputs), it performs some process (the function body), and it produces a product (output). In physics, a function might calculate energy from mass and velocity, or integrate a differential equation—each function performs one clear task that can be tested and trusted.","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"EjJ9kNiiTh"}],"key":"GLIsaaZcBx"},{"type":"heading","depth":3,"position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"text","value":"Your First Function","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"bwVN3cgvd1"}],"identifier":"your-first-function","label":"Your First Function","html_id":"your-first-function","implicit":true,"key":"Gv2PRxfF8v"},{"type":"paragraph","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"children":[{"type":"text","value":"Let’s start with something every physicist needs—calculating kinetic energy:","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"key":"ZKXTmrmuCW"}],"key":"uU7pYjx1Vs"}],"key":"uV3D58S1Az"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def kinetic_energy(mass, velocity):\n    \"\"\"\n    Calculate kinetic energy of a particle.\n    \n    KE = (1/2) * m * v^2\n    \"\"\"\n    ke = 0.5 * mass * velocity**2\n    return ke\n\n# Using the function\nelectron_mass = 9.109e-31  # kg\nelectron_velocity = 2.18e6  # m/s (in hydrogen atom)\nenergy = kinetic_energy(electron_mass, electron_velocity)\n\nprint(f\"Electron kinetic energy: {energy:.2e} Joules\")\nprint(f\"In electron volts: {energy/1.602e-19:.2f} eV\")","key":"vd1D57NJLW"},{"type":"output","id":"Ya1GBpplZWDZ-_ksK7615","data":[],"key":"dXr52h7jLm"}],"key":"nLGmAirWcV"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"children":[{"type":"text","value":"Let’s break down exactly how this works:","position":{"start":{"line":70,"column":1},"end":{"line":70,"column":1}},"key":"gbF1JyPaSf"}],"key":"g4X95vdPim"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":72,"column":1},"end":{"line":78,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"children":[{"type":"strong","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"children":[{"type":"inlineCode","value":"def","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"key":"rSvT5Saif6"},{"type":"text","value":" keyword","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"key":"JgpuFr3SId"}],"key":"EzKyGFzVJX"},{"type":"text","value":": Tells Python we’re defining a function","position":{"start":{"line":72,"column":1},"end":{"line":72,"column":1}},"key":"Pv7wHPQE7U"}],"key":"MedvD7Ay5A"},{"type":"listItem","spread":true,"position":{"start":{"line":73,"column":1},"end":{"line":73,"column":1}},"children":[{"type":"strong","position":{"start":{"line":73,"column":1},"end":{"line":73,"column":1}},"children":[{"type":"text","value":"Function name","position":{"start":{"line":73,"column":1},"end":{"line":73,"column":1}},"key":"TtokP4iJlh"}],"key":"wbLNuojEvl"},{"type":"text","value":" (","position":{"start":{"line":73,"column":1},"end":{"line":73,"column":1}},"key":"CK2TGbV3Yc"},{"type":"inlineCode","value":"kinetic_energy","position":{"start":{"line":73,"column":1},"end":{"line":73,"column":1}},"key":"BnjFafKZXz"},{"type":"text","value":"): Follows snake_case convention, describes what it does","position":{"start":{"line":73,"column":1},"end":{"line":73,"column":1}},"key":"Pal0efvlWh"}],"key":"aCnTUpWux4"},{"type":"listItem","spread":true,"position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"children":[{"type":"strong","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"children":[{"type":"text","value":"Parameters","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"SEufNwaeF6"}],"key":"HrvJVPsS3B"},{"type":"text","value":" (","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"faupxDRLHb"},{"type":"inlineCode","value":"mass, velocity","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"EdNncPHSTc"},{"type":"text","value":"): Variables that receive values when function is called","position":{"start":{"line":74,"column":1},"end":{"line":74,"column":1}},"key":"KaEZWEDztY"}],"key":"kztpRFOxgh"},{"type":"listItem","spread":true,"position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"children":[{"type":"strong","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"children":[{"type":"text","value":"Docstring","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"D5Txp1oLLT"}],"key":"ZXFP5RUQgw"},{"type":"text","value":": Brief description of what the function does (always include this!)","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"hUZUTB1qQy"}],"key":"HGLji6NPpJ"},{"type":"listItem","spread":true,"position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"children":[{"type":"strong","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"children":[{"type":"text","value":"Function body","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"AfupOcHxhA"}],"key":"QmU5AjdSwG"},{"type":"text","value":": Indented code that does the actual work","position":{"start":{"line":76,"column":1},"end":{"line":76,"column":1}},"key":"h4AAWam5fE"}],"key":"eoU0I5r6vY"},{"type":"listItem","spread":true,"position":{"start":{"line":77,"column":1},"end":{"line":78,"column":1}},"children":[{"type":"strong","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"children":[{"type":"inlineCode","value":"return","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"key":"pIvSbVMWaE"},{"type":"text","value":" statement","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"key":"L0KHPBz1DT"}],"key":"rukozPWZH1"},{"type":"text","value":": Sends a value back to whoever called the function","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"key":"IcZNi9GOgE"}],"key":"D3eweXZhID"}],"key":"exApY87CbR"},{"type":"paragraph","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"children":[{"type":"text","value":"When Python executes ","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"HHi5u73A88"},{"type":"inlineCode","value":"kinetic_energy(electron_mass, electron_velocity)","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"Axf8P8cj29"},{"type":"text","value":", it creates a temporary namespace where ","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"dqEuG9p7BZ"},{"type":"inlineCode","value":"mass = 9.109e-31","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"a1ZxKTuDgK"},{"type":"text","value":" and ","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"DOqpI3OkZt"},{"type":"inlineCode","value":"velocity = 2.18e6","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"OLSCPb88dj"},{"type":"text","value":", runs the function body, and returns the result.","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"oaCntEDeQE"}],"key":"UQmrbcXVMe"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🔍 Check Your Understanding #1","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"iKlUCHegWW"}],"key":"n3hioqaiz3"},{"type":"paragraph","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"children":[{"type":"text","value":"What will this code print?","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"aW5BYYtcM8"}],"key":"V6JMDrx61a"},{"type":"code","lang":"python","value":"def calculate_momentum(mass, velocity):\n    momentum = mass * velocity\n    # Oops, forgot the return statement!\n\np = calculate_momentum(2.0, 3.0)\nprint(f\"Momentum: {p}\")","position":{"start":{"line":86,"column":1},"end":{"line":93,"column":1}},"key":"GFEennLx18"},{"type":"details","children":[{"type":"summary","children":[{"type":"text","value":"Answer","key":"AliYtwBK9I"}],"key":"j2QztZ2F65"},{"type":"paragraph","children":[{"type":"text","value":"It prints ","key":"ht16MRk5k2"},{"type":"inlineCode","value":"Momentum: None","key":"rWwSJ46UId"},{"type":"text","value":". The function calculates ","key":"ULznzIZOg2"},{"type":"inlineCode","value":"momentum","key":"KQPFzz9BMD"},{"type":"text","value":" but doesn’t return it. Without an explicit ","key":"zhgiqF0XEK"},{"type":"inlineCode","value":"return","key":"ZoOGwgkOXi"},{"type":"text","value":" statement, Python functions return ","key":"z6BfLm8zO6"},{"type":"inlineCode","value":"None","key":"NNCGbamk06"},{"type":"text","value":". This is a common bug in scientific code!","key":"Ra2KZCGmcc"}],"key":"RN6bYoKYch"},{"type":"paragraph","children":[{"type":"text","value":"To fix it:","key":"ZldVe8qB1D"}],"key":"DQJtGFAnOp"},{"type":"code","lang":"python","meta":null,"value":"def calculate_momentum(mass, velocity):\n    momentum = mass * velocity\n    return momentum  # Now it returns the value","key":"Zzac5IhdTv"}],"key":"YFjziWhG4E"}],"class":"question","key":"OGuy5BW6U2"},{"type":"heading","depth":3,"position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"children":[{"type":"text","value":"Functions Without Return Values","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"B5re4q5JA5"}],"identifier":"functions-without-return-values","label":"Functions Without Return Values","html_id":"functions-without-return-values","implicit":true,"key":"Xyt1PUkE1L"},{"type":"paragraph","position":{"start":{"line":112,"column":1},"end":{"line":112,"column":1}},"children":[{"type":"text","value":"Not all functions return values. Some perform actions like printing results or saving data:","position":{"start":{"line":112,"column":1},"end":{"line":112,"column":1}},"key":"uN9Pbl5g7O"}],"key":"hB6lFSIkwi"}],"key":"XKnQlETm1s"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def report_calculation(name, value, units, threshold=1e-10):\n    \"\"\"Report calculation result with significance check.\"\"\"\n    if abs(value) < threshold:\n        significance = \"negligible\"\n    elif abs(value) < 1.0:\n        significance = \"small\"\n    else:\n        significance = \"significant\"\n    \n    print(f\"{name}: {value:.3e} {units} ({significance})\")\n    # No return statement - returns None implicitly\n\n# Report some physics calculations\nreport_calculation(\"Force\", 1.2e-8, \"N\")\nreport_calculation(\"Energy\", 5.4e-19, \"J\")\nreport_calculation(\"Momentum\", 2.3, \"kg⋅m/s\")","key":"SxK6HqEW6f"},{"type":"output","id":"T90_zbZQgwT4wRV5pvZJi","data":[],"key":"PHlgPvvp5q"}],"key":"VknG6vkzoc"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"children":[{"type":"text","value":"Returning Multiple Values","position":{"start":{"line":133,"column":1},"end":{"line":133,"column":1}},"key":"rH6vMR8xIL"}],"identifier":"returning-multiple-values","label":"Returning Multiple Values","html_id":"returning-multiple-values","implicit":true,"key":"VSm2L3Iqai"},{"type":"paragraph","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"children":[{"type":"text","value":"Python functions can return multiple values using tuples—perfect for calculations that produce related results:","position":{"start":{"line":135,"column":1},"end":{"line":135,"column":1}},"key":"cwCva1oseC"}],"key":"lOQKVffRDK"}],"key":"v7qSZQi7zu"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def projectile_motion(v0, angle_deg, t):\n    \"\"\"\n    Calculate projectile position and velocity at time t.\n    \n    Parameters:\n        v0: initial velocity (m/s)\n        angle_deg: launch angle (degrees)\n        t: time (seconds)\n    \n    Returns:\n        x, y: position (meters)\n        vx, vy: velocity components (m/s)\n    \"\"\"\n    import math\n    \n    # Convert angle to radians\n    angle = math.radians(angle_deg)\n    \n    # Initial velocity components\n    v0x = v0 * math.cos(angle)\n    v0y = v0 * math.sin(angle)\n    \n    # Position at time t\n    x = v0x * t\n    y = v0y * t - 0.5 * 9.81 * t**2\n    \n    # Velocity at time t\n    vx = v0x\n    vy = v0y - 9.81 * t\n    \n    return x, y, vx, vy\n\n# Analyze projectile after 1 second\nx, y, vx, vy = projectile_motion(30, 45, 1.0)\nprint(f\"Position: ({x:.1f}, {y:.1f}) m\")\nprint(f\"Velocity: ({vx:.1f}, {vy:.1f}) m/s\")\nspeed = (vx**2 + vy**2)**0.5\nprint(f\"Speed: {speed:.1f} m/s\")","key":"ZXKdXOe96J"},{"type":"output","id":"IGpHMk5DWrYvHOfhElTPm","data":[],"key":"YQxMPffCOG"}],"key":"bDOr3UKQUx"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":178,"column":1},"end":{"line":178,"column":1}},"children":[{"type":"text","value":"The Design Process: From Problem to Function","position":{"start":{"line":178,"column":1},"end":{"line":178,"column":1}},"key":"qyaDCXAZWI"}],"identifier":"the-design-process-from-problem-to-function","label":"The Design Process: From Problem to Function","html_id":"the-design-process-from-problem-to-function","implicit":true,"key":"l4m3ByCijH"},{"type":"paragraph","position":{"start":{"line":180,"column":1},"end":{"line":180,"column":1}},"children":[{"type":"text","value":"Before writing any function, design it first. This prevents the common mistake of coding yourself into a corner:","position":{"start":{"line":180,"column":1},"end":{"line":180,"column":1}},"key":"OTNzJrK9gm"}],"key":"lDVsX7r2Sx"}],"key":"OfnP5VEqSp"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"\"\"\"\nDESIGN: Function to validate numerical calculation\n\nPURPOSE: Ensure numerical results are physically reasonable\nINPUT: value, expected_range, tolerance\nOUTPUT: boolean (True if valid)\nCHECKS:\n    - Value is finite (not inf or nan)\n    - Value is within expected range\n    - Value differs from expected by less than tolerance\n\"\"\"\n\ndef validate_result(value, expected=None, bounds=None, name=\"Result\"):\n    \"\"\"\n    Validate numerical calculation result.\n    \n    Parameters\n    ----------\n    value : float\n        Calculated value to validate\n    expected : float, optional\n        Expected value for comparison\n    bounds : tuple, optional\n        (min, max) acceptable range\n    name : str\n        Name for error messages\n        \n    Returns\n    -------\n    bool\n        True if all validation checks pass\n    \"\"\"\n    import math\n    \n    # Check if value is finite\n    if not math.isfinite(value):\n        print(f\"ERROR: {name} is not finite: {value}\")\n        return False\n    \n    # Check bounds if provided\n    if bounds is not None:\n        min_val, max_val = bounds\n        if not (min_val <= value <= max_val):\n            print(f\"ERROR: {name}={value} outside bounds [{min_val}, {max_val}]\")\n            return False\n    \n    # Check expected value if provided\n    if expected is not None:\n        rel_error = abs(value - expected) / abs(expected) if expected != 0 else abs(value)\n        if rel_error > 0.01:  # 1% tolerance\n            print(f\"ERROR: {name}={value} differs from expected {expected} by {rel_error*100:.1f}%\")\n            return False\n    \n    return True\n\n# Test validation\nenergy = kinetic_energy(1.0, 10.0)\nprint(f\"Energy = {energy} J\")\nprint(f\"Valid? {validate_result(energy, expected=50.0, bounds=(0, 1000))}\")\n\n# Test with bad value\nbad_energy = float('inf')\nprint(f\"\\nBad energy = {bad_energy}\")\nprint(f\"Valid? {validate_result(bad_energy, name='Energy')}\")","key":"CtCUMAlDmU"},{"type":"output","id":"zJk_6nDtNIl-bt0Ky2rbu","data":[],"key":"c0q3UbSLhh"}],"key":"LCOH0jbb7p"},{"type":"block","children":[{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🌟 Why This Matters: The Cost of Unvalidated Functions","position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"key":"fEoZnD2Rm6"}],"key":"DmaQiWlEyq"},{"type":"paragraph","position":{"start":{"line":252,"column":1},"end":{"line":252,"column":1}},"children":[{"type":"text","value":"In 1996, the European Space Agency’s Ariane 5 rocket exploded 37 seconds after launch, destroying $370 million in satellites. The cause? A single unvalidated function that converted a 64-bit floating-point number to a 16-bit integer without checking if the value fit. The horizontal velocity exceeded 32,767 (the maximum for a 16-bit signed integer), causing an overflow that triggered self-destruct.","position":{"start":{"line":252,"column":1},"end":{"line":252,"column":1}},"key":"M36CEgNaZ9"}],"key":"xkf3HnCss6"},{"type":"paragraph","position":{"start":{"line":254,"column":1},"end":{"line":254,"column":1}},"children":[{"type":"text","value":"A simple validation function like ours above—checking bounds before conversion—would have prevented this disaster. This is why we always validate inputs and outputs in scientific computing!","position":{"start":{"line":254,"column":1},"end":{"line":254,"column":1}},"key":"kcV0B9gKpl"}],"key":"CMKmblg0xL"}],"class":"important","key":"pQQNGXU9r7"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"💡 Computational Thinking: Function Contract Design","position":{"start":{"line":257,"column":1},"end":{"line":257,"column":1}},"key":"qNXHDu167C"}],"key":"EtoAHc0QsQ"},{"type":"paragraph","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"children":[{"type":"text","value":"Every well-designed function follows a contract pattern that applies across all programming:","position":{"start":{"line":260,"column":1},"end":{"line":260,"column":1}},"key":"ZTJWtjrdb9"}],"key":"s1JKRQjIzF"},{"type":"code","lang":"","value":"CONTRACT PATTERN:\n1. Preconditions: What must be true before calling\n2. Postconditions: What will be true after calling\n3. Invariants: What stays unchanged\n4. Side effects: What else happens\n\nExample for kinetic_energy():\n- Precondition: mass > 0, velocity is numeric\n- Postcondition: returns positive energy value\n- Invariant: input values unchanged\n- Side effects: none (pure function)\n\nThis pattern appears in:\n- Database transactions (ACID properties)\n- API design (REST contracts)\n- Parallel computing (thread safety)\n- Unit testing (test contracts)","position":{"start":{"line":262,"column":1},"end":{"line":280,"column":1}},"key":"zjOGXpPPeS"}],"class":"tip","key":"BICR8VlICc"},{"type":"heading","depth":2,"position":{"start":{"line":283,"column":1},"end":{"line":283,"column":1}},"children":[{"type":"text","value":"5.2 Function Arguments In-Depth","position":{"start":{"line":283,"column":1},"end":{"line":283,"column":1}},"key":"qn77D0vrIo"}],"identifier":"id-5-2-function-arguments-in-depth","label":"5.2 Function Arguments In-Depth","html_id":"id-5-2-function-arguments-in-depth","implicit":true,"key":"LWQi3eSIxl"},{"type":"paragraph","position":{"start":{"line":285,"column":1},"end":{"line":285,"column":1}},"children":[{"type":"text","value":"Python provides flexible ways to handle function parameters. Let’s explore this flexibility through three phases: basic usage, common pitfalls, and advanced patterns.","position":{"start":{"line":285,"column":1},"end":{"line":285,"column":1}},"key":"KHBcTUQQZ5"}],"key":"wjMIx80vYW"},{"type":"heading","depth":3,"position":{"start":{"line":287,"column":1},"end":{"line":287,"column":1}},"children":[{"type":"text","value":"Phase 1: Basic - Positional vs Keyword Arguments","position":{"start":{"line":287,"column":1},"end":{"line":287,"column":1}},"key":"fIAq5RDObQ"}],"identifier":"phase-1-basic-positional-vs-keyword-arguments","label":"Phase 1: Basic - Positional vs Keyword Arguments","html_id":"phase-1-basic-positional-vs-keyword-arguments","implicit":true,"key":"RUMCiuRBwh"}],"key":"OFfbCHtQcJ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def calculate_force(mass, acceleration, friction_coeff=0.0):\n    \"\"\"\n    Calculate net force with optional friction.\n    \n    F_net = ma - μmg (simplified friction model)\n    \"\"\"\n    force = mass * acceleration\n    if friction_coeff > 0:\n        friction = friction_coeff * mass * 9.81\n        force -= friction\n    return force\n\n# Different ways to call the same function\nf1 = calculate_force(10, 2)  # Positional only\nf2 = calculate_force(mass=10, acceleration=2)  # Keywords (any order!)\nf3 = calculate_force(10, 2, friction_coeff=0.1)  # Mixed\n\nprint(f\"No friction: {f1:.1f} N\")\nprint(f\"Same (keywords): {f2:.1f} N\")  \nprint(f\"With friction: {f3:.1f} N\")","key":"vyKAOfu3S7"},{"type":"output","id":"AfHnMxA4HjBnhnyq5Jean","data":[],"key":"W7LMbhNScw"}],"key":"LW8YmJ4v4V"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":312,"column":1},"end":{"line":312,"column":1}},"children":[{"type":"text","value":"Phase 2: Intermediate - The Mutable Default Trap","position":{"start":{"line":312,"column":1},"end":{"line":312,"column":1}},"key":"Azhz8ETh1J"}],"identifier":"phase-2-intermediate-the-mutable-default-trap","label":"Phase 2: Intermediate - The Mutable Default Trap","html_id":"phase-2-intermediate-the-mutable-default-trap","implicit":true,"key":"hX4DfH90g5"},{"type":"paragraph","position":{"start":{"line":314,"column":1},"end":{"line":314,"column":1}},"children":[{"type":"text","value":"Here’s a critical bug that has appeared in major scientific software:","position":{"start":{"line":314,"column":1},"end":{"line":314,"column":1}},"key":"n0j9uLacXk"}],"key":"TPhqIwWTdp"}],"key":"Xx3oqPlkHp"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# THE TRAP - DON'T DO THIS!\ndef add_measurement_buggy(value, measurements=[]):\n    \"\"\"Add measurement to list - BUGGY VERSION.\"\"\"\n    measurements.append(value)\n    return measurements\n\n# Watch the disaster unfold\nday1_data = add_measurement_buggy(3.14)\nprint(f\"Day 1: {day1_data}\")\n\nday2_data = add_measurement_buggy(2.71)  # Surprise!\nprint(f\"Day 2: {day2_data}\")  # Contains BOTH days!\n\nprint(f\"Same object? {day1_data is day2_data}\")  # True!","key":"fZSzw2SkAA"},{"type":"output","id":"YhaVR4Tf6-VhSbYlSookT","data":[],"key":"rQFP1V2yy8"}],"key":"UBvvbKdu46"},{"type":"block","children":[{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"⚠️ Common Bug Alert: The Mutable Default Disaster","position":{"start":{"line":333,"column":1},"end":{"line":333,"column":1}},"key":"o5Os2dionF"}],"key":"yrxWDB5Ue2"},{"type":"paragraph","position":{"start":{"line":336,"column":1},"end":{"line":336,"column":1}},"children":[{"type":"text","value":"This bug has appeared in:","position":{"start":{"line":336,"column":1},"end":{"line":336,"column":1}},"key":"fZ0VAsuyZF"}],"key":"VJ7TowuC1R"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":337,"column":1},"end":{"line":340,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":337,"column":1},"end":{"line":337,"column":1}},"children":[{"type":"text","value":"IRAF reduction scripts (accumulated all nights’ data)","position":{"start":{"line":337,"column":1},"end":{"line":337,"column":1}},"key":"pE196XY6m7"}],"key":"ngrLcS5fe4"},{"type":"listItem","spread":true,"position":{"start":{"line":338,"column":1},"end":{"line":338,"column":1}},"children":[{"type":"text","value":"Astropy coordinate transformations (cached incorrect results)","position":{"start":{"line":338,"column":1},"end":{"line":338,"column":1}},"key":"M0LiRoWoWr"}],"key":"dIdsJASPpa"},{"type":"listItem","spread":true,"position":{"start":{"line":339,"column":1},"end":{"line":340,"column":1}},"children":[{"type":"text","value":"Observatory scheduling software (mixed different programs)","position":{"start":{"line":339,"column":1},"end":{"line":339,"column":1}},"key":"CQg34MqyOq"}],"key":"srs9uYvHd8"}],"key":"k9OcCBD8B9"},{"type":"paragraph","position":{"start":{"line":341,"column":1},"end":{"line":341,"column":1}},"children":[{"type":"text","value":"The symptom: data from previous runs mysteriously appears in new analyses.","position":{"start":{"line":341,"column":1},"end":{"line":341,"column":1}},"key":"zS9Zxgemjs"}],"key":"EWztsEaMjy"},{"type":"paragraph","position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"children":[{"type":"text","value":"The cause: Python evaluates default arguments ","position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"key":"I7FOwfmXBg"},{"type":"strong","position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"children":[{"type":"text","value":"once","position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"key":"AmLlT4OZEy"}],"key":"txOxhi4dsA"},{"type":"text","value":" when the ","position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"key":"R50YkW1QQn"},{"type":"inlineCode","value":"def","position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"key":"m8mtrjMNKE"},{"type":"text","value":" statement executes (usually at module import), not each time the function is called.","position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"key":"DILqBitD0A"}],"key":"pg2GMPiBHJ"},{"type":"paragraph","position":{"start":{"line":345,"column":1},"end":{"line":345,"column":1}},"children":[{"type":"text","value":"The fix: always use ","position":{"start":{"line":345,"column":1},"end":{"line":345,"column":1}},"key":"rTgnfZY67B"},{"type":"inlineCode","value":"None","position":{"start":{"line":345,"column":1},"end":{"line":345,"column":1}},"key":"MPFbkUSHmd"},{"type":"text","value":" as default for mutable arguments.","position":{"start":{"line":345,"column":1},"end":{"line":345,"column":1}},"key":"pR2VBVUecW"}],"key":"A8ZkjKdmGD"}],"class":"warning","key":"O1UmRrBrz4"},{"type":"paragraph","position":{"start":{"line":348,"column":1},"end":{"line":348,"column":1}},"children":[{"type":"text","value":"Here’s the correct pattern:","position":{"start":{"line":348,"column":1},"end":{"line":348,"column":1}},"key":"zu72lRzwTs"}],"key":"AJRxcTcFg2"}],"key":"v5FjjJud09"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def add_measurement_fixed(value, measurements=None):\n    \"\"\"Add measurement to list - CORRECT VERSION.\"\"\"\n    if measurements is None:\n        measurements = []  # Create new list each time\n    measurements.append(value)\n    return measurements\n\n# Now it works correctly\nday1_data = add_measurement_fixed(3.14)\nday2_data = add_measurement_fixed(2.71)\nprint(f\"Day 1: {day1_data}\")\nprint(f\"Day 2: {day2_data}\")  # Separate lists!","key":"l5iax7cts9"},{"type":"output","id":"xfp5rMEm1Wq4rIDnYzOhP","data":[],"key":"B6sG9wVaDt"}],"key":"ySpXuMKdcA"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":365,"column":1},"end":{"line":365,"column":1}},"children":[{"type":"text","value":"Phase 3: Advanced - Variable Arguments (*args and **kwargs)","position":{"start":{"line":365,"column":1},"end":{"line":365,"column":1}},"key":"JLhtHgtaFJ"}],"identifier":"phase-3-advanced-variable-arguments-args-and-kwargs","label":"Phase 3: Advanced - Variable Arguments (*args and **kwargs)","html_id":"phase-3-advanced-variable-arguments-args-and-kwargs","implicit":true,"key":"dRTGKLpbAw"}],"key":"MY5eG7bO6S"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def statistical_summary(*values, method='all'):\n    \"\"\"\n    Calculate statistics for any number of values.\n    \n    *args collects positional arguments into a tuple\n    \"\"\"\n    if not values:\n        return None\n    \n    import math\n    \n    n = len(values)\n    mean = sum(values) / n\n    \n    if method == 'mean':\n        return mean\n    \n    # Calculate variance and std dev\n    variance = sum((x - mean)**2 for x in values) / n\n    std_dev = math.sqrt(variance)\n    \n    if method == 'all':\n        return {\n            'n': n,\n            'mean': mean,\n            'std': std_dev,\n            'min': min(values),\n            'max': max(values)\n        }\n    \n    return mean\n\n# Works with any number of arguments\nprint(statistical_summary(1, 2, 3, 4, 5))\nprint(statistical_summary(2.5, 3.7, 1.2, 4.8, 3.3, 2.9, method='mean'))","key":"cqqTGbu1Cb"},{"type":"output","id":"mHHpk-RngJeaVJnnncgLW","data":[],"key":"nq8OvsZdBt"}],"key":"eUkpRe5E5Y"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def run_simulation(particles, time_step, **options):\n    \"\"\"\n    Run particle simulation with flexible options.\n    \n    **kwargs collects keyword arguments into a dictionary\n    \"\"\"\n    # Default options\n    defaults = {\n        'gravity': True,\n        'collisions': False,\n        'verbose': False,\n        'max_steps': 1000\n    }\n    \n    # Update with user options\n    config = defaults.copy()\n    config.update(options)\n    \n    if config['verbose']:\n        print(f\"=== Simulation Configuration ===\")\n        print(f\"Particles: {particles}\")\n        print(f\"Time step: {time_step}s\")\n        for key, value in config.items():\n            print(f\"  {key}: {value}\")\n    \n    # Simulation would run here\n    return f\"Simulated {particles} particles\"\n\n# Simple call\nrun_simulation(100, 0.01)\n\n# Complex call with many options\nresult = run_simulation(\n    50, 0.001,\n    gravity=True,\n    collisions=True,\n    verbose=True,\n    boundary='periodic'\n)","key":"YqaAXM5jdM"},{"type":"output","id":"rXrWGzbNBKrvgKt-Rzs6S","data":[],"key":"OS0htpzx3v"}],"key":"hMJAKygwP5"},{"type":"block","children":[{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🔍 Check Your Understanding #2","position":{"start":{"line":447,"column":1},"end":{"line":447,"column":1}},"key":"BRSIJS9Asi"}],"key":"ZM96E2kHN5"},{"type":"paragraph","position":{"start":{"line":450,"column":1},"end":{"line":450,"column":1}},"children":[{"type":"text","value":"What’s wrong with this function definition, and how would you fix it?","position":{"start":{"line":450,"column":1},"end":{"line":450,"column":1}},"key":"v2a68d2fOY"}],"key":"Kd96cJ2DSx"},{"type":"code","lang":"python","value":"def process_data(values, scale=1.0, *extra, normalize=True):\n    # Process data with options\n    pass","position":{"start":{"line":452,"column":1},"end":{"line":456,"column":1}},"key":"cJkyX5iO07"},{"type":"details","children":[{"type":"summary","children":[{"type":"text","value":"Answer","key":"jAiEmSCPZc"}],"key":"Ew7HFDsnpw"},{"type":"paragraph","children":[{"type":"text","value":"The parameter order is wrong! Python requires this order:","key":"CGWdeo5iqX"}],"key":"kfCsUydQ59"},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Regular positional parameters","key":"HAcQkwzr2A"}],"key":"K3Jk7wmS0J"}],"key":"nPoLkfyeeG"},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"*args (if any)","key":"ppHyzrh7eb"}],"key":"rLxKXJzmdJ"}],"key":"uOsOgFq8hp"},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Keyword parameters with defaults","key":"B5vKnrJpn8"}],"key":"OsIw5BkA4u"}],"key":"psPfiFGLF6"},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"**kwargs (if any)","key":"Nl7nAtXjUp"}],"key":"iNnklmH4sn"}],"key":"rK8JFNtBcS"}],"key":"uTAqOeneI5"},{"type":"paragraph","children":[{"type":"text","value":"Correct version:","key":"xqKHAQXnST"}],"key":"qXAmNKfIdB"},{"type":"code","lang":"python","meta":null,"value":"def process_data(values, *extra, scale=1.0, normalize=True):\n    # Now the order is correct\n    pass","key":"kvlHWqevr7"},{"type":"paragraph","children":[{"type":"text","value":"The original would give a SyntaxError because *extra can’t come after a keyword parameter with a default.","key":"VPNZ6Eabsq"}],"key":"RusYNDMAef"}],"key":"Xew6ZaMhaK"}],"class":"question","key":"fW00Y7RhkG"},{"type":"heading","depth":2,"position":{"start":{"line":479,"column":1},"end":{"line":479,"column":1}},"children":[{"type":"text","value":"5.3 Scope and Namespaces","position":{"start":{"line":479,"column":1},"end":{"line":479,"column":1}},"key":"ygnYDn90Rt"}],"identifier":"id-5-3-scope-and-namespaces","label":"5.3 Scope and Namespaces","html_id":"id-5-3-scope-and-namespaces","implicit":true,"key":"vR01ERsR6q"},{"type":"paragraph","position":{"start":{"line":481,"column":1},"end":{"line":481,"column":1}},"children":[{"type":"text","value":"Understanding scope—where variables can be accessed—is crucial for writing bug-free code. Python’s scope rules determine which variables are visible at any point in your program. Without understanding scope, you’ll encounter confusing bugs where variables don’t have the values you expect, or worse, where changing a variable in one place mysteriously affects code elsewhere.","position":{"start":{"line":481,"column":1},"end":{"line":481,"column":1}},"key":"tUWC0hqM60"}],"key":"aSsboTMaFt"},{"type":"heading","depth":3,"position":{"start":{"line":483,"column":1},"end":{"line":483,"column":1}},"children":[{"type":"text","value":"The LEGB Rule","position":{"start":{"line":483,"column":1},"end":{"line":483,"column":1}},"key":"pB9vBB2s9f"}],"identifier":"the-legb-rule","label":"The LEGB Rule","html_id":"the-legb-rule","implicit":true,"key":"b0fZyRLIB6"},{"type":"paragraph","position":{"start":{"line":485,"column":1},"end":{"line":485,"column":1}},"children":[{"type":"text","value":"Python resolves variable names using the LEGB rule, searching in this order:","position":{"start":{"line":485,"column":1},"end":{"line":485,"column":1}},"key":"by78OrqgIg"}],"key":"gw7QVxTiJN"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":486,"column":1},"end":{"line":490,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":486,"column":1},"end":{"line":486,"column":1}},"children":[{"type":"strong","position":{"start":{"line":486,"column":1},"end":{"line":486,"column":1}},"children":[{"type":"text","value":"L","position":{"start":{"line":486,"column":1},"end":{"line":486,"column":1}},"key":"FYqWDrVrgq"}],"key":"pvPU64Brlc"},{"type":"text","value":"ocal: Inside the current function","position":{"start":{"line":486,"column":1},"end":{"line":486,"column":1}},"key":"z9DIxZSsOS"}],"key":"OrX9ZVdBzK"},{"type":"listItem","spread":true,"position":{"start":{"line":487,"column":1},"end":{"line":487,"column":1}},"children":[{"type":"strong","position":{"start":{"line":487,"column":1},"end":{"line":487,"column":1}},"children":[{"type":"text","value":"E","position":{"start":{"line":487,"column":1},"end":{"line":487,"column":1}},"key":"Fq018VOghw"}],"key":"X5lUVaCwBf"},{"type":"text","value":"nclosing: In the enclosing function (for nested functions)","position":{"start":{"line":487,"column":1},"end":{"line":487,"column":1}},"key":"vRG2YsWSBn"}],"key":"msQEHwlQDe"},{"type":"listItem","spread":true,"position":{"start":{"line":488,"column":1},"end":{"line":488,"column":1}},"children":[{"type":"strong","position":{"start":{"line":488,"column":1},"end":{"line":488,"column":1}},"children":[{"type":"text","value":"G","position":{"start":{"line":488,"column":1},"end":{"line":488,"column":1}},"key":"h1ndTjgNVl"}],"key":"UAL3rXQDvD"},{"type":"text","value":"lobal: At the top level of the module","position":{"start":{"line":488,"column":1},"end":{"line":488,"column":1}},"key":"zUsMq839hL"}],"key":"koqyRT1VN7"},{"type":"listItem","spread":true,"position":{"start":{"line":489,"column":1},"end":{"line":490,"column":1}},"children":[{"type":"strong","position":{"start":{"line":489,"column":1},"end":{"line":489,"column":1}},"children":[{"type":"text","value":"B","position":{"start":{"line":489,"column":1},"end":{"line":489,"column":1}},"key":"ici6i3SmQG"}],"key":"meb4TUKF47"},{"type":"text","value":"uilt-in: In the built-in namespace (print, len, etc.)","position":{"start":{"line":489,"column":1},"end":{"line":489,"column":1}},"key":"uAhml8QuTU"}],"key":"mCU1XpjFJL"}],"key":"QUZ2Qy3dpe"}],"key":"e53PFCA0y2"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Demonstrating LEGB with physics context\nspeed_of_light = 3e8  # Global scope\n\ndef calculate_energy():\n    speed_of_light = 3.0e8  # Enclosing scope (shadows global)\n    \n    def relativistic_energy(mass):\n        speed_of_light = 299792458  # Local scope (shadows enclosing)\n        \n        # Local scope sees its own speed_of_light\n        print(f\"Inside relativistic: c = {speed_of_light} m/s\")\n        return mass * speed_of_light**2\n    \n    # Call inner function\n    energy = relativistic_energy(1e-30)\n    \n    # Enclosing scope sees its own speed_of_light\n    print(f\"Inside calculate: c = {speed_of_light} m/s\")\n    return energy\n\nresult = calculate_energy()\nprint(f\"Global: c = {speed_of_light} m/s\")  # Unchanged!","key":"nruggnVexR"},{"type":"output","id":"AEsuKwUsFFkZL9sd6ofLz","data":[],"key":"rSZjnWBNUw"}],"key":"GCj0DNoNkq"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":516,"column":1},"end":{"line":516,"column":1}},"children":[{"type":"text","value":"Each function creates its own namespace—a mapping of names to objects. When you use a variable, Python searches through these namespaces in LEGB order until it finds the name.","position":{"start":{"line":516,"column":1},"end":{"line":516,"column":1}},"key":"uWGi8OBURm"}],"key":"bbItHn8iii"},{"type":"heading","depth":3,"position":{"start":{"line":518,"column":1},"end":{"line":518,"column":1}},"children":[{"type":"text","value":"The UnboundLocalError Trap","position":{"start":{"line":518,"column":1},"end":{"line":518,"column":1}},"key":"Z7dZeYlPl3"}],"identifier":"the-unboundlocalerror-trap","label":"The UnboundLocalError Trap","html_id":"the-unboundlocalerror-trap","implicit":true,"key":"ehW6IZv74b"}],"key":"I8hUkMhHCf"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"counter = 0  # Global\n\ndef increment_wrong():\n    # This will crash with UnboundLocalError!\n    # counter += 1  # Python thinks this is local\n    pass\n\ndef increment_fixed():\n    global counter  # Explicitly use global\n    counter += 1\n    return counter\n\n# Better approach - avoid global state entirely\ndef increment_better(current_count):\n    return current_count + 1\n\n# Test the better approach\ncount = 0\ncount = increment_better(count)\nprint(f\"Count: {count}\")","key":"HRCBDjReHj"},{"type":"output","id":"9_jvwzHtlT36ei-P40UQF","data":[],"key":"J0LDe6ttXJ"}],"key":"r4dirRHyis"},{"type":"block","children":[{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"⚠️ Common Bug Alert: UnboundLocalError","position":{"start":{"line":543,"column":1},"end":{"line":543,"column":1}},"key":"shnYYB3Lcx"}],"key":"JAFhSLtOur"},{"type":"paragraph","position":{"start":{"line":546,"column":1},"end":{"line":546,"column":1}},"children":[{"type":"text","value":"The error happens because Python sees you’re assigning to ","position":{"start":{"line":546,"column":1},"end":{"line":546,"column":1}},"key":"tk6quGnwgH"},{"type":"inlineCode","value":"counter","position":{"start":{"line":546,"column":1},"end":{"line":546,"column":1}},"key":"N99zGfpV8R"},{"type":"text","value":", assumes it’s local, but then can’t find a local value to increment. This bug often appears in simulation scripts that try to maintain running totals.","position":{"start":{"line":546,"column":1},"end":{"line":546,"column":1}},"key":"krJzEzLJVh"}],"key":"TDsdcS5eHp"},{"type":"paragraph","position":{"start":{"line":548,"column":1},"end":{"line":548,"column":1}},"children":[{"type":"text","value":"Symptoms:","position":{"start":{"line":548,"column":1},"end":{"line":548,"column":1}},"key":"afNoSiSsyR"}],"key":"irUC26TkC4"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":549,"column":1},"end":{"line":552,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":549,"column":1},"end":{"line":549,"column":1}},"children":[{"type":"text","value":"Variable works fine when reading","position":{"start":{"line":549,"column":1},"end":{"line":549,"column":1}},"key":"dJCi2Emaje"}],"key":"AFJI35TNw2"},{"type":"listItem","spread":true,"position":{"start":{"line":550,"column":1},"end":{"line":550,"column":1}},"children":[{"type":"text","value":"Crashes when trying to modify","position":{"start":{"line":550,"column":1},"end":{"line":550,"column":1}},"key":"uwASrjeahi"}],"key":"CBQDjk9bjJ"},{"type":"listItem","spread":true,"position":{"start":{"line":551,"column":1},"end":{"line":552,"column":1}},"children":[{"type":"text","value":"Error message mentions “referenced before assignment”","position":{"start":{"line":551,"column":1},"end":{"line":551,"column":1}},"key":"ww7lS8G7WT"}],"key":"bqx9ADKxMc"}],"key":"QEa3kR0AGT"},{"type":"paragraph","position":{"start":{"line":553,"column":1},"end":{"line":553,"column":1}},"children":[{"type":"text","value":"Fix: Either use ","position":{"start":{"line":553,"column":1},"end":{"line":553,"column":1}},"key":"TxxvA6kTZh"},{"type":"inlineCode","value":"global","position":{"start":{"line":553,"column":1},"end":{"line":553,"column":1}},"key":"W72nWBw3ch"},{"type":"text","value":" keyword or (better) pass the value explicitly.","position":{"start":{"line":553,"column":1},"end":{"line":553,"column":1}},"key":"wptBl4JPSp"}],"key":"f3AR51ULCS"}],"class":"warning","key":"ejAq9TCtpW"},{"type":"heading","depth":3,"position":{"start":{"line":556,"column":1},"end":{"line":556,"column":1}},"children":[{"type":"text","value":"Closures: Functions That Remember","position":{"start":{"line":556,"column":1},"end":{"line":556,"column":1}},"key":"kd6HJFhUu5"}],"identifier":"closures-functions-that-remember","label":"Closures: Functions That Remember","html_id":"closures-functions-that-remember","implicit":true,"key":"usVoPzoUIE"},{"type":"paragraph","position":{"start":{"line":558,"column":1},"end":{"line":558,"column":1}},"children":[{"type":"text","value":"Closures are functions that “remember” variables from their enclosing scope:","position":{"start":{"line":558,"column":1},"end":{"line":558,"column":1}},"key":"ZLwTn9eDH8"}],"key":"W0mxb4uhJT"}],"key":"A6o2Bhuj0c"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def create_integrator(method='rectangle'):\n    \"\"\"\n    Create a numerical integrator with a specific method.\n    \n    The returned function 'remembers' the method.\n    \"\"\"\n    def integrate(func, a, b, n=100):\n        \"\"\"Integrate func from a to b using n steps.\"\"\"\n        dx = (b - a) / n\n        \n        if method == 'rectangle':\n            # Rectangle rule (simplest integration)\n            total = 0\n            for i in range(n):\n                x = a + i * dx\n                total += func(x) * dx\n            return total\n            \n        elif method == 'midpoint':\n            # Midpoint rule (more accurate)\n            total = 0\n            for i in range(n):\n                x = a + (i + 0.5) * dx\n                total += func(x) * dx\n            return total\n    \n    return integrate\n\n# Create specialized integrators\nrect_integrate = create_integrator('rectangle')\nmid_integrate = create_integrator('midpoint')\n\n# Test with x^2 from 0 to 1 (exact answer = 1/3)\ndef f(x):\n    return x**2\n\nrect_result = rect_integrate(f, 0, 1, 100)\nmid_result = mid_integrate(f, 0, 1, 100)\nexact = 1/3\n\nprint(f\"Rectangle rule: {rect_result:.6f} (error: {abs(rect_result-exact):.6f})\")\nprint(f\"Midpoint rule:  {mid_result:.6f} (error: {abs(mid_result-exact):.6f})\")\nprint(f\"Exact:          {exact:.6f}\")","key":"tygR5eNltM"},{"type":"output","id":"P7Epvuy1WGDxoFBQoPLCk","data":[],"key":"E1j8acnRK8"}],"key":"kctmpT1KXw"},{"type":"block","children":[{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🔍 Check Your Understanding #3","position":{"start":{"line":606,"column":1},"end":{"line":606,"column":1}},"key":"AucffF2tKq"}],"key":"CuFEv2B78a"},{"type":"paragraph","position":{"start":{"line":609,"column":1},"end":{"line":609,"column":1}},"children":[{"type":"text","value":"In nested functions, if both the inner and outer function define a variable ‘x’, which ‘x’ does the inner function see? Why?","position":{"start":{"line":609,"column":1},"end":{"line":609,"column":1}},"key":"ZaaLsWFMPI"}],"key":"cc1utkrboG"},{"type":"code","lang":"python","value":"def outer():\n    x = \"outer\"\n    \n    def inner():\n        x = \"inner\"\n        print(f\"Inner sees: {x}\")\n    \n    inner()\n    print(f\"Outer sees: {x}\")\n\nouter()","position":{"start":{"line":611,"column":1},"end":{"line":623,"column":1}},"key":"RKj1if9KtR"},{"type":"details","children":[{"type":"summary","children":[{"type":"text","value":"Answer","key":"Is0PQUzTne"}],"key":"hoRmlJWgbe"},{"type":"paragraph","children":[{"type":"text","value":"The inner function sees its own local ","key":"zO2TGgSLWe"},{"type":"inlineCode","value":"x = \"inner\"","key":"CGVM3lUSG3"},{"type":"text","value":", and the outer function sees its own ","key":"qvkh2cPFlS"},{"type":"inlineCode","value":"x = \"outer\"","key":"s4pwQyJGAh"},{"type":"text","value":". They don’t interfere with each other because each function has its own local namespace.","key":"LXWbEnRJ6B"}],"key":"VTHbdmPnTO"},{"type":"paragraph","children":[{"type":"text","value":"Output:","key":"XZyY9Y77Up"}],"key":"SwYKE5FHJw"},{"type":"code","lang":null,"meta":null,"value":"Inner sees: inner\nOuter sees: outer","key":"mamRLrc15c"},{"type":"paragraph","children":[{"type":"text","value":"If the inner function didn’t define its own ","key":"x9ywwCf5r3"},{"type":"inlineCode","value":"x","key":"oo73vhhaIu"},{"type":"text","value":", it would see the outer’s ","key":"jAoIhg0b7r"},{"type":"inlineCode","value":"x","key":"yeoC8L7pmh"},{"type":"text","value":" due to the LEGB rule (it would find it in the Enclosing scope).","key":"X8OS9mZ7dg"}],"key":"prClAFLRFF"}],"key":"yJM5xhF3RB"}],"class":"question","key":"dWSoA3kozQ"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"💡 Computational Thinking: Why Global Variables Are Dangerous","position":{"start":{"line":640,"column":1},"end":{"line":640,"column":1}},"key":"rwH7d5yV1T"}],"key":"aUoQ3aKDyr"},{"type":"paragraph","position":{"start":{"line":643,"column":1},"end":{"line":643,"column":1}},"children":[{"type":"text","value":"Global variables violate the “principle of least surprise” that appears everywhere in computing:","position":{"start":{"line":643,"column":1},"end":{"line":643,"column":1}},"key":"pzu9MsIZhR"}],"key":"PVhsz5vRrn"},{"type":"code","lang":"","value":"HIDDEN STATE ANTI-PATTERN:\n- Function behavior depends on external state\n- Can't understand function in isolation\n- Testing requires global setup\n- Parallel processing becomes impossible\n\nReal disaster: ESO pipeline bug (2018)\n- Global config variable for instrument mode\n- Thread A changes mode for its reduction\n- Thread B reads wrong mode mid-process\n- Months of data reduced incorrectly\n\nBetter pattern: Explicit State Passing\nBAD:  current_filter = 'V'; take_image()\nGOOD: take_image(filter='V')","position":{"start":{"line":645,"column":1},"end":{"line":661,"column":1}},"key":"Ty5eLRWmCp"}],"class":"tip","key":"G0V0HMAzvM"},{"type":"heading","depth":2,"position":{"start":{"line":664,"column":1},"end":{"line":664,"column":1}},"children":[{"type":"text","value":"5.4 Functional Programming Elements","position":{"start":{"line":664,"column":1},"end":{"line":664,"column":1}},"key":"XfsZmoNH97"}],"identifier":"id-5-4-functional-programming-elements","label":"5.4 Functional Programming Elements","html_id":"id-5-4-functional-programming-elements","implicit":true,"key":"uWptaGWSSZ"},{"type":"paragraph","position":{"start":{"line":666,"column":1},"end":{"line":666,"column":1}},"children":[{"type":"text","value":"Python supports functional programming—a style that treats computation as the evaluation of mathematical functions. These concepts are essential for modern scientific frameworks like JAX and lead to cleaner, more testable code.","position":{"start":{"line":666,"column":1},"end":{"line":666,"column":1}},"key":"BkyBo4G0bu"}],"key":"DiNM6OIg17"},{"type":"heading","depth":3,"position":{"start":{"line":668,"column":1},"end":{"line":668,"column":1}},"children":[{"type":"text","value":"Lambda Functions","position":{"start":{"line":668,"column":1},"end":{"line":668,"column":1}},"key":"No3r5wa8lc"}],"identifier":"lambda-functions","label":"Lambda Functions","html_id":"lambda-functions","implicit":true,"key":"RDpbqKfLe7"},{"type":"paragraph","position":{"start":{"line":670,"column":1},"end":{"line":670,"column":1}},"children":[{"type":"text","value":"Lambda functions are small, anonymous functions defined inline:","position":{"start":{"line":670,"column":1},"end":{"line":670,"column":1}},"key":"tPHCAwRKoc"}],"key":"AymUMwCerk"}],"key":"PYCuzFBlw1"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Sort particles by different properties\nparticles = [\n    {'id': 1, 'mass': 1.67e-27, 'charge': 1.6e-19, 'v': 1e6},  # proton\n    {'id': 2, 'mass': 9.11e-31, 'charge': -1.6e-19, 'v': 2e6},  # electron\n    {'id': 3, 'mass': 1.67e-27, 'charge': 0, 'v': 5e5},  # neutron\n]\n\n# Sort by mass (lightest first)\nby_mass = sorted(particles, key=lambda p: p['mass'])\nprint(\"Sorted by mass:\")\nfor p in by_mass:\n    print(f\"  Particle {p['id']}: mass = {p['mass']:.2e} kg\")\n\n# Sort by kinetic energy\nby_energy = sorted(particles, key=lambda p: 0.5 * p['mass'] * p['v']**2)\nprint(\"\\nSorted by kinetic energy:\")\nfor p in by_energy:\n    energy = 0.5 * p['mass'] * p['v']**2\n    print(f\"  Particle {p['id']}: KE = {energy:.2e} J\")","key":"uQnvscJn9C"},{"type":"output","id":"coVmcAE98ImDcd1I_jqX2","data":[],"key":"yOeyYTDnzG"}],"key":"RXYUEeW3Aa"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":694,"column":1},"end":{"line":694,"column":1}},"children":[{"type":"text","value":"Map, Filter, and Reduce","position":{"start":{"line":694,"column":1},"end":{"line":694,"column":1}},"key":"UyDoioA1mU"}],"identifier":"map-filter-and-reduce","label":"Map, Filter, and Reduce","html_id":"map-filter-and-reduce","implicit":true,"key":"pHB0ga1Pvd"},{"type":"paragraph","position":{"start":{"line":696,"column":1},"end":{"line":696,"column":1}},"children":[{"type":"text","value":"These functional tools transform how you process data:","position":{"start":{"line":696,"column":1},"end":{"line":696,"column":1}},"key":"bPwLWrjCGK"}],"key":"pkT8zYt2ts"}],"key":"gA53o8RUmh"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from functools import reduce\n\n# Sample measurements with noise\nmeasurements = [\n    9.81, 9.79, 9.83, 99.9,  # Bad measurement!\n    9.80, 9.82, 9.78, 9.81\n]\n\n# FILTER: Remove outliers\nmean_estimate = 9.81\ntolerance = 0.1\ngood_data = list(filter(\n    lambda x: abs(x - mean_estimate) < tolerance,\n    measurements\n))\nprint(f\"Filtered {len(measurements) - len(good_data)} outliers\")\nprint(f\"Good data: {good_data}\")\n\n# MAP: Convert to different units\nmeasurements_in_ft_s2 = list(map(\n    lambda x: x * 3.28084,  # m/s² to ft/s²\n    good_data\n))\nprint(f\"In ft/s²: {[f'{x:.2f}' for x in measurements_in_ft_s2]}\")\n\n# REDUCE: Calculate mean\nmean = reduce(lambda a, b: a + b, good_data) / len(good_data)\nprint(f\"Mean: {mean:.3f} m/s²\")\n\n# Or more complex - calculate running variance\ndef variance_accumulator(acc, value):\n    \"\"\"Accumulate sum and sum of squares.\"\"\"\n    sum_val, sum_sq, count = acc\n    return (sum_val + value, sum_sq + value**2, count + 1)\n\nsum_val, sum_sq, n = reduce(variance_accumulator, good_data, (0, 0, 0))\nvariance = (sum_sq / n) - (sum_val / n)**2\nprint(f\"Variance: {variance:.6f}\")","key":"HFLDI97HKL"},{"type":"output","id":"16zTbPH-f1uv83_XjI2hL","data":[],"key":"EjWJHVAdad"}],"key":"QrkrquHwmx"},{"type":"block","children":[{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🔍 Check Your Understanding #4","position":{"start":{"line":739,"column":1},"end":{"line":739,"column":1}},"key":"irQ1HdmrfC"}],"key":"OYEnV3YEzd"},{"type":"paragraph","position":{"start":{"line":742,"column":1},"end":{"line":742,"column":1}},"children":[{"type":"text","value":"Rewrite this loop using functional programming:","position":{"start":{"line":742,"column":1},"end":{"line":742,"column":1}},"key":"W2dxzxqVOT"}],"key":"JVCjtscekh"},{"type":"code","lang":"python","value":"# Find all positive values and square them\nresults = []\nfor x in data:\n    if x > 0:\n        results.append(x**2)","position":{"start":{"line":744,"column":1},"end":{"line":750,"column":1}},"key":"DkA4qNwVRI"},{"type":"details","children":[{"type":"summary","children":[{"type":"text","value":"Answer","key":"gClTS0bA35"}],"key":"ZxvkTvpYHc"},{"type":"paragraph","children":[{"type":"text","value":"Two equivalent functional approaches:","key":"v5E5R9yqdM"}],"key":"AQkwmf4uI9"},{"type":"code","lang":"python","meta":null,"value":"# Using filter and map\nresults = list(map(\n    lambda x: x**2,\n    filter(lambda x: x > 0, data)\n))\n\n# Using list comprehension (more Pythonic)\nresults = [x**2 for x in data if x > 0]","key":"f4nlI6QijJ"},{"type":"paragraph","children":[{"type":"text","value":"The list comprehension is generally preferred in Python for readability, but understanding the functional approach prepares you for libraries like JAX that require functional style.","key":"qU2T8Lnaeu"}],"key":"kn94zhJuao"}],"key":"D6CrxPGZrD"}],"class":"question","key":"iu3eAOPczw"},{"type":"heading","depth":3,"position":{"start":{"line":773,"column":1},"end":{"line":773,"column":1}},"children":[{"type":"text","value":"Functions as First-Class Objects","position":{"start":{"line":773,"column":1},"end":{"line":773,"column":1}},"key":"jcbHoCdMgs"}],"identifier":"functions-as-first-class-objects","label":"Functions as First-Class Objects","html_id":"functions-as-first-class-objects","implicit":true,"key":"vwBUCiyFEZ"},{"type":"paragraph","position":{"start":{"line":775,"column":1},"end":{"line":775,"column":1}},"children":[{"type":"text","value":"In Python, functions are objects you can pass around:","position":{"start":{"line":775,"column":1},"end":{"line":775,"column":1}},"key":"zdgXD3MF9g"}],"key":"h4R6CKjA8t"}],"key":"tgTYdG5VNZ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def mean_aggregator(values):\n    \"\"\"Average values - best for Gaussian noise.\"\"\"\n    return sum(values) / len(values)\n\ndef median_aggregator(values):\n    \"\"\"Median - robust against outliers.\"\"\"\n    sorted_vals = sorted(values)\n    n = len(sorted_vals)\n    if n % 2 == 0:\n        return (sorted_vals[n//2-1] + sorted_vals[n//2]) / 2\n    return sorted_vals[n//2]\n\ndef process_trials(data, aggregator_func):\n    \"\"\"\n    Process experimental trials with specified aggregation.\n    \n    aggregator_func determines how to combine results.\n    \"\"\"\n    print(f\"Using {aggregator_func.__name__} aggregation\")\n    result = aggregator_func(data)\n    return result\n\n# Simulated repeated measurements\ntrials = [9.81, 9.79, 9.83, 15.0, 9.80]  # Note the outlier!\n\nmean_result = process_trials(trials, mean_aggregator)\nmedian_result = process_trials(trials, median_aggregator)\n\nprint(f\"Mean:   {mean_result:.2f} (affected by outlier)\")\nprint(f\"Median: {median_result:.2f} (robust to outlier)\")","key":"ICrcTRFUYI"},{"type":"output","id":"QFLif50_upXdva_ALtKX7","data":[],"key":"d6sZw3dOin"}],"key":"f2PU30frZ7"},{"type":"block","children":[{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🌟 Why This Matters: Modern Frameworks Require Functional Thinking","position":{"start":{"line":810,"column":1},"end":{"line":810,"column":1}},"key":"fUXloetFtP"}],"key":"CZoPU5Iasy"},{"type":"paragraph","position":{"start":{"line":813,"column":1},"end":{"line":813,"column":1}},"children":[{"type":"text","value":"Functional programming isn’t just academic—it’s essential for modern scientific computing:","position":{"start":{"line":813,"column":1},"end":{"line":813,"column":1}},"key":"TT6gOMNN9U"}],"key":"BOF4bDQfk9"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":815,"column":1},"end":{"line":819,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":815,"column":1},"end":{"line":815,"column":1}},"children":[{"type":"strong","position":{"start":{"line":815,"column":1},"end":{"line":815,"column":1}},"children":[{"type":"text","value":"JAX","position":{"start":{"line":815,"column":1},"end":{"line":815,"column":1}},"key":"j8vomP8Uky"}],"key":"scg2HjU3Ix"},{"type":"text","value":" (Google’s NumPy replacement) requires pure functions for automatic differentiation","position":{"start":{"line":815,"column":1},"end":{"line":815,"column":1}},"key":"QjCqpwE1AJ"}],"key":"yaAO52kBOs"},{"type":"listItem","spread":true,"position":{"start":{"line":816,"column":1},"end":{"line":816,"column":1}},"children":[{"type":"strong","position":{"start":{"line":816,"column":1},"end":{"line":816,"column":1}},"children":[{"type":"text","value":"Parallel processing","position":{"start":{"line":816,"column":1},"end":{"line":816,"column":1}},"key":"etMbdvbu2l"}],"key":"m8mV478rlF"},{"type":"text","value":" works best with stateless functions","position":{"start":{"line":816,"column":1},"end":{"line":816,"column":1}},"key":"rHgwauSpAZ"}],"key":"PJPGHXKWfy"},{"type":"listItem","spread":true,"position":{"start":{"line":817,"column":1},"end":{"line":817,"column":1}},"children":[{"type":"strong","position":{"start":{"line":817,"column":1},"end":{"line":817,"column":1}},"children":[{"type":"text","value":"Testing","position":{"start":{"line":817,"column":1},"end":{"line":817,"column":1}},"key":"U2aUNMyXw5"}],"key":"N0SGdm2NnJ"},{"type":"text","value":" is trivial when functions have no side effects","position":{"start":{"line":817,"column":1},"end":{"line":817,"column":1}},"key":"p9tucf2IJr"}],"key":"VlQZ6NMxWM"},{"type":"listItem","spread":true,"position":{"start":{"line":818,"column":1},"end":{"line":819,"column":1}},"children":[{"type":"strong","position":{"start":{"line":818,"column":1},"end":{"line":818,"column":1}},"children":[{"type":"text","value":"GPU computing","position":{"start":{"line":818,"column":1},"end":{"line":818,"column":1}},"key":"g75PebRFH8"}],"key":"uysIGuMQzR"},{"type":"text","value":" maps naturally to functional operations","position":{"start":{"line":818,"column":1},"end":{"line":818,"column":1}},"key":"Ge6T0xooCz"}],"key":"BfQJ9OJ83M"}],"key":"GCrS3wkGHx"},{"type":"paragraph","position":{"start":{"line":820,"column":1},"end":{"line":820,"column":1}},"children":[{"type":"text","value":"Example: In JAX, you can automatically differentiate through an entire orbital mechanics simulation if it’s written functionally. This enables advanced techniques like Hamiltonian Monte Carlo that would be impossibly complex to implement manually.","position":{"start":{"line":820,"column":1},"end":{"line":820,"column":1}},"key":"G65t1zpKMt"}],"key":"ih3O9NNni3"}],"class":"important","key":"vK8cPSHF0K"},{"type":"heading","depth":2,"position":{"start":{"line":823,"column":1},"end":{"line":823,"column":1}},"children":[{"type":"text","value":"5.5 Modules and Packages","position":{"start":{"line":823,"column":1},"end":{"line":823,"column":1}},"key":"VhPnLGcWH8"}],"identifier":"id-5-5-modules-and-packages","label":"5.5 Modules and Packages","html_id":"id-5-5-modules-and-packages","implicit":true,"key":"sjrQ5gJOv8"},{"type":"paragraph","position":{"start":{"line":825,"column":1},"end":{"line":825,"column":1}},"children":[{"type":"text","value":"As your analysis grows from scripts to projects, organization becomes critical. Let’s build a module step by step.","position":{"start":{"line":825,"column":1},"end":{"line":825,"column":1}},"key":"pvdjYU3yxo"}],"key":"XQl1JnkrLZ"},{"type":"heading","depth":3,"position":{"start":{"line":827,"column":1},"end":{"line":827,"column":1}},"children":[{"type":"text","value":"Phase 1: Create Basic Module Structure","position":{"start":{"line":827,"column":1},"end":{"line":827,"column":1}},"key":"zLH8dnmfhF"}],"identifier":"phase-1-create-basic-module-structure","label":"Phase 1: Create Basic Module Structure","html_id":"phase-1-create-basic-module-structure","implicit":true,"key":"Ph4F49aaEC"},{"type":"paragraph","position":{"start":{"line":829,"column":1},"end":{"line":829,"column":1}},"children":[{"type":"text","value":"Save this as ","position":{"start":{"line":829,"column":1},"end":{"line":829,"column":1}},"key":"x33IYMPsNp"},{"type":"inlineCode","value":"physics_calc.py","position":{"start":{"line":829,"column":1},"end":{"line":829,"column":1}},"key":"SWchGRzxZG"},{"type":"text","value":":","position":{"start":{"line":829,"column":1},"end":{"line":829,"column":1}},"key":"sLedBfy8GR"}],"key":"nXYct7HuB3"}],"key":"SAPmxz15iY"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# physics_calc.py - Part 1: Constants\n\"\"\"\nBasic physics calculations module.\n\nThis module provides fundamental physics computations.\n\"\"\"\n\n# Physical constants\nGRAVITATIONAL_CONSTANT = 6.67430e-11  # m³/kg/s²\nSPEED_OF_LIGHT = 299792458  # m/s\nPLANCK_CONSTANT = 6.62607015e-34  # J⋅s\nBOLTZMANN_CONSTANT = 1.380649e-23  # J/K\n\nprint(\"Loading physics_calc module...\")","key":"wTuiyMc6QZ"},{"type":"output","id":"b0qo-HBaHAj2gmeiZpl3B","data":[],"key":"ib8uab5tXh"}],"key":"vYNzICXDIL"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":848,"column":1},"end":{"line":848,"column":1}},"children":[{"type":"text","value":"Phase 2: Add Core Functions","position":{"start":{"line":848,"column":1},"end":{"line":848,"column":1}},"key":"T7PBACywcR"}],"identifier":"phase-2-add-core-functions","label":"Phase 2: Add Core Functions","html_id":"phase-2-add-core-functions","implicit":true,"key":"V7AgVQkXzb"}],"key":"vMx6PnsmXc"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# physics_calc.py - Part 2: Basic Functions\n\ndef kinetic_energy(mass, velocity):\n    \"\"\"Calculate kinetic energy: KE = 0.5 * m * v²\"\"\"\n    return 0.5 * mass * velocity**2\n\ndef gravitational_force(m1, m2, distance):\n    \"\"\"Calculate gravitational force between two masses.\"\"\"\n    if distance == 0:\n        return float('inf')\n    return GRAVITATIONAL_CONSTANT * m1 * m2 / distance**2\n\ndef escape_velocity(mass, radius):\n    \"\"\"Calculate escape velocity from a spherical body.\"\"\"\n    import math\n    return math.sqrt(2 * GRAVITATIONAL_CONSTANT * mass / radius)","key":"DchRLYb1lY"},{"type":"output","id":"Vzvsn4CYanTVLCaXC6NdS","data":[],"key":"Jax33zDKs6"}],"key":"di0ZLFATPJ"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":869,"column":1},"end":{"line":869,"column":1}},"children":[{"type":"text","value":"Phase 3: Add Testing and Main Block","position":{"start":{"line":869,"column":1},"end":{"line":869,"column":1}},"key":"aG0xQ52hwB"}],"identifier":"phase-3-add-testing-and-main-block","label":"Phase 3: Add Testing and Main Block","html_id":"phase-3-add-testing-and-main-block","implicit":true,"key":"xwIz2V0k7q"}],"key":"E8H3esyzLK"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# physics_calc.py - Part 3: Testing\n\nif __name__ == \"__main__\":\n    # This code ONLY runs when script is executed directly\n    # NOT when it's imported as a module\n    \n    print(\"Testing physics_calc module...\")\n    \n    # Test escape velocity for Earth\n    earth_mass = 5.972e24  # kg\n    earth_radius = 6.371e6  # m\n    \n    v_escape = escape_velocity(earth_mass, earth_radius)\n    print(f\"Earth escape velocity: {v_escape:.0f} m/s\")\n    print(f\"That's {v_escape/1000:.1f} km/s\")\n    \n    # Should be about 11,200 m/s\n    expected = 11200\n    error = abs(v_escape - expected) / expected\n    assert error < 0.01, f\"Calculation error too large: {error:.2%}\"\n    \n    print(\"All tests passed!\")","key":"nWy8McnD7f"},{"type":"output","id":"JzCtizc_ltUDqx0u5ynG6","data":[],"key":"LTvjpgGw7G"}],"key":"EbNHQYtW7z"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":896,"column":1},"end":{"line":896,"column":1}},"children":[{"type":"text","value":"Using Your Module","position":{"start":{"line":896,"column":1},"end":{"line":896,"column":1}},"key":"CtuSJYsaPv"}],"identifier":"using-your-module","label":"Using Your Module","html_id":"using-your-module","implicit":true,"key":"evFgPRjq2s"}],"key":"oFM9Y4b5ij"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Different ways to import and use the module\n\n# Method 1: Import entire module\nimport physics_calc\n\nearth_escape = physics_calc.escape_velocity(5.972e24, 6.371e6)\nprint(f\"Earth escape velocity: {earth_escape/1000:.1f} km/s\")\n\n# Method 2: Import specific functions\nfrom physics_calc import kinetic_energy, SPEED_OF_LIGHT\n\nke = kinetic_energy(9.109e-31, 0.01 * SPEED_OF_LIGHT)\nprint(f\"Electron at 1% light speed: {ke:.2e} J\")\n\n# Method 3: Import with alias\nimport physics_calc as phys\n\nforce = phys.gravitational_force(5.972e24, 7.342e22, 3.844e8)\nprint(f\"Earth-Moon force: {force:.2e} N\")","key":"vE8FnF6lDr"},{"type":"output","id":"rD-tT3UX1fq90bQGbjVsK","data":[],"key":"Dxvzc3AVBA"}],"key":"UrThnvoYQp"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":920,"column":1},"end":{"line":920,"column":1}},"children":[{"type":"text","value":"Import Best Practices","position":{"start":{"line":920,"column":1},"end":{"line":920,"column":1}},"key":"Xqht3hXsEu"}],"identifier":"import-best-practices","label":"Import Best Practices","html_id":"import-best-practices","implicit":true,"key":"WSMArGVTC4"}],"key":"DZbdTUzFMy"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# GOOD: Clear, explicit imports\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom scipy import constants\n\n# BAD: Wildcard imports pollute namespace\n# from numpy import *  # Adds 600+ names!\n# from scipy import *  # Conflicts with numpy!\n\n# Example of namespace collision disaster\n# from numpy import *       # Has array, log, sin, etc.\n# from math import *        # Also has log, sin, etc.\n# result = log(10)         # Which log? Natural or base-10?\n\n# SAFE: Explicit namespaces prevent confusion\nimport numpy as np\nimport math\n\nnatural_log = math.log(10)      # Clear: natural logarithm\ncommon_log = np.log10(10)       # Clear: base-10 logarithm\nprint(f\"ln(10) = {natural_log:.2f}\")\nprint(f\"log₁₀(10) = {common_log:.2f}\")","key":"BnbnTnkRee"},{"type":"output","id":"MqTATsH7r-EAHRm9QsY9w","data":[],"key":"lGPvk3iudP"}],"key":"TSrJMlVAFm"},{"type":"block","children":[{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🔍 Check Your Understanding #5","position":{"start":{"line":947,"column":1},"end":{"line":947,"column":1}},"key":"ibAV1qXtgQ"}],"key":"idNxaFHRrd"},{"type":"paragraph","position":{"start":{"line":950,"column":1},"end":{"line":950,"column":1}},"children":[{"type":"text","value":"Why is ","position":{"start":{"line":950,"column":1},"end":{"line":950,"column":1}},"key":"Xog1VUaCRf"},{"type":"inlineCode","value":"from math import *","position":{"start":{"line":950,"column":1},"end":{"line":950,"column":1}},"key":"kamiSz8gYq"},{"type":"text","value":" particularly dangerous in scientific code?","position":{"start":{"line":950,"column":1},"end":{"line":950,"column":1}},"key":"GSDgkJAEHZ"}],"key":"qfP0H9mEXx"},{"type":"details","children":[{"type":"summary","children":[{"type":"text","value":"Answer","key":"URmrApaB1Q"}],"key":"GvO351XWMs"},{"type":"paragraph","children":[{"type":"text","value":"Wildcard imports are dangerous because:","key":"IR6BZZafsr"}],"key":"B3t92gvdbh"},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Name collisions","key":"RwCKmH2PTo"}],"key":"fDNhMcudzg"},{"type":"text","value":" : Multiple libraries have functions with the same names (log, sqrt, sin, etc.)","key":"HaweoGttEM"}],"key":"wCZme7VLSI"}],"key":"WXE2R57qji"},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Hidden overwrites","key":"ISvyjmcJow"}],"key":"jCA6Kaky0A"},{"type":"text","value":" : Later imports silently replace earlier ones","key":"qpnlIn9jRa"}],"key":"BAj5G1vS6o"}],"key":"n804Nri8Xv"},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Unclear source","key":"Gc844srFV9"}],"key":"HfNSCGXkiH"},{"type":"text","value":" : You can’t tell where a function comes from","key":"YLcd3Dr8Qx"}],"key":"Atsg5mUKr5"}],"key":"Z5BpzB8uw2"},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Namespace pollution","key":"y5xCBiql71"}],"key":"H2RX5zgVVM"},{"type":"text","value":" : Hundreds of names added to your namespace","key":"RX6T0NXx5b"}],"key":"uNIysQo0uL"}],"key":"efuRhEfw86"}],"key":"IWa48qa4xh"},{"type":"paragraph","children":[{"type":"text","value":"Real example that caused a retracted paper:","key":"IgVyvSbiW2"}],"key":"CaNWE0XYBD"},{"type":"code","lang":"python","meta":null,"value":"from numpy import *      # Has log (natural logarithm)\nfrom math import *       # Also has log (natural logarithm)\nfrom scipy.special import *  # Has log1p (log(1+x))\n\n# Calculating stellar luminosity\nluminosity = log(flux)  # Which log? All three are natural log, but...\n# If someone later adds:\nfrom sympy import *     # Has log that might behave differently with symbols\n\n# The same code now might use a different log function!","key":"gDGECOHp2g"},{"type":"paragraph","children":[{"type":"text","value":"This is why professional packages always use explicit imports. The extra typing (","key":"n3jQ448wLp"},{"type":"inlineCode","value":"np.log","key":"X3cCyE1igw"},{"type":"text","value":") is worth the clarity and safety!","key":"zfxknTN3X0"}],"key":"vfaKdayk4F"}],"key":"eTuusxbzeW"}],"class":"question","key":"y1UjbQBIk5"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🌟 The More You Know: How Modular Code Detected Gravitational Waves","position":{"start":{"line":980,"column":1},"end":{"line":980,"column":1}},"key":"z3hAjFM58q"}],"key":"Vk0vwdgOnr"},{"type":"paragraph","position":{"start":{"line":983,"column":1},"end":{"line":983,"column":1}},"children":[{"type":"text","value":"On September 14, 2015, at 09:50:45 UTC, two laser interferometers separated by 3,000 kilometers recorded matching chirps lasting just 0.2 seconds. This signal, named GW150914, was humanity’s first direct detection of gravitational waves—ripples in spacetime predicted by Einstein a century earlier. The discovery earned Rainer Weiss, Barry Barish, and Kip Thorne the 2017 Nobel Prize in Physics [1].","position":{"start":{"line":983,"column":1},"end":{"line":983,"column":1}},"key":"wZQXBDbihd"}],"key":"bef8FHiRd6"},{"type":"paragraph","position":{"start":{"line":985,"column":1},"end":{"line":985,"column":1}},"children":[{"type":"text","value":"The detection was only possible because of LIGO’s modular software architecture. The analysis pipeline consisted of hundreds of independent Python functions, each performing one specific task [2]:","position":{"start":{"line":985,"column":1},"end":{"line":985,"column":1}},"key":"aULZO6XYcn"}],"key":"eMXQNFEFhJ"},{"type":"code","lang":"python","value":"# Simplified LIGO pipeline structure\ndef remove_60hz_noise(strain_data):\n    \"\"\"Remove power line interference at 60 Hz and harmonics.\"\"\"\n    # Notch filter implementation\n    \ndef whiten_spectrum(strain_data, psd):\n    \"\"\"Normalize frequency response across spectrum.\"\"\"\n    # Spectral whitening implementation\n    \ndef matched_filter(data, template_bank):\n    \"\"\"Search for gravitational wave patterns.\"\"\"\n    # Cross-correlation with waveform templates\n    \ndef coincidence_test(h1_triggers, l1_triggers, time_window=0.01):\n    \"\"\"Verify both detectors saw signal within light travel time.\"\"\"\n    # Check for matching events","position":{"start":{"line":987,"column":1},"end":{"line":1004,"column":1}},"key":"ElcUE5zknf"},{"type":"paragraph","position":{"start":{"line":1006,"column":1},"end":{"line":1006,"column":1}},"children":[{"type":"text","value":"When the first candidate signal appeared in the data, this modular design enabled unprecedented rapid verification. Within minutes, automated analyses had processed the data through dozens of independent checks. Within hours, team members worldwide were running their own validation tests [3].","position":{"start":{"line":1006,"column":1},"end":{"line":1006,"column":1}},"key":"QWtPAEe3d9"}],"key":"iGMmAyoKkT"},{"type":"paragraph","position":{"start":{"line":1008,"column":1},"end":{"line":1008,"column":1}},"children":[{"type":"text","value":"The modularity allowed the collaboration to:","position":{"start":{"line":1008,"column":1},"end":{"line":1008,"column":1}},"key":"ydpnD0SMQ1"}],"key":"IMqQkSuquB"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":1009,"column":1},"end":{"line":1013,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":1009,"column":1},"end":{"line":1009,"column":1}},"children":[{"type":"text","value":"Test each processing step with simulated “injection” signals","position":{"start":{"line":1009,"column":1},"end":{"line":1009,"column":1}},"key":"WWhlaim1B3"}],"key":"wH3KNRNGKg"},{"type":"listItem","spread":true,"position":{"start":{"line":1010,"column":1},"end":{"line":1010,"column":1}},"children":[{"type":"text","value":"Run multiple independent analysis pipelines in parallel","position":{"start":{"line":1010,"column":1},"end":{"line":1010,"column":1}},"key":"Qy5uvUVZ13"}],"key":"M2Ey1xfZQo"},{"type":"listItem","spread":true,"position":{"start":{"line":1011,"column":1},"end":{"line":1011,"column":1}},"children":[{"type":"text","value":"Swap alternative algorithms to verify robustness","position":{"start":{"line":1011,"column":1},"end":{"line":1011,"column":1}},"key":"S6w8M9YMbs"}],"key":"C9JDFaHHhb"},{"type":"listItem","spread":true,"position":{"start":{"line":1012,"column":1},"end":{"line":1013,"column":1}},"children":[{"type":"text","value":"Complete peer review in record time","position":{"start":{"line":1012,"column":1},"end":{"line":1012,"column":1}},"key":"H3UBK9eoIa"}],"key":"byng2pMyuy"}],"key":"irFiQilTXv"},{"type":"paragraph","position":{"start":{"line":1014,"column":1},"end":{"line":1014,"column":1}},"children":[{"type":"text","value":"The entire LIGO analysis software is open source on GitHub, built with the same Python functions you’re learning now. Any scientist can download the data and code to verify the discovery independently—which thousands have done [4].","position":{"start":{"line":1014,"column":1},"end":{"line":1014,"column":1}},"key":"VAORgZGxBf"}],"key":"oaqL06chvd"},{"type":"paragraph","position":{"start":{"line":1016,"column":1},"end":{"line":1016,"column":1}},"children":[{"type":"text","value":"The modular approach that enabled this discovery is exactly what you’re learning in this chapter. Each function had one job, clear inputs and outputs, comprehensive documentation, and thorough testing. When you design your functions this way, you’re following the same principles that enabled one of physics’ greatest discoveries!","position":{"start":{"line":1016,"column":1},"end":{"line":1016,"column":1}},"key":"r1TQI209bb"}],"key":"Sl8L5dfmP1"},{"type":"paragraph","position":{"start":{"line":1018,"column":1},"end":{"line":1022,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1018,"column":1},"end":{"line":1018,"column":1}},"children":[{"type":"text","value":"References:","position":{"start":{"line":1018,"column":1},"end":{"line":1018,"column":1}},"key":"sXHQPl0uOG"}],"key":"hNt0e8CTjs"},{"type":"text","value":"\n[1] Abbott, B. P. et al. (2016). “Observation of Gravitational Waves from a Binary Black Hole Merger.” Physical Review Letters, 116(6), 061102.\n[2] LIGO Scientific Collaboration. (2021). “LIGO Algorithm Library.” ","position":{"start":{"line":1018,"column":1},"end":{"line":1018,"column":1}},"key":"jpkKWkg7jQ"},{"type":"link","url":"https://lscsoft.docs.ligo.org/lalsuite/","position":{"start":{"line":1018,"column":1},"end":{"line":1018,"column":1}},"children":[{"type":"text","value":"https://​lscsoft​.docs​.ligo​.org​/lalsuite/","position":{"start":{"line":1018,"column":1},"end":{"line":1018,"column":1}},"key":"ad6DJapsxO"}],"urlSource":"https://lscsoft.docs.ligo.org/lalsuite/","key":"ykZCgwwtlY"},{"type":"text","value":"\n[3] Abbott, B. P. et al. (2016). “GW150914: The Advanced LIGO Detectors in the Era of First Discoveries.” Physical Review Letters, 116(13), 131103.\n[4] LIGO Open Science Center. (2024). ","position":{"start":{"line":1018,"column":1},"end":{"line":1018,"column":1}},"key":"XfCG6jG00P"},{"type":"link","url":"https://www.gw-openscience.org/","position":{"start":{"line":1018,"column":1},"end":{"line":1018,"column":1}},"children":[{"type":"text","value":"https://​www​.gw​-openscience​.org/","position":{"start":{"line":1018,"column":1},"end":{"line":1018,"column":1}},"key":"LSoU09d4Bg"}],"urlSource":"https://www.gw-openscience.org/","key":"Ws7qEg5YJD"}],"key":"eLYfuCQw0G"}],"class":"history","key":"L9m2qqIRaz"},{"type":"heading","depth":2,"position":{"start":{"line":1025,"column":1},"end":{"line":1025,"column":1}},"children":[{"type":"text","value":"5.6 Documentation and Testing","position":{"start":{"line":1025,"column":1},"end":{"line":1025,"column":1}},"key":"gVzmJrDUVM"}],"identifier":"id-5-6-documentation-and-testing","label":"5.6 Documentation and Testing","html_id":"id-5-6-documentation-and-testing","implicit":true,"key":"x0oVjvAZBN"},{"type":"paragraph","position":{"start":{"line":1027,"column":1},"end":{"line":1027,"column":1}},"children":[{"type":"text","value":"Good documentation and testing make your functions trustworthy and reusable. Let’s build these skills progressively.","position":{"start":{"line":1027,"column":1},"end":{"line":1027,"column":1}},"key":"n9CdSDh9d0"}],"key":"rFReuWzKhS"},{"type":"heading","depth":3,"position":{"start":{"line":1029,"column":1},"end":{"line":1029,"column":1}},"children":[{"type":"text","value":"Phase 1: Basic Documentation","position":{"start":{"line":1029,"column":1},"end":{"line":1029,"column":1}},"key":"or1KScqp1O"}],"identifier":"phase-1-basic-documentation","label":"Phase 1: Basic Documentation","html_id":"phase-1-basic-documentation","implicit":true,"key":"KZ3gnToYZh"}],"key":"sGjAxlLybY"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def simple_harmonic_period(mass, spring_constant):\n    \"\"\"Calculate period of simple harmonic oscillator.\"\"\"\n    import math\n    return 2 * math.pi * math.sqrt(mass / spring_constant)\n\n# Minimal but clear\nT = simple_harmonic_period(0.5, 10)\nprint(f\"Period: {T:.2f} seconds\")","key":"pSywo3XJhp"},{"type":"output","id":"HAEiONjFY1sbNjvlDiV8A","data":[],"key":"OAPTiN2t3m"}],"key":"ZJkvdFnpMF"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":1042,"column":1},"end":{"line":1042,"column":1}},"children":[{"type":"text","value":"Phase 2: Professional Documentation","position":{"start":{"line":1042,"column":1},"end":{"line":1042,"column":1}},"key":"emgqxn6AFS"}],"identifier":"phase-2-professional-documentation","label":"Phase 2: Professional Documentation","html_id":"phase-2-professional-documentation","implicit":true,"key":"x3E2MzZ6cO"}],"key":"PsWdc0jXpQ"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def simulate_pendulum(length, initial_angle, time_step=0.01, duration=10.0):\n    \"\"\"\n    Simulate simple pendulum motion using small angle approximation.\n    \n    Parameters\n    ----------\n    length : float\n        Pendulum length in meters\n    initial_angle : float\n        Initial displacement in radians\n    time_step : float, optional\n        Integration time step in seconds (default: 0.01)\n    duration : float, optional\n        Total simulation time in seconds (default: 10.0)\n    \n    Returns\n    -------\n    times : list\n        Time points\n    angles : list\n        Angular displacement at each time\n    \n    Examples\n    --------\n    >>> t, theta = simulate_pendulum(1.0, 0.1)\n    >>> period = 2 * 3.14159 * sqrt(1.0/9.81)\n    >>> print(f\"Expected period: {period:.2f} s\")\n    \n    Notes\n    -----\n    Uses small angle approximation: sin(θ) ≈ θ\n    Only valid for initial_angle < ~0.3 radians (17°)\n    \n    References\n    ----------\n    .. [1] Taylor, J.R. (2005). Classical Mechanics, pp. 157-160\n    \"\"\"\n    import math\n    \n    omega = math.sqrt(9.81 / length)  # Angular frequency\n    times = []\n    angles = []\n    \n    t = 0\n    while t <= duration:\n        angle = initial_angle * math.cos(omega * t)\n        times.append(t)\n        angles.append(angle)\n        t += time_step\n    \n    return times, angles","key":"vimfh2WmnF"},{"type":"output","id":"yp7JUNZbteIKk2GnlNB4p","data":[],"key":"GpCNpXMVvs"}],"key":"ECJ5ZPOIC1"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":1098,"column":1},"end":{"line":1098,"column":1}},"children":[{"type":"text","value":"Phase 3: Testing Your Functions","position":{"start":{"line":1098,"column":1},"end":{"line":1098,"column":1}},"key":"K7LwCnHNAe"}],"identifier":"phase-3-testing-your-functions","label":"Phase 3: Testing Your Functions","html_id":"phase-3-testing-your-functions","implicit":true,"key":"WBPqEEZUQT"}],"key":"YbWuwecmVk"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def test_physics_functions():\n    \"\"\"Test our physics calculations.\"\"\"\n    \n    # Test 1: Kinetic energy\n    ke = kinetic_energy(2.0, 3.0)\n    expected = 9.0  # 0.5 * 2 * 3²\n    assert abs(ke - expected) < 1e-10, f\"KE calculation wrong: {ke} vs {expected}\"\n    \n    # Test 2: Edge cases\n    zero_ke = kinetic_energy(0, 100)\n    assert zero_ke == 0, \"Zero mass should give zero energy\"\n    \n    # Test 3: Pendulum period (small angle)\n    import math\n    length = 1.0\n    expected_period = 2 * math.pi * math.sqrt(length / 9.81)\n    \n    times, angles = simulate_pendulum(length, 0.1, duration=expected_period)\n    \n    # After one period, should return close to initial position\n    final_angle = angles[-1]\n    initial_angle = angles[0]\n    assert abs(final_angle - initial_angle) < 0.01, \\\n        f\"Pendulum didn't return to start: {final_angle:.3f} vs {initial_angle:.3f}\"\n    \n    print(\"All physics tests passed! ✓\")\n\n# Run tests\ntest_physics_functions()","key":"K0N8X5jCXI"},{"type":"output","id":"w6JBB1F6qGMk49-UJxIcv","data":[],"key":"aom6KmNRkI"}],"key":"DZ7VpjREGD"},{"type":"block","children":[{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🛠️ Debug This!","position":{"start":{"line":1132,"column":1},"end":{"line":1132,"column":1}},"key":"XNPRNtNv53"}],"key":"FsznPj5hub"},{"type":"paragraph","position":{"start":{"line":1135,"column":1},"end":{"line":1135,"column":1}},"children":[{"type":"text","value":"This function has a subtle performance bug. Can you spot it?","position":{"start":{"line":1135,"column":1},"end":{"line":1135,"column":1}},"key":"kZK9t0qMWf"}],"key":"Idj2Yy0h9d"},{"type":"code","lang":"python","value":"def find_resonances(frequencies, target_freq, tolerance=0.01):\n    \"\"\"Find resonant frequencies - HAS PERFORMANCE BUG.\"\"\"\n    resonances = []\n    \n    for freq in frequencies:\n        # Check if frequency is resonant (BUG HERE!)\n        if freq not in resonances and abs(freq - target_freq) < tolerance:\n            resonances.append(freq)\n    \n    return resonances","position":{"start":{"line":1137,"column":1},"end":{"line":1148,"column":1}},"key":"CP6n6QkPYP"},{"type":"details","children":[{"type":"summary","children":[{"type":"text","value":"Answer and Fix","key":"ikjKLZNSFB"}],"key":"XQlyKBTehU"},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Bug","key":"YemBhEP6Yn"}],"key":"cGjskOB05q"},{"type":"text","value":": ","key":"ccOaGZJ08h"},{"type":"inlineCode","value":"if freq not in resonances","key":"mVBCSHAIMJ"},{"type":"text","value":" is O(n) for lists! For 10,000 frequencies, this becomes O(n²) complexity—extremely slow.","key":"NjI3kP6nXn"}],"key":"PE8Lcwm4Z4"},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Fix","key":"Z1kJgWo420"}],"key":"OaxxNFp2i7"},{"type":"text","value":": Use a set for O(1) lookup:","key":"be7b95TO00"}],"key":"NGppwYq3pK"},{"type":"code","lang":"python","meta":null,"value":"def find_resonances_fixed(frequencies, target_freq, tolerance=0.01):\n    \"\"\"Find resonant frequencies efficiently.\"\"\"\n    resonances = []\n    seen = set()  # O(1) membership testing\n    \n    for freq in frequencies:\n        if freq not in seen and abs(freq - target_freq) < tolerance:\n            resonances.append(freq)\n            seen.add(freq)\n    \n    return resonances","key":"EwNqYF3MMg"},{"type":"paragraph","children":[{"type":"text","value":"For 10,000 frequencies:","key":"K545vWnhPz"}],"key":"g7FVOS3wIP"},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Original: ~5 seconds","key":"X6VJ0apNEv"}],"key":"kNPp9oNvY4"}],"key":"GoLimqbtx2"},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Fixed: ~0.05 seconds","key":"dUvMBffmEx"}],"key":"Zxb17MReLG"}],"key":"rfPRJALUQq"},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"100x speedup!","key":"FLVj4SGjhd"}],"key":"L3ZrM0I56G"}],"key":"ixYYLWj6nt"}],"key":"fzn7y3919N"},{"type":"paragraph","children":[{"type":"text","value":"This exact bug appeared in spectroscopy analysis software, causing hours of unnecessary computation.","key":"ojsrD88lZh"}],"key":"gkg3s7S5fU"}],"key":"zA1RHj7zNx"}],"class":"challenge","key":"S87wWVWNAE"},{"type":"heading","depth":2,"position":{"start":{"line":1180,"column":1},"end":{"line":1180,"column":1}},"children":[{"type":"text","value":"5.7 Performance Considerations","position":{"start":{"line":1180,"column":1},"end":{"line":1180,"column":1}},"key":"VkLGuq3opp"}],"identifier":"id-5-7-performance-considerations","label":"5.7 Performance Considerations","html_id":"id-5-7-performance-considerations","implicit":true,"key":"Zyg8fvvaT2"},{"type":"paragraph","position":{"start":{"line":1182,"column":1},"end":{"line":1182,"column":1}},"children":[{"type":"text","value":"Understanding function overhead helps you write efficient code. Let’s measure it!","position":{"start":{"line":1182,"column":1},"end":{"line":1182,"column":1}},"key":"pKI2yv1sz7"}],"key":"l2Fivs6ntt"},{"type":"heading","depth":3,"position":{"start":{"line":1184,"column":1},"end":{"line":1184,"column":1}},"children":[{"type":"text","value":"Measuring Function Call Overhead","position":{"start":{"line":1184,"column":1},"end":{"line":1184,"column":1}},"key":"NqHnszLUaB"}],"identifier":"measuring-function-call-overhead","label":"Measuring Function Call Overhead","html_id":"measuring-function-call-overhead","implicit":true,"key":"YoRkE9TJSQ"}],"key":"r1nf9MHCRM"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import time\n\ndef trivial_function(x):\n    \"\"\"Almost no work - overhead dominates.\"\"\"\n    return x + 1\n\ndef moderate_function(x):\n    \"\"\"Some work - overhead noticeable.\"\"\"\n    return (x**2 + 2*x + 1) / (x + 1)\n\ndef complex_function(x):\n    \"\"\"Heavy computation - overhead negligible.\"\"\"\n    import math\n    result = 0\n    for i in range(10):\n        result += math.sin(x + i) * math.cos(x - i)\n    return result / 10\n\n# Measure overhead\nn_calls = 100000\ntest_value = 3.14\n\n# Trivial function\nstart = time.perf_counter()\nfor _ in range(n_calls):\n    trivial_function(test_value)\ntrivial_time = time.perf_counter() - start\n\n# Inline version\nstart = time.perf_counter()\nfor _ in range(n_calls):\n    result = test_value + 1\ninline_time = time.perf_counter() - start\n\n# Complex function\nstart = time.perf_counter()\nfor _ in range(n_calls):\n    complex_function(test_value)\ncomplex_time = time.perf_counter() - start\n\nprint(\"Function Call Overhead Analysis:\")\nprint(f\"Trivial:  {trivial_time*1000:.1f}ms (inline: {inline_time*1000:.1f}ms)\")\nprint(f\"  → Overhead: {(trivial_time/inline_time - 1)*100:.0f}%\")\nprint(f\"Complex:  {complex_time*1000:.1f}ms\")\nprint(f\"\\nLesson: Overhead only matters for trivial operations in tight loops!\")","key":"z7IeldaVun"},{"type":"output","id":"sc7Q_JduWhi5AF1zZ0FHH","data":[],"key":"xqbQdd0ge8"}],"key":"roqDUeXRba"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":1234,"column":1},"end":{"line":1234,"column":1}},"children":[{"type":"text","value":"Remember from Chapter 4: this overhead is O(1)—constant time. But constants matter when multiplied by millions!","position":{"start":{"line":1234,"column":1},"end":{"line":1234,"column":1}},"key":"A4FG3pL72L"}],"key":"TQ2Kk8QfY7"},{"type":"heading","depth":3,"position":{"start":{"line":1236,"column":1},"end":{"line":1236,"column":1}},"children":[{"type":"text","value":"Memoization for Expensive Calculations","position":{"start":{"line":1236,"column":1},"end":{"line":1236,"column":1}},"key":"KcibLOrs3s"}],"identifier":"memoization-for-expensive-calculations","label":"Memoization for Expensive Calculations","html_id":"memoization-for-expensive-calculations","implicit":true,"key":"r8YiFdjzYu"},{"type":"paragraph","position":{"start":{"line":1238,"column":1},"end":{"line":1238,"column":1}},"children":[{"type":"text","value":"Cache results to avoid recomputation:","position":{"start":{"line":1238,"column":1},"end":{"line":1238,"column":1}},"key":"dCBbPeEzQZ"}],"key":"nCsL1QBDMf"}],"key":"C4aoWPX6Tt"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"from functools import lru_cache\n\n@lru_cache(maxsize=128)\ndef expensive_calculation(n):\n    \"\"\"\n    Simulate expensive computation (e.g., eigenvalue calculation).\n    Results are automatically cached!\n    \"\"\"\n    import time\n    \n    # Simulate expensive work\n    time.sleep(0.1)  # Pretend this takes 100ms\n    \n    result = sum(i**2 for i in range(n))\n    return result\n\n# First call: slow\nstart = time.perf_counter()\nresult1 = expensive_calculation(100)\nfirst_time = time.perf_counter() - start\nprint(f\"First call:  {first_time*1000:.1f}ms\")\n\n# Second call: instant (from cache)!\nstart = time.perf_counter()\nresult2 = expensive_calculation(100)\ncached_time = time.perf_counter() - start\nprint(f\"Cached call: {cached_time*1000:.3f}ms\")\n\nprint(f\"Speedup: {first_time/cached_time:.0f}x\")\nprint(f\"Cache stats: {expensive_calculation.cache_info()}\")","key":"FxlnvLARjb"},{"type":"output","id":"_rL5Ph-blSXXuHKVtqFKL","data":[],"key":"emyAQlerfV"}],"key":"pEPX19NBlV"},{"type":"block","children":[{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🌟 The More You Know: How a Missing Return Statement Cost $327 Million","position":{"start":{"line":1273,"column":1},"end":{"line":1273,"column":1}},"key":"Ptix0y5hfX"}],"key":"aJaOvOt3SC"},{"type":"paragraph","position":{"start":{"line":1276,"column":1},"end":{"line":1276,"column":1}},"children":[{"type":"text","value":"On June 4, 1996, the maiden flight of the European Space Agency’s Ariane 5 rocket ended in spectacular failure just 37 seconds after liftoff. The rocket veered off course and self-destructed, destroying four Cluster satellites worth $327 million. The cause? A single missing validation in a function that converted velocity data [1].","position":{"start":{"line":1276,"column":1},"end":{"line":1276,"column":1}},"key":"UtERDavOGo"}],"key":"ne19Pcry47"},{"type":"paragraph","position":{"start":{"line":1278,"column":1},"end":{"line":1278,"column":1}},"children":[{"type":"text","value":"The disaster stemmed from reused code from Ariane 4’s inertial reference system. A function that converted a 64-bit floating-point horizontal velocity value to a 16-bit signed integer worked perfectly for Ariane 4, which flew slower trajectories. But Ariane 5 was more powerful, and 37 seconds into flight, the horizontal velocity exceeded 32,767—the maximum value for a 16-bit signed integer [2].","position":{"start":{"line":1278,"column":1},"end":{"line":1278,"column":1}},"key":"TnY33yykMw"}],"key":"uy3WRQPJi7"},{"type":"paragraph","position":{"start":{"line":1280,"column":1},"end":{"line":1280,"column":1}},"children":[{"type":"text","value":"The conversion function looked something like this:","position":{"start":{"line":1280,"column":1},"end":{"line":1280,"column":1}},"key":"W7UnhSeRGM"}],"key":"eXdz1Hefd2"},{"type":"code","lang":"python","value":"def convert_velocity_buggy(velocity_64bit):\n    # Convert to 16-bit integer\n    velocity_16bit = int(velocity_64bit)\n    # MISSING: Check if value fits in 16 bits!\n    return velocity_16bit\n\n# What they needed:\ndef convert_velocity_fixed(velocity_64bit):\n    MAX_INT16 = 32767\n    MIN_INT16 = -32768\n    \n    # Validate before conversion\n    if velocity_64bit > MAX_INT16:\n        # Handle overflow appropriately\n        return MAX_INT16  # Or raise exception\n    elif velocity_64bit < MIN_INT16:\n        return MIN_INT16\n        \n    return int(velocity_64bit)","position":{"start":{"line":1282,"column":1},"end":{"line":1302,"column":1}},"key":"bWj2i4jCzy"},{"type":"paragraph","position":{"start":{"line":1304,"column":1},"end":{"line":1304,"column":1}},"children":[{"type":"text","value":"The overflow triggered an exception in the backup inertial reference system (which ran identical code), causing both systems to fail simultaneously. The main computer, suddenly receiving diagnostic data instead of attitude information, interpreted it as actual flight data and commanded a violent course correction. The aerodynamic forces exceeded design limits, triggering automatic self-destruct [3].","position":{"start":{"line":1304,"column":1},"end":{"line":1304,"column":1}},"key":"foBqveIydX"}],"key":"iBgFhqh9YC"},{"type":"paragraph","position":{"start":{"line":1306,"column":1},"end":{"line":1306,"column":1}},"children":[{"type":"text","value":"The investigation revealed multiple function-related failures:","position":{"start":{"line":1306,"column":1},"end":{"line":1306,"column":1}},"key":"ys4qaf0uZS"}],"key":"iwnLZwTPrg"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":1307,"column":1},"end":{"line":1311,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":1307,"column":1},"end":{"line":1307,"column":1}},"children":[{"type":"text","value":"No validation of input ranges (our validate_result() function would have caught this)","position":{"start":{"line":1307,"column":1},"end":{"line":1307,"column":1}},"key":"nydrvgv8kz"}],"key":"HAW7Bhse5h"},{"type":"listItem","spread":true,"position":{"start":{"line":1308,"column":1},"end":{"line":1308,"column":1}},"children":[{"type":"text","value":"Exception handling that shut down the entire system instead of degrading gracefully","position":{"start":{"line":1308,"column":1},"end":{"line":1308,"column":1}},"key":"YON3jDfr8E"}],"key":"unKJ4CMKaz"},{"type":"listItem","spread":true,"position":{"start":{"line":1309,"column":1},"end":{"line":1309,"column":1}},"children":[{"type":"text","value":"Identical code in primary and backup systems (no diversity)","position":{"start":{"line":1309,"column":1},"end":{"line":1309,"column":1}},"key":"fpu3JWZtIG"}],"key":"wy40S8icb6"},{"type":"listItem","spread":true,"position":{"start":{"line":1310,"column":1},"end":{"line":1311,"column":1}},"children":[{"type":"text","value":"The alignment function continued running after launch, even though it was only needed on the ground","position":{"start":{"line":1310,"column":1},"end":{"line":1310,"column":1}},"key":"sk08cBOkDD"}],"key":"AL6W7uCf7B"}],"key":"tTXeUd5TUe"},{"type":"paragraph","position":{"start":{"line":1312,"column":1},"end":{"line":1312,"column":1}},"children":[{"type":"text","value":"The tragedy led to fundamental changes in how critical software is developed. Modern aerospace code now requires:","position":{"start":{"line":1312,"column":1},"end":{"line":1312,"column":1}},"key":"rub1tC1Y0D"}],"key":"tBqcEIYoM9"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":1313,"column":1},"end":{"line":1317,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":1313,"column":1},"end":{"line":1313,"column":1}},"children":[{"type":"text","value":"Explicit contracts for all functions (preconditions, postconditions, invariants)","position":{"start":{"line":1313,"column":1},"end":{"line":1313,"column":1}},"key":"faS8eFZCrj"}],"key":"jhzjinLcZo"},{"type":"listItem","spread":true,"position":{"start":{"line":1314,"column":1},"end":{"line":1314,"column":1}},"children":[{"type":"text","value":"Comprehensive range checking on all conversions","position":{"start":{"line":1314,"column":1},"end":{"line":1314,"column":1}},"key":"KtPPh0THfl"}],"key":"yEBotPwzrG"},{"type":"listItem","spread":true,"position":{"start":{"line":1315,"column":1},"end":{"line":1315,"column":1}},"children":[{"type":"text","value":"Diverse redundancy (different algorithms, not copies)","position":{"start":{"line":1315,"column":1},"end":{"line":1315,"column":1}},"key":"cLfZGKqevR"}],"key":"hoPeWJjer1"},{"type":"listItem","spread":true,"position":{"start":{"line":1316,"column":1},"end":{"line":1317,"column":1}},"children":[{"type":"text","value":"Formal verification of critical functions","position":{"start":{"line":1316,"column":1},"end":{"line":1316,"column":1}},"key":"GFkxFzZH1o"}],"key":"gRUjnMnYsE"}],"key":"v2RbNkcJSq"},{"type":"paragraph","position":{"start":{"line":1318,"column":1},"end":{"line":1318,"column":1}},"children":[{"type":"text","value":"Every time you write a validation function or check input ranges, you’re applying lessons learned from this $327 million disaster. The functions you’re learning to write—with clear contracts, validation, and error handling—are exactly what could have prevented this tragedy.","position":{"start":{"line":1318,"column":1},"end":{"line":1318,"column":1}},"key":"eeCjaH22QM"}],"key":"ihslglC9ke"},{"type":"paragraph","position":{"start":{"line":1320,"column":1},"end":{"line":1323,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1320,"column":1},"end":{"line":1320,"column":1}},"children":[{"type":"text","value":"References:","position":{"start":{"line":1320,"column":1},"end":{"line":1320,"column":1}},"key":"pDXGyvwzvc"}],"key":"Uso0nIHuNN"},{"type":"text","value":"\n[1] Lions, J. L. et al. (1996). “ARIANE 5 Flight 501 Failure: Report by the Inquiry Board.” European Space Agency.\n[2] Gleick, J. (1996). “A Bug and A Crash.” The New York Times Magazine, December 1, 1996.\n[3] Nuseibeh, B. (1997). “Ariane 5: Who Dunnit?” IEEE Software, 14(3), 15-16.","position":{"start":{"line":1320,"column":1},"end":{"line":1320,"column":1}},"key":"GBwImx6VxM"}],"key":"H2sZckpc8v"}],"class":"history","key":"rnTVYP3M7A"},{"type":"heading","depth":2,"position":{"start":{"line":1326,"column":1},"end":{"line":1326,"column":1}},"children":[{"type":"text","value":"Practice Exercises","position":{"start":{"line":1326,"column":1},"end":{"line":1326,"column":1}},"key":"l91KH7EMh6"}],"identifier":"practice-exercises","label":"Practice Exercises","html_id":"practice-exercises","implicit":true,"key":"Tx6BM0Qc9N"},{"type":"heading","depth":3,"position":{"start":{"line":1328,"column":1},"end":{"line":1328,"column":1}},"children":[{"type":"text","value":"Variable Star Learning Activity Thread","position":{"start":{"line":1328,"column":1},"end":{"line":1328,"column":1}},"key":"Y5gDR2JU1H"}],"identifier":"variable-star-learning-activity-thread","label":"Variable Star Learning Activity Thread","html_id":"variable-star-learning-activity-thread","implicit":true,"key":"Nc4jTHkQP4"},{"type":"paragraph","position":{"start":{"line":1330,"column":1},"end":{"line":1330,"column":1}},"children":[{"type":"text","value":"Let’s build our variable star analysis toolkit, adding to what we started in previous chapters!","position":{"start":{"line":1330,"column":1},"end":{"line":1330,"column":1}},"key":"uZHaVfLxvD"}],"key":"qgrQknc1R1"}],"key":"A9OF6RiMfV"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def generate_variable_star_data(output_file='variable_star_ch5.csv'):\n    \"\"\"\n    Generate simulated Cepheid variable star data.\n    \n    Creates realistic light curve with:\n    - Periodic variation\n    - Measurement noise\n    - Occasional bad measurements\n    \"\"\"\n    import random\n    import math\n    \n    # Cepheid parameters\n    period = 5.366  # days\n    mean_mag = 12.0\n    amplitude = 0.4\n    \n    # Generate 30 observations over 20 days\n    observations = []\n    for i in range(30):\n        time = i * 0.7  # Uneven sampling\n        \n        # Calculate theoretical magnitude\n        phase = (time % period) / period\n        magnitude = mean_mag + amplitude * math.sin(2 * math.pi * phase)\n        \n        # Add realistic noise\n        noise = random.gauss(0, 0.02)\n        measured_mag = magnitude + noise\n        \n        # Measurement error (heteroscedastic - varies with brightness)\n        error = 0.01 + 0.02 * random.random()\n        \n        # Occasionally add bad measurement\n        if random.random() < 0.05:  # 5% bad data\n            measured_mag = 99.99\n            error = 9.99\n        \n        observations.append((time + 2458000, measured_mag, error))\n    \n    # Save to file\n    with open(output_file, 'w') as f:\n        f.write(\"# JD,Magnitude,Error\\n\")\n        for jd, mag, err in observations:\n            f.write(f\"{jd:.3f},{mag:.3f},{err:.3f}\\n\")\n    \n    print(f\"Generated {len(observations)} observations in {output_file}\")\n    return observations\n\n# Generate the data\ndata = generate_variable_star_data()","key":"hBQWePHgpd"},{"type":"output","id":"F3Awz5NX-XYAQZdkYWWCP","data":[],"key":"iKVKJUaokd"}],"key":"G58cxWIJCK"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":1386,"column":1},"end":{"line":1386,"column":1}},"children":[{"type":"text","value":"Exercise 5.1: Basic Functions","position":{"start":{"line":1386,"column":1},"end":{"line":1386,"column":1}},"key":"LtLqSxCgY3"}],"identifier":"exercise-5-1-basic-functions","label":"Exercise 5.1: Basic Functions","html_id":"exercise-5-1-basic-functions","implicit":true,"key":"nnxAVnHVgU"},{"type":"paragraph","position":{"start":{"line":1388,"column":1},"end":{"line":1388,"column":1}},"children":[{"type":"text","value":"Create fundamental analysis functions:","position":{"start":{"line":1388,"column":1},"end":{"line":1388,"column":1}},"key":"hIKHLWBCw9"}],"key":"Pb7qjLoJKz"},{"type":"code","lang":"python","value":"def calculate_amplitude(magnitudes):\n    \"\"\"\n    Calculate peak-to-peak amplitude of magnitude variations.\n    \n    Handle edge cases: empty list, None values, single value\n    \"\"\"\n    # Your implementation here\n    pass\n\ndef validate_magnitude(mag, error):\n    \"\"\"\n    Check if magnitude measurement is valid.\n    \n    Invalid if:\n    - magnitude > 30 (too faint)\n    - error < 0 or error > 1 (unrealistic)\n    - magnitude is inf or nan\n    \"\"\"\n    # Your implementation here\n    pass\n\n# Test your functions\ntest_mags = [12.1, 12.5, 11.9, 12.3]\nprint(f\"Amplitude: {calculate_amplitude(test_mags)}\")","position":{"start":{"line":1390,"column":1},"end":{"line":1415,"column":1}},"key":"t40nTkPOgp"},{"type":"heading","depth":3,"position":{"start":{"line":1417,"column":1},"end":{"line":1417,"column":1}},"children":[{"type":"text","value":"Exercise 5.2: Build Analysis Module","position":{"start":{"line":1417,"column":1},"end":{"line":1417,"column":1}},"key":"pnLJ1ZImpy"}],"identifier":"exercise-5-2-build-analysis-module","label":"Exercise 5.2: Build Analysis Module","html_id":"exercise-5-2-build-analysis-module","implicit":true,"key":"CR6IR5Y7cH"},{"type":"paragraph","position":{"start":{"line":1419,"column":1},"end":{"line":1419,"column":1}},"children":[{"type":"text","value":"Create ","position":{"start":{"line":1419,"column":1},"end":{"line":1419,"column":1}},"key":"HUkoQzPQET"},{"type":"inlineCode","value":"lightcurve.py","position":{"start":{"line":1419,"column":1},"end":{"line":1419,"column":1}},"key":"W5LM34phd5"},{"type":"text","value":" module:","position":{"start":{"line":1419,"column":1},"end":{"line":1419,"column":1}},"key":"BG09osbCEw"}],"key":"V0lCWjKHQo"},{"type":"code","lang":"python","value":"\"\"\"\nlightcurve.py - Variable star analysis module\n\nProgressive build:\n1. Start with constants and simple functions\n2. Add file loading with error handling  \n3. Add analysis functions\n4. Add module testing\n\"\"\"\n\n# Part 1: Constants\nMAGNITUDE_LIMIT = 20.0  # Typical CCD limit\nERROR_THRESHOLD = 0.5   # Maximum acceptable error\n\n# Part 2: Data loading\ndef load_lightcurve(filename):\n    \"\"\"Load light curve from CSV file.\"\"\"\n    times, mags, errors = [], [], []\n    # Implementation here\n    return times, mags, errors\n\n# Part 3: Analysis\ndef find_period_simple(times, mags):\n    \"\"\"Estimate period from peak spacing.\"\"\"\n    # Implementation here\n    pass\n\n# Part 4: Testing\nif __name__ == \"__main__\":\n    # Test with generated data\n    data = load_lightcurve(\"variable_star_ch5.csv\")\n    print(f\"Loaded {len(data[0])} observations\")","position":{"start":{"line":1421,"column":1},"end":{"line":1454,"column":1}},"key":"hQ53KL8U1H"},{"type":"heading","depth":3,"position":{"start":{"line":1456,"column":1},"end":{"line":1456,"column":1}},"children":[{"type":"text","value":"Exercise 5.3: Functional Approach","position":{"start":{"line":1456,"column":1},"end":{"line":1456,"column":1}},"key":"eYUT1s5zQ9"}],"identifier":"exercise-5-3-functional-approach","label":"Exercise 5.3: Functional Approach","html_id":"exercise-5-3-functional-approach","implicit":true,"key":"nVW0ALBjQq"},{"type":"paragraph","position":{"start":{"line":1458,"column":1},"end":{"line":1458,"column":1}},"children":[{"type":"text","value":"Apply functional programming to data filtering:","position":{"start":{"line":1458,"column":1},"end":{"line":1458,"column":1}},"key":"fk5a1qbVwg"}],"key":"QI9quEuFkx"},{"type":"code","lang":"python","value":"def analyze_functional(observations):\n    \"\"\"\n    Process observations using functional programming.\n    \n    No explicit loops! Use map, filter, reduce.\n    \"\"\"\n    from functools import reduce\n    \n    # Filter bad observations (mag < 90)\n    good_obs = filter(lambda obs: obs['mag'] < 90, observations)\n    \n    # Calculate mean magnitude functionally\n    # Your implementation here\n    \n    return mean_mag\n\n# Compare with traditional approach\ndef analyze_traditional(observations):\n    \"\"\"Traditional loop-based approach.\"\"\"\n    total = 0\n    count = 0\n    for obs in observations:\n        if obs['mag'] < 90:\n            total += obs['mag']\n            count += 1\n    return total / count if count > 0 else 0","position":{"start":{"line":1460,"column":1},"end":{"line":1487,"column":1}},"key":"efdMBYIdt3"},{"type":"heading","depth":2,"position":{"start":{"line":1489,"column":1},"end":{"line":1489,"column":1}},"children":[{"type":"text","value":"Main Takeaways","position":{"start":{"line":1489,"column":1},"end":{"line":1489,"column":1}},"key":"XatCRBfMyc"}],"identifier":"main-takeaways","label":"Main Takeaways","html_id":"main-takeaways","implicit":true,"key":"rzOm2r5AtW"},{"type":"paragraph","position":{"start":{"line":1491,"column":1},"end":{"line":1491,"column":1}},"children":[{"type":"text","value":"Functions transform programming from repetitive scripting into modular, maintainable software engineering. When you encapsulate logic in well-designed functions, you create building blocks that can be tested independently, shared with collaborators, and combined into complex analysis pipelines. The progression from simple functions to modules to packages mirrors how scientific software naturally grows—what starts as a quick calculation evolves into a shared tool used by entire research communities.","position":{"start":{"line":1491,"column":1},"end":{"line":1491,"column":1}},"key":"e2cm5lEndX"}],"key":"ssu99itYrX"},{"type":"paragraph","position":{"start":{"line":1493,"column":1},"end":{"line":1493,"column":1}},"children":[{"type":"text","value":"The scope rules and namespace concepts you’ve learned explain why variables sometimes behave unexpectedly in complex programs. Understanding the LEGB rule prevents the frustrating bugs where variables have unexpected values or modifications in one place affect seemingly unrelated code. The mutable default argument trap, which has caused real bugs in major scientific packages, demonstrates why understanding Python’s evaluation model is crucial for writing reliable code.","position":{"start":{"line":1493,"column":1},"end":{"line":1493,"column":1}},"key":"ALVAPM2Aii"}],"key":"yY0WFBfxLo"},{"type":"paragraph","position":{"start":{"line":1495,"column":1},"end":{"line":1495,"column":1}},"children":[{"type":"text","value":"Functional programming concepts like map, filter, and pure functions aren’t just academic exercises—they’re essential preparation for modern scientific computing. Frameworks like JAX require functional style for automatic differentiation, while parallel processing works best with stateless functions. The ability to pass functions as arguments and return them from other functions enables powerful patterns like the specialized integrators we created with closures.","position":{"start":{"line":1495,"column":1},"end":{"line":1495,"column":1}},"key":"ttUFWKPIDm"}],"key":"TX7OPhrmBo"},{"type":"paragraph","position":{"start":{"line":1497,"column":1},"end":{"line":1497,"column":1}},"children":[{"type":"text","value":"The performance measurements showed that function call overhead only matters for trivial operations in tight loops—exactly the situation where you’ll want to use NumPy’s vectorized operations (Chapter 7) instead. But for complex calculations, the overhead is negligible compared to the computation itself. Memoization can provide dramatic speedups when the same expensive calculations are repeated, as often happens in optimization and parameter searching.","position":{"start":{"line":1497,"column":1},"end":{"line":1497,"column":1}},"key":"CPKVh1lNkD"}],"key":"YUqagnKazx"},{"type":"paragraph","position":{"start":{"line":1499,"column":1},"end":{"line":1499,"column":1}},"children":[{"type":"text","value":"Looking forward, the functions you’ve learned to write here form the foundation for object-oriented programming in Chapter 6, where functions become methods attached to objects. The module organization skills prepare you for building larger scientific packages, while the documentation practices ensure your code can be understood and maintained by others. Most importantly, thinking in terms of functional contracts and clear interfaces will make you a better computational scientist, capable of building the robust, efficient tools that modern research demands.","position":{"start":{"line":1499,"column":1},"end":{"line":1499,"column":1}},"key":"uq6XRefksH"}],"key":"W2h5CGrNvn"},{"type":"heading","depth":2,"position":{"start":{"line":1501,"column":1},"end":{"line":1501,"column":1}},"children":[{"type":"text","value":"Definitions","position":{"start":{"line":1501,"column":1},"end":{"line":1501,"column":1}},"key":"FNqMZbv6c2"}],"identifier":"definitions","label":"Definitions","html_id":"definitions","implicit":true,"key":"zrPRSXt5RH"},{"type":"paragraph","position":{"start":{"line":1503,"column":1},"end":{"line":1503,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1503,"column":1},"end":{"line":1503,"column":1}},"children":[{"type":"text","value":"argument","position":{"start":{"line":1503,"column":1},"end":{"line":1503,"column":1}},"key":"p3XJO9XPH6"}],"key":"KZH9wcZ12j"},{"type":"text","value":" - The actual value passed to a function when calling it (e.g., in ","position":{"start":{"line":1503,"column":1},"end":{"line":1503,"column":1}},"key":"zIMJb3o8zw"},{"type":"inlineCode","value":"f(5)","position":{"start":{"line":1503,"column":1},"end":{"line":1503,"column":1}},"key":"ud5mOO6Lxv"},{"type":"text","value":", 5 is an argument)","position":{"start":{"line":1503,"column":1},"end":{"line":1503,"column":1}},"key":"GfcKvbRTWE"}],"key":"dQ1gE66Dyy"},{"type":"paragraph","position":{"start":{"line":1505,"column":1},"end":{"line":1505,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1505,"column":1},"end":{"line":1505,"column":1}},"children":[{"type":"text","value":"closure","position":{"start":{"line":1505,"column":1},"end":{"line":1505,"column":1}},"key":"DHfxz1GMjV"}],"key":"YxihqvTDJD"},{"type":"text","value":" - A function that remembers variables from its enclosing scope even after that scope has finished executing","position":{"start":{"line":1505,"column":1},"end":{"line":1505,"column":1}},"key":"Xzik5ExVu9"}],"key":"N554SwEEgX"},{"type":"paragraph","position":{"start":{"line":1507,"column":1},"end":{"line":1507,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1507,"column":1},"end":{"line":1507,"column":1}},"children":[{"type":"text","value":"decorator","position":{"start":{"line":1507,"column":1},"end":{"line":1507,"column":1}},"key":"r8ZZsaemFQ"}],"key":"wOD8ilc3Iu"},{"type":"text","value":" - A function that modifies another function’s behavior without changing its code","position":{"start":{"line":1507,"column":1},"end":{"line":1507,"column":1}},"key":"ytDbyV1c1l"}],"key":"lCLFlasYvr"},{"type":"paragraph","position":{"start":{"line":1509,"column":1},"end":{"line":1509,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1509,"column":1},"end":{"line":1509,"column":1}},"children":[{"type":"text","value":"docstring","position":{"start":{"line":1509,"column":1},"end":{"line":1509,"column":1}},"key":"cOEnRpoyVM"}],"key":"vbzUTZo0lk"},{"type":"text","value":" - A string literal that appears as the first statement in a function, module, or class to document its purpose","position":{"start":{"line":1509,"column":1},"end":{"line":1509,"column":1}},"key":"rGzywdcDh4"}],"key":"I0uZxDwsc6"},{"type":"paragraph","position":{"start":{"line":1511,"column":1},"end":{"line":1511,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1511,"column":1},"end":{"line":1511,"column":1}},"children":[{"type":"text","value":"function","position":{"start":{"line":1511,"column":1},"end":{"line":1511,"column":1}},"key":"xenb5G5BDG"}],"key":"O0X9OyYv7M"},{"type":"text","value":" - A reusable block of code that performs a specific task, taking inputs and optionally returning outputs","position":{"start":{"line":1511,"column":1},"end":{"line":1511,"column":1}},"key":"AMi8OxOhp3"}],"key":"L1ud8Hlf94"},{"type":"paragraph","position":{"start":{"line":1513,"column":1},"end":{"line":1513,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1513,"column":1},"end":{"line":1513,"column":1}},"children":[{"type":"text","value":"global","position":{"start":{"line":1513,"column":1},"end":{"line":1513,"column":1}},"key":"McZmPXa5Q6"}],"key":"gClqSS8jTN"},{"type":"text","value":" - A keyword that allows a function to modify a variable in the global scope","position":{"start":{"line":1513,"column":1},"end":{"line":1513,"column":1}},"key":"TjvXqT0H6w"}],"key":"f5Slx5Ixzq"},{"type":"paragraph","position":{"start":{"line":1515,"column":1},"end":{"line":1515,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1515,"column":1},"end":{"line":1515,"column":1}},"children":[{"type":"text","value":"lambda","position":{"start":{"line":1515,"column":1},"end":{"line":1515,"column":1}},"key":"P6oSskjpm3"}],"key":"o8aM8hsJIc"},{"type":"text","value":" - An anonymous function defined inline using the ","position":{"start":{"line":1515,"column":1},"end":{"line":1515,"column":1}},"key":"B0puYThLj3"},{"type":"inlineCode","value":"lambda","position":{"start":{"line":1515,"column":1},"end":{"line":1515,"column":1}},"key":"ah8xZpV3yN"},{"type":"text","value":" keyword","position":{"start":{"line":1515,"column":1},"end":{"line":1515,"column":1}},"key":"IDRCyOG5Jk"}],"key":"o2r7vH2vdd"},{"type":"paragraph","position":{"start":{"line":1517,"column":1},"end":{"line":1517,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1517,"column":1},"end":{"line":1517,"column":1}},"children":[{"type":"text","value":"LEGB","position":{"start":{"line":1517,"column":1},"end":{"line":1517,"column":1}},"key":"TmqSul9Wlr"}],"key":"ue49QUUZPK"},{"type":"text","value":" - The order Python searches for variables: Local, Enclosing, Global, Built-in","position":{"start":{"line":1517,"column":1},"end":{"line":1517,"column":1}},"key":"EPcmUz9v5n"}],"key":"YDmWPIrll4"},{"type":"paragraph","position":{"start":{"line":1519,"column":1},"end":{"line":1519,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1519,"column":1},"end":{"line":1519,"column":1}},"children":[{"type":"text","value":"memoization","position":{"start":{"line":1519,"column":1},"end":{"line":1519,"column":1}},"key":"S8uOrLhdIq"}],"key":"J86oXpPixY"},{"type":"text","value":" - Caching function results to avoid recomputing expensive operations","position":{"start":{"line":1519,"column":1},"end":{"line":1519,"column":1}},"key":"aV1X1153FK"}],"key":"T8Ll7AXwsf"},{"type":"paragraph","position":{"start":{"line":1521,"column":1},"end":{"line":1521,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1521,"column":1},"end":{"line":1521,"column":1}},"children":[{"type":"text","value":"module","position":{"start":{"line":1521,"column":1},"end":{"line":1521,"column":1}},"key":"xJlnhbzFl1"}],"key":"r4gR6dxkHP"},{"type":"text","value":" - A Python file containing definitions and statements that can be imported and reused","position":{"start":{"line":1521,"column":1},"end":{"line":1521,"column":1}},"key":"kjP5CSI4Zy"}],"key":"Bymu2jlKOW"},{"type":"paragraph","position":{"start":{"line":1523,"column":1},"end":{"line":1523,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1523,"column":1},"end":{"line":1523,"column":1}},"children":[{"type":"text","value":"namespace","position":{"start":{"line":1523,"column":1},"end":{"line":1523,"column":1}},"key":"nWjAvlNPqT"}],"key":"O6vmsaX3sY"},{"type":"text","value":" - A container that holds a set of identifiers and their associated objects","position":{"start":{"line":1523,"column":1},"end":{"line":1523,"column":1}},"key":"cBDwHnwdIj"}],"key":"uHsbS0alT9"},{"type":"paragraph","position":{"start":{"line":1525,"column":1},"end":{"line":1525,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1525,"column":1},"end":{"line":1525,"column":1}},"children":[{"type":"text","value":"package","position":{"start":{"line":1525,"column":1},"end":{"line":1525,"column":1}},"key":"F7hSk9DuMa"}],"key":"SAVKjvd3Bj"},{"type":"text","value":" - A directory containing multiple Python modules and an ","position":{"start":{"line":1525,"column":1},"end":{"line":1525,"column":1}},"key":"omCiurrNnE"},{"type":"inlineCode","value":"__init__.py","position":{"start":{"line":1525,"column":1},"end":{"line":1525,"column":1}},"key":"HaBRDUphZB"},{"type":"text","value":" file","position":{"start":{"line":1525,"column":1},"end":{"line":1525,"column":1}},"key":"z6b2yPYxKB"}],"key":"EmVCf8zFez"},{"type":"paragraph","position":{"start":{"line":1527,"column":1},"end":{"line":1527,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1527,"column":1},"end":{"line":1527,"column":1}},"children":[{"type":"text","value":"parameter","position":{"start":{"line":1527,"column":1},"end":{"line":1527,"column":1}},"key":"LGtAnK68UX"}],"key":"sQsbRg4X8e"},{"type":"text","value":" - A variable in a function definition that receives a value when the function is called","position":{"start":{"line":1527,"column":1},"end":{"line":1527,"column":1}},"key":"J4YQzbGpze"}],"key":"Omrmj8ydFT"},{"type":"paragraph","position":{"start":{"line":1529,"column":1},"end":{"line":1529,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1529,"column":1},"end":{"line":1529,"column":1}},"children":[{"type":"text","value":"pure function","position":{"start":{"line":1529,"column":1},"end":{"line":1529,"column":1}},"key":"PqHO2qPysq"}],"key":"yTh6h8B6oI"},{"type":"text","value":" - A function that always returns the same output for the same input with no side effects","position":{"start":{"line":1529,"column":1},"end":{"line":1529,"column":1}},"key":"ASzklaQI9r"}],"key":"sEbLfH45k8"},{"type":"paragraph","position":{"start":{"line":1531,"column":1},"end":{"line":1531,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1531,"column":1},"end":{"line":1531,"column":1}},"children":[{"type":"text","value":"return value","position":{"start":{"line":1531,"column":1},"end":{"line":1531,"column":1}},"key":"Ltiy1GmWKF"}],"key":"wWkayxydPf"},{"type":"text","value":" - The result that a function sends back to the code that called it","position":{"start":{"line":1531,"column":1},"end":{"line":1531,"column":1}},"key":"zQ7Zck7DR2"}],"key":"e7AyKMAltM"},{"type":"paragraph","position":{"start":{"line":1533,"column":1},"end":{"line":1533,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1533,"column":1},"end":{"line":1533,"column":1}},"children":[{"type":"text","value":"scope","position":{"start":{"line":1533,"column":1},"end":{"line":1533,"column":1}},"key":"vxq5Ly4MGh"}],"key":"pxrgkFJREm"},{"type":"text","value":" - The region of a program where a variable is accessible","position":{"start":{"line":1533,"column":1},"end":{"line":1533,"column":1}},"key":"R8z8abGVuw"}],"key":"TR2CJFYoLV"},{"type":"paragraph","position":{"start":{"line":1535,"column":1},"end":{"line":1535,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1535,"column":1},"end":{"line":1535,"column":1}},"children":[{"type":"text","value":"side effect","position":{"start":{"line":1535,"column":1},"end":{"line":1535,"column":1}},"key":"js67sZeWm4"}],"key":"HoaziAJf7W"},{"type":"text","value":" - Any state change that occurs beyond returning a value from a function","position":{"start":{"line":1535,"column":1},"end":{"line":1535,"column":1}},"key":"KYpzpn794K"}],"key":"C9K5iOaiPj"},{"type":"paragraph","position":{"start":{"line":1537,"column":1},"end":{"line":1537,"column":1}},"children":[{"type":"text","value":"*","position":{"start":{"line":1537,"column":1},"end":{"line":1537,"column":1}},"key":"kcisauEYmR"},{"type":"strong","position":{"start":{"line":1537,"column":1},"end":{"line":1537,"column":1}},"children":[{"type":"text","value":"args","position":{"start":{"line":1537,"column":1},"end":{"line":1537,"column":1}},"key":"yO0RRH6Aep"}],"key":"THDNmr4vSp"},{"type":"text","value":" - Syntax for collecting variable positional arguments into a tuple","position":{"start":{"line":1537,"column":1},"end":{"line":1537,"column":1}},"key":"YpOurQLMky"}],"key":"PmMIdAoRxF"},{"type":"paragraph","position":{"start":{"line":1539,"column":1},"end":{"line":1539,"column":1}},"children":[{"type":"text","value":"*","position":{"start":{"line":1539,"column":1},"end":{"line":1539,"column":1}},"key":"ezxjdERh18"},{"type":"strong","position":{"start":{"line":1539,"column":1},"end":{"line":1539,"column":1}},"children":[{"type":"text","value":"kwargs","position":{"start":{"line":1539,"column":1},"end":{"line":1539,"column":1}},"key":"lA0G6KmAmz"}],"key":"RrfCwKPxEx"},{"type":"text","value":" - Syntax for collecting variable keyword arguments into a dictionary","position":{"start":{"line":1539,"column":1},"end":{"line":1539,"column":1}},"key":"tBei3sJsZo"}],"key":"HzmcdwBl4Z"},{"type":"heading","depth":2,"position":{"start":{"line":1541,"column":1},"end":{"line":1541,"column":1}},"children":[{"type":"text","value":"Key Takeaways","position":{"start":{"line":1541,"column":1},"end":{"line":1541,"column":1}},"key":"e9uUP1RxvM"}],"identifier":"key-takeaways","label":"Key Takeaways","html_id":"key-takeaways","implicit":true,"key":"zL7S7YGUjM"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":1543,"column":1},"end":{"line":1556,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":1543,"column":1},"end":{"line":1543,"column":1}},"children":[{"type":"text","value":"Functions are contracts: they promise specific outputs for given inputs","position":{"start":{"line":1543,"column":1},"end":{"line":1543,"column":1}},"key":"RN7NZdzAaD"}],"key":"Yp0r0Cydqc"},{"type":"listItem","spread":true,"position":{"start":{"line":1544,"column":1},"end":{"line":1544,"column":1}},"children":[{"type":"text","value":"The mutable default argument trap occurs because defaults are evaluated once when the ","position":{"start":{"line":1544,"column":1},"end":{"line":1544,"column":1}},"key":"PnbURJjk6p"},{"type":"inlineCode","value":"def","position":{"start":{"line":1544,"column":1},"end":{"line":1544,"column":1}},"key":"Rq5k8vQQaR"},{"type":"text","value":" statement executes","position":{"start":{"line":1544,"column":1},"end":{"line":1544,"column":1}},"key":"p83OX6N6bK"}],"key":"EHKrBJaf9Z"},{"type":"listItem","spread":true,"position":{"start":{"line":1545,"column":1},"end":{"line":1545,"column":1}},"children":[{"type":"text","value":"Always use ","position":{"start":{"line":1545,"column":1},"end":{"line":1545,"column":1}},"key":"upB1gNTtKq"},{"type":"inlineCode","value":"None","position":{"start":{"line":1545,"column":1},"end":{"line":1545,"column":1}},"key":"Rzf9tZFHbi"},{"type":"text","value":" as a sentinel for mutable default arguments","position":{"start":{"line":1545,"column":1},"end":{"line":1545,"column":1}},"key":"gH0KMA82p3"}],"key":"ExLBC0ubUo"},{"type":"listItem","spread":true,"position":{"start":{"line":1546,"column":1},"end":{"line":1546,"column":1}},"children":[{"type":"text","value":"Python searches for variables using LEGB: Local, Enclosing, Global, Built-in","position":{"start":{"line":1546,"column":1},"end":{"line":1546,"column":1}},"key":"TNOtfQt2vX"}],"key":"I9BAY4vCMO"},{"type":"listItem","spread":true,"position":{"start":{"line":1547,"column":1},"end":{"line":1547,"column":1}},"children":[{"type":"text","value":"Global variables make code hard to test, debug, and parallelize","position":{"start":{"line":1547,"column":1},"end":{"line":1547,"column":1}},"key":"AJU6nqOGBk"}],"key":"WsaD0tanak"},{"type":"listItem","spread":true,"position":{"start":{"line":1548,"column":1},"end":{"line":1548,"column":1}},"children":[{"type":"text","value":"Lambda functions are useful for simple operations but limited to single expressions","position":{"start":{"line":1548,"column":1},"end":{"line":1548,"column":1}},"key":"SnyIINHsKS"}],"key":"elGk94MD16"},{"type":"listItem","spread":true,"position":{"start":{"line":1549,"column":1},"end":{"line":1549,"column":1}},"children":[{"type":"text","value":"Functional programming concepts (map, filter, reduce) prepare you for modern frameworks","position":{"start":{"line":1549,"column":1},"end":{"line":1549,"column":1}},"key":"ykxm3Gi2PE"}],"key":"YVikwj4SdW"},{"type":"listItem","spread":true,"position":{"start":{"line":1550,"column":1},"end":{"line":1550,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1550,"column":1},"end":{"line":1550,"column":1}},"key":"fVHHQdGyDn"},{"type":"inlineCode","value":"if __name__ == \"__main__\"","position":{"start":{"line":1550,"column":1},"end":{"line":1550,"column":1}},"key":"SXLdtJ96t1"},{"type":"text","value":" pattern makes modules both importable and executable","position":{"start":{"line":1550,"column":1},"end":{"line":1550,"column":1}},"key":"vJBDIn48tJ"}],"key":"AIbBlROd0f"},{"type":"listItem","spread":true,"position":{"start":{"line":1551,"column":1},"end":{"line":1551,"column":1}},"children":[{"type":"text","value":"Never use ","position":{"start":{"line":1551,"column":1},"end":{"line":1551,"column":1}},"key":"Vf9j04toy2"},{"type":"inlineCode","value":"from module import *","position":{"start":{"line":1551,"column":1},"end":{"line":1551,"column":1}},"key":"BhpoQhvQ3G"},{"type":"text","value":" in production code—it causes namespace pollution","position":{"start":{"line":1551,"column":1},"end":{"line":1551,"column":1}},"key":"Tw6CqLgvns"}],"key":"BQd5TYNqLU"},{"type":"listItem","spread":true,"position":{"start":{"line":1552,"column":1},"end":{"line":1552,"column":1}},"children":[{"type":"text","value":"Docstrings are essential for scientific code that others will use and maintain","position":{"start":{"line":1552,"column":1},"end":{"line":1552,"column":1}},"key":"bhXpHcTkHO"}],"key":"ZO9MoG1hd2"},{"type":"listItem","spread":true,"position":{"start":{"line":1553,"column":1},"end":{"line":1553,"column":1}},"children":[{"type":"text","value":"Function call overhead matters only in tight loops with trivial operations","position":{"start":{"line":1553,"column":1},"end":{"line":1553,"column":1}},"key":"HfpQSAVyK2"}],"key":"ATpaGckXDK"},{"type":"listItem","spread":true,"position":{"start":{"line":1554,"column":1},"end":{"line":1554,"column":1}},"children":[{"type":"text","value":"Memoization can dramatically speed up expensive repeated calculations","position":{"start":{"line":1554,"column":1},"end":{"line":1554,"column":1}},"key":"qdyuBNoWN5"}],"key":"bK5JHT7vl5"},{"type":"listItem","spread":true,"position":{"start":{"line":1555,"column":1},"end":{"line":1556,"column":1}},"children":[{"type":"text","value":"Performance optimization should follow the hierarchy: algorithm → vectorization → caching → parallelization → compilation","position":{"start":{"line":1555,"column":1},"end":{"line":1555,"column":1}},"key":"uOsJ2jNEh4"}],"key":"l2lB6S4E86"}],"key":"RShCy4ctay"},{"type":"heading","depth":2,"position":{"start":{"line":1557,"column":1},"end":{"line":1557,"column":1}},"children":[{"type":"text","value":"Quick Reference Tables","position":{"start":{"line":1557,"column":1},"end":{"line":1557,"column":1}},"key":"Ejo7jd52Py"}],"identifier":"quick-reference-tables","label":"Quick Reference Tables","html_id":"quick-reference-tables","implicit":true,"key":"jUOo3y8Cnn"},{"type":"heading","depth":3,"position":{"start":{"line":1559,"column":1},"end":{"line":1559,"column":1}},"children":[{"type":"text","value":"Function Definition Patterns","position":{"start":{"line":1559,"column":1},"end":{"line":1559,"column":1}},"key":"YbBFyQCIQQ"}],"identifier":"function-definition-patterns","label":"Function Definition Patterns","html_id":"function-definition-patterns","implicit":true,"key":"Y8u5egFRSE"},{"type":"table","position":{"start":{"line":1561,"column":1},"end":{"line":1569,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":1561,"column":1},"end":{"line":1561,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":1561,"column":1},"end":{"line":1561,"column":1}},"children":[{"type":"text","value":"Pattern","position":{"start":{"line":1561,"column":1},"end":{"line":1561,"column":1}},"key":"kMCybGMjCv"}],"key":"oHNUutZNwu"},{"type":"tableCell","header":true,"position":{"start":{"line":1561,"column":1},"end":{"line":1561,"column":1}},"children":[{"type":"text","value":"Syntax","position":{"start":{"line":1561,"column":1},"end":{"line":1561,"column":1}},"key":"w9MYoQSirt"}],"key":"KicQw4G07B"},{"type":"tableCell","header":true,"position":{"start":{"line":1561,"column":1},"end":{"line":1561,"column":1}},"children":[{"type":"text","value":"Use Case","position":{"start":{"line":1561,"column":1},"end":{"line":1561,"column":1}},"key":"Gb3PLDZFWC"}],"key":"Ty31HzDJ0G"}],"key":"kcxrDvvaIi"},{"type":"tableRow","position":{"start":{"line":1563,"column":1},"end":{"line":1563,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1563,"column":1},"end":{"line":1563,"column":1}},"children":[{"type":"text","value":"Basic function","position":{"start":{"line":1563,"column":1},"end":{"line":1563,"column":1}},"key":"Yyl6cXMgXs"}],"key":"Wj0r7b1roG"},{"type":"tableCell","position":{"start":{"line":1563,"column":1},"end":{"line":1563,"column":1}},"children":[{"type":"inlineCode","value":"def func(x, y):","position":{"start":{"line":1563,"column":1},"end":{"line":1563,"column":1}},"key":"muxsFdcIFT"}],"key":"Gy4yO0x1XE"},{"type":"tableCell","position":{"start":{"line":1563,"column":1},"end":{"line":1563,"column":1}},"children":[{"type":"text","value":"Simple operations","position":{"start":{"line":1563,"column":1},"end":{"line":1563,"column":1}},"key":"Zpbw0G8hJs"}],"key":"Tsw2FgzkvT"}],"key":"wGguuI4yRA"},{"type":"tableRow","position":{"start":{"line":1564,"column":1},"end":{"line":1564,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1564,"column":1},"end":{"line":1564,"column":1}},"children":[{"type":"text","value":"Default arguments","position":{"start":{"line":1564,"column":1},"end":{"line":1564,"column":1}},"key":"CRHyVb8q6n"}],"key":"Tn0olzuGTE"},{"type":"tableCell","position":{"start":{"line":1564,"column":1},"end":{"line":1564,"column":1}},"children":[{"type":"inlineCode","value":"def func(x, y=10):","position":{"start":{"line":1564,"column":1},"end":{"line":1564,"column":1}},"key":"V5X54lr07O"}],"key":"svtXSIM8AA"},{"type":"tableCell","position":{"start":{"line":1564,"column":1},"end":{"line":1564,"column":1}},"children":[{"type":"text","value":"Optional parameters","position":{"start":{"line":1564,"column":1},"end":{"line":1564,"column":1}},"key":"X3X1Fo4gb0"}],"key":"kFzrkR8n1M"}],"key":"FY1uUlhDww"},{"type":"tableRow","position":{"start":{"line":1565,"column":1},"end":{"line":1565,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1565,"column":1},"end":{"line":1565,"column":1}},"children":[{"type":"text","value":"Mutable default fix","position":{"start":{"line":1565,"column":1},"end":{"line":1565,"column":1}},"key":"PDMNoCZ02b"}],"key":"n9ny84N7Bx"},{"type":"tableCell","position":{"start":{"line":1565,"column":1},"end":{"line":1565,"column":1}},"children":[{"type":"inlineCode","value":"def func(x, data=None):","position":{"start":{"line":1565,"column":1},"end":{"line":1565,"column":1}},"key":"kmGutEGZ6y"}],"key":"dOo8zAF4H6"},{"type":"tableCell","position":{"start":{"line":1565,"column":1},"end":{"line":1565,"column":1}},"children":[{"type":"text","value":"Avoid default trap","position":{"start":{"line":1565,"column":1},"end":{"line":1565,"column":1}},"key":"OdnrkJlNo6"}],"key":"ajTenSE27Y"}],"key":"mNP2S73G4V"},{"type":"tableRow","position":{"start":{"line":1566,"column":1},"end":{"line":1566,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1566,"column":1},"end":{"line":1566,"column":1}},"children":[{"type":"text","value":"Variable args","position":{"start":{"line":1566,"column":1},"end":{"line":1566,"column":1}},"key":"kD1goSYqGa"}],"key":"yDkNCEgBCX"},{"type":"tableCell","position":{"start":{"line":1566,"column":1},"end":{"line":1566,"column":1}},"children":[{"type":"inlineCode","value":"def func(*args):","position":{"start":{"line":1566,"column":1},"end":{"line":1566,"column":1}},"key":"RhRebgkv2E"}],"key":"T6ZlwAqYyy"},{"type":"tableCell","position":{"start":{"line":1566,"column":1},"end":{"line":1566,"column":1}},"children":[{"type":"text","value":"Unknown number of inputs","position":{"start":{"line":1566,"column":1},"end":{"line":1566,"column":1}},"key":"GQlgfNpeLl"}],"key":"mHHErwHT3G"}],"key":"rQirD7j9fu"},{"type":"tableRow","position":{"start":{"line":1567,"column":1},"end":{"line":1567,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1567,"column":1},"end":{"line":1567,"column":1}},"children":[{"type":"text","value":"Keyword args","position":{"start":{"line":1567,"column":1},"end":{"line":1567,"column":1}},"key":"xDDxN6F2QU"}],"key":"mESql2ZyHL"},{"type":"tableCell","position":{"start":{"line":1567,"column":1},"end":{"line":1567,"column":1}},"children":[{"type":"inlineCode","value":"def func(**kwargs):","position":{"start":{"line":1567,"column":1},"end":{"line":1567,"column":1}},"key":"M3tk0Nw2Iy"}],"key":"Bw3dlGY9ws"},{"type":"tableCell","position":{"start":{"line":1567,"column":1},"end":{"line":1567,"column":1}},"children":[{"type":"text","value":"Flexible options","position":{"start":{"line":1567,"column":1},"end":{"line":1567,"column":1}},"key":"YI2qpqXQtb"}],"key":"sxdHDJ5gIP"}],"key":"bK3Eafojdb"},{"type":"tableRow","position":{"start":{"line":1568,"column":1},"end":{"line":1568,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1568,"column":1},"end":{"line":1568,"column":1}},"children":[{"type":"text","value":"Combined","position":{"start":{"line":1568,"column":1},"end":{"line":1568,"column":1}},"key":"OtQskvkzPP"}],"key":"gb9hVTejh1"},{"type":"tableCell","position":{"start":{"line":1568,"column":1},"end":{"line":1568,"column":1}},"children":[{"type":"inlineCode","value":"def func(x, *args, y=10, **kwargs):","position":{"start":{"line":1568,"column":1},"end":{"line":1568,"column":1}},"key":"nw6IImkNpz"}],"key":"Xr4TX7OFmR"},{"type":"tableCell","position":{"start":{"line":1568,"column":1},"end":{"line":1568,"column":1}},"children":[{"type":"text","value":"Maximum flexibility","position":{"start":{"line":1568,"column":1},"end":{"line":1568,"column":1}},"key":"Y6vYdz226G"}],"key":"epbhoBUWif"}],"key":"INm7gEy0nc"},{"type":"tableRow","position":{"start":{"line":1569,"column":1},"end":{"line":1569,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1569,"column":1},"end":{"line":1569,"column":1}},"children":[{"type":"text","value":"Lambda","position":{"start":{"line":1569,"column":1},"end":{"line":1569,"column":1}},"key":"MZlqY9EKbJ"}],"key":"phrDAX4QeS"},{"type":"tableCell","position":{"start":{"line":1569,"column":1},"end":{"line":1569,"column":1}},"children":[{"type":"inlineCode","value":"lambda x: x**2","position":{"start":{"line":1569,"column":1},"end":{"line":1569,"column":1}},"key":"ytqWY8CxDo"}],"key":"V79xfLsx9H"},{"type":"tableCell","position":{"start":{"line":1569,"column":1},"end":{"line":1569,"column":1}},"children":[{"type":"text","value":"Simple inline functions","position":{"start":{"line":1569,"column":1},"end":{"line":1569,"column":1}},"key":"xY1CmUqN2j"}],"key":"mtGaIqAssQ"}],"key":"ORpOLZlHms"}],"key":"UPL9xX7mrM"},{"type":"heading","depth":3,"position":{"start":{"line":1571,"column":1},"end":{"line":1571,"column":1}},"children":[{"type":"text","value":"Module Import Patterns","position":{"start":{"line":1571,"column":1},"end":{"line":1571,"column":1}},"key":"NwvGLrf1Jz"}],"identifier":"module-import-patterns","label":"Module Import Patterns","html_id":"module-import-patterns","implicit":true,"key":"y1o1nphROD"},{"type":"table","position":{"start":{"line":1573,"column":1},"end":{"line":1579,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":1573,"column":1},"end":{"line":1573,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":1573,"column":1},"end":{"line":1573,"column":1}},"children":[{"type":"text","value":"Pattern","position":{"start":{"line":1573,"column":1},"end":{"line":1573,"column":1}},"key":"L3QzNla0lI"}],"key":"LU5VgegKAW"},{"type":"tableCell","header":true,"position":{"start":{"line":1573,"column":1},"end":{"line":1573,"column":1}},"children":[{"type":"text","value":"Example","position":{"start":{"line":1573,"column":1},"end":{"line":1573,"column":1}},"key":"ruy2vlrv1J"}],"key":"RN3kjvg9nB"},{"type":"tableCell","header":true,"position":{"start":{"line":1573,"column":1},"end":{"line":1573,"column":1}},"children":[{"type":"text","value":"When to Use","position":{"start":{"line":1573,"column":1},"end":{"line":1573,"column":1}},"key":"AlzmUyPLRK"}],"key":"woAea3aGrX"}],"key":"ml3ax7WMmP"},{"type":"tableRow","position":{"start":{"line":1575,"column":1},"end":{"line":1575,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1575,"column":1},"end":{"line":1575,"column":1}},"children":[{"type":"text","value":"Import module","position":{"start":{"line":1575,"column":1},"end":{"line":1575,"column":1}},"key":"CBf3d98Nuo"}],"key":"AKJjAG7tiS"},{"type":"tableCell","position":{"start":{"line":1575,"column":1},"end":{"line":1575,"column":1}},"children":[{"type":"inlineCode","value":"import numpy","position":{"start":{"line":1575,"column":1},"end":{"line":1575,"column":1}},"key":"K0cLRtyOGt"}],"key":"FQFVvCsiPQ"},{"type":"tableCell","position":{"start":{"line":1575,"column":1},"end":{"line":1575,"column":1}},"children":[{"type":"text","value":"Use many functions from module","position":{"start":{"line":1575,"column":1},"end":{"line":1575,"column":1}},"key":"PMtsBcAKku"}],"key":"KgLyT126YN"}],"key":"tFmzq4av3W"},{"type":"tableRow","position":{"start":{"line":1576,"column":1},"end":{"line":1576,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1576,"column":1},"end":{"line":1576,"column":1}},"children":[{"type":"text","value":"Import with alias","position":{"start":{"line":1576,"column":1},"end":{"line":1576,"column":1}},"key":"g1Peq0mFYc"}],"key":"OXXBT84gex"},{"type":"tableCell","position":{"start":{"line":1576,"column":1},"end":{"line":1576,"column":1}},"children":[{"type":"inlineCode","value":"import numpy as np","position":{"start":{"line":1576,"column":1},"end":{"line":1576,"column":1}},"key":"C4DoyGk9Ab"}],"key":"Z2hr3DsMwk"},{"type":"tableCell","position":{"start":{"line":1576,"column":1},"end":{"line":1576,"column":1}},"children":[{"type":"text","value":"Long module names","position":{"start":{"line":1576,"column":1},"end":{"line":1576,"column":1}},"key":"xN7ZDeCw7D"}],"key":"JdMRUCKMEC"}],"key":"ZCn6fwBTdg"},{"type":"tableRow","position":{"start":{"line":1577,"column":1},"end":{"line":1577,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1577,"column":1},"end":{"line":1577,"column":1}},"children":[{"type":"text","value":"Import specific","position":{"start":{"line":1577,"column":1},"end":{"line":1577,"column":1}},"key":"X0DHUy6vsZ"}],"key":"kijeBRmZ7H"},{"type":"tableCell","position":{"start":{"line":1577,"column":1},"end":{"line":1577,"column":1}},"children":[{"type":"inlineCode","value":"from math import sin, cos","position":{"start":{"line":1577,"column":1},"end":{"line":1577,"column":1}},"key":"QCn5JSogto"}],"key":"PtZfrWN0Dj"},{"type":"tableCell","position":{"start":{"line":1577,"column":1},"end":{"line":1577,"column":1}},"children":[{"type":"text","value":"Need few specific functions","position":{"start":{"line":1577,"column":1},"end":{"line":1577,"column":1}},"key":"BR334833oE"}],"key":"i7fknj8Rbs"}],"key":"Gg1dqsRU9q"},{"type":"tableRow","position":{"start":{"line":1578,"column":1},"end":{"line":1578,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1578,"column":1},"end":{"line":1578,"column":1}},"children":[{"type":"text","value":"Import all (avoid!)","position":{"start":{"line":1578,"column":1},"end":{"line":1578,"column":1}},"key":"DJf3vcNYu4"}],"key":"Ee8T3ME62L"},{"type":"tableCell","position":{"start":{"line":1578,"column":1},"end":{"line":1578,"column":1}},"children":[{"type":"inlineCode","value":"from math import *","position":{"start":{"line":1578,"column":1},"end":{"line":1578,"column":1}},"key":"c1VpgC55Yi"}],"key":"w6cVbnyY2S"},{"type":"tableCell","position":{"start":{"line":1578,"column":1},"end":{"line":1578,"column":1}},"children":[{"type":"text","value":"Interactive sessions only","position":{"start":{"line":1578,"column":1},"end":{"line":1578,"column":1}},"key":"Aji1fcFAT4"}],"key":"NtW8cbaGvV"}],"key":"jhiiobwqys"},{"type":"tableRow","position":{"start":{"line":1579,"column":1},"end":{"line":1579,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1579,"column":1},"end":{"line":1579,"column":1}},"children":[{"type":"text","value":"Package import","position":{"start":{"line":1579,"column":1},"end":{"line":1579,"column":1}},"key":"gCh5T2w2z8"}],"key":"N69D6E6TMI"},{"type":"tableCell","position":{"start":{"line":1579,"column":1},"end":{"line":1579,"column":1}},"children":[{"type":"inlineCode","value":"from scipy import constants","position":{"start":{"line":1579,"column":1},"end":{"line":1579,"column":1}},"key":"hQ5tZEAVrB"}],"key":"KBTd2qhauY"},{"type":"tableCell","position":{"start":{"line":1579,"column":1},"end":{"line":1579,"column":1}},"children":[{"type":"text","value":"Specific submodule","position":{"start":{"line":1579,"column":1},"end":{"line":1579,"column":1}},"key":"df81y136zN"}],"key":"d1AosEmOqY"}],"key":"YYbHvTGz6F"}],"key":"iwjKWQLny2"},{"type":"heading","depth":3,"position":{"start":{"line":1581,"column":1},"end":{"line":1581,"column":1}},"children":[{"type":"text","value":"Common Function Gotchas and Fixes","position":{"start":{"line":1581,"column":1},"end":{"line":1581,"column":1}},"key":"bjivruYV3R"}],"identifier":"common-function-gotchas-and-fixes","label":"Common Function Gotchas and Fixes","html_id":"common-function-gotchas-and-fixes","implicit":true,"key":"E24tD10zrf"},{"type":"table","position":{"start":{"line":1583,"column":1},"end":{"line":1590,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":1583,"column":1},"end":{"line":1583,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":1583,"column":1},"end":{"line":1583,"column":1}},"children":[{"type":"text","value":"Problem","position":{"start":{"line":1583,"column":1},"end":{"line":1583,"column":1}},"key":"vh9cXs0jaM"}],"key":"LKTtPKiKGf"},{"type":"tableCell","header":true,"position":{"start":{"line":1583,"column":1},"end":{"line":1583,"column":1}},"children":[{"type":"text","value":"Symptom","position":{"start":{"line":1583,"column":1},"end":{"line":1583,"column":1}},"key":"iVIrjtNnTw"}],"key":"K9GvnnsyWg"},{"type":"tableCell","header":true,"position":{"start":{"line":1583,"column":1},"end":{"line":1583,"column":1}},"children":[{"type":"text","value":"Fix","position":{"start":{"line":1583,"column":1},"end":{"line":1583,"column":1}},"key":"FKEZ4TBV7y"}],"key":"ZUl7YeC0sz"}],"key":"NFnV9quTyz"},{"type":"tableRow","position":{"start":{"line":1585,"column":1},"end":{"line":1585,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1585,"column":1},"end":{"line":1585,"column":1}},"children":[{"type":"text","value":"Mutable default","position":{"start":{"line":1585,"column":1},"end":{"line":1585,"column":1}},"key":"eveBIaKqK9"}],"key":"Ncxa803LSv"},{"type":"tableCell","position":{"start":{"line":1585,"column":1},"end":{"line":1585,"column":1}},"children":[{"type":"text","value":"Data persists between calls","position":{"start":{"line":1585,"column":1},"end":{"line":1585,"column":1}},"key":"FdkW6K26Zl"}],"key":"HG7ggi8euK"},{"type":"tableCell","position":{"start":{"line":1585,"column":1},"end":{"line":1585,"column":1}},"children":[{"type":"text","value":"Use ","position":{"start":{"line":1585,"column":1},"end":{"line":1585,"column":1}},"key":"xoJlrIYxj7"},{"type":"inlineCode","value":"None","position":{"start":{"line":1585,"column":1},"end":{"line":1585,"column":1}},"key":"mWn6LISVRP"},{"type":"text","value":" sentinel","position":{"start":{"line":1585,"column":1},"end":{"line":1585,"column":1}},"key":"FNDxgYffR1"}],"key":"n6n0JiJO5l"}],"key":"MGDjm2sF3B"},{"type":"tableRow","position":{"start":{"line":1586,"column":1},"end":{"line":1586,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1586,"column":1},"end":{"line":1586,"column":1}},"children":[{"type":"text","value":"UnboundLocalError","position":{"start":{"line":1586,"column":1},"end":{"line":1586,"column":1}},"key":"tt72h7djwk"}],"key":"pbnDeOaymb"},{"type":"tableCell","position":{"start":{"line":1586,"column":1},"end":{"line":1586,"column":1}},"children":[{"type":"text","value":"Can’t increment global","position":{"start":{"line":1586,"column":1},"end":{"line":1586,"column":1}},"key":"Er1UQygkuI"}],"key":"x8FiFOBKYI"},{"type":"tableCell","position":{"start":{"line":1586,"column":1},"end":{"line":1586,"column":1}},"children":[{"type":"text","value":"Use ","position":{"start":{"line":1586,"column":1},"end":{"line":1586,"column":1}},"key":"JUPzksq5Cx"},{"type":"inlineCode","value":"global","position":{"start":{"line":1586,"column":1},"end":{"line":1586,"column":1}},"key":"PdEzx12gyO"},{"type":"text","value":" keyword or pass explicitly","position":{"start":{"line":1586,"column":1},"end":{"line":1586,"column":1}},"key":"HyF207Rm53"}],"key":"l061xrATRF"}],"key":"UQGl0EHfJ4"},{"type":"tableRow","position":{"start":{"line":1587,"column":1},"end":{"line":1587,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1587,"column":1},"end":{"line":1587,"column":1}},"children":[{"type":"text","value":"Namespace pollution","position":{"start":{"line":1587,"column":1},"end":{"line":1587,"column":1}},"key":"jMelTDkLgK"}],"key":"yRlXvV46pO"},{"type":"tableCell","position":{"start":{"line":1587,"column":1},"end":{"line":1587,"column":1}},"children":[{"type":"text","value":"Name conflicts","position":{"start":{"line":1587,"column":1},"end":{"line":1587,"column":1}},"key":"UPTRwV11VD"}],"key":"bGRIkcL2HJ"},{"type":"tableCell","position":{"start":{"line":1587,"column":1},"end":{"line":1587,"column":1}},"children":[{"type":"text","value":"Avoid wildcard imports","position":{"start":{"line":1587,"column":1},"end":{"line":1587,"column":1}},"key":"bxjlDbsJWM"}],"key":"Yfg8T9ADoM"}],"key":"w946A8xQ0o"},{"type":"tableRow","position":{"start":{"line":1588,"column":1},"end":{"line":1588,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1588,"column":1},"end":{"line":1588,"column":1}},"children":[{"type":"text","value":"Slow loops","position":{"start":{"line":1588,"column":1},"end":{"line":1588,"column":1}},"key":"X5kBRCvqqV"}],"key":"PBqmw0cG5p"},{"type":"tableCell","position":{"start":{"line":1588,"column":1},"end":{"line":1588,"column":1}},"children":[{"type":"text","value":"Minutes for simple operations","position":{"start":{"line":1588,"column":1},"end":{"line":1588,"column":1}},"key":"X8rOOZYOBS"}],"key":"xLSq5FkDLx"},{"type":"tableCell","position":{"start":{"line":1588,"column":1},"end":{"line":1588,"column":1}},"children":[{"type":"text","value":"Vectorize with NumPy","position":{"start":{"line":1588,"column":1},"end":{"line":1588,"column":1}},"key":"dojwY6MHZx"}],"key":"xTWt43lp6e"}],"key":"tFa6wdtMvp"},{"type":"tableRow","position":{"start":{"line":1589,"column":1},"end":{"line":1589,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1589,"column":1},"end":{"line":1589,"column":1}},"children":[{"type":"text","value":"Repeated calculation","position":{"start":{"line":1589,"column":1},"end":{"line":1589,"column":1}},"key":"dcNQTy7oPt"}],"key":"zyuBID5UiW"},{"type":"tableCell","position":{"start":{"line":1589,"column":1},"end":{"line":1589,"column":1}},"children":[{"type":"text","value":"Same expensive computation","position":{"start":{"line":1589,"column":1},"end":{"line":1589,"column":1}},"key":"q0VsaeuBCT"}],"key":"T6ymlqs3JE"},{"type":"tableCell","position":{"start":{"line":1589,"column":1},"end":{"line":1589,"column":1}},"children":[{"type":"text","value":"Add ","position":{"start":{"line":1589,"column":1},"end":{"line":1589,"column":1}},"key":"ldsjAIsOlr"},{"type":"inlineCode","value":"@lru_cache","position":{"start":{"line":1589,"column":1},"end":{"line":1589,"column":1}},"key":"sSlEavDT6u"},{"type":"text","value":" decorator","position":{"start":{"line":1589,"column":1},"end":{"line":1589,"column":1}},"key":"Wzx63IStaU"}],"key":"KSWt2nL28X"}],"key":"FWc0pFvwgb"},{"type":"tableRow","position":{"start":{"line":1590,"column":1},"end":{"line":1590,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1590,"column":1},"end":{"line":1590,"column":1}},"children":[{"type":"text","value":"Import not found","position":{"start":{"line":1590,"column":1},"end":{"line":1590,"column":1}},"key":"M0AC1YKGqM"}],"key":"syy0YvQHv3"},{"type":"tableCell","position":{"start":{"line":1590,"column":1},"end":{"line":1590,"column":1}},"children":[{"type":"text","value":"ModuleNotFoundError","position":{"start":{"line":1590,"column":1},"end":{"line":1590,"column":1}},"key":"TVyNVnjRdQ"}],"key":"epKgz3pdn2"},{"type":"tableCell","position":{"start":{"line":1590,"column":1},"end":{"line":1590,"column":1}},"children":[{"type":"text","value":"Check sys.path or install package","position":{"start":{"line":1590,"column":1},"end":{"line":1590,"column":1}},"key":"ZYJb0l9TN4"}],"key":"ARyry6sr7q"}],"key":"Qb6zL30GJB"}],"key":"MVmtv0s2zs"},{"type":"heading","depth":2,"position":{"start":{"line":1592,"column":1},"end":{"line":1592,"column":1}},"children":[{"type":"text","value":"Next Chapter Preview","position":{"start":{"line":1592,"column":1},"end":{"line":1592,"column":1}},"key":"YvS2Ysj8s6"}],"identifier":"next-chapter-preview","label":"Next Chapter Preview","html_id":"next-chapter-preview","implicit":true,"key":"vf04PYbVMN"},{"type":"paragraph","position":{"start":{"line":1594,"column":1},"end":{"line":1594,"column":1}},"children":[{"type":"text","value":"With functions and modules mastered, Chapter 6 will introduce Object-Oriented Programming (OOP)—a paradigm that bundles data and behavior together. You’ll learn to create classes that model physical systems naturally: a ","position":{"start":{"line":1594,"column":1},"end":{"line":1594,"column":1}},"key":"P6GFvFT2Gc"},{"type":"inlineCode","value":"Particle","position":{"start":{"line":1594,"column":1},"end":{"line":1594,"column":1}},"key":"GVOefLjsIn"},{"type":"text","value":" class with position and velocity attributes, methods to calculate energy and momentum, and special methods that make your objects work seamlessly with Python’s built-in functions.","position":{"start":{"line":1594,"column":1},"end":{"line":1594,"column":1}},"key":"wwzuVXQE5o"}],"key":"xRpuPuONlU"},{"type":"paragraph","position":{"start":{"line":1596,"column":1},"end":{"line":1596,"column":1}},"children":[{"type":"text","value":"The functional programming concepts from this chapter provide essential background for OOP. Methods are just functions attached to objects, and understanding scope prepares you for the ","position":{"start":{"line":1596,"column":1},"end":{"line":1596,"column":1}},"key":"rLDVQbFFYq"},{"type":"inlineCode","value":"self","position":{"start":{"line":1596,"column":1},"end":{"line":1596,"column":1}},"key":"haGuqs4Wb2"},{"type":"text","value":" parameter that confuses many beginners. The module organization skills you’ve developed will expand to organizing classes and building object hierarchies. Most importantly, the design thinking you’ve practiced—creating clean interfaces and thinking about contracts—directly applies to designing effective classes that model the complex relationships in physical systems.","position":{"start":{"line":1596,"column":1},"end":{"line":1596,"column":1}},"key":"wManZ6DNj7"}],"key":"aO4CGzk13V"}],"key":"j7qNf6v0wK"}],"key":"yerhQgFU7F"},"references":{"cite":{"order":[],"data":{}}}}