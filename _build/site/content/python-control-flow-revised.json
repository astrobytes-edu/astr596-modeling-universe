{"version":2,"kind":"Article","sha256":"c6a0e0420061ce4254868084f3aa2f1f669e4cb3149907b6b1c9a0d53e80fd14","slug":"python-control-flow-revised","location":"/03-scientific-computing-with-python/01-python-fundamentals/03-python-control-flow-REVISED.md","dependencies":[],"frontmatter":{"title":"Chapter 3: Control Flow & Logic","content_includes_title":false,"authors":[{"nameParsed":{"literal":"Anna Rosen","given":"Anna","family":"Rosen"},"name":"Anna Rosen","orcid":"0000-0003-4423-0660","email":"alrosen@sdsu.edu","affiliations":["San Diego State University"],"id":"contributors-myst-generated-uid-0","corresponding":true}],"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"MIT","url":"https://opensource.org/licenses/MIT","name":"MIT License","free":true,"osi":true}},"github":"https://github.com/astrobytes-edu/astr596-modeling-universe","subject":"Modeling the Universe","venue":{"title":"ASTR 596 - Fall 2025","url":"https://www.anna-rosen.com"},"keywords":["computational astrophysics","python","numerical methods","machine learning","monte carlo","neural networks","radiative transfer","bayesian inference","JAX"],"affiliations":[{"id":"San Diego State University","name":"San Diego State University"}],"numbering":{"title":{"offset":2}},"edit_url":"https://github.com/astrobytes-edu/astr596-modeling-universe/blob/main/03-scientific-computing-with-python/01-python-fundamentals/03-python-control-flow-REVISED.md","exports":[{"format":"md","filename":"03-python-control-flow-REVISED.md","url":"/03-python-control-fl-e388abd2f92791e659ff7e89b67169d5.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Learning Objectives","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Mc63BUz75E"}],"identifier":"learning-objectives","label":"Learning Objectives","html_id":"learning-objectives","implicit":true,"key":"ahbkBX8Z7M"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"By the end of this chapter, you will be able to:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ImUd0CwwCx"}],"key":"S3x8ae1JQK"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Design algorithms using structured pseudocode before writing any Python code","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"zPjNFfJW8c"}],"key":"NQGKCwnylg"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Implement conditional statements (if/elif/else) with proper handling of edge cases","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"UfX06FccBi"}],"key":"ClGiq6eSrH"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Choose appropriate loop structures (for vs while) based on problem requirements","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"S6sbzKHBqt"}],"key":"VAT8HjjcSM"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Handle floating-point comparisons safely in conditional statements","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"hjmPXt5sEm"}],"key":"WqNYKnZBuK"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Debug logic errors systematically using IPython’s debugger and logging","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"I555JxxqqS"}],"key":"iTCQn2qoZc"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Write efficient list comprehensions while knowing when to avoid them","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"WRdPomgQGI"}],"key":"Ap8eEjzKEI"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Recognize and apply universal algorithmic patterns across different problems","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"Fl6lMrykos"}],"key":"KqDnygGj6c"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Build defensive code that validates assumptions and catches errors early","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"Ln7teGa1RR"}],"key":"MJ0lwSlSeS"}],"key":"COyx5gbDG6"},{"type":"heading","depth":2,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Prerequisites Check","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"ne8QhMQ2ee"}],"identifier":"prerequisites-check","label":"Prerequisites Check","html_id":"prerequisites-check","implicit":true,"key":"ppaJlxuRBh"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Before starting this chapter, verify you can:","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"EqcMIjlrkX"}],"key":"b1JEJeAlxy"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":18,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"✔ Use IPython effectively with magic commands like %timeit (Chapter 1)","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"SoHAt3wHLM"}],"key":"SCxwX0vkjy"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"✔ Understand floating-point precision and comparison issues (Chapter 2)","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"CFiQBm8xHd"}],"key":"gC2iqVvJyV"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"✔ Write and run Python scripts from the terminal (Chapter 1)","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"o51H9Cnazl"}],"key":"ilOC5WT4Wm"},{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"✔ Use f-strings for formatted output (Chapter 2)","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"ok15r07W4R"}],"key":"u0Yf2JZsI3"}],"key":"bh1qnsr1sC"}],"key":"IMqMGzBXpK"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Quick prerequisite check - you should understand this code\nimport math\n\n# From Chapter 2: Floating-point comparison\ndef safe_equal(a, b, tol=1e-9):\n    return abs(a - b) < tol\n\n# Test your understanding\nvalue = 0.1 + 0.2\nprint(f\"Is {value} == 0.3? {value == 0.3}\")\nprint(f\"Is {value} ≈ 0.3? {safe_equal(value, 0.3)}\")","key":"NWYeF7fTDI"},{"type":"output","id":"Jahcof201e5VwRnFfkhCy","data":[],"key":"X3WarzsqNE"}],"key":"lngpER8zpP"},{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"text","value":"Chapter Overview","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"rmNnePqqUy"}],"identifier":"chapter-overview","label":"Chapter Overview","html_id":"chapter-overview","implicit":true,"key":"dXKDHOk2OU"},{"type":"paragraph","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"children":[{"type":"text","value":"Programming is fundamentally about teaching computers to make decisions and repeat tasks. When you write an if-statement or a loop, you’re translating human logic into instructions a machine can follow. But here’s the critical insight that separates computational thinkers from mere coders: the logic must be designed before it’s implemented.","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"key":"xYGv1RY158"}],"key":"Cq1mfr3rPF"},{"type":"paragraph","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"text","value":"This chapter transforms you from someone who writes code to someone who designs algorithms. We’ll start with the lost art of pseudocode – not as a bureaucratic exercise, but as the difference between code that works by accident and code that works by design. You’ll learn to recognize universal patterns that appear across all of computational physics: iteration, accumulation, filtering, mapping, and reduction. These patterns will appear in every project you build, from N-body simulations to neural networks.","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"J8IOn156gV"}],"key":"urqzLcHiGy"},{"type":"paragraph","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"text","value":"The control flow structures we explore here are where your numerical calculations from Chapter 2 become dynamic algorithms. Every convergence test, every adaptive timestep, every Monte Carlo acceptance criterion depends on mastering these concepts deeply, not just syntactically. By chapter’s end, you’ll see code not as a sequence of commands, but as a carefully orchestrated flow of decisions and iterations that solve real scientific problems.","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"PzDqOg3S9I"}],"key":"OCmzSHreiK"},{"type":"heading","depth":2,"position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"text","value":"3.1 Algorithmic Thinking: The Lost Art of Pseudocode","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"tt3iK8w8xy"}],"identifier":"id-3-1-algorithmic-thinking-the-lost-art-of-pseudocode","label":"3.1 Algorithmic Thinking: The Lost Art of Pseudocode","html_id":"id-3-1-algorithmic-thinking-the-lost-art-of-pseudocode","implicit":true,"key":"ztrewKN5oj"},{"type":"paragraph","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"text","value":"Most students jump straight from problem to code, then wonder why they spend hours debugging. Professional computational scientists spend more time thinking than typing. Pseudocode is how we think precisely about algorithms without getting distracted by syntax.","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"WQQT0ZX6dv"}],"key":"IsJ2wg2SfU"},{"type":"heading","depth":3,"position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"children":[{"type":"text","value":"Why Pseudocode Matters in Scientific Computing","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"key":"nC8Wd1qioZ"}],"identifier":"why-pseudocode-matters-in-scientific-computing","label":"Why Pseudocode Matters in Scientific Computing","html_id":"why-pseudocode-matters-in-scientific-computing","implicit":true,"key":"TzoPHpmcF2"},{"type":"paragraph","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"children":[{"type":"text","value":"Consider this scenario: You need to implement adaptive timestepping for an orbital integrator. Without pseudocode, you’ll likely write code, run it, watch orbits spiral incorrectly, debug for hours, and maybe get it working through trial and error. With pseudocode, you’ll identify edge cases, boundary conditions, and logical flaws before writing a single line of Python.","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"wPCIBDkYRx"}],"key":"K93AiJh4Od"}],"key":"Dv2J0NtBJX"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# WITHOUT PSEUDOCODE (typical student approach):\n# \"I'll figure it out as I code...\"\ndef integrate_naive(state, t_end):\n    dt = 0.01\n    while state.time < t_end:\n        new_state = step(state, dt)\n        error = estimate_error(state, new_state)\n        if error > tolerance:\n            dt = dt * 0.5  # Seems reasonable?\n        state = new_state\n    return state\n# Wait, this doesn't work... infinite loop when error is bad!\n# Also, dt never increases... hours of debugging ahead","key":"F0ktQsVKFq"},{"type":"output","id":"PmHbZcMwCg45G47So4DKb","data":[],"key":"JKfDYqf4YP"}],"key":"hsLZ3eT0Ye"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"children":[{"type":"text","value":"Now let’s see how pseudocode reveals problems immediately! Ready for something amazing? This is exactly how professional astronomers design algorithms for everything from orbit calculations to galaxy simulations. You’re about to learn the same systematic approach used at NASA, ESO, and major observatories worldwide.","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"ZOAQuiy8Ur"}],"key":"DKDbDQgKdX"},{"type":"heading","depth":3,"position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"children":[{"type":"text","value":"The Three Levels of Pseudocode Refinement","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"h6NsWYMtkW"}],"identifier":"the-three-levels-of-pseudocode-refinement","label":"The Three Levels of Pseudocode Refinement","html_id":"the-three-levels-of-pseudocode-refinement","implicit":true,"key":"eRiN1pTPyQ"},{"type":"paragraph","position":{"start":{"line":73,"column":1},"end":{"line":73,"column":1}},"children":[{"type":"text","value":"Professional algorithm development happens in stages, each revealing different issues. Don’t worry if this feels weird at first - every programmer has felt that way! But once you embrace pseudocode, you’ll save countless hours of debugging. Let’s build this together:","position":{"start":{"line":73,"column":1},"end":{"line":73,"column":1}},"key":"uJIGcZBKyC"}],"key":"Y0J4HrG4nw"},{"type":"paragraph","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"children":[{"type":"strong","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"children":[{"type":"text","value":"Level 1: Conceptual Overview (The Big Picture)","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"mKPpaJtter"}],"key":"H2B0vTQgiL"}],"key":"sB86ZsrFAa"},{"type":"code","lang":"","value":"WHILE simulation not done:\n    Take a step\n    Check if step was good\n    Adjust timestep","position":{"start":{"line":76,"column":1},"end":{"line":81,"column":1}},"key":"tHHUHeLC8K"},{"type":"paragraph","position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"text","value":"This level helps you understand the overall flow. Already, we can ask: What defines “done”? What makes a step “good”? These questions matter!","position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"key":"G0fKML9rVi"}],"key":"x4fljUtXwB"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🎯 Check Your Understanding","position":{"start":{"line":85,"column":1},"end":{"line":85,"column":1}},"key":"gIPkz94rQm"}],"key":"i5cK0MOUzc"},{"type":"paragraph","position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"children":[{"type":"text","value":"Before continuing, identify at least two problems with the Level 1 pseudocode above. What could go wrong?","position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"key":"zkKhSCEtLC"}],"key":"qfzbKBHJbq"},{"type":"details","children":[{"type":"summary","children":[{"type":"text","value":"Click for answer","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"iUcwjCh1P6"}],"key":"MsyD560BCx"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":91,"column":1},"end":{"line":93,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"children":[{"type":"text","value":"No exit condition if step is never “good” (infinite loop risk)","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"qtGUOLS5Mm"}],"key":"d99bQI721Y"},{"type":"listItem","spread":true,"position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"children":[{"type":"text","value":"No bounds on timestep adjustment (could grow infinitely or shrink to zero)","position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"key":"GRvf4ODnxW"}],"key":"YmtY5QAG0x"},{"type":"listItem","spread":true,"position":{"start":{"line":93,"column":1},"end":{"line":93,"column":1}},"children":[{"type":"text","value":"“Simulation done” is vague - need precise termination condition","position":{"start":{"line":93,"column":1},"end":{"line":93,"column":1}},"key":"FN7PUVzTLT"}],"key":"tpz1ASJa2F"}],"key":"QRnLd5qIfo"}],"key":"ZnSis4gGo2"}],"class":"tip","key":"mKU7eeWggS"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"💡 Computational Thinking: The Sentinel Pattern","position":{"start":{"line":97,"column":1},"end":{"line":97,"column":1}},"key":"r8fNJkl1WI"}],"key":"Fl9GknDt0q"},{"type":"paragraph","position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"children":[{"type":"strong","position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"children":[{"type":"text","value":"PATTERN: Sentinel Values","position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"key":"koO45577ry"}],"key":"EpwR48OQnM"}],"key":"uEFVjYyFzm"},{"type":"paragraph","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"children":[{"type":"text","value":"A sentinel is a special value that signals “stop processing.” This pattern appears everywhere in computing:","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"X0eX7J3FSk"}],"key":"YAktsezN1v"},{"type":"code","lang":"python","value":"# Reading until special marker\ndata = []\nwhile True:\n    value = get_next_value()\n    if value == -999:  # Sentinel value\n        break\n    data.append(value)","position":{"start":{"line":104,"column":1},"end":{"line":111,"column":1}},"key":"aGLz5QFDzD"}],"class":"note","key":"tbQ4Zu5YFm"},{"type":"paragraph","position":{"start":{"line":114,"column":1},"end":{"line":114,"column":1}},"children":[{"type":"text","value":"Real-world applications:","position":{"start":{"line":114,"column":1},"end":{"line":114,"column":1}},"key":"yHPZCWCDPz"}],"key":"YJQ1Nm2SX0"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":115,"column":1},"end":{"line":119,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":115,"column":1},"end":{"line":115,"column":1}},"children":[{"type":"strong","position":{"start":{"line":115,"column":1},"end":{"line":115,"column":1}},"children":[{"type":"text","value":"File formats","position":{"start":{"line":115,"column":1},"end":{"line":115,"column":1}},"key":"yUs8WB2Qop"}],"key":"mlpyRmQ2Un"},{"type":"text","value":": EOF (End of File) markers","position":{"start":{"line":115,"column":1},"end":{"line":115,"column":1}},"key":"fAzf2JeDBf"}],"key":"vMwLyjyA2q"},{"type":"listItem","spread":true,"position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"children":[{"type":"strong","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"children":[{"type":"text","value":"Network protocols","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"Jvi0cWKLIn"}],"key":"RglWnwnkjx"},{"type":"text","value":": Message terminators like “\\r\\n”","position":{"start":{"line":116,"column":1},"end":{"line":116,"column":1}},"key":"OnQpjQ0NvF"}],"key":"J5jCJToFTi"},{"type":"listItem","spread":true,"position":{"start":{"line":117,"column":1},"end":{"line":117,"column":1}},"children":[{"type":"strong","position":{"start":{"line":117,"column":1},"end":{"line":117,"column":1}},"children":[{"type":"text","value":"Data processing","position":{"start":{"line":117,"column":1},"end":{"line":117,"column":1}},"key":"VAjLg4b2HT"}],"key":"T6aaM9FC8G"},{"type":"text","value":": Missing data indicators (NaN, -999, NULL)","position":{"start":{"line":117,"column":1},"end":{"line":117,"column":1}},"key":"VRcZpFUAQS"}],"key":"KMoKAOIx3B"},{"type":"listItem","spread":true,"position":{"start":{"line":118,"column":1},"end":{"line":119,"column":1}},"children":[{"type":"strong","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"children":[{"type":"text","value":"String processing","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"PYRkmvqGz0"}],"key":"VrNqTCyhff"},{"type":"text","value":": Null terminators in C strings","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"pMWyf5vFly"}],"key":"WjwHHMVTrX"}],"key":"bxXZyVFl0i"},{"type":"paragraph","position":{"start":{"line":120,"column":1},"end":{"line":120,"column":1}},"children":[{"type":"text","value":"The sentinel pattern is how computers know when to stop! You’re using the same technique that controls internet data packets and spacecraft telemetry streams.","position":{"start":{"line":120,"column":1},"end":{"line":120,"column":1}},"key":"LEguzM8A0Q"}],"key":"JLeVg5ZEQp"},{"type":"code","lang":"","value":"\n**Level 2: Structural Detail (The Flow)**","position":{"start":{"line":121,"column":1},"end":{"line":124,"column":1}},"key":"S2gZyahyN8"},{"type":"paragraph","position":{"start":{"line":125,"column":1},"end":{"line":129,"column":1}},"children":[{"type":"text","value":"WHILE time < end_time:\nDO:\ntrial_step = integrate(state, dt)\nerror = compute_error(trial_step)\nUNTIL error < tolerance OR dt < dt_min","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"key":"PrYjyvs0R8"}],"key":"aQvtw9ufzR"},{"type":"code","lang":"","value":"state = trial_step\ndt = adjust_timestep(error, dt)","position":{"start":{"line":131,"column":1},"end":{"line":132,"column":1}},"key":"gt9xO3jBG8"},{"type":"code","lang":"","value":"\nNow we see the retry logic and minimum timestep safeguard. This level reveals the need for error calculation and timestep adjustment strategies.\n\n**Level 3: Implementation-Ready (First Half)**","position":{"start":{"line":133,"column":1},"end":{"line":138,"column":1}},"key":"uMH7fSbrXh"},{"type":"paragraph","position":{"start":{"line":139,"column":1},"end":{"line":143,"column":1}},"children":[{"type":"text","value":"FUNCTION adaptive_integrate(initial_state, end_time, tolerance):\nstate ← initial_state\ndt ← estimate_initial_timestep(state)\ndt_min ← 1e-10 * (end_time - initial_state.time)\ndt_max ← 0.1 * (end_time - initial_state.time)","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"key":"vl6xmVOMNB"}],"key":"sr9Uu9rQtO"},{"type":"code","lang":"","value":"WHILE state.time < end_time:\n    step_accepted ← False\n    attempts ← 0\n    \n    # Inner loop for step acceptance (continued below)","position":{"start":{"line":145,"column":1},"end":{"line":149,"column":1}},"key":"OYHD50hsO3"},{"type":"code","lang":"","value":"\n**Level 3: Implementation-Ready (Second Half)**","position":{"start":{"line":150,"column":1},"end":{"line":153,"column":1}},"key":"AcRkGBBZTE"},{"type":"code","lang":"","value":"    WHILE NOT step_accepted AND attempts < MAX_ATTEMPTS:\n        dt_actual ← min(dt, end_time - state.time)\n        trial_state ← rk4_step(state, dt_actual)\n        error ← estimate_error(state, trial_state)\n        \n        IF error < tolerance:\n            step_accepted ← True\n            state ← trial_state\n            IF error < 0.1 * tolerance:\n                dt ← min(dt * 1.5, dt_max)\n        ELSE:\n            dt ← max(dt * 0.5, dt_min)\n            attempts ← attempts + 1\n    \n    IF NOT step_accepted:\n        RAISE \"Cannot achieve tolerance\"\n\nRETURN state","position":{"start":{"line":154,"column":1},"end":{"line":171,"column":1}},"key":"RniOh2LvBX"},{"type":"code","lang":"","value":"\nEach refinement level reveals new issues and solutions. This is computational thinking in action!\n\n```{admonition} 💡 Computational Thinking: The Universal Pattern of Adaptive Algorithms\n:class: note\n\nAdaptive timestepping is an instance of a universal pattern:\n\n**PATTERN: Adaptive Refinement**\n1. Attempt action with current parameters\n2. Evaluate quality of result  \n3. If quality insufficient: refine parameters and retry\n4. If quality acceptable: proceed and possibly coarsen\n5. Include safeguards against infinite refinement\n\nThis pattern appears everywhere in computational physics:\n- Adaptive mesh refinement (AMR) in hydrodynamics\n- Step size control in ODE solvers\n- Learning rate scheduling in neural networks  \n- Convergence acceleration in iterative solvers\n- Monte Carlo importance sampling\n\nOnce you recognize this pattern, you'll see it everywhere!","position":{"start":{"line":172,"column":1},"end":{"line":196,"column":1}},"key":"QQCnfN7MLa"},{"type":"heading","depth":2,"position":{"start":{"line":198,"column":1},"end":{"line":198,"column":1}},"children":[{"type":"text","value":"3.2 Boolean Logic in Scientific Computing","position":{"start":{"line":198,"column":1},"end":{"line":198,"column":1}},"key":"pSaaaSnA9a"}],"identifier":"id-3-2-boolean-logic-in-scientific-computing","label":"3.2 Boolean Logic in Scientific Computing","html_id":"id-3-2-boolean-logic-in-scientific-computing","implicit":true,"key":"zxn3M6A36c"},{"type":"paragraph","position":{"start":{"line":200,"column":1},"end":{"line":200,"column":1}},"children":[{"type":"text","value":"Every decision in your code ultimately reduces to true or false. But in scientific computing, these decisions often involve floating-point numbers, where equality is treacherous and precision is limited. Let’s master this fundamental building block!","position":{"start":{"line":200,"column":1},"end":{"line":200,"column":1}},"key":"h5T9oW4VHb"}],"key":"zASvge9ZWY"},{"type":"heading","depth":3,"position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"children":[{"type":"text","value":"The Fundamental Comparisons","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"Xn4aplvZmD"}],"identifier":"the-fundamental-comparisons","label":"The Fundamental Comparisons","html_id":"the-fundamental-comparisons","implicit":true,"key":"AwLQVgsZjA"}],"key":"QSyTHeXZc0"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Basic comparisons\ntemperature = 5778  # Kelvin (Sun's surface)\n\nprint(f\"Hot enough for fusion? {temperature > 5000}\")  # True\nprint(f\"Exactly 5778K? {temperature == 5778}\")  # True (integers!)\n\n# The floating-point trap\ncalculated_temp = 5778.0000000001\nprint(f\"Calculated == Expected? {calculated_temp == 5778.0}\")  # False!\nprint(f\"Tiny difference: {calculated_temp - 5778.0}\")","key":"VhZNVKMWo4"},{"type":"output","id":"5w19kp2PC4e44hbL-W98d","data":[],"key":"t10N7JE3EL"}],"key":"av9b2v9CTy"},{"type":"block","children":[{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"⚠️ Common Bug Alert: The Equality Trap","position":{"start":{"line":217,"column":1},"end":{"line":217,"column":1}},"key":"iuYR8CEMYc"}],"key":"vPWd5Eo8sH"},{"type":"paragraph","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"children":[{"type":"strong","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"children":[{"type":"text","value":"Never use ","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"wcatY6KxA0"},{"type":"inlineCode","value":"==","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"qy55BSQQmh"},{"type":"text","value":" with floating-point numbers!","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"BNSZBO1Fu0"}],"key":"temXrn1mj1"},{"type":"text","value":" Even tiny rounding errors break equality.","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"P5juX2VWwJ"}],"key":"d8hzXVilTe"},{"type":"paragraph","position":{"start":{"line":222,"column":1},"end":{"line":222,"column":1}},"children":[{"type":"strong","position":{"start":{"line":222,"column":1},"end":{"line":222,"column":1}},"children":[{"type":"text","value":"Wrong:","position":{"start":{"line":222,"column":1},"end":{"line":222,"column":1}},"key":"SgC0ymakH3"}],"key":"jqhXtTLN2m"}],"key":"VELYONnv4X"},{"type":"code","lang":"python","value":"if velocity == 0.0:  # Dangerous!\n    print(\"At rest\")","position":{"start":{"line":223,"column":1},"end":{"line":225,"column":1}},"key":"gWsMakntKL"}],"class":"warning","key":"guQWNjNSsw"},{"type":"paragraph","position":{"start":{"line":228,"column":1},"end":{"line":228,"column":1}},"children":[{"type":"strong","position":{"start":{"line":228,"column":1},"end":{"line":228,"column":1}},"children":[{"type":"text","value":"Right:","position":{"start":{"line":228,"column":1},"end":{"line":228,"column":1}},"key":"mkcNGhT7fW"}],"key":"YpcvjAvIka"}],"key":"mQ1NdNSQa3"},{"type":"code","lang":"python","value":"if abs(velocity) < 1e-10:  # Safe!\n    print(\"Effectively at rest\")","position":{"start":{"line":229,"column":1},"end":{"line":232,"column":1}},"key":"doIkYpmKqb"},{"type":"code","lang":"","value":"\n### Defensive Comparisons for Numerical Work\n\n```{code-cell} python\nimport math\n\ndef safe_equal(a, b, rel_tol=1e-9, abs_tol=1e-12):\n    \"\"\"Safe floating-point comparison for scientific computing.\"\"\"\n    # Handle exact equality (includes infinities)\n    if a == b:\n        return True\n    \n    # Handle NaN (NaN != NaN by IEEE standard)\n    if math.isnan(a) or math.isnan(b):\n        return False\n    \n    # Handle infinity\n    if math.isinf(a) or math.isinf(b):\n        return a == b\n    \n    # Normal comparison with tolerance\n    return abs(a - b) <= max(rel_tol * max(abs(a), abs(b)), abs_tol)\n\n# Test our safe comparison\nprint(f\"0.1 + 0.2 == 0.3? {0.1 + 0.2 == 0.3}\")  # False!\nprint(f\"Safe equal? {safe_equal(0.1 + 0.2, 0.3)}\")  # True!","position":{"start":{"line":233,"column":1},"end":{"line":260,"column":1}},"key":"HV1OjCTtLG"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🎯 Check Your Understanding: Float Comparison","position":{"start":{"line":262,"column":1},"end":{"line":262,"column":1}},"key":"LSn7uHdLiR"}],"key":"etXcbbsgQp"},{"type":"paragraph","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"text","value":"Without running the code, predict what these will return:","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"UOvPetYuYs"}],"key":"ZL8VRJH5hY"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":266,"column":1},"end":{"line":269,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"children":[{"type":"inlineCode","value":"(0.1 + 0.2) == 0.3","position":{"start":{"line":266,"column":1},"end":{"line":266,"column":1}},"key":"a2J0R3xANt"}],"key":"Sc0tyaYNSj"},{"type":"listItem","spread":true,"position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"children":[{"type":"inlineCode","value":"math.isclose(0.1 + 0.2, 0.3)","position":{"start":{"line":267,"column":1},"end":{"line":267,"column":1}},"key":"MKrgyGe7b4"}],"key":"QX37VUEXBM"},{"type":"listItem","spread":true,"position":{"start":{"line":268,"column":1},"end":{"line":269,"column":1}},"children":[{"type":"inlineCode","value":"1e308 * 10 == float('inf')","position":{"start":{"line":268,"column":1},"end":{"line":268,"column":1}},"key":"MHQCdJ4ij1"}],"key":"HfgHNe6Y8b"}],"key":"FPWIk5FR30"},{"type":"details","children":[{"type":"summary","children":[{"type":"text","value":"Click for answers","position":{"start":{"line":270,"column":1},"end":{"line":270,"column":1}},"key":"YtGVOIvtFD"}],"key":"KIZ164WQ7F"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":271,"column":1},"end":{"line":274,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":271,"column":1},"end":{"line":271,"column":1}},"children":[{"type":"strong","position":{"start":{"line":271,"column":1},"end":{"line":271,"column":1}},"children":[{"type":"text","value":"False","position":{"start":{"line":271,"column":1},"end":{"line":271,"column":1}},"key":"hWA8VYlVOx"}],"key":"C4rcQD97aH"},{"type":"text","value":" - Due to binary representation, 0.1 + 0.2 = 0.30000000000000004","position":{"start":{"line":271,"column":1},"end":{"line":271,"column":1}},"key":"Cbt599V4rf"}],"key":"KL0cjUcvx8"},{"type":"listItem","spread":true,"position":{"start":{"line":272,"column":1},"end":{"line":272,"column":1}},"children":[{"type":"strong","position":{"start":{"line":272,"column":1},"end":{"line":272,"column":1}},"children":[{"type":"text","value":"True","position":{"start":{"line":272,"column":1},"end":{"line":272,"column":1}},"key":"pAJHtHrUot"}],"key":"fct1xIolf0"},{"type":"text","value":" - math.isclose() uses tolerance-based comparison","position":{"start":{"line":272,"column":1},"end":{"line":272,"column":1}},"key":"tqfwAR1pF9"}],"key":"JtOgI97bBW"},{"type":"listItem","spread":true,"position":{"start":{"line":273,"column":1},"end":{"line":274,"column":1}},"children":[{"type":"strong","position":{"start":{"line":273,"column":1},"end":{"line":273,"column":1}},"children":[{"type":"text","value":"True","position":{"start":{"line":273,"column":1},"end":{"line":273,"column":1}},"key":"I3eeahsk14"}],"key":"zuWfCcW0Mg"},{"type":"text","value":" - Multiplying huge numbers overflows to infinity","position":{"start":{"line":273,"column":1},"end":{"line":273,"column":1}},"key":"vVH2cNkQqu"}],"key":"kqxH8CT7A6"}],"key":"N2r7CFVVjd"},{"type":"paragraph","position":{"start":{"line":275,"column":1},"end":{"line":275,"column":1}},"children":[{"type":"text","value":"The lesson: NEVER trust == with floats. You’re learning the same lesson that saved the Cassini spacecraft - they use tolerance checks for all trajectory calculations!","position":{"start":{"line":275,"column":1},"end":{"line":275,"column":1}},"key":"VS81pV43Gu"}],"key":"PtQ7pXf3oH"}],"key":"HOkoLbsk6S"}],"class":"tip","key":"sdv4hnM4HI"},{"type":"heading","depth":3,"position":{"start":{"line":279,"column":1},"end":{"line":279,"column":1}},"children":[{"type":"text","value":"Combining Conditions: Order Matters!","position":{"start":{"line":279,"column":1},"end":{"line":279,"column":1}},"key":"ZNbBjRp0SF"}],"identifier":"combining-conditions-order-matters","label":"Combining Conditions: Order Matters!","html_id":"combining-conditions-order-matters","implicit":true,"key":"noiwWOKnmt"}],"key":"QIMbqhBXLS"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Short-circuit evaluation prevents errors\ndata = []\n\n# WRONG - will crash if data is empty!\n# if data[0] > 0 and len(data) > 0:  # IndexError!\n\n# CORRECT - checks length first\nif len(data) > 0 and data[0] > 0:\n    print(\"First element is positive\")\nelse:\n    print(\"Empty or first element not positive\")\n\n# Even more Pythonic\nif data and data[0] > 0:  # Empty list is False\n    print(\"First element is positive\")","key":"yCxleg5HxM"},{"type":"output","id":"gU6J82h5EDIzWydW1uzw8","data":[],"key":"I04ReDUq1K"}],"key":"vHFuWrfmSo"},{"type":"block","children":[{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🌟 Why This Matters: Satellite Collision Avoidance","position":{"start":{"line":299,"column":1},"end":{"line":299,"column":1}},"key":"M4Oe4lptdh"}],"key":"v0KFsuaEL1"},{"type":"paragraph","position":{"start":{"line":302,"column":1},"end":{"line":302,"column":1}},"children":[{"type":"text","value":"The European Space Agency uses boolean logic chains for collision warnings:","position":{"start":{"line":302,"column":1},"end":{"line":302,"column":1}},"key":"eXvgdK15y1"}],"key":"s6YbuLQtMa"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":303,"column":1},"end":{"line":305,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":303,"column":1},"end":{"line":303,"column":1}},"children":[{"type":"text","value":"Check IF distance < threshold AND relative_velocity > 0 AND uncertainty < max_allowed","position":{"start":{"line":303,"column":1},"end":{"line":303,"column":1}},"key":"cpgjaG5IsA"}],"key":"GBj0yvHcs3"},{"type":"listItem","spread":true,"position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"children":[{"type":"text","value":"Order matters: checking distance first avoids expensive velocity calculations","position":{"start":{"line":304,"column":1},"end":{"line":304,"column":1}},"key":"xnWIH9WjB8"}],"key":"KB1BqEY5R0"},{"type":"listItem","spread":true,"position":{"start":{"line":305,"column":1},"end":{"line":305,"column":1}},"children":[{"type":"text","value":"A single wrong comparison could mean losing a $500M satellite!","position":{"start":{"line":305,"column":1},"end":{"line":305,"column":1}},"key":"iF4uSmRRYb"}],"key":"zSxO63utHS"}],"key":"KzdYAS5rNk"}],"class":"info","key":"PCkIeJZ2d1"},{"type":"heading","depth":2,"position":{"start":{"line":308,"column":1},"end":{"line":308,"column":1}},"children":[{"type":"text","value":"3.3 Conditional Statements: Teaching Computers to Decide","position":{"start":{"line":308,"column":1},"end":{"line":308,"column":1}},"key":"DV1znkIRIf"}],"identifier":"id-3-3-conditional-statements-teaching-computers-to-decide","label":"3.3 Conditional Statements: Teaching Computers to Decide","html_id":"id-3-3-conditional-statements-teaching-computers-to-decide","implicit":true,"key":"SJx35BSYjV"},{"type":"paragraph","position":{"start":{"line":310,"column":1},"end":{"line":310,"column":1}},"children":[{"type":"text","value":"Conditional statements are where your code makes decisions. In scientific computing, these decisions often involve numerical thresholds, convergence criteria, and boundary conditions. Let’s build your intuition for writing robust conditionals!","position":{"start":{"line":310,"column":1},"end":{"line":310,"column":1}},"key":"AnOuV3Z6Lj"}],"key":"JM8XY3728W"},{"type":"heading","depth":3,"position":{"start":{"line":312,"column":1},"end":{"line":312,"column":1}},"children":[{"type":"text","value":"The Pattern of Scientific Conditionals","position":{"start":{"line":312,"column":1},"end":{"line":312,"column":1}},"key":"KhZDIYjBes"}],"identifier":"the-pattern-of-scientific-conditionals","label":"The Pattern of Scientific Conditionals","html_id":"the-pattern-of-scientific-conditionals","implicit":true,"key":"lf2bq6MnOD"}],"key":"hcMz9SA4AO"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def classify_stellar_remnant(mass_solar):\n    \"\"\"\n    Determine stellar remnant type based on initial mass.\n    Demonstrates guard clauses and defensive programming.\n    \"\"\"\n    # Guard clauses - validate input FIRST\n    if mass_solar <= 0:\n        raise ValueError(f\"Mass must be positive: {mass_solar}\")\n    \n    if not math.isfinite(mass_solar):\n        raise ValueError(f\"Mass must be finite: {mass_solar}\")\n    \n    # Main classification logic\n    if mass_solar < 0.08:\n        remnant = \"brown dwarf (failed star)\"\n    elif mass_solar < 8:\n        remnant = \"white dwarf\"\n    elif mass_solar < 25:\n        remnant = \"neutron star\"\n    else:\n        remnant = \"black hole\"\n    \n    # Add uncertainty near boundaries\n    boundaries = [0.08, 8, 25]\n    min_distance = min(abs(mass_solar - b) for b in boundaries)\n    \n    if min_distance < 0.5:\n        remnant += \" (near boundary - uncertain)\"\n    \n    return remnant\n\n# Test our classifier\nprint(classify_stellar_remnant(1.0))   # White dwarf\nprint(classify_stellar_remnant(7.8))   # Near boundary!\nprint(classify_stellar_remnant(30))    # Black hole","key":"cH5WYhHJrG"},{"type":"output","id":"j0-hYl71gTl6DqikvRYfv","data":[],"key":"jaLhDdxmRP"}],"key":"KwZ4tc6YQB"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":352,"column":1},"end":{"line":352,"column":1}},"children":[{"type":"text","value":"Guard Clauses: Fail Fast, Fail Clear","position":{"start":{"line":352,"column":1},"end":{"line":352,"column":1}},"key":"NHxXZzDdlv"}],"identifier":"guard-clauses-fail-fast-fail-clear","label":"Guard Clauses: Fail Fast, Fail Clear","html_id":"guard-clauses-fail-fast-fail-clear","implicit":true,"key":"qAYbR4fT0A"},{"type":"paragraph","position":{"start":{"line":354,"column":1},"end":{"line":354,"column":1}},"children":[{"type":"text","value":"Guard clauses handle special cases immediately, preventing deep nesting and making code clearer. This pattern is essential for scientific code where invalid inputs can cause subtle bugs hours into a simulation! Think of guard clauses as your code’s security system - they check everyone at the door before letting them into the party.","position":{"start":{"line":354,"column":1},"end":{"line":354,"column":1}},"key":"b70SUvWtCr"}],"key":"dDb1JW5K6C"}],"key":"EBMvrGUQ5c"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def calculate_orbital_period(a, M, validate=True):\n    \"\"\"\n    Kepler's third law with comprehensive validation.\n    Shows the guard clause pattern for scientific code.\n    \"\"\"\n    # Guard clauses handle problems immediately\n    if validate:\n        if a <= 0:\n            raise ValueError(f\"Semi-major axis must be positive: {a}\")\n        if M <= 0:\n            raise ValueError(f\"Mass must be positive: {M}\")\n        \n        # Check for orbit inside Schwarzschild radius!\n        rs = 2.95e-4 * M  # In AU for M in solar masses\n        if a < rs:\n            raise ValueError(f\"Orbit inside black hole: a={a}, Rs={rs}\")\n    \n    # Main calculation - only runs if guards pass\n    import math\n    G = 6.67e-8  # CGS units\n    period = 2 * math.pi * math.sqrt(a**3 / (G * M))\n    \n    # Sanity check result\n    if validate and period > 13.8e9 * 365.25 * 86400:\n        import warnings\n        warnings.warn(f\"Period exceeds age of universe: {period} s\")\n    \n    return period","key":"kOXn00cEqX"},{"type":"output","id":"pQEeHhSJlANudXhCzxs0W","data":[],"key":"fvoYFt8YQh"}],"key":"hgpDbVqELR"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":387,"column":1},"end":{"line":387,"column":1}},"children":[{"type":"strong","position":{"start":{"line":387,"column":1},"end":{"line":387,"column":1}},"children":[{"type":"text","value":"Congratulations! You just learned the pattern that could have saved the Mars Climate Orbiter!","position":{"start":{"line":387,"column":1},"end":{"line":387,"column":1}},"key":"rElQZOeTQI"}],"key":"HxpzOXDfK4"},{"type":"text","value":" This defensive programming technique is used in every spacecraft trajectory calculation, every telescope pointing system, and every data reduction pipeline. You’re writing code like a professional astronomer now.","position":{"start":{"line":387,"column":1},"end":{"line":387,"column":1}},"key":"KGhKzUieh2"}],"key":"x24KX94aRZ"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🌟 Why This Matters: The Mars Climate Orbiter Disaster","position":{"start":{"line":389,"column":1},"end":{"line":389,"column":1}},"key":"wcoBvOEJKp"}],"key":"FvVvIVCj1B"},{"type":"paragraph","position":{"start":{"line":392,"column":1},"end":{"line":392,"column":1}},"children":[{"type":"text","value":"In 1999, NASA lost the $125 million Mars Climate Orbiter because one team used metric units while another used imperial. A simple guard clause could have saved it:","position":{"start":{"line":392,"column":1},"end":{"line":392,"column":1}},"key":"SxUkhG0WBV"}],"key":"azerEbJ9sC"},{"type":"code","lang":"python","value":"def process_thrust_data(force, units):\n    # This guard clause would have saved $125 million!\n    if units not in ['N', 'lbf']:\n        raise ValueError(f\"Unknown units: {units}\")\n    \n    if units == 'lbf':\n        force = force * 4.45  # Convert to Newtons\n    \n    return force","position":{"start":{"line":394,"column":1},"end":{"line":403,"column":1}},"key":"XhTlmqry8H"}],"class":"info","key":"PAFOnNhzg6"},{"type":"paragraph","position":{"start":{"line":406,"column":1},"end":{"line":406,"column":1}},"children":[{"type":"text","value":"The orbiter crashed into Mars because the software didn’t validate units. Your guard clauses aren’t just good practice - they prevent disasters!","position":{"start":{"line":406,"column":1},"end":{"line":406,"column":1}},"key":"aTOKy4zBYb"}],"key":"OrnVS3V8iN"},{"type":"code","lang":"","value":"\n```{admonition} 🎯 Check Your Understanding: Condition Order\n:class: tip\n\nWhat's wrong with this condition chain?\n\n```python\nif x > 10:\n    category = \"large\"\nelif x > 100:\n    category = \"huge\"\nelif x > 0:\n    category = \"positive\"\nelse:\n    category = \"non-positive\"","position":{"start":{"line":407,"column":1},"end":{"line":423,"column":1}},"key":"kE6gAJ3EsX"},{"type":"details","children":[{"type":"summary","children":[{"type":"text","value":"Click for answer","position":{"start":{"line":425,"column":1},"end":{"line":425,"column":1}},"key":"KqEw8arcR0"}],"key":"mVC3s7LQ0y"},{"type":"paragraph","position":{"start":{"line":426,"column":1},"end":{"line":426,"column":1}},"children":[{"type":"text","value":"The second condition (","position":{"start":{"line":426,"column":1},"end":{"line":426,"column":1}},"key":"gP94vj13H0"},{"type":"inlineCode","value":"x > 100","position":{"start":{"line":426,"column":1},"end":{"line":426,"column":1}},"key":"parsspB6aV"},{"type":"text","value":") can never be reached! If x > 100, then x > 10 is already true, so it gets categorized as “large”. Always order from most specific to most general:","position":{"start":{"line":426,"column":1},"end":{"line":426,"column":1}},"key":"GFF9P9NnRe"}],"key":"zEsegRfjtq"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":427,"column":1},"end":{"line":429,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":427,"column":1},"end":{"line":427,"column":1}},"children":[{"type":"text","value":"First: ","position":{"start":{"line":427,"column":1},"end":{"line":427,"column":1}},"key":"ZUSlpbBRLi"},{"type":"inlineCode","value":"x > 100","position":{"start":{"line":427,"column":1},"end":{"line":427,"column":1}},"key":"ofw2c9rKkE"},{"type":"text","value":" (most specific)","position":{"start":{"line":427,"column":1},"end":{"line":427,"column":1}},"key":"JwRqEhM6xJ"}],"key":"m7w4OFfPIt"},{"type":"listItem","spread":true,"position":{"start":{"line":428,"column":1},"end":{"line":428,"column":1}},"children":[{"type":"text","value":"Then: ","position":{"start":{"line":428,"column":1},"end":{"line":428,"column":1}},"key":"ZSs3E3luh5"},{"type":"inlineCode","value":"x > 10","position":{"start":{"line":428,"column":1},"end":{"line":428,"column":1}},"key":"ND2pEVZFd4"}],"key":"IbhQyLvlLu"},{"type":"listItem","spread":true,"position":{"start":{"line":429,"column":1},"end":{"line":429,"column":1}},"children":[{"type":"text","value":"Finally: ","position":{"start":{"line":429,"column":1},"end":{"line":429,"column":1}},"key":"fZJgg5x6ca"},{"type":"inlineCode","value":"x > 0","position":{"start":{"line":429,"column":1},"end":{"line":429,"column":1}},"key":"AOU6kXwnsy"},{"type":"text","value":" (most general)","position":{"start":{"line":429,"column":1},"end":{"line":429,"column":1}},"key":"w691n98Di4"}],"key":"JStPZ9tCX2"}],"key":"upIwrhwo4x"}],"key":"GI89BPWmfP"},{"type":"code","lang":"","value":"\n## 3.4 Loops: The Heart of Scientific Computation\n\nNow that you've mastered making decisions with conditionals, let's make your code repeat tasks efficiently! Loops are where your programs gain superpowers - they're the difference between analyzing one star and analyzing millions. Every N-body simulation, every light curve analysis, every Monte Carlo calculation depends on loops. The patterns you learn here will appear in every algorithm you write for the rest of your career.\n\nThink of loops as the engine of scientific computing. Just as telescopes gather photons over time to build an image, loops accumulate results over iterations to build understanding. Whether you're integrating orbits, finding periods in variable stars, or processing data from adaptive optics systems, loops make it possible.\n\n### For Loops: When You Know What to Iterate Over\n\n```{code-cell} python\n# The fundamental accumulation pattern\nmeasurements = [10.2, 10.5, 10.3, 10.6, 10.4]\n\ntotal = 0\nsum_of_squares = 0\nfor value in measurements:\n    total += value\n    sum_of_squares += value**2\n\nmean = total / len(measurements)\nvariance = sum_of_squares / len(measurements) - mean**2\nprint(f\"Mean: {mean:.3f}, Variance: {variance:.4f}\")","position":{"start":{"line":431,"column":1},"end":{"line":454,"column":1}},"key":"jgNJS16LNg"},{"type":"paragraph","position":{"start":{"line":456,"column":1},"end":{"line":456,"column":1}},"children":[{"type":"text","value":"Let’s trace through execution to build intuition:","position":{"start":{"line":456,"column":1},"end":{"line":456,"column":1}},"key":"CkAKRcBQKD"}],"key":"OzvA66PV6h"},{"type":"code","lang":"","value":"Execution Trace: Accumulation Pattern\n\nInitial: total = 0, sum_of_squares = 0\n\nIteration 1: value = 10.2\n  total = 0 + 10.2 = 10.2\n  sum_of_squares = 0 + 104.04 = 104.04\n\nIteration 2: value = 10.5\n  total = 10.2 + 10.5 = 20.7\n  sum_of_squares = 104.04 + 110.25 = 214.29\n\n[... continues for all values ...]","position":{"start":{"line":458,"column":1},"end":{"line":472,"column":1}},"key":"f85vHcZcKz"},{"type":"paragraph","position":{"start":{"line":474,"column":1},"end":{"line":474,"column":1}},"children":[{"type":"text","value":"This pattern is EVERYWHERE in scientific computing - from calculating center of mass to Monte Carlo integration!","position":{"start":{"line":474,"column":1},"end":{"line":474,"column":1}},"key":"E0RWA9fQfG"}],"key":"w4aAFFH0yU"},{"type":"heading","depth":3,"position":{"start":{"line":476,"column":1},"end":{"line":476,"column":1}},"children":[{"type":"text","value":"Common For Loop Patterns in Scientific Computing","position":{"start":{"line":476,"column":1},"end":{"line":476,"column":1}},"key":"URtYWuTh6g"}],"identifier":"common-for-loop-patterns-in-scientific-computing","label":"Common For Loop Patterns in Scientific Computing","html_id":"common-for-loop-patterns-in-scientific-computing","implicit":true,"key":"oIgf1Wyiz1"}],"key":"Ly2pXDGoVY"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Pattern 1: Parallel iteration with zip\ntimes = [0, 1, 2, 3, 4]  # seconds\npositions = [0, 4.9, 19.6, 44.1, 78.4]  # meters\n\nfor t, x in zip(times, positions):\n    velocity = x / (t + 1e-10)  # Avoid division by zero!\n    print(f\"t={t}s: v={velocity:.1f} m/s\")\n\n# Pattern 2: Enumeration for indexing\ndata = [1.2, 2.3, 3.4, 4.5]\nabove_threshold = []\n\nfor i, value in enumerate(data):\n    if value > 2.0:\n        above_threshold.append((i, value))\nprint(f\"Values > 2.0: {above_threshold}\")","key":"xYi1LcmQfA"},{"type":"output","id":"nzrWsWIWM9QwPLMlWwMjf","data":[],"key":"IQdyPjwqTp"}],"key":"TeINUFH3Kk"},{"type":"block","children":[{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"⚠️ Common Bug Alert: Off-by-One Errors","position":{"start":{"line":497,"column":1},"end":{"line":497,"column":1}},"key":"wzU3Ocs7bK"}],"key":"DbaASoyHyZ"},{"type":"paragraph","position":{"start":{"line":500,"column":1},"end":{"line":500,"column":1}},"children":[{"type":"text","value":"The most common bug in all of programming! Python’s zero-indexing catches everyone:","position":{"start":{"line":500,"column":1},"end":{"line":500,"column":1}},"key":"LXKNiSZUX1"}],"key":"LkcDs58TNN"},{"type":"paragraph","position":{"start":{"line":502,"column":1},"end":{"line":502,"column":1}},"children":[{"type":"strong","position":{"start":{"line":502,"column":1},"end":{"line":502,"column":1}},"children":[{"type":"text","value":"Classic Mistake:","position":{"start":{"line":502,"column":1},"end":{"line":502,"column":1}},"key":"SlUMWJmDMB"}],"key":"cqgM6fEirj"}],"key":"YwRqTzkVE1"},{"type":"code","lang":"python","value":"data = [1, 2, 3, 4, 5]\n# Trying to process all elements\nfor i in range(1, len(data)):  # OOPS! Skips first element\n    process(data[i])\n\n# Or worse - going past the end\nfor i in range(len(data) + 1):  # IndexError on last iteration!\n    process(data[i])","position":{"start":{"line":503,"column":1},"end":{"line":511,"column":1}},"key":"QmLCyjpSqu"}],"class":"warning","key":"w0jPmLf6bQ"},{"type":"paragraph","position":{"start":{"line":514,"column":1},"end":{"line":514,"column":1}},"children":[{"type":"strong","position":{"start":{"line":514,"column":1},"end":{"line":514,"column":1}},"children":[{"type":"text","value":"Remember:","position":{"start":{"line":514,"column":1},"end":{"line":514,"column":1}},"key":"m7Re8AIocY"}],"key":"FF8gT0zOiL"}],"key":"BIifKNTfhD"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":515,"column":1},"end":{"line":518,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":515,"column":1},"end":{"line":515,"column":1}},"children":[{"type":"inlineCode","value":"range(n)","position":{"start":{"line":515,"column":1},"end":{"line":515,"column":1}},"key":"ebH6IQPasC"},{"type":"text","value":" gives 0, 1, ..., n-1 (NOT including n!)","position":{"start":{"line":515,"column":1},"end":{"line":515,"column":1}},"key":"j4uVgrr9Cm"}],"key":"BG0l4opscd"},{"type":"listItem","spread":true,"position":{"start":{"line":516,"column":1},"end":{"line":516,"column":1}},"children":[{"type":"text","value":"List of length n has indices 0 to n-1","position":{"start":{"line":516,"column":1},"end":{"line":516,"column":1}},"key":"UFiG5nwR4q"}],"key":"MeiSVlbZPX"},{"type":"listItem","spread":true,"position":{"start":{"line":517,"column":1},"end":{"line":518,"column":1}},"children":[{"type":"text","value":"The last element is at index len(list) - 1","position":{"start":{"line":517,"column":1},"end":{"line":517,"column":1}},"key":"n5HfFHEPqb"}],"key":"B7e4QQ584T"}],"key":"YMqh3W34B3"},{"type":"paragraph","position":{"start":{"line":519,"column":1},"end":{"line":519,"column":1}},"children":[{"type":"text","value":"This bug has crashed rockets, corrupted databases, and frustrated millions of programmers. Double-check your ranges!","position":{"start":{"line":519,"column":1},"end":{"line":519,"column":1}},"key":"whTVYaLTt2"}],"key":"HlQFDdt7O6"},{"type":"code","lang":"","value":"\n```{admonition} ⚠️ Common Bug Alert: Loop Mutation Madness\n:class: warning\n\n**Never modify a list while iterating over it!**\n\n**Wrong:**\n```python\ndata = [1, 2, 3, 4, 5]\nfor value in data:\n    if value < 3:\n        data.remove(value)  # DANGER! Skips elements!","position":{"start":{"line":520,"column":1},"end":{"line":533,"column":1}},"key":"RUCjEQWFvg"},{"type":"paragraph","position":{"start":{"line":535,"column":1},"end":{"line":535,"column":1}},"children":[{"type":"strong","position":{"start":{"line":535,"column":1},"end":{"line":535,"column":1}},"children":[{"type":"text","value":"Right:","position":{"start":{"line":535,"column":1},"end":{"line":535,"column":1}},"key":"ofbqnDoEJh"}],"key":"LB2X9SmWNe"}],"key":"TJiyl5dWxn"},{"type":"code","lang":"python","value":"data = [1, 2, 3, 4, 5]\ndata = [v for v in data if v >= 3]  # Create new list","position":{"start":{"line":536,"column":1},"end":{"line":539,"column":1}},"key":"pZaSatnLWM"},{"type":"code","lang":"","value":"\n### While Loops: Iterating Until a Condition\n\nWhile loops are essential for iterative algorithms where you don't know the iteration count in advance. Perfect for convergence problems!\n\n```{code-cell} python\ndef find_root_bisection(func, a, b, tolerance=1e-10):\n    \"\"\"\n    Find root using bisection method.\n    Demonstrates proper while loop with safety.\n    \"\"\"\n    # Validate inputs first\n    fa, fb = func(a), func(b)\n    if fa * fb > 0:\n        raise ValueError(\"Function must change sign\")\n    \n    iteration = 0\n    max_iter = 100  # Safety limit!\n    \n    # Main bisection loop\n    while abs(b - a) > tolerance and iteration < max_iter:\n        c = (a + b) / 2\n        fc = func(c)\n        \n        if fc == 0:  # Exact root (rare!)\n            return c\n        \n        # Update interval\n        if fa * fc < 0:\n            b, fb = c, fc\n        else:\n            a, fa = c, fc\n        \n        iteration += 1\n    \n    # Check why we stopped\n    if iteration >= max_iter:\n        print(f\"Warning: Max iterations reached\")\n    \n    return (a + b) / 2\n\n# Test our root finder\ndef f(x): return x**2 - 2  # Root at sqrt(2)\nroot = find_root_bisection(f, 0, 2)\nprint(f\"√2 ≈ {root:.10f}\")","position":{"start":{"line":540,"column":1},"end":{"line":586,"column":1}},"key":"L2a77NhN0E"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🎯 Check Your Understanding: Trace the Convergence","position":{"start":{"line":588,"column":1},"end":{"line":588,"column":1}},"key":"Gs41S2gLpx"}],"key":"oUmxhNLzqb"},{"type":"paragraph","position":{"start":{"line":591,"column":1},"end":{"line":591,"column":1}},"children":[{"type":"text","value":"How many iterations will this loop take?","position":{"start":{"line":591,"column":1},"end":{"line":591,"column":1}},"key":"ujFsPQV1vX"}],"key":"h0WsLYNZ0J"},{"type":"code","lang":"python","value":"value = 100.0\ntarget = 1.0\niteration = 0\n\nwhile abs(value - target) > 0.1:\n    value = value * 0.5 + target * 0.5\n    iteration += 1\n    print(f\"Iteration {iteration}: value = {value:.2f}\")","position":{"start":{"line":593,"column":1},"end":{"line":601,"column":1}},"key":"GikC9Y394Z"}],"class":"tip","key":"xT9sSCliJm"},{"type":"paragraph","position":{"start":{"line":604,"column":1},"end":{"line":604,"column":1}},"children":[{"type":"text","value":"Trace through it before checking!","position":{"start":{"line":604,"column":1},"end":{"line":604,"column":1}},"key":"ajDlqWUg7k"}],"key":"soeG0F5e6f"},{"type":"details","children":[{"type":"summary","children":[{"type":"text","value":"Click for answer","position":{"start":{"line":606,"column":1},"end":{"line":606,"column":1}},"key":"e5OeNavcqk"}],"key":"E6CEyWNeOK"},{"type":"paragraph","position":{"start":{"line":607,"column":1},"end":{"line":607,"column":1}},"children":[{"type":"text","value":"Let’s trace it step by step:","position":{"start":{"line":607,"column":1},"end":{"line":607,"column":1}},"key":"tBeRznuDga"}],"key":"qtn6Fk5cqV"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":608,"column":1},"end":{"line":619,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":608,"column":1},"end":{"line":608,"column":1}},"children":[{"type":"text","value":"Start: value = 100.0, target = 1.0","position":{"start":{"line":608,"column":1},"end":{"line":608,"column":1}},"key":"WaTop7PFLu"}],"key":"jLYNLLYvew"},{"type":"listItem","spread":true,"position":{"start":{"line":609,"column":1},"end":{"line":609,"column":1}},"children":[{"type":"text","value":"Iteration 1: value = 100","position":{"start":{"line":609,"column":1},"end":{"line":609,"column":1}},"key":"uIB1Y9IskV"},{"type":"emphasis","position":{"start":{"line":609,"column":1},"end":{"line":609,"column":1}},"children":[{"type":"text","value":"0.5 + 1","position":{"start":{"line":609,"column":1},"end":{"line":609,"column":1}},"key":"dS9e1YNWIo"}],"key":"SVuq6ugqXL"},{"type":"text","value":"0.5 = 50.5","position":{"start":{"line":609,"column":1},"end":{"line":609,"column":1}},"key":"GLzPSoo7uW"}],"key":"WhZxytuNlW"},{"type":"listItem","spread":true,"position":{"start":{"line":610,"column":1},"end":{"line":610,"column":1}},"children":[{"type":"text","value":"Iteration 2: value = 50.5","position":{"start":{"line":610,"column":1},"end":{"line":610,"column":1}},"key":"MNJgGhHLv4"},{"type":"emphasis","position":{"start":{"line":610,"column":1},"end":{"line":610,"column":1}},"children":[{"type":"text","value":"0.5 + 1","position":{"start":{"line":610,"column":1},"end":{"line":610,"column":1}},"key":"yBY0IcD6oO"}],"key":"jfsF8bXxYS"},{"type":"text","value":"0.5 = 25.75","position":{"start":{"line":610,"column":1},"end":{"line":610,"column":1}},"key":"Jui5WRvD4Q"}],"key":"pA3YG6AymF"},{"type":"listItem","spread":true,"position":{"start":{"line":611,"column":1},"end":{"line":611,"column":1}},"children":[{"type":"text","value":"Iteration 3: value = 25.75","position":{"start":{"line":611,"column":1},"end":{"line":611,"column":1}},"key":"qL3rsoaPdo"},{"type":"emphasis","position":{"start":{"line":611,"column":1},"end":{"line":611,"column":1}},"children":[{"type":"text","value":"0.5 + 1","position":{"start":{"line":611,"column":1},"end":{"line":611,"column":1}},"key":"Ywop8FSTSr"}],"key":"RenBDahswH"},{"type":"text","value":"0.5 = 13.375","position":{"start":{"line":611,"column":1},"end":{"line":611,"column":1}},"key":"wlmRK1QdmF"}],"key":"VV6e1KyncZ"},{"type":"listItem","spread":true,"position":{"start":{"line":612,"column":1},"end":{"line":612,"column":1}},"children":[{"type":"text","value":"Iteration 4: value = 13.375","position":{"start":{"line":612,"column":1},"end":{"line":612,"column":1}},"key":"lf56VJyi7M"},{"type":"emphasis","position":{"start":{"line":612,"column":1},"end":{"line":612,"column":1}},"children":[{"type":"text","value":"0.5 + 1","position":{"start":{"line":612,"column":1},"end":{"line":612,"column":1}},"key":"Sb4djsk3GC"}],"key":"DrKNiLz2EI"},{"type":"text","value":"0.5 = 7.1875","position":{"start":{"line":612,"column":1},"end":{"line":612,"column":1}},"key":"EHR09SyXJ3"}],"key":"iosuXTmotT"},{"type":"listItem","spread":true,"position":{"start":{"line":613,"column":1},"end":{"line":613,"column":1}},"children":[{"type":"text","value":"Iteration 5: value = 7.1875","position":{"start":{"line":613,"column":1},"end":{"line":613,"column":1}},"key":"GxivHzq67v"},{"type":"emphasis","position":{"start":{"line":613,"column":1},"end":{"line":613,"column":1}},"children":[{"type":"text","value":"0.5 + 1","position":{"start":{"line":613,"column":1},"end":{"line":613,"column":1}},"key":"TOWXFjBBL4"}],"key":"xW0jfiJPbZ"},{"type":"text","value":"0.5 = 4.09375","position":{"start":{"line":613,"column":1},"end":{"line":613,"column":1}},"key":"ua8eIJkCK4"}],"key":"BnxQWMFM1q"},{"type":"listItem","spread":true,"position":{"start":{"line":614,"column":1},"end":{"line":614,"column":1}},"children":[{"type":"text","value":"Iteration 6: value = 4.09375","position":{"start":{"line":614,"column":1},"end":{"line":614,"column":1}},"key":"C6vjFiZVT3"},{"type":"emphasis","position":{"start":{"line":614,"column":1},"end":{"line":614,"column":1}},"children":[{"type":"text","value":"0.5 + 1","position":{"start":{"line":614,"column":1},"end":{"line":614,"column":1}},"key":"DojamXEYjn"}],"key":"gFYo3XHYKb"},{"type":"text","value":"0.5 = 2.546875","position":{"start":{"line":614,"column":1},"end":{"line":614,"column":1}},"key":"CVkIKpFMce"}],"key":"KAhzJoYhPN"},{"type":"listItem","spread":true,"position":{"start":{"line":615,"column":1},"end":{"line":615,"column":1}},"children":[{"type":"text","value":"Iteration 7: value = 2.546875","position":{"start":{"line":615,"column":1},"end":{"line":615,"column":1}},"key":"gc0291VznL"},{"type":"emphasis","position":{"start":{"line":615,"column":1},"end":{"line":615,"column":1}},"children":[{"type":"text","value":"0.5 + 1","position":{"start":{"line":615,"column":1},"end":{"line":615,"column":1}},"key":"KuKgh8ZNK8"}],"key":"qYsOLjj7Iz"},{"type":"text","value":"0.5 = 1.7734375","position":{"start":{"line":615,"column":1},"end":{"line":615,"column":1}},"key":"Na1cUWcO3C"}],"key":"sntmJ05U5q"},{"type":"listItem","spread":true,"position":{"start":{"line":616,"column":1},"end":{"line":616,"column":1}},"children":[{"type":"text","value":"Iteration 8: value = 1.7734375","position":{"start":{"line":616,"column":1},"end":{"line":616,"column":1}},"key":"VSQVpTShuS"},{"type":"emphasis","position":{"start":{"line":616,"column":1},"end":{"line":616,"column":1}},"children":[{"type":"text","value":"0.5 + 1","position":{"start":{"line":616,"column":1},"end":{"line":616,"column":1}},"key":"YmapltyK17"}],"key":"tPYfK2nSM6"},{"type":"text","value":"0.5 = 1.38671875","position":{"start":{"line":616,"column":1},"end":{"line":616,"column":1}},"key":"bsYf2QzhUO"}],"key":"JLgL9DaukC"},{"type":"listItem","spread":true,"position":{"start":{"line":617,"column":1},"end":{"line":617,"column":1}},"children":[{"type":"text","value":"Iteration 9: value = 1.38671875","position":{"start":{"line":617,"column":1},"end":{"line":617,"column":1}},"key":"n6jlghgxxw"},{"type":"emphasis","position":{"start":{"line":617,"column":1},"end":{"line":617,"column":1}},"children":[{"type":"text","value":"0.5 + 1","position":{"start":{"line":617,"column":1},"end":{"line":617,"column":1}},"key":"It1Y5GxtsY"}],"key":"PpYYd3PG7c"},{"type":"text","value":"0.5 = 1.193359375","position":{"start":{"line":617,"column":1},"end":{"line":617,"column":1}},"key":"IEbK0izMHg"}],"key":"UPZnalacxJ"},{"type":"listItem","spread":true,"position":{"start":{"line":618,"column":1},"end":{"line":619,"column":1}},"children":[{"type":"text","value":"Iteration 10: value = 1.193359375","position":{"start":{"line":618,"column":1},"end":{"line":618,"column":1}},"key":"xSsTh2F9jw"},{"type":"emphasis","position":{"start":{"line":618,"column":1},"end":{"line":618,"column":1}},"children":[{"type":"text","value":"0.5 + 1","position":{"start":{"line":618,"column":1},"end":{"line":618,"column":1}},"key":"UVzWymsQCl"}],"key":"l7iQGiQN9C"},{"type":"text","value":"0.5 = 1.0966796875","position":{"start":{"line":618,"column":1},"end":{"line":618,"column":1}},"key":"f7yoJ37a3Q"}],"key":"tm3zmajRUQ"}],"key":"mMOp4bFPvi"},{"type":"paragraph","position":{"start":{"line":620,"column":1},"end":{"line":620,"column":1}},"children":[{"type":"text","value":"After iteration 10, |1.0966796875 - 1.0| = 0.0966... < 0.1, so the loop stops.","position":{"start":{"line":620,"column":1},"end":{"line":620,"column":1}},"key":"S0Vj1ViSFW"}],"key":"zeO6MdwGAd"},{"type":"paragraph","position":{"start":{"line":622,"column":1},"end":{"line":622,"column":1}},"children":[{"type":"strong","position":{"start":{"line":622,"column":1},"end":{"line":622,"column":1}},"children":[{"type":"text","value":"Answer: 10 iterations","position":{"start":{"line":622,"column":1},"end":{"line":622,"column":1}},"key":"w4n3BAZXWO"}],"key":"j9DNqyxMH6"}],"key":"gevNKG8ZT4"},{"type":"paragraph","position":{"start":{"line":624,"column":1},"end":{"line":624,"column":1}},"children":[{"type":"text","value":"This is exponential convergence - each iteration cuts the error in half. You’re using the same technique that GPS satellites use to refine position estimates!","position":{"start":{"line":624,"column":1},"end":{"line":624,"column":1}},"key":"N4QoLEUML1"}],"key":"s0GQSLPoJ2"}],"key":"NVbiNl5blG"},{"type":"code","lang":"","value":"\n```{admonition} ⚠️ Common Bug Alert: Infinite While Loops\n:class: warning\n\nDon't worry - everyone writes an infinite loop occasionally! Even senior programmers at NASA have done it. The key is knowing how to prevent and fix them. Here are real cases that happen to everyone:\n\n**Case 1: Floating-point precision prevents exact equality**\n```python\nx = 0.0\nwhile x != 1.0:  # INFINITE LOOP!\n    x += 0.1  # After 10 additions, x ≈ 0.9999999999\n\n# Fix: Use tolerance (you learned this in Chapter 2!)\nwhile abs(x - 1.0) > 1e-10:\n    x += 0.1","position":{"start":{"line":626,"column":1},"end":{"line":642,"column":1}},"key":"zIRz4bwEvG"},{"type":"paragraph","position":{"start":{"line":644,"column":1},"end":{"line":644,"column":1}},"children":[{"type":"strong","position":{"start":{"line":644,"column":1},"end":{"line":644,"column":1}},"children":[{"type":"text","value":"Case 2: Oscillating around target (happens in orbit calculations!)","position":{"start":{"line":644,"column":1},"end":{"line":644,"column":1}},"key":"btzqF5q6u8"}],"key":"n3AEbNg4tS"}],"key":"oojp5Gy5s0"},{"type":"code","lang":"python","value":"value = 10\nwhile value != 5:\n    if value < 5:\n        value += 3  # Goes to 8\n    else:\n        value -= 3  # Goes back to 5, then 2, then 5...\n\n# Fix: Check for convergence range\nwhile abs(value - 5) > 1:\n    # ... adjust more carefully","position":{"start":{"line":645,"column":1},"end":{"line":656,"column":1}},"key":"CxHBgHcg6l"},{"type":"paragraph","position":{"start":{"line":658,"column":1},"end":{"line":658,"column":1}},"children":[{"type":"strong","position":{"start":{"line":658,"column":1},"end":{"line":658,"column":1}},"children":[{"type":"text","value":"Case 3: Forgetting to update loop variable (we’ve all been there!)","position":{"start":{"line":658,"column":1},"end":{"line":658,"column":1}},"key":"I7GCh0SUvc"}],"key":"PwOih8sQD3"}],"key":"AFJSsUdRMa"},{"type":"code","lang":"python","value":"i = 0\nwhile i < 10:\n    process(data)\n    # Forgot: i += 1  # INFINITE LOOP!","position":{"start":{"line":659,"column":1},"end":{"line":664,"column":1}},"key":"RFKuTf3fmB"},{"type":"paragraph","position":{"start":{"line":666,"column":1},"end":{"line":666,"column":1}},"children":[{"type":"text","value":"Always add a maximum iteration safeguard. Your simulations should finish, not run until the heat death of the universe! This is exactly why spacecraft software has watchdog timers - even the pros need safety nets.","position":{"start":{"line":666,"column":1},"end":{"line":666,"column":1}},"key":"dqe7fYTpai"}],"key":"uoyauQLuti"},{"type":"code","lang":"","value":"\n```{admonition} 💡 Computational Thinking: The Convergence Pattern\n:class: note\n\n**PATTERN: Iterative Convergence**\n","position":{"start":{"line":667,"column":1},"end":{"line":674,"column":1}},"key":"miNcI0b47D"},{"type":"paragraph","position":{"start":{"line":675,"column":1},"end":{"line":676,"column":1}},"children":[{"type":"text","value":"initialize state\ninitialize iteration_count = 0","position":{"start":{"line":675,"column":1},"end":{"line":675,"column":1}},"key":"wLKajC8g7o"}],"key":"NULbgdc5xN"},{"type":"paragraph","position":{"start":{"line":678,"column":1},"end":{"line":682,"column":1}},"children":[{"type":"text","value":"WHILE NOT converged AND iteration_count < max_iterations:\nnew_state = update(state)\nconverged = check_convergence(state, new_state, tolerance)\nstate = new_state\niteration_count += 1","position":{"start":{"line":678,"column":1},"end":{"line":678,"column":1}},"key":"KZsfMBl9rq"}],"key":"oNSTFOOcCT"},{"type":"paragraph","position":{"start":{"line":684,"column":1},"end":{"line":685,"column":1}},"children":[{"type":"text","value":"IF NOT converged:\nhandle_failure()","position":{"start":{"line":684,"column":1},"end":{"line":684,"column":1}},"key":"Co825KaEpT"}],"key":"F9ySSpoGa1"},{"type":"code","lang":"","value":"\nThis pattern appears in:\n- Root finding (Newton-Raphson, bisection)\n- Fixed-point iteration\n- Iterative linear solvers (Jacobi, Gauss-Seidel)\n- Optimization algorithms (gradient descent)\n- Self-consistent field calculations\n- Monte Carlo equilibration\n\nMaster this pattern and you've mastered half of computational physics!","position":{"start":{"line":686,"column":1},"end":{"line":697,"column":1}},"key":"LJIJrVopix"},{"type":"heading","depth":2,"position":{"start":{"line":699,"column":1},"end":{"line":699,"column":1}},"children":[{"type":"text","value":"3.5 List Comprehensions: Elegant and Efficient","position":{"start":{"line":699,"column":1},"end":{"line":699,"column":1}},"key":"z9S0OZEamD"}],"identifier":"id-3-5-list-comprehensions-elegant-and-efficient","label":"3.5 List Comprehensions: Elegant and Efficient","html_id":"id-3-5-list-comprehensions-elegant-and-efficient","implicit":true,"key":"YkkwwqvawY"},{"type":"paragraph","position":{"start":{"line":701,"column":1},"end":{"line":701,"column":1}},"children":[{"type":"text","value":"You’ve mastered loops - now let’s evolve them into something even more powerful! List comprehensions are Python’s gift to scientific programmers. They transform the verbose loops you just learned into concise, readable, and faster expressions. This evolution from explicit loops to comprehensions mirrors your growth as a programmer - from spelling everything out to expressing ideas elegantly.","position":{"start":{"line":701,"column":1},"end":{"line":701,"column":1}},"key":"YCltV8ExSz"}],"key":"fPCyk550Ur"},{"type":"paragraph","position":{"start":{"line":703,"column":1},"end":{"line":703,"column":1}},"children":[{"type":"text","value":"Before we dive in, remember that list comprehensions aren’t magic - they’re just a more Pythonic way to write the loops you already understand. Every list comprehension can be written as a regular loop, but not every loop should become a comprehension. Let’s explore when each approach shines!","position":{"start":{"line":703,"column":1},"end":{"line":703,"column":1}},"key":"AogL1Jmfen"}],"key":"CEZsDfdJ2l"},{"type":"heading","depth":3,"position":{"start":{"line":705,"column":1},"end":{"line":705,"column":1}},"children":[{"type":"text","value":"From Loop to Comprehension: The Transformation","position":{"start":{"line":705,"column":1},"end":{"line":705,"column":1}},"key":"E5l1oQAwI4"}],"identifier":"from-loop-to-comprehension-the-transformation","label":"From Loop to Comprehension: The Transformation","html_id":"from-loop-to-comprehension-the-transformation","implicit":true,"key":"nMIDqv1J97"}],"key":"LIfaWBHXV3"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Traditional loop approach\nsquares_loop = []\nfor x in range(10):\n    if x % 2 == 0:  # Even numbers only\n        squares_loop.append(x**2)\nprint(f\"Loop result: {squares_loop}\")\n\n# List comprehension - same result, clearer intent!\nsquares_comp = [x**2 for x in range(10) if x % 2 == 0]\nprint(f\"Comprehension: {squares_comp}\")\n\n# They're faster too!\nimport timeit\nloop_time = timeit.timeit(\n    '[x**2 for x in range(1000) if x % 2 == 0]',\n    number=1000\n)\nprint(f\"Comprehension is fast: {loop_time:.4f} seconds\")","key":"FCUncHpqvE"},{"type":"output","id":"N_-BbYZQPWFxFAo3UCm7E","data":[],"key":"bq0Pa8Ueff"}],"key":"c7f0yVDs7g"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":728,"column":1},"end":{"line":728,"column":1}},"children":[{"type":"text","value":"The Anatomy of a List Comprehension","position":{"start":{"line":728,"column":1},"end":{"line":728,"column":1}},"key":"snWfuhF93s"}],"identifier":"the-anatomy-of-a-list-comprehension","label":"The Anatomy of a List Comprehension","html_id":"the-anatomy-of-a-list-comprehension","implicit":true,"key":"utEphoXrRM"},{"type":"code","lang":"","value":"[expression for item in sequence if condition]\n     ↑           ↑         ↑           ↑\n  Transform   Variable  Source    Filter (optional)","position":{"start":{"line":730,"column":1},"end":{"line":734,"column":1}},"key":"WoovRLbNLp"},{"type":"paragraph","position":{"start":{"line":736,"column":1},"end":{"line":736,"column":1}},"children":[{"type":"text","value":"Real astronomy example:","position":{"start":{"line":736,"column":1},"end":{"line":736,"column":1}},"key":"UhhYrEurtO"}],"key":"KjH7DDElQV"}],"key":"cXftbWwdaH"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Filter and transform magnitude data\nmagnitudes = [2.3, 5.1, 3.7, 6.2, 4.5, 7.1, 1.8]\n\n# Get fluxes for visible stars (mag < 6)\nvisible_fluxes = [10**(-0.4 * mag) \n                  for mag in magnitudes \n                  if mag < 6.0]\n\nprint(f\"Visible star count: {len(visible_fluxes)}\")\nprint(f\"Brightest flux: {max(visible_fluxes):.2e}\")","key":"mozSK6N7LM"},{"type":"output","id":"qgpN28GhcZUfJTpvSaQaK","data":[],"key":"y99nOG2p2f"}],"key":"UJRgA07VOF"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":751,"column":1},"end":{"line":751,"column":1}},"children":[{"type":"text","value":"When to Use (and NOT Use) Comprehensions","position":{"start":{"line":751,"column":1},"end":{"line":751,"column":1}},"key":"RQguTXeuOz"}],"identifier":"when-to-use-and-not-use-comprehensions","label":"When to Use (and NOT Use) Comprehensions","html_id":"when-to-use-and-not-use-comprehensions","implicit":true,"key":"S98flrYRwV"}],"key":"aRKVfEyA0R"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# GOOD: Simple transformation\nraw_data = [1.2, 2.3, 3.4, 4.5]\nnormalized = [(x - min(raw_data)) / (max(raw_data) - min(raw_data)) \n              for x in raw_data]\n\n# GOOD: Filtering with condition\npositive = [x for x in raw_data if x > 0]\n\n# BAD: Too complex - use a loop instead!\n# Don't do this:\n# result = [process(x) if condition(x) else \n#           alternative(y) for x, y in zip(list1, list2) \n#           if validate(x) and check(y)]\n\n# BETTER: Clear loop for complex logic\nresult = []\nfor x, y in zip([1, 2, 3], [4, 5, 6]):\n    if x > 0 and y > 0:\n        if x > y:\n            result.append(x * 2)\n        else:\n            result.append(y * 2)\nprint(f\"Complex result: {result}\")","key":"oxEVxahOic"},{"type":"output","id":"q22RmRzvbCXJjdD_epFfN","data":[],"key":"joupmDpyIC"}],"key":"K4z038OtH8"},{"type":"block","children":[{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"📊 Performance Profile: Loop vs Comprehension vs NumPy","position":{"start":{"line":779,"column":1},"end":{"line":779,"column":1}},"key":"jirDsUYJvu"}],"key":"i69NhnEyfy"},{"type":"paragraph","position":{"start":{"line":782,"column":1},"end":{"line":782,"column":1}},"children":[{"type":"text","value":"Let’s compare performance for processing large datasets:","position":{"start":{"line":782,"column":1},"end":{"line":782,"column":1}},"key":"SNAJgeEhvq"}],"key":"DFOqrr2Bxx"},{"type":"code","lang":"python","value":"import timeit\nimport numpy as np\n\n# Create test data\ndata = list(range(10000))\n\n# Method 1: Traditional for loop\ndef loop_method(data):\n    result = []\n    for x in data:\n        if x % 2 == 0:\n            result.append(x**2)\n    return result\n\n# Method 2: List comprehension\ndef comp_method(data):\n    return [x**2 for x in data if x % 2 == 0]\n\n# Method 3: NumPy (preview of Chapter 7!)\ndef numpy_method(data):\n    arr = np.array(data)\n    mask = arr % 2 == 0\n    return arr[mask]**2\n\n# Time them!\nloop_time = timeit.timeit(lambda: loop_method(data), number=100)\ncomp_time = timeit.timeit(lambda: comp_method(data), number=100)\nnumpy_time = timeit.timeit(lambda: numpy_method(data), number=100)\n\nprint(f\"For loop:          {loop_time:.4f} seconds\")\nprint(f\"List comprehension: {comp_time:.4f} seconds (1.5x faster)\")\nprint(f\"NumPy (preview):   {numpy_time:.4f} seconds (10x faster!)\")","position":{"start":{"line":784,"column":1},"end":{"line":816,"column":1}},"key":"AxvXyO13dD"}],"class":"note","key":"YCzxq9vaqs"},{"type":"paragraph","position":{"start":{"line":819,"column":1},"end":{"line":819,"column":1}},"children":[{"type":"text","value":"Results (typical):","position":{"start":{"line":819,"column":1},"end":{"line":819,"column":1}},"key":"OCSnUPDCuF"}],"key":"VHyGL4n7oo"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":820,"column":1},"end":{"line":823,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":820,"column":1},"end":{"line":820,"column":1}},"children":[{"type":"text","value":"For loop: 0.0421 seconds","position":{"start":{"line":820,"column":1},"end":{"line":820,"column":1}},"key":"qxeUrJoo46"}],"key":"qYaKs8oUSA"},{"type":"listItem","spread":true,"position":{"start":{"line":821,"column":1},"end":{"line":821,"column":1}},"children":[{"type":"text","value":"List comprehension: 0.0289 seconds (45% faster)","position":{"start":{"line":821,"column":1},"end":{"line":821,"column":1}},"key":"gheO9BxkIP"}],"key":"odbbK6KYq0"},{"type":"listItem","spread":true,"position":{"start":{"line":822,"column":1},"end":{"line":823,"column":1}},"children":[{"type":"text","value":"NumPy: 0.0039 seconds (10x faster!)","position":{"start":{"line":822,"column":1},"end":{"line":822,"column":1}},"key":"l3PTCAOnvY"}],"key":"WiLHrOuZx4"}],"key":"qetvWuK5nf"},{"type":"paragraph","position":{"start":{"line":824,"column":1},"end":{"line":824,"column":1}},"children":[{"type":"text","value":"This is why we’ll learn NumPy in Chapter 7 - but comprehensions are great when NumPy isn’t appropriate!","position":{"start":{"line":824,"column":1},"end":{"line":824,"column":1}},"key":"Ypl1NUwkwm"}],"key":"FOpJrbYkgT"},{"type":"code","lang":"","value":"\n```{admonition} 🌟 Why This Matters: Processing Telescope Data\n:class: info\n\nThe Vera Rubin Observatory will produce 20TB of data per night! List comprehensions help filter and process this efficiently:\n\n```python\n# Filter millions of detections in seconds\nbright_transients = [\n    detection for detection in nightly_data\n    if detection.magnitude < 20 \n    and detection.movement > threshold\n]","position":{"start":{"line":825,"column":1},"end":{"line":839,"column":1}},"key":"RLISIzYiVg"},{"type":"paragraph","position":{"start":{"line":841,"column":1},"end":{"line":841,"column":1}},"children":[{"type":"text","value":"The speed difference between loops and comprehensions can mean finishing analysis in hours vs. days! ","position":{"start":{"line":841,"column":1},"end":{"line":841,"column":1}},"key":"DJzkSn5HnA"},{"type":"strong","position":{"start":{"line":841,"column":1},"end":{"line":841,"column":1}},"children":[{"type":"text","value":"With this one technique, you can process megabytes of telescope data in seconds!","position":{"start":{"line":841,"column":1},"end":{"line":841,"column":1}},"key":"GTYxjQnZvC"}],"key":"q5sgOfZHG7"},{"type":"text","value":" The same comprehensions you’re learning now are processing data from the Hubble Space Telescope, searching for exoplanets in TESS data, and filtering gravitational wave signals at LIGO.","position":{"start":{"line":841,"column":1},"end":{"line":841,"column":1}},"key":"CejeK0Q4Sn"}],"key":"LEcTXHBPXs"},{"type":"code","lang":"","value":"\n## 3.6 Advanced Control Flow Patterns\n\nNow let's explore the powerful patterns that appear throughout scientific computing. These aren't just code tricks - they're fundamental algorithmic building blocks you'll use constantly! Every pattern you learn here appears in real astronomical software, from the pipeline that processes James Webb Space Telescope images to the algorithms that detect gravitational waves. You're learning the same techniques used by professional computational astronomers.\n\n### The Accumulator Pattern (Welford's Algorithm)\n\nThe accumulator pattern is fundamental, but naive implementations can fail catastrophically. Here's a numerically stable approach that revolutionized computing:\n\n```{code-cell} python\ndef running_statistics(data_stream):\n    \"\"\"\n    Calculate mean and variance in single pass.\n    Uses Welford's algorithm for numerical stability.\n    \"\"\"\n    n = 0\n    mean = 0.0\n    M2 = 0.0\n    \n    for value in data_stream:\n        n += 1\n        delta = value - mean\n        mean += delta / n\n        delta2 = value - mean\n        M2 += delta * delta2\n    \n    if n < 2:\n        return mean, float('nan')\n    \n    variance = M2 / (n - 1)\n    return mean, variance\n\n# Test with problematic data\ndata = [1e8, 1e8 + 1, 1e8 + 2]  # Large baseline\nmean, var = running_statistics(data)\nprint(f\"Stable algorithm: mean={mean:.1f}, var={var:.2f}\")","position":{"start":{"line":842,"column":1},"end":{"line":879,"column":1}},"key":"XO89w3i34o"},{"type":"paragraph","position":{"start":{"line":881,"column":1},"end":{"line":881,"column":1}},"children":[{"type":"strong","position":{"start":{"line":881,"column":1},"end":{"line":881,"column":1}},"children":[{"type":"text","value":"You now understand an algorithm that revolutionized statistics on 1960s computers!","position":{"start":{"line":881,"column":1},"end":{"line":881,"column":1}},"key":"aPeERqY8Hh"}],"key":"zj6e55Kcfa"},{"type":"text","value":" This same algorithm processes telemetry from the International Space Station, analyzes pulsar timing data, and helps control adaptive optics systems on ground-based telescopes. Welford’s insight saved countless hours of computer time when memory was measured in kilobytes.","position":{"start":{"line":881,"column":1},"end":{"line":881,"column":1}},"key":"uYjSH3dDFk"}],"key":"sIf428GPaR"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"📈 Algorithm Archaeology: Why Welford’s Algorithm?","position":{"start":{"line":883,"column":1},"end":{"line":883,"column":1}},"key":"rHCaisgO2e"}],"key":"mMHItyGBqk"},{"type":"paragraph","position":{"start":{"line":886,"column":1},"end":{"line":886,"column":1}},"children":[{"type":"text","value":"The naive variance calculation ","position":{"start":{"line":886,"column":1},"end":{"line":886,"column":1}},"key":"xThpSWNGJQ"},{"type":"inlineCode","value":"variance = sum_of_squares/n - mean²","position":{"start":{"line":886,"column":1},"end":{"line":886,"column":1}},"key":"aLxXqdvPf0"},{"type":"text","value":" suffers from catastrophic cancellation when the mean is large relative to variance.","position":{"start":{"line":886,"column":1},"end":{"line":886,"column":1}},"key":"aUY812qkgA"}],"key":"DKWCpKqozn"},{"type":"paragraph","position":{"start":{"line":888,"column":1},"end":{"line":888,"column":1}},"children":[{"type":"text","value":"B.P. Welford (1962) published this single-pass algorithm maintaining numerical stability by computing differences from the running mean. Revolutionary for computers with limited memory!","position":{"start":{"line":888,"column":1},"end":{"line":888,"column":1}},"key":"Xc4pRsYilE"}],"key":"DOWyxYcSt2"},{"type":"paragraph","position":{"start":{"line":890,"column":1},"end":{"line":890,"column":1}},"children":[{"type":"text","value":"Today this pattern appears in:","position":{"start":{"line":890,"column":1},"end":{"line":890,"column":1}},"key":"yCQjGVTzsh"}],"key":"LQbyHA6Tu2"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":891,"column":1},"end":{"line":897,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":891,"column":1},"end":{"line":891,"column":1}},"children":[{"type":"text","value":"Online learning algorithms","position":{"start":{"line":891,"column":1},"end":{"line":891,"column":1}},"key":"TZfl86nhuc"}],"key":"ktMQSIBlri"},{"type":"listItem","spread":true,"position":{"start":{"line":892,"column":1},"end":{"line":892,"column":1}},"children":[{"type":"text","value":"Streaming data analysis","position":{"start":{"line":892,"column":1},"end":{"line":892,"column":1}},"key":"aoyg4N3c7o"}],"key":"uFUSm6nKKv"},{"type":"listItem","spread":true,"position":{"start":{"line":893,"column":1},"end":{"line":893,"column":1}},"children":[{"type":"text","value":"Real-time telescope data processing","position":{"start":{"line":893,"column":1},"end":{"line":893,"column":1}},"key":"BFp2xxBoQ8"}],"key":"mxh2C9iaNE"},{"type":"listItem","spread":true,"position":{"start":{"line":894,"column":1},"end":{"line":894,"column":1}},"children":[{"type":"text","value":"Embedded systems with memory constraints","position":{"start":{"line":894,"column":1},"end":{"line":894,"column":1}},"key":"RzX2H2OyPN"}],"key":"fDWRiYbEeq"},{"type":"listItem","spread":true,"position":{"start":{"line":895,"column":1},"end":{"line":895,"column":1}},"children":[{"type":"text","value":"Monte Carlo radiative transfer simulations","position":{"start":{"line":895,"column":1},"end":{"line":895,"column":1}},"key":"NpIHmzygqr"}],"key":"yoysWGTwvc"},{"type":"listItem","spread":true,"position":{"start":{"line":896,"column":1},"end":{"line":897,"column":1}},"children":[{"type":"text","value":"Adaptive optics control loops","position":{"start":{"line":896,"column":1},"end":{"line":896,"column":1}},"key":"tjOjOqfUBV"}],"key":"qZZMQqISVs"}],"key":"q6jGf0m7v2"},{"type":"paragraph","position":{"start":{"line":898,"column":1},"end":{"line":898,"column":1}},"children":[{"type":"text","value":"You’re using 60-year-old wisdom that’s still cutting-edge!","position":{"start":{"line":898,"column":1},"end":{"line":898,"column":1}},"key":"CXum27JI2I"}],"key":"YUhwfyzgyT"}],"class":"note","key":"XDBDgmQkCC"},{"type":"heading","depth":3,"position":{"start":{"line":901,"column":1},"end":{"line":901,"column":1}},"children":[{"type":"text","value":"The Filter-Map-Reduce Pattern","position":{"start":{"line":901,"column":1},"end":{"line":901,"column":1}},"key":"adgmDhQ8iI"}],"identifier":"the-filter-map-reduce-pattern","label":"The Filter-Map-Reduce Pattern","html_id":"the-filter-map-reduce-pattern","implicit":true,"key":"cGgGYkAHFb"},{"type":"paragraph","position":{"start":{"line":903,"column":1},"end":{"line":903,"column":1}},"children":[{"type":"text","value":"This pattern is the foundation of data processing pipelines:","position":{"start":{"line":903,"column":1},"end":{"line":903,"column":1}},"key":"OldwKHt4Mh"}],"key":"ns9tBo5VqQ"}],"key":"wgDetYfYKd"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Scientific data processing pipeline\nraw_measurements = [10.2, -999, 10.5, 10.3, -999, 10.6]\n\n# Filter: Remove bad data\nvalid = [x for x in raw_measurements if x != -999]\nprint(f\"After filter: {valid}\")\n\n# Map: Convert units (arbitrary example)\nconverted = [x * 1.5 for x in valid]\nprint(f\"After map: {converted}\")\n\n# Reduce: Aggregate to single value\nresult = sum(converted) / len(converted)\nprint(f\"Final result: {result:.2f}\")","key":"mtBi3rahT6"},{"type":"output","id":"TLNUOAXnIGVdkVwls-Ywn","data":[],"key":"zoyR8D7Wcj"}],"key":"T4qBz8HwHU"},{"type":"block","children":[{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🛠️ Debug This!","position":{"start":{"line":922,"column":1},"end":{"line":922,"column":1}},"key":"toMEmeNyyl"}],"key":"nPP0K7vfrK"},{"type":"paragraph","position":{"start":{"line":925,"column":1},"end":{"line":925,"column":1}},"children":[{"type":"text","value":"The following code has a subtle logic error. Can you find it?","position":{"start":{"line":925,"column":1},"end":{"line":925,"column":1}},"key":"sfrqvTlw7z"}],"key":"R1OywRFnyd"},{"type":"code","lang":"python","value":"def check_convergence(old_value, new_value, tolerance):\n    \"\"\"Check if iterative calculation has converged.\"\"\"\n    \n    if new_value == 0:\n        return old_value == 0\n    \n    relative_change = abs(new_value - old_value) / new_value\n    \n    if relative_change < tolerance:\n        return True\n    else:\n        return False","position":{"start":{"line":927,"column":1},"end":{"line":939,"column":1}},"key":"b7wgVlbEyb"}],"class":"warning","key":"RUvbjEwpQ5"},{"type":"details","children":[{"type":"summary","children":[{"type":"text","value":"Click for the bug and solution","position":{"start":{"line":942,"column":1},"end":{"line":942,"column":1}},"key":"r2I977BVDf"}],"key":"QLdQIPHkne"},{"type":"paragraph","position":{"start":{"line":943,"column":1},"end":{"line":943,"column":1}},"children":[{"type":"strong","position":{"start":{"line":943,"column":1},"end":{"line":943,"column":1}},"children":[{"type":"text","value":"Bug","position":{"start":{"line":943,"column":1},"end":{"line":943,"column":1}},"key":"oFjG13U4qD"}],"key":"feLwMv66bK"},{"type":"text","value":": Division by new_value fails when new_value is very small but non-zero, and gives wrong results when old_value is much larger than new_value.","position":{"start":{"line":943,"column":1},"end":{"line":943,"column":1}},"key":"AwXkrj2qeM"}],"key":"g3sXhJi7BB"},{"type":"paragraph","position":{"start":{"line":945,"column":1},"end":{"line":945,"column":1}},"children":[{"type":"strong","position":{"start":{"line":945,"column":1},"end":{"line":945,"column":1}},"children":[{"type":"text","value":"Fixed Version","position":{"start":{"line":945,"column":1},"end":{"line":945,"column":1}},"key":"SjdK7cNu7H"}],"key":"m8m9wCjLXW"},{"type":"text","value":":","position":{"start":{"line":945,"column":1},"end":{"line":945,"column":1}},"key":"hkSqBpTvct"}],"key":"h7YiqW55n6"},{"type":"code","lang":"python","value":"def check_convergence(old_value, new_value, tolerance):\n    \"\"\"Check if iterative calculation has converged.\"\"\"\n    \n    # Handle exact convergence\n    if old_value == new_value:\n        return True\n    \n    # Use larger magnitude for relative comparison\n    scale = max(abs(old_value), abs(new_value))\n    \n    if scale == 0:\n        return True  # Both are zero\n    \n    relative_change = abs(new_value - old_value) / scale\n    return relative_change < tolerance","position":{"start":{"line":946,"column":1},"end":{"line":962,"column":1}},"key":"Yt4hWCVozg"},{"type":"paragraph","position":{"start":{"line":964,"column":1},"end":{"line":964,"column":1}},"children":[{"type":"text","value":"The key insight: use the larger value as the scale to avoid division problems!","position":{"start":{"line":964,"column":1},"end":{"line":964,"column":1}},"key":"MeZB0BBzcp"}],"key":"xrOEEDtf0i"}],"key":"TrH2XEzvwn"},{"type":"code","lang":"","value":"\n## 3.7 Debugging Control Flow\n\nLogic errors are the hardest bugs because the code runs without crashing but produces wrong results. But here's the secret: even expert programmers use print debugging! The difference isn't that professionals write bug-free code - it's that they debug systematically. Let's build your debugging arsenal with techniques used by the teams that landed rovers on Mars and fly the Hubble Space Telescope.\n\nRemember, finding bugs isn't a sign of failure - it's a normal part of the development process. Every bug you fix teaches you something new about how computers think. The debugging skills you're learning here are the same ones that helped fix the Hubble's initial mirror problem through software and saved the Spirit Mars rover when it got stuck.\n\n### Strategic Print Debugging\n\nYes, print debugging! Don't let anyone tell you it's amateur - it's often the fastest way to understand what your code is actually doing. The key is being strategic about what and where you print:\n\n```{code-cell} python\ndef debug_convergence(initial, target, rate, max_iter=100):\n    \"\"\"Example of strategic debug output.\"\"\"\n    \n    current = initial\n    \n    for iteration in range(max_iter):\n        # Debug output at key decision points\n        print(f\"Iter {iteration:3d}: current={current:.6f}\", end=\"\")\n        \n        if abs(current - target) < 1e-6:\n            print(\" → CONVERGED\")\n            return current\n        \n        # Update\n        old = current\n        current = current * (1 - rate) + target * rate\n        \n        # Show change for debugging\n        change = current - old\n        print(f\" → new={current:.6f} (Δ={change:+.6f})\")\n        \n        # Safety check\n        if iteration > 50 and abs(change) < 1e-10:\n            print(f\"WARNING: Change too small at iteration {iteration}\")\n            break\n    \n    print(f\"FAILED: No convergence after {max_iter} iterations\")\n    return current\n\n# Watch the algorithm work!\nresult = debug_convergence(0, 100, 0.1, max_iter=20)","position":{"start":{"line":966,"column":1},"end":{"line":1010,"column":1}},"key":"SwUjj3zWJN"},{"type":"heading","depth":3,"position":{"start":{"line":1012,"column":1},"end":{"line":1012,"column":1}},"children":[{"type":"text","value":"Using IPython Debugger Effectively","position":{"start":{"line":1012,"column":1},"end":{"line":1012,"column":1}},"key":"I6oYH3cSMX"}],"identifier":"using-ipython-debugger-effectively","label":"Using IPython Debugger Effectively","html_id":"using-ipython-debugger-effectively","implicit":true,"key":"CMPptYw4VU"},{"type":"paragraph","position":{"start":{"line":1014,"column":1},"end":{"line":1014,"column":1}},"children":[{"type":"text","value":"Here’s a systematic approach to debugging with IPython:","position":{"start":{"line":1014,"column":1},"end":{"line":1014,"column":1}},"key":"UoOkWrjxf7"}],"key":"qlizFggWTm"},{"type":"code","lang":"python","value":"# In IPython, after an error:\n%debug\n\n# Essential debugger commands:\n# p variable_name  - print variable\n# pp variable_name - pretty print\n# l               - list code around current line\n# u/d             - move up/down call stack\n# c               - continue execution\n# q               - quit debugger","position":{"start":{"line":1016,"column":1},"end":{"line":1027,"column":1}},"key":"VwIwiXBYhV"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🌟 Why This Matters: The Therac-25 Radiation Tragedy","position":{"start":{"line":1029,"column":1},"end":{"line":1029,"column":1}},"key":"Ck5h4LtDDS"}],"key":"xJrUFofta8"},{"type":"paragraph","position":{"start":{"line":1032,"column":1},"end":{"line":1032,"column":1}},"children":[{"type":"text","value":"Between 1985-1987, the Therac-25 radiation therapy machine killed 3 patients and severely injured 3 others due to logic errors in its safety checks. The code had a race condition - if the operator typed too quickly, safety interlocks could be bypassed:","position":{"start":{"line":1032,"column":1},"end":{"line":1032,"column":1}},"key":"dwungIZ7WK"}],"key":"HXCO7aW8kO"},{"type":"code","lang":"python","value":"# Simplified version of the fatal bug:\ndef setup_radiation(mode, energy_level):\n    if mode == \"electron\":\n        set_low_energy()\n    elif mode == \"xray\":\n        set_high_energy()\n    \n    # BUG: If mode changed during setup, energy might be wrong!\n    activate_beam()  # Could deliver 100x intended dose\n\n# Should have been:\ndef safe_setup_radiation(mode, energy_level):\n    # Verify state consistency BEFORE activation\n    configured_mode = get_current_mode()\n    configured_energy = get_current_energy()\n    \n    if configured_mode != mode:\n        raise SafetyError(\"Mode mismatch - aborting\")\n    \n    if not validate_energy_for_mode(configured_energy, configured_mode):\n        raise SafetyError(\"Energy unsafe for mode\")\n    \n    activate_beam()","position":{"start":{"line":1034,"column":1},"end":{"line":1057,"column":1}},"key":"cehUzd09sb"}],"class":"info","key":"mvmWKLy2q6"},{"type":"paragraph","position":{"start":{"line":1060,"column":1},"end":{"line":1060,"column":1}},"children":[{"type":"text","value":"Logic errors in control flow aren’t just bugs - in safety-critical systems, they can be fatal. Your careful debugging practices and defensive programming could literally save lives. The same techniques you’re learning now are used in spacecraft navigation, medical devices, and nuclear reactor control systems.","position":{"start":{"line":1060,"column":1},"end":{"line":1060,"column":1}},"key":"wqY447gE5Q"}],"key":"ache6kimIR"},{"type":"code","lang":"","value":"\n```{admonition} 🎯 Check Your Understanding: Trace the Bug\n:class: tip\n\nWhat does this code print?\n\n```python\nx = 5\nfor i in range(3):\n    if i > 0:\n        x = x * 2\n    x = x + 1\nprint(x)","position":{"start":{"line":1061,"column":1},"end":{"line":1075,"column":1}},"key":"dBzf9rIPDp"},{"type":"paragraph","position":{"start":{"line":1077,"column":1},"end":{"line":1077,"column":1}},"children":[{"type":"text","value":"Work through it step by step before checking!","position":{"start":{"line":1077,"column":1},"end":{"line":1077,"column":1}},"key":"cEEqCasrS4"}],"key":"Hh7wWSXsEN"},{"type":"details","children":[{"type":"summary","children":[{"type":"text","value":"Click for answer","position":{"start":{"line":1079,"column":1},"end":{"line":1079,"column":1}},"key":"IWB5v1SSfp"}],"key":"FXCflc1nPh"},{"type":"paragraph","position":{"start":{"line":1080,"column":1},"end":{"line":1080,"column":1}},"children":[{"type":"text","value":"Let’s trace it:","position":{"start":{"line":1080,"column":1},"end":{"line":1080,"column":1}},"key":"qYRRjB4W2Z"}],"key":"DcuFdqABU3"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":1081,"column":1},"end":{"line":1085,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":1081,"column":1},"end":{"line":1081,"column":1}},"children":[{"type":"text","value":"Initial: x = 5","position":{"start":{"line":1081,"column":1},"end":{"line":1081,"column":1}},"key":"Gn9PgP0Nf5"}],"key":"Ir7geLS2ii"},{"type":"listItem","spread":true,"position":{"start":{"line":1082,"column":1},"end":{"line":1082,"column":1}},"children":[{"type":"text","value":"i = 0: i > 0 is False, skip multiplication, x = 5 + 1 = 6","position":{"start":{"line":1082,"column":1},"end":{"line":1082,"column":1}},"key":"aRpheXJrnY"}],"key":"A2mrMkrU0c"},{"type":"listItem","spread":true,"position":{"start":{"line":1083,"column":1},"end":{"line":1083,"column":1}},"children":[{"type":"text","value":"i = 1: i > 0 is True, x = 6 * 2 = 12, then x = 12 + 1 = 13","position":{"start":{"line":1083,"column":1},"end":{"line":1083,"column":1}},"key":"KimW9RqcWo"}],"key":"ZR7cy3XwFW"},{"type":"listItem","spread":true,"position":{"start":{"line":1084,"column":1},"end":{"line":1085,"column":1}},"children":[{"type":"text","value":"i = 2: i > 0 is True, x = 13 * 2 = 26, then x = 26 + 1 = 27","position":{"start":{"line":1084,"column":1},"end":{"line":1084,"column":1}},"key":"ZaDT7XcUOY"}],"key":"wGJwWRYih1"}],"key":"phtHqqcEEo"},{"type":"paragraph","position":{"start":{"line":1086,"column":1},"end":{"line":1086,"column":1}},"children":[{"type":"text","value":"Final answer: ","position":{"start":{"line":1086,"column":1},"end":{"line":1086,"column":1}},"key":"a1OXNQEjUm"},{"type":"strong","position":{"start":{"line":1086,"column":1},"end":{"line":1086,"column":1}},"children":[{"type":"text","value":"27","position":{"start":{"line":1086,"column":1},"end":{"line":1086,"column":1}},"key":"uzF8momhR8"}],"key":"h6RvukzteS"}],"key":"qlmgzAD8D5"},{"type":"paragraph","position":{"start":{"line":1088,"column":1},"end":{"line":1088,"column":1}},"children":[{"type":"text","value":"The key insight: the addition happens EVERY iteration, but multiplication only when i > 0!","position":{"start":{"line":1088,"column":1},"end":{"line":1088,"column":1}},"key":"cs0INgTIaZ"}],"key":"xi3hVXs6bj"}],"key":"d88opjU4vW"},{"type":"code","lang":"","value":"\n## 3.8 Bonus Material: Bitwise Operations in Scientific Computing\n\n*This section is optional bonus material! Feel free to skip it for now and come back later if you encounter bitwise operations in instrument control or data formats. Everything you need for the course is already covered above.*\n\n### When You Might Encounter Bitwise Operations\n\nBitwise operations appear in specialized astronomical contexts like reading telescope status flags or unpacking compressed data formats. If you encounter them in FITS file headers or instrument control code, here's a gentle introduction:\n\n```{code-cell} python\n# Reading telescope status flags\nTRACKING = 0b0001  # Binary: 0001\nGUIDING  = 0b0010  # Binary: 0010  \nCOOLING  = 0b0100  # Binary: 0100\nEXPOSING = 0b1000  # Binary: 1000\n\nstatus = 0b0101  # Current status\n\n# Check specific flags\nis_tracking = bool(status & TRACKING)\nis_cooling = bool(status & COOLING)\n\nprint(f\"Tracking: {is_tracking}\")\nprint(f\"Cooling: {is_cooling}\")\n\n# Set a flag\nstatus |= EXPOSING\nprint(f\"After starting exposure: {status:04b}\")","position":{"start":{"line":1090,"column":1},"end":{"line":1119,"column":1}},"key":"cDBfxEkFnX"},{"type":"heading","depth":2,"position":{"start":{"line":1121,"column":1},"end":{"line":1121,"column":1}},"children":[{"type":"text","value":"Practice Exercises","position":{"start":{"line":1121,"column":1},"end":{"line":1121,"column":1}},"key":"WnpWOW10eQ"}],"identifier":"practice-exercises","label":"Practice Exercises","html_id":"practice-exercises","implicit":true,"key":"ykdt5MrSo7"},{"type":"paragraph","position":{"start":{"line":1123,"column":1},"end":{"line":1123,"column":1}},"children":[{"type":"text","value":"Congratulations! You’ve mastered the fundamental patterns of algorithmic thinking! Now it’s time to apply these skills to real astronomical data analysis. These exercises aren’t just practice - they’re simplified versions of actual algorithms used in variable star research. By completing these, you’ll be implementing the same techniques used to discover exoplanets, measure stellar distances through Cepheid variables, and understand the evolution of stars.","position":{"start":{"line":1123,"column":1},"end":{"line":1123,"column":1}},"key":"ZmDwP6zHDj"}],"key":"VmmTqa01cW"},{"type":"paragraph","position":{"start":{"line":1125,"column":1},"end":{"line":1125,"column":1}},"children":[{"type":"text","value":"Each exercise builds on what you’ve learned, from simple loops to sophisticated adaptive algorithms. Don’t worry if they seem challenging at first - you have all the tools you need. Remember: the pseudocode techniques you learned will help you plan before coding, the debugging strategies will help when things go wrong, and the patterns you’ve mastered appear in each problem. Let’s put your new superpowers to work!","position":{"start":{"line":1125,"column":1},"end":{"line":1125,"column":1}},"key":"GyH1SLtbAQ"}],"key":"ymXbfRnhXP"},{"type":"heading","depth":3,"position":{"start":{"line":1127,"column":1},"end":{"line":1127,"column":1}},"children":[{"type":"text","value":"Exercise 3.1: Quick Practice - Find Brightness Extrema in Light Curve (5-10 lines)","position":{"start":{"line":1127,"column":1},"end":{"line":1127,"column":1}},"key":"g6t6zfyptc"}],"identifier":"exercise-3-1-quick-practice-find-brightness-extrema-in-light-curve-5-10-lines","label":"Exercise 3.1: Quick Practice - Find Brightness Extrema in Light Curve (5-10 lines)","html_id":"exercise-3-1-quick-practice-find-brightness-extrema-in-light-curve-5-10-lines","implicit":true,"key":"thiSnN7JtS"}],"key":"NkLpx2UNei"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def find_brightness_extrema(filename='cepheid_simple.txt'):\n    \"\"\"\n    Find the brightest and faintest observations in a light curve.\n    Remember: In astronomy, SMALLER magnitude = BRIGHTER star!\n    \n    This counter-intuitive system means:\n    - Magnitude 1.0 is brighter than magnitude 5.0\n    - The Sun has magnitude -26.7 (very negative = very bright!)\n    - Faintest visible stars are around magnitude 6.0\n    \n    Your task:\n    1. Read magnitudes from file (one per line)\n    2. Use accumulator pattern to find min and max\n    3. Print brightest (min) and faintest (max) magnitudes\n    \"\"\"\n    # Your code here - use a simple for loop!\n    # Hint: Initialize with first value, not 0 or infinity\n    pass\n\n# Expected output format:\n# Brightest (minimum magnitude): 3.45\n# Faintest (maximum magnitude): 4.82\n# Brightness range: 1.37 magnitudes","key":"n4R9KWA4YB"},{"type":"output","id":"-xqgxlHheeyaFa6YdihGE","data":[],"key":"ud3Z36or0v"}],"key":"SP5kvnWbcD"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":1155,"column":1},"end":{"line":1155,"column":1}},"children":[{"type":"text","value":"Exercise 3.2: Synthesis - Filter and Validate Photometric Observations (15-30 lines)","position":{"start":{"line":1155,"column":1},"end":{"line":1155,"column":1}},"key":"daC1wh82ja"}],"identifier":"exercise-3-2-synthesis-filter-and-validate-photometric-observations-15-30-lines","label":"Exercise 3.2: Synthesis - Filter and Validate Photometric Observations (15-30 lines)","html_id":"exercise-3-2-synthesis-filter-and-validate-photometric-observations-15-30-lines","implicit":true,"key":"CeH8Y1fcrc"}],"key":"bJ8TTNNLb2"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def process_photometric_data(filename='rr_lyrae_realistic.txt'):\n    \"\"\"\n    Process realistic variable star observations with quality control.\n    \n    File format: time(days) magnitude error quality_flag\n    \n    Part A: Implement guard clauses\n    - Check file exists\n    - Validate each line has 4 values\n    - Ensure time is monotonically increasing\n    \n    Part B: Filter bad observations\n    - Reject if error > 0.1 magnitudes\n    - Reject if time gap > 1.0 day (data gap)\n    - Reject if quality_flag != 'G' (good)\n    \n    Part C: Find brightness stabilization\n    - Use running mean of last 5 observations\n    - Check when variation < 0.05 magnitudes\n    - Report convergence time\n    \n    Use list comprehensions where appropriate!\n    \"\"\"\n    # Example structure to get you started:\n    observations = []\n    previous_time = -1\n    rejected_count = 0\n    \n    # Read and validate data\n    with open(filename, 'r') as f:\n        for line in f:\n            parts = line.strip().split()\n            \n            # Guard clause: check format\n            if len(parts) != 4:\n                rejected_count += 1\n                continue\n            \n            time, mag, err, flag = float(parts[0]), float(parts[1]), float(parts[2]), parts[3]\n            \n            # Your validation logic here\n            # ...\n    \n    # Filter using list comprehension\n    # good_obs = [obs for obs in observations if ...]\n    \n    # Find stabilization point\n    # ...\n    \n    print(f\"Processed {len(observations)} observations\")\n    print(f\"Rejected {rejected_count} bad observations\")\n    # Report more statistics","key":"DMi8ZsBBst"},{"type":"output","id":"F3VWJUMn4qIO0AlxP1Yey","data":[],"key":"NoiXo7E6I7"}],"key":"fsBYTcFn2B"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":1212,"column":1},"end":{"line":1212,"column":1}},"children":[{"type":"text","value":"Exercise 3.3: Challenge - Implement Phase Dispersion Minimization (Optional)","position":{"start":{"line":1212,"column":1},"end":{"line":1212,"column":1}},"key":"eXItKmzASc"}],"identifier":"exercise-3-3-challenge-implement-phase-dispersion-minimization-optional","label":"Exercise 3.3: Challenge - Implement Phase Dispersion Minimization (Optional)","html_id":"exercise-3-3-challenge-implement-phase-dispersion-minimization-optional","implicit":true,"key":"JI7JjOkWwb"}],"key":"QRQiKrlXxC"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def find_period_pdm(times, magnitudes, min_period=0.1, max_period=10.0):\n    \"\"\"\n    Find the period of a variable star using Phase Dispersion Minimization.\n    This is a REAL algorithm used in astronomy!\n    \n    Algorithm:\n    1. Try different trial periods\n    2. For each period, fold the light curve (phase = time % period)\n    3. Calculate dispersion in phase bins\n    4. Period with minimum dispersion is the true period\n    \n    Implement adaptive search like our timestep example:\n    - Start with coarse grid (0.1 day steps)\n    - When minimum found, refine around it (0.01 day steps)\n    - Continue until convergence (change < 0.0001 days)\n    \n    This finds the \"heartbeat\" of the star!\n    \"\"\"\n    best_period = min_period\n    best_dispersion = float('inf')\n    \n    # Coarse search\n    current_step = 0.1\n    tolerance = 0.0001\n    max_iterations = 100\n    iteration = 0\n    \n    while current_step > tolerance and iteration < max_iterations:\n        trial_periods = []\n        trial_dispersions = []\n        \n        # Generate trial periods in current search range\n        current = max(min_period, best_period - 10 * current_step)\n        while current <= min(max_period, best_period + 10 * current_step):\n            # Calculate phase dispersion for this period\n            phases = [(t % current) / current for t in times]\n            \n            # Simple dispersion measure (you can improve this!)\n            # Group into phase bins and calculate variance\n            dispersion = calculate_phase_dispersion(phases, magnitudes)\n            \n            trial_periods.append(current)\n            trial_dispersions.append(dispersion)\n            \n            current += current_step\n        \n        # Find best period in this iteration\n        min_idx = trial_dispersions.index(min(trial_dispersions))\n        \n        if trial_dispersions[min_idx] < best_dispersion:\n            old_best = best_period\n            best_period = trial_periods[min_idx]\n            best_dispersion = trial_dispersions[min_idx]\n            \n            # Check convergence\n            if abs(best_period - old_best) < tolerance:\n                print(f\"Converged after {iteration} iterations!\")\n                break\n        \n        # Refine search step (adaptive like our timestep example!)\n        current_step *= 0.5\n        iteration += 1\n    \n    return best_period\n\ndef calculate_phase_dispersion(phases, magnitudes):\n    \"\"\"Calculate dispersion of magnitudes in phase bins.\"\"\"\n    # Simplified version - you can implement the full algorithm!\n    # Group phases into bins, calculate variance in each bin\n    n_bins = 10\n    bin_width = 1.0 / n_bins\n    total_variance = 0\n    \n    for i in range(n_bins):\n        bin_start = i * bin_width\n        bin_end = (i + 1) * bin_width\n        \n        # Get magnitudes in this phase bin\n        bin_mags = [mag for phase, mag in zip(phases, magnitudes)\n                   if bin_start <= phase < bin_end]\n        \n        if len(bin_mags) > 1:\n            mean = sum(bin_mags) / len(bin_mags)\n            variance = sum((m - mean)**2 for m in bin_mags) / len(bin_mags)\n            total_variance += variance\n    \n    return total_variance\n\n# Test with simulated data:\n# import math\n# times = [i * 0.1 for i in range(1000)]\n# true_period = 2.7  # days\n# magnitudes = [10.0 + 0.5 * math.sin(2 * math.pi * t / true_period) for t in times]\n# found_period = find_period_pdm(times, magnitudes)\n# print(f\"True period: {true_period}, Found: {found_period}\")","key":"WpVyDhgRo2"},{"type":"output","id":"rEmLR8MMVtGCn537KGtqk","data":[],"key":"ncXhjImUG1"}],"key":"DMzFXbfey3"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":1312,"column":1},"end":{"line":1312,"column":1}},"children":[{"type":"text","value":"Original Exercises (Now 3.4, 3.5, 3.6)","position":{"start":{"line":1312,"column":1},"end":{"line":1312,"column":1}},"key":"bAD0KmaMHj"}],"identifier":"original-exercises-now-3-4-3-5-3-6","label":"Original Exercises (Now 3.4, 3.5, 3.6)","html_id":"original-exercises-now-3-4-3-5-3-6","implicit":true,"key":"qrKuhvGtuR"},{"type":"heading","depth":3,"position":{"start":{"line":1314,"column":1},"end":{"line":1314,"column":1}},"children":[{"type":"text","value":"Exercise 3.4: Robust Convergence Checker (Scaffolded)","position":{"start":{"line":1314,"column":1},"end":{"line":1314,"column":1}},"key":"gzJ5TW30HJ"}],"identifier":"exercise-3-4-robust-convergence-checker-scaffolded","label":"Exercise 3.4: Robust Convergence Checker (Scaffolded)","html_id":"exercise-3-4-robust-convergence-checker-scaffolded","implicit":true,"key":"FdKefYOZEO"}],"key":"UtBAZ5UPUI"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def robust_convergence_checker(history, tolerance, window=3):\n    \"\"\"\n    Check convergence using recent history.\n    \n    Part A: Handle edge cases\n    - What if history is empty?\n    - What if history has fewer than 'window' elements?\n    \n    Part B: Detect oscillation\n    - Check if values are bouncing up and down\n    \n    Part C: Check monotonic convergence\n    - Are values steadily approaching a limit?\n    \n    Returns:\n        (converged, reason_string)\n    \"\"\"\n    # Your implementation here\n    pass\n\n# Test cases to handle:\n# robust_convergence_checker([], 0.01)  # Empty\n# robust_convergence_checker([1, 2, 1, 2], 0.01)  # Oscillating\n# robust_convergence_checker([10, 5, 2.5, 1.25], 0.01)  # Converging","key":"tpiDTgXBpA"},{"type":"output","id":"GE92FiP9BmOkscdvkg7wp","data":[],"key":"JlHAmtQohD"}],"key":"wEP8tk5eMD"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":1343,"column":1},"end":{"line":1343,"column":1}},"children":[{"type":"text","value":"Exercise 3.5: Adaptive Monte Carlo Design","position":{"start":{"line":1343,"column":1},"end":{"line":1343,"column":1}},"key":"jVZHrnXRWu"}],"identifier":"exercise-3-5-adaptive-monte-carlo-design","label":"Exercise 3.5: Adaptive Monte Carlo Design","html_id":"exercise-3-5-adaptive-monte-carlo-design","implicit":true,"key":"gaoGwF886v"},{"type":"paragraph","position":{"start":{"line":1345,"column":1},"end":{"line":1345,"column":1}},"children":[{"type":"text","value":"Design pseudocode for an adaptive Monte Carlo sampler:","position":{"start":{"line":1345,"column":1},"end":{"line":1345,"column":1}},"key":"GwUsPWyBHj"}],"key":"GVvt3IRpO6"},{"type":"code","lang":"","value":"Part A: Basic uniform sampling (10 lines max)\nPart B: Add importance identification (10 lines max)  \nPart C: Add adaptive focusing (10 lines max)\n\nRequirements:\n1. Start with uniform sampling\n2. Identify \"important\" regions\n3. Focus sampling there\n4. Maintain some exploration\n5. Stop when variance < threshold","position":{"start":{"line":1347,"column":1},"end":{"line":1358,"column":1}},"key":"nleVTiYCpm"},{"type":"heading","depth":3,"position":{"start":{"line":1360,"column":1},"end":{"line":1360,"column":1}},"children":[{"type":"text","value":"Exercise 3.6: Debug the Peak Finder","position":{"start":{"line":1360,"column":1},"end":{"line":1360,"column":1}},"key":"fQY4JTjZG0"}],"identifier":"exercise-3-6-debug-the-peak-finder","label":"Exercise 3.6: Debug the Peak Finder","html_id":"exercise-3-6-debug-the-peak-finder","implicit":true,"key":"y4G57gVfK5"}],"key":"fUFAIHPiMN"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def find_peaks(magnitudes, times, threshold):\n    \"\"\"\n    Find brightness peaks in astronomical data.\n    Remember: LOWER magnitude = BRIGHTER!\n    \n    Part A: Find local minima in magnitude\n    Part B: Apply threshold\n    Part C: Handle edge cases\n    \n    This code has bugs - find and fix them!\n    \"\"\"\n    peaks = []\n    for i in range(len(magnitudes)):\n        # Check if current point is a peak (minimum magnitude)\n        if magnitudes[i] < threshold:\n            if magnitudes[i] < magnitudes[i-1] and magnitudes[i] < magnitudes[i+1]:\n                peaks.append((times[i], magnitudes[i]))\n    return peaks\n\n# Test: find_peaks([5, 3, 4, 2, 5], [0, 1, 2, 3, 4], 4)\n# Should find peaks at times 1 and 3, but crashes. Why?","key":"Sn9AxGlsTZ"},{"type":"output","id":"HvUtDNZEZzavfQJIPBfP1","data":[],"key":"iW2GIedv0Z"}],"key":"PWKblwhiZ4"},{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":1386,"column":1},"end":{"line":1386,"column":1}},"children":[{"type":"text","value":"Main Takeaways","position":{"start":{"line":1386,"column":1},"end":{"line":1386,"column":1}},"key":"gFjq4cL5Fk"}],"identifier":"main-takeaways","label":"Main Takeaways","html_id":"main-takeaways","implicit":true,"key":"dCwWz540nK"},{"type":"paragraph","position":{"start":{"line":1388,"column":1},"end":{"line":1388,"column":1}},"children":[{"type":"text","value":"What an incredible journey you’ve just completed! You’ve transformed from someone who writes code line by line to someone who designs algorithms systematically. This transformation mirrors the evolution every computational scientist goes through, from tentative beginner to confident algorithm designer. The skills you’ve gained in this chapter aren’t just academic exercises - they’re the foundation of every computational astronomy project you’ll ever work on.","position":{"start":{"line":1388,"column":1},"end":{"line":1388,"column":1}},"key":"U0aD6wTVVJ"}],"key":"vr1ZrGBllm"},{"type":"paragraph","position":{"start":{"line":1390,"column":1},"end":{"line":1390,"column":1}},"children":[{"type":"text","value":"Think about what you’ve accomplished. You started by learning to think in pseudocode, a skill that seemed strange at first but now gives you the power to design before you code. Those three levels of refinement you practiced aren’t bureaucracy - they’re your blueprint for success. Every hour you invest in pseudocode saves many hours of debugging. When you design your next algorithm for analyzing galaxy spectra or simulating stellar evolution, you’ll catch logical flaws on paper instead of after hours of computation.","position":{"start":{"line":1390,"column":1},"end":{"line":1390,"column":1}},"key":"PVqE5mARhF"}],"key":"W6bHQJW2fQ"},{"type":"paragraph","position":{"start":{"line":1392,"column":1},"end":{"line":1392,"column":1}},"children":[{"type":"text","value":"The control flow patterns you’ve mastered are universal across computational physics. That accumulator pattern you learned? It’s calculating centers of mass in N-body simulations right now. The convergence pattern you practiced? It’s finding equilibrium states in stellar structure models. The adaptive refinement pattern from the timestep example? It’s controlling mesh refinement in hydrodynamics codes simulating supernovae. These patterns transcend any programming language - they’re the fundamental building blocks of computational thinking that you’ll use whether you’re coding in Python, C++, or whatever language emerges in the future.","position":{"start":{"line":1392,"column":1},"end":{"line":1392,"column":1}},"key":"qP6LriZ6fX"}],"key":"fnDlMG1NUb"},{"type":"paragraph","position":{"start":{"line":1394,"column":1},"end":{"line":1394,"column":1}},"children":[{"type":"text","value":"Your understanding of floating-point comparisons and defensive programming with guard clauses isn’t just good practice - it’s professional necessity. When your code processes irreplaceable telescope data or controls spacecraft worth billions, these habits matter. The Mars Climate Orbiter disaster and Therac-25 tragedy weren’t caused by programmers who didn’t care - they were caused by programmers who didn’t know what you now know. Your careful validation and defensive coding could literally save lives in medical physics applications or prevent the loss of irreplaceable scientific data.","position":{"start":{"line":1394,"column":1},"end":{"line":1394,"column":1}},"key":"WhOpdYa5Po"}],"key":"O4G7Vy5PPu"},{"type":"paragraph","position":{"start":{"line":1396,"column":1},"end":{"line":1396,"column":1}},"children":[{"type":"text","value":"List comprehensions might seem like syntactic sugar, but they represent something deeper - the evolution from verbose, error-prone code to elegant, maintainable solutions. Knowing when to use them (simple transformations) and when not to (complex logic) shows mature judgment. The same is true for your debugging skills. Yes, even experts use print debugging! The difference is that you now debug systematically, with strategic output at decision points rather than random print statements everywhere.","position":{"start":{"line":1396,"column":1},"end":{"line":1396,"column":1}},"key":"wYnYnQRzZ5"}],"key":"n7lASm6GQs"},{"type":"paragraph","position":{"start":{"line":1398,"column":1},"end":{"line":1398,"column":1}},"children":[{"type":"text","value":"Remember that every major computational physics achievement relies on these fundamentals. The LIGO collaboration detecting gravitational waves? Their signal processing uses these control flow patterns. The team simulating galaxy formation on supercomputers? They’re using adaptive refinement and convergence checking. The pipeline processing James Webb Space Telescope images? It’s full of guard clauses, careful iterations, and defensive programming. You’re not just learning Python syntax - you’re joining a tradition of computational thinking that enables humanity’s greatest scientific discoveries.","position":{"start":{"line":1398,"column":1},"end":{"line":1398,"column":1}},"key":"Ke8AJTCBJd"}],"key":"fW5zCnhEsy"},{"type":"paragraph","position":{"start":{"line":1400,"column":1},"end":{"line":1400,"column":1}},"children":[{"type":"text","value":"Most importantly, you’ve learned that errors and bugs aren’t failures - they’re part of the learning process. Every infinite loop teaches you about termination conditions. Every off-by-one error reinforces proper indexing. Every convergence failure improves your numerical intuition. The patterns you’ve mastered here will appear in every algorithm you implement, every simulation you run, and every data analysis pipeline you build. You’re not just learning to code - you’re learning to think computationally, and that’s a superpower that will serve you throughout your scientific career.","position":{"start":{"line":1400,"column":1},"end":{"line":1400,"column":1}},"key":"kcFZv5m1n9"}],"key":"e3BmmkffXe"},{"type":"heading","depth":2,"position":{"start":{"line":1402,"column":1},"end":{"line":1402,"column":1}},"children":[{"type":"text","value":"Definitions","position":{"start":{"line":1402,"column":1},"end":{"line":1402,"column":1}},"key":"NpoPHzbl3R"}],"identifier":"definitions","label":"Definitions","html_id":"definitions","implicit":true,"key":"wgCn96bBtX"},{"type":"paragraph","position":{"start":{"line":1404,"column":1},"end":{"line":1404,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1404,"column":1},"end":{"line":1404,"column":1}},"children":[{"type":"text","value":"Accumulator Pattern","position":{"start":{"line":1404,"column":1},"end":{"line":1404,"column":1}},"key":"BsZDZvp0zm"}],"key":"LqttpDVMQ3"},{"type":"text","value":": An algorithmic pattern where values are iteratively combined into a running total or aggregate, fundamental to reductions and statistical calculations.","position":{"start":{"line":1404,"column":1},"end":{"line":1404,"column":1}},"key":"PbknUi4O6a"}],"key":"eVUNgxchet"},{"type":"paragraph","position":{"start":{"line":1406,"column":1},"end":{"line":1406,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1406,"column":1},"end":{"line":1406,"column":1}},"children":[{"type":"text","value":"Adaptive Refinement","position":{"start":{"line":1406,"column":1},"end":{"line":1406,"column":1}},"key":"xA2n1TDqpa"}],"key":"fvyJGbPzkP"},{"type":"text","value":": A universal pattern where parameters are adjusted based on quality metrics, with safeguards against infinite refinement, appearing in timestepping, mesh refinement, and optimization.","position":{"start":{"line":1406,"column":1},"end":{"line":1406,"column":1}},"key":"zfANUG70WO"}],"key":"HLQHFAAbkt"},{"type":"paragraph","position":{"start":{"line":1408,"column":1},"end":{"line":1408,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1408,"column":1},"end":{"line":1408,"column":1}},"children":[{"type":"text","value":"Boolean Logic","position":{"start":{"line":1408,"column":1},"end":{"line":1408,"column":1}},"key":"nDL2Opz68r"}],"key":"jX9ef23w1S"},{"type":"text","value":": The system of true/false values and logical operations (and, or, not) that underlies all conditional execution in programs.","position":{"start":{"line":1408,"column":1},"end":{"line":1408,"column":1}},"key":"Da8uLnnvn4"}],"key":"cn39EAAeR0"},{"type":"paragraph","position":{"start":{"line":1410,"column":1},"end":{"line":1410,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1410,"column":1},"end":{"line":1410,"column":1}},"children":[{"type":"text","value":"Conditional Statement","position":{"start":{"line":1410,"column":1},"end":{"line":1410,"column":1}},"key":"mhfpciVY4r"}],"key":"UQyucziAGh"},{"type":"text","value":": A control structure (if/elif/else) that executes different code blocks based on whether conditions evaluate to true or false.","position":{"start":{"line":1410,"column":1},"end":{"line":1410,"column":1}},"key":"qzgTWZFNEJ"}],"key":"wz8BDRbTYk"},{"type":"paragraph","position":{"start":{"line":1412,"column":1},"end":{"line":1412,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1412,"column":1},"end":{"line":1412,"column":1}},"children":[{"type":"text","value":"Convergence","position":{"start":{"line":1412,"column":1},"end":{"line":1412,"column":1}},"key":"gf6uo5cTNH"}],"key":"xL4vgsmLRB"},{"type":"text","value":": The property of an iterative algorithm approaching a stable solution, typically measured by the change between successive iterations falling below a tolerance.","position":{"start":{"line":1412,"column":1},"end":{"line":1412,"column":1}},"key":"yHcpmStisz"}],"key":"KcGsFXRBpA"},{"type":"paragraph","position":{"start":{"line":1414,"column":1},"end":{"line":1414,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1414,"column":1},"end":{"line":1414,"column":1}},"children":[{"type":"text","value":"Guard Clause","position":{"start":{"line":1414,"column":1},"end":{"line":1414,"column":1}},"key":"z6G1IFKzMv"}],"key":"zyaDbzLn5A"},{"type":"text","value":": A conditional statement at the beginning of a function that handles special cases or invalid inputs immediately, preventing deep nesting and clarifying main logic.","position":{"start":{"line":1414,"column":1},"end":{"line":1414,"column":1}},"key":"BWiazzyYYE"}],"key":"CKjNx5PgGW"},{"type":"paragraph","position":{"start":{"line":1416,"column":1},"end":{"line":1416,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1416,"column":1},"end":{"line":1416,"column":1}},"children":[{"type":"text","value":"List Comprehension","position":{"start":{"line":1416,"column":1},"end":{"line":1416,"column":1}},"key":"v3geTaouSo"}],"key":"A5vqh4o9YO"},{"type":"text","value":": A concise Python syntax for creating lists by applying an expression to each item in an iterable, optionally with filtering: ","position":{"start":{"line":1416,"column":1},"end":{"line":1416,"column":1}},"key":"uYysVVvD8E"},{"type":"inlineCode","value":"[expr for item in iterable if condition]","position":{"start":{"line":1416,"column":1},"end":{"line":1416,"column":1}},"key":"w799z6HVev"},{"type":"text","value":".","position":{"start":{"line":1416,"column":1},"end":{"line":1416,"column":1}},"key":"qrVNhCH6jU"}],"key":"e1J5oHRYhB"},{"type":"paragraph","position":{"start":{"line":1418,"column":1},"end":{"line":1418,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1418,"column":1},"end":{"line":1418,"column":1}},"children":[{"type":"text","value":"Loop","position":{"start":{"line":1418,"column":1},"end":{"line":1418,"column":1}},"key":"M2H42IPXys"}],"key":"v6XX6RgiF9"},{"type":"text","value":": A control structure that repeatedly executes a block of code, either for each item in a sequence (for loop) or while a condition remains true (while loop).","position":{"start":{"line":1418,"column":1},"end":{"line":1418,"column":1}},"key":"DVsrSJpBee"}],"key":"kxRnjiK36g"},{"type":"paragraph","position":{"start":{"line":1420,"column":1},"end":{"line":1420,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1420,"column":1},"end":{"line":1420,"column":1}},"children":[{"type":"text","value":"Pseudocode","position":{"start":{"line":1420,"column":1},"end":{"line":1420,"column":1}},"key":"FzgJCUVDQF"}],"key":"COm3l9QLof"},{"type":"text","value":": A human-readable description of an algorithm that focuses on logic and structure without syntactic details, essential for algorithm design before implementation.","position":{"start":{"line":1420,"column":1},"end":{"line":1420,"column":1}},"key":"JdaEZxQi1o"}],"key":"yT05nddVax"},{"type":"paragraph","position":{"start":{"line":1422,"column":1},"end":{"line":1422,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1422,"column":1},"end":{"line":1422,"column":1}},"children":[{"type":"text","value":"Short-circuit Evaluation","position":{"start":{"line":1422,"column":1},"end":{"line":1422,"column":1}},"key":"c8z3DZ7qwN"}],"key":"oDf5gmplDw"},{"type":"text","value":": The behavior where logical operators (and, or) stop evaluating as soon as the result is determined, preventing unnecessary computation or errors.","position":{"start":{"line":1422,"column":1},"end":{"line":1422,"column":1}},"key":"pcOClFql9U"}],"key":"ZFcCFCk410"},{"type":"heading","depth":2,"position":{"start":{"line":1424,"column":1},"end":{"line":1424,"column":1}},"children":[{"type":"text","value":"Key Takeaways","position":{"start":{"line":1424,"column":1},"end":{"line":1424,"column":1}},"key":"ZcBWBN0ERX"}],"identifier":"key-takeaways","label":"Key Takeaways","html_id":"key-takeaways","implicit":true,"key":"jfhJLfMz8c"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":1426,"column":1},"end":{"line":1436,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":1426,"column":1},"end":{"line":1426,"column":1}},"children":[{"type":"text","value":"Pseudocode reveals logical flaws before they become bugs - always design before implementing","position":{"start":{"line":1426,"column":1},"end":{"line":1426,"column":1}},"key":"Pk4NATJEL9"}],"key":"CJNlcZL9iQ"},{"type":"listItem","spread":true,"position":{"start":{"line":1427,"column":1},"end":{"line":1427,"column":1}},"children":[{"type":"text","value":"Never use ","position":{"start":{"line":1427,"column":1},"end":{"line":1427,"column":1}},"key":"QMqzywt1u6"},{"type":"inlineCode","value":"==","position":{"start":{"line":1427,"column":1},"end":{"line":1427,"column":1}},"key":"se6EYK0XkG"},{"type":"text","value":" with floating-point numbers; always use tolerance-based comparisons","position":{"start":{"line":1427,"column":1},"end":{"line":1427,"column":1}},"key":"AHegTVpPa0"}],"key":"Crgvjxu7c2"},{"type":"listItem","spread":true,"position":{"start":{"line":1428,"column":1},"end":{"line":1428,"column":1}},"children":[{"type":"text","value":"Guard clauses handle special cases first, making the main logic clearer and preventing deep nesting","position":{"start":{"line":1428,"column":1},"end":{"line":1428,"column":1}},"key":"EDQTyLX9EX"}],"key":"PjUgefcFiu"},{"type":"listItem","spread":true,"position":{"start":{"line":1429,"column":1},"end":{"line":1429,"column":1}},"children":[{"type":"text","value":"The accumulator pattern is fundamental to scientific computing, from statistics to Monte Carlo methods","position":{"start":{"line":1429,"column":1},"end":{"line":1429,"column":1}},"key":"ehp6Uu5BSd"}],"key":"pdy5QyoPDC"},{"type":"listItem","spread":true,"position":{"start":{"line":1430,"column":1},"end":{"line":1430,"column":1}},"children":[{"type":"text","value":"List comprehensions are faster than loops for simple transformations but become unreadable for complex logic","position":{"start":{"line":1430,"column":1},"end":{"line":1430,"column":1}},"key":"LlqWtRw20c"}],"key":"rl7aDOoPqO"},{"type":"listItem","spread":true,"position":{"start":{"line":1431,"column":1},"end":{"line":1431,"column":1}},"children":[{"type":"text","value":"Short-circuit evaluation in boolean logic prevents errors and improves performance","position":{"start":{"line":1431,"column":1},"end":{"line":1431,"column":1}},"key":"Pihz9AVA5l"}],"key":"dggeoac7sd"},{"type":"listItem","spread":true,"position":{"start":{"line":1432,"column":1},"end":{"line":1432,"column":1}},"children":[{"type":"text","value":"While loops need explicit termination conditions and iteration limits to prevent infinite loops","position":{"start":{"line":1432,"column":1},"end":{"line":1432,"column":1}},"key":"fe07oWBtri"}],"key":"uTinR07BXw"},{"type":"listItem","spread":true,"position":{"start":{"line":1433,"column":1},"end":{"line":1433,"column":1}},"children":[{"type":"text","value":"The convergence pattern (initialize, iterate, check, safeguard) appears throughout computational physics","position":{"start":{"line":1433,"column":1},"end":{"line":1433,"column":1}},"key":"KKFDWdn6cJ"}],"key":"oETLnTlTc7"},{"type":"listItem","spread":true,"position":{"start":{"line":1434,"column":1},"end":{"line":1434,"column":1}},"children":[{"type":"text","value":"Strategic print debugging at decision points is often faster than using a debugger","position":{"start":{"line":1434,"column":1},"end":{"line":1434,"column":1}},"key":"p05fwZktMD"}],"key":"BROQSZr4Or"},{"type":"listItem","spread":true,"position":{"start":{"line":1435,"column":1},"end":{"line":1436,"column":1}},"children":[{"type":"text","value":"Order matters in condition chains - check from most specific to most general","position":{"start":{"line":1435,"column":1},"end":{"line":1435,"column":1}},"key":"UJKV7WbiRv"}],"key":"cH6nwJPAtf"}],"key":"zaLh10Gxxb"},{"type":"heading","depth":2,"position":{"start":{"line":1437,"column":1},"end":{"line":1437,"column":1}},"children":[{"type":"text","value":"Quick Reference: Control Flow Functions and Patterns","position":{"start":{"line":1437,"column":1},"end":{"line":1437,"column":1}},"key":"WNqxnXkAux"}],"identifier":"quick-reference-control-flow-functions-and-patterns","label":"Quick Reference: Control Flow Functions and Patterns","html_id":"quick-reference-control-flow-functions-and-patterns","implicit":true,"key":"jWr89a9c9U"},{"type":"table","position":{"start":{"line":1439,"column":1},"end":{"line":1453,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":1439,"column":1},"end":{"line":1439,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":1439,"column":1},"end":{"line":1439,"column":1}},"children":[{"type":"text","value":"Construct/Function","position":{"start":{"line":1439,"column":1},"end":{"line":1439,"column":1}},"key":"rxdzc75NqA"}],"key":"n1TYZA0UlA"},{"type":"tableCell","header":true,"position":{"start":{"line":1439,"column":1},"end":{"line":1439,"column":1}},"children":[{"type":"text","value":"Purpose","position":{"start":{"line":1439,"column":1},"end":{"line":1439,"column":1}},"key":"C3t4PCDIZ5"}],"key":"rcDMq1ZaKQ"},{"type":"tableCell","header":true,"position":{"start":{"line":1439,"column":1},"end":{"line":1439,"column":1}},"children":[{"type":"text","value":"Example","position":{"start":{"line":1439,"column":1},"end":{"line":1439,"column":1}},"key":"QpB8oA83Mr"}],"key":"sWVsNWD5S3"}],"key":"bzTnFGCHkN"},{"type":"tableRow","position":{"start":{"line":1441,"column":1},"end":{"line":1441,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1441,"column":1},"end":{"line":1441,"column":1}},"children":[{"type":"inlineCode","value":"if/elif/else","position":{"start":{"line":1441,"column":1},"end":{"line":1441,"column":1}},"key":"Ieick3pdZO"}],"key":"gjSM1E9st3"},{"type":"tableCell","position":{"start":{"line":1441,"column":1},"end":{"line":1441,"column":1}},"children":[{"type":"text","value":"Conditional execution","position":{"start":{"line":1441,"column":1},"end":{"line":1441,"column":1}},"key":"zBcZT9M07n"}],"key":"imU1RShgvG"},{"type":"tableCell","position":{"start":{"line":1441,"column":1},"end":{"line":1441,"column":1}},"children":[{"type":"inlineCode","value":"if x > 0: positive()","position":{"start":{"line":1441,"column":1},"end":{"line":1441,"column":1}},"key":"YOvAomdQJg"}],"key":"GIgWReXh8W"}],"key":"RldXPFZUtR"},{"type":"tableRow","position":{"start":{"line":1442,"column":1},"end":{"line":1442,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1442,"column":1},"end":{"line":1442,"column":1}},"children":[{"type":"inlineCode","value":"for x in sequence","position":{"start":{"line":1442,"column":1},"end":{"line":1442,"column":1}},"key":"qV7MBH0sG6"}],"key":"dt2t6AwjsC"},{"type":"tableCell","position":{"start":{"line":1442,"column":1},"end":{"line":1442,"column":1}},"children":[{"type":"text","value":"Iterate over items","position":{"start":{"line":1442,"column":1},"end":{"line":1442,"column":1}},"key":"nkbU7Twr4t"}],"key":"V0iP5a2iSi"},{"type":"tableCell","position":{"start":{"line":1442,"column":1},"end":{"line":1442,"column":1}},"children":[{"type":"inlineCode","value":"for value in data:","position":{"start":{"line":1442,"column":1},"end":{"line":1442,"column":1}},"key":"yOvbNnH5J5"}],"key":"K7QeiV5C4n"}],"key":"mcrsHm8BiI"},{"type":"tableRow","position":{"start":{"line":1443,"column":1},"end":{"line":1443,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1443,"column":1},"end":{"line":1443,"column":1}},"children":[{"type":"inlineCode","value":"for i in range(n)","position":{"start":{"line":1443,"column":1},"end":{"line":1443,"column":1}},"key":"Kf5IP6XPkm"}],"key":"FVaHxBzH5A"},{"type":"tableCell","position":{"start":{"line":1443,"column":1},"end":{"line":1443,"column":1}},"children":[{"type":"text","value":"Count from 0 to n-1","position":{"start":{"line":1443,"column":1},"end":{"line":1443,"column":1}},"key":"irhbbKRdxW"}],"key":"is7RD64ULu"},{"type":"tableCell","position":{"start":{"line":1443,"column":1},"end":{"line":1443,"column":1}},"children":[{"type":"inlineCode","value":"for i in range(10):","position":{"start":{"line":1443,"column":1},"end":{"line":1443,"column":1}},"key":"wVRsqd6Qnm"}],"key":"bn5SDtsvrR"}],"key":"bQqnhhc1A3"},{"type":"tableRow","position":{"start":{"line":1444,"column":1},"end":{"line":1444,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1444,"column":1},"end":{"line":1444,"column":1}},"children":[{"type":"inlineCode","value":"while condition","position":{"start":{"line":1444,"column":1},"end":{"line":1444,"column":1}},"key":"YMqOKs1JZN"}],"key":"kR5pbedNWp"},{"type":"tableCell","position":{"start":{"line":1444,"column":1},"end":{"line":1444,"column":1}},"children":[{"type":"text","value":"Repeat while true","position":{"start":{"line":1444,"column":1},"end":{"line":1444,"column":1}},"key":"cs8enFK5uL"}],"key":"gXqxyYwpHp"},{"type":"tableCell","position":{"start":{"line":1444,"column":1},"end":{"line":1444,"column":1}},"children":[{"type":"inlineCode","value":"while error > tolerance:","position":{"start":{"line":1444,"column":1},"end":{"line":1444,"column":1}},"key":"kQa3jVd21k"}],"key":"X9o57Vc49P"}],"key":"zmNQoJ7cWa"},{"type":"tableRow","position":{"start":{"line":1445,"column":1},"end":{"line":1445,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1445,"column":1},"end":{"line":1445,"column":1}},"children":[{"type":"inlineCode","value":"break","position":{"start":{"line":1445,"column":1},"end":{"line":1445,"column":1}},"key":"XZNg0MalkO"}],"key":"liDxsOoee4"},{"type":"tableCell","position":{"start":{"line":1445,"column":1},"end":{"line":1445,"column":1}},"children":[{"type":"text","value":"Exit loop early","position":{"start":{"line":1445,"column":1},"end":{"line":1445,"column":1}},"key":"puPXSmYMN9"}],"key":"PjxY3R2vXZ"},{"type":"tableCell","position":{"start":{"line":1445,"column":1},"end":{"line":1445,"column":1}},"children":[{"type":"inlineCode","value":"if converged: break","position":{"start":{"line":1445,"column":1},"end":{"line":1445,"column":1}},"key":"bFzsf4eiHQ"}],"key":"FiiM2pmF6D"}],"key":"lFMqDHlhPI"},{"type":"tableRow","position":{"start":{"line":1446,"column":1},"end":{"line":1446,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1446,"column":1},"end":{"line":1446,"column":1}},"children":[{"type":"inlineCode","value":"continue","position":{"start":{"line":1446,"column":1},"end":{"line":1446,"column":1}},"key":"YQeRQqQJ4R"}],"key":"GIdMcSaoi1"},{"type":"tableCell","position":{"start":{"line":1446,"column":1},"end":{"line":1446,"column":1}},"children":[{"type":"text","value":"Skip to next iteration","position":{"start":{"line":1446,"column":1},"end":{"line":1446,"column":1}},"key":"vv9fw3vgBz"}],"key":"eaBfzZ4zJ0"},{"type":"tableCell","position":{"start":{"line":1446,"column":1},"end":{"line":1446,"column":1}},"children":[{"type":"inlineCode","value":"if invalid: continue","position":{"start":{"line":1446,"column":1},"end":{"line":1446,"column":1}},"key":"Pluyzy7gHH"}],"key":"uKvALxXLNA"}],"key":"iXb5dSD8Su"},{"type":"tableRow","position":{"start":{"line":1447,"column":1},"end":{"line":1447,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1447,"column":1},"end":{"line":1447,"column":1}},"children":[{"type":"inlineCode","value":"enumerate()","position":{"start":{"line":1447,"column":1},"end":{"line":1447,"column":1}},"key":"fS649dFs9C"}],"key":"VtxfpDLjct"},{"type":"tableCell","position":{"start":{"line":1447,"column":1},"end":{"line":1447,"column":1}},"children":[{"type":"text","value":"Get index and value","position":{"start":{"line":1447,"column":1},"end":{"line":1447,"column":1}},"key":"Lze6HVUCtZ"}],"key":"sMatxmd4um"},{"type":"tableCell","position":{"start":{"line":1447,"column":1},"end":{"line":1447,"column":1}},"children":[{"type":"inlineCode","value":"for i, x in enumerate(data):","position":{"start":{"line":1447,"column":1},"end":{"line":1447,"column":1}},"key":"n0KglYULQW"}],"key":"prz9BEzkYk"}],"key":"fP1sULWddN"},{"type":"tableRow","position":{"start":{"line":1448,"column":1},"end":{"line":1448,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1448,"column":1},"end":{"line":1448,"column":1}},"children":[{"type":"inlineCode","value":"zip()","position":{"start":{"line":1448,"column":1},"end":{"line":1448,"column":1}},"key":"oqUDgXYNtL"}],"key":"C771ELBQJP"},{"type":"tableCell","position":{"start":{"line":1448,"column":1},"end":{"line":1448,"column":1}},"children":[{"type":"text","value":"Parallel iteration","position":{"start":{"line":1448,"column":1},"end":{"line":1448,"column":1}},"key":"k6iXz6mEGT"}],"key":"ZTaOyxRlQQ"},{"type":"tableCell","position":{"start":{"line":1448,"column":1},"end":{"line":1448,"column":1}},"children":[{"type":"inlineCode","value":"for x, y in zip(xs, ys):","position":{"start":{"line":1448,"column":1},"end":{"line":1448,"column":1}},"key":"QPy2iZ2uy1"}],"key":"uQXwOwIexK"}],"key":"Tlo8SaXGk2"},{"type":"tableRow","position":{"start":{"line":1449,"column":1},"end":{"line":1449,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1449,"column":1},"end":{"line":1449,"column":1}},"children":[{"type":"inlineCode","value":"all()","position":{"start":{"line":1449,"column":1},"end":{"line":1449,"column":1}},"key":"vHRcKzfruz"}],"key":"h2AY7ziONx"},{"type":"tableCell","position":{"start":{"line":1449,"column":1},"end":{"line":1449,"column":1}},"children":[{"type":"text","value":"Check if all are true","position":{"start":{"line":1449,"column":1},"end":{"line":1449,"column":1}},"key":"hnYqjKcHYS"}],"key":"MHy4EpLXIi"},{"type":"tableCell","position":{"start":{"line":1449,"column":1},"end":{"line":1449,"column":1}},"children":[{"type":"inlineCode","value":"if all(x > 0 for x in data):","position":{"start":{"line":1449,"column":1},"end":{"line":1449,"column":1}},"key":"QLl74pWb7j"}],"key":"DrhgPd2lyZ"}],"key":"C0VCWuEZrO"},{"type":"tableRow","position":{"start":{"line":1450,"column":1},"end":{"line":1450,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1450,"column":1},"end":{"line":1450,"column":1}},"children":[{"type":"inlineCode","value":"any()","position":{"start":{"line":1450,"column":1},"end":{"line":1450,"column":1}},"key":"llK1bG2riG"}],"key":"hXS2UIxX8h"},{"type":"tableCell","position":{"start":{"line":1450,"column":1},"end":{"line":1450,"column":1}},"children":[{"type":"text","value":"Check if any is true","position":{"start":{"line":1450,"column":1},"end":{"line":1450,"column":1}},"key":"LmqWfCzfW0"}],"key":"UCgotZ4sho"},{"type":"tableCell","position":{"start":{"line":1450,"column":1},"end":{"line":1450,"column":1}},"children":[{"type":"inlineCode","value":"if any(x < 0 for x in data):","position":{"start":{"line":1450,"column":1},"end":{"line":1450,"column":1}},"key":"h4bE45w1xr"}],"key":"q1qhvDRKyR"}],"key":"v10AuAFqNF"},{"type":"tableRow","position":{"start":{"line":1451,"column":1},"end":{"line":1451,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1451,"column":1},"end":{"line":1451,"column":1}},"children":[{"type":"inlineCode","value":"[expr for x in seq]","position":{"start":{"line":1451,"column":1},"end":{"line":1451,"column":1}},"key":"OkZy60h3jo"}],"key":"USBo1tgvsK"},{"type":"tableCell","position":{"start":{"line":1451,"column":1},"end":{"line":1451,"column":1}},"children":[{"type":"text","value":"List comprehension","position":{"start":{"line":1451,"column":1},"end":{"line":1451,"column":1}},"key":"W9p5JxPgHg"}],"key":"btrUuG2juK"},{"type":"tableCell","position":{"start":{"line":1451,"column":1},"end":{"line":1451,"column":1}},"children":[{"type":"inlineCode","value":"[x**2 for x in range(10)]","position":{"start":{"line":1451,"column":1},"end":{"line":1451,"column":1}},"key":"LxODbxnz9r"}],"key":"JCX0M5S1zx"}],"key":"nCQRGnb8ha"},{"type":"tableRow","position":{"start":{"line":1452,"column":1},"end":{"line":1452,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1452,"column":1},"end":{"line":1452,"column":1}},"children":[{"type":"inlineCode","value":"math.isclose()","position":{"start":{"line":1452,"column":1},"end":{"line":1452,"column":1}},"key":"OLNP20mR9O"}],"key":"Mz8NuZDrlJ"},{"type":"tableCell","position":{"start":{"line":1452,"column":1},"end":{"line":1452,"column":1}},"children":[{"type":"text","value":"Safe float comparison","position":{"start":{"line":1452,"column":1},"end":{"line":1452,"column":1}},"key":"fRpo4XBS68"}],"key":"wQNaKjRG7V"},{"type":"tableCell","position":{"start":{"line":1452,"column":1},"end":{"line":1452,"column":1}},"children":[{"type":"inlineCode","value":"if math.isclose(a, b):","position":{"start":{"line":1452,"column":1},"end":{"line":1452,"column":1}},"key":"VgxVXrIl9o"}],"key":"pZPgnWMWQW"}],"key":"oxjsJ6z6s4"},{"type":"tableRow","position":{"start":{"line":1453,"column":1},"end":{"line":1453,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1453,"column":1},"end":{"line":1453,"column":1}},"children":[{"type":"inlineCode","value":"math.isfinite()","position":{"start":{"line":1453,"column":1},"end":{"line":1453,"column":1}},"key":"qJ1WNPZnbH"}],"key":"nug3vtbmgJ"},{"type":"tableCell","position":{"start":{"line":1453,"column":1},"end":{"line":1453,"column":1}},"children":[{"type":"text","value":"Check not inf/nan","position":{"start":{"line":1453,"column":1},"end":{"line":1453,"column":1}},"key":"uib8iupTTd"}],"key":"HsKlGodIzg"},{"type":"tableCell","position":{"start":{"line":1453,"column":1},"end":{"line":1453,"column":1}},"children":[{"type":"inlineCode","value":"if math.isfinite(result):","position":{"start":{"line":1453,"column":1},"end":{"line":1453,"column":1}},"key":"QZj38DHXTX"}],"key":"MIrAgadERv"}],"key":"Km43kFeSxQ"}],"key":"e0X1ZZ4X7r"},{"type":"heading","depth":3,"position":{"start":{"line":1455,"column":1},"end":{"line":1455,"column":1}},"children":[{"type":"text","value":"Common Patterns Reference","position":{"start":{"line":1455,"column":1},"end":{"line":1455,"column":1}},"key":"Rz0BTLtPda"}],"identifier":"common-patterns-reference","label":"Common Patterns Reference","html_id":"common-patterns-reference","implicit":true,"key":"l7OujqzxjS"},{"type":"table","position":{"start":{"line":1457,"column":1},"end":{"line":1465,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":1457,"column":1},"end":{"line":1457,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":1457,"column":1},"end":{"line":1457,"column":1}},"children":[{"type":"text","value":"Pattern","position":{"start":{"line":1457,"column":1},"end":{"line":1457,"column":1}},"key":"PvF4s3kYU4"}],"key":"Oxwm9TorO6"},{"type":"tableCell","header":true,"position":{"start":{"line":1457,"column":1},"end":{"line":1457,"column":1}},"children":[{"type":"text","value":"Purpose","position":{"start":{"line":1457,"column":1},"end":{"line":1457,"column":1}},"key":"gWkhEQABl5"}],"key":"NGgve89z5b"},{"type":"tableCell","header":true,"position":{"start":{"line":1457,"column":1},"end":{"line":1457,"column":1}},"children":[{"type":"text","value":"Structure","position":{"start":{"line":1457,"column":1},"end":{"line":1457,"column":1}},"key":"WqFQAPAGSf"}],"key":"eKKofoiK26"}],"key":"kkuerta9E1"},{"type":"tableRow","position":{"start":{"line":1459,"column":1},"end":{"line":1459,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1459,"column":1},"end":{"line":1459,"column":1}},"children":[{"type":"text","value":"Accumulator","position":{"start":{"line":1459,"column":1},"end":{"line":1459,"column":1}},"key":"ZCtcGV4T17"}],"key":"nd3QmqrNID"},{"type":"tableCell","position":{"start":{"line":1459,"column":1},"end":{"line":1459,"column":1}},"children":[{"type":"text","value":"Aggregate values","position":{"start":{"line":1459,"column":1},"end":{"line":1459,"column":1}},"key":"yWLEyuyNS2"}],"key":"giUn5AxCOY"},{"type":"tableCell","position":{"start":{"line":1459,"column":1},"end":{"line":1459,"column":1}},"children":[{"type":"inlineCode","value":"total = 0; for x in data: total += x","position":{"start":{"line":1459,"column":1},"end":{"line":1459,"column":1}},"key":"C7htQpl4FR"}],"key":"GXLAmGSXIY"}],"key":"nAZNhrBlLw"},{"type":"tableRow","position":{"start":{"line":1460,"column":1},"end":{"line":1460,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1460,"column":1},"end":{"line":1460,"column":1}},"children":[{"type":"text","value":"Filter","position":{"start":{"line":1460,"column":1},"end":{"line":1460,"column":1}},"key":"QsLi60K8DQ"}],"key":"Dct2KUn3Nl"},{"type":"tableCell","position":{"start":{"line":1460,"column":1},"end":{"line":1460,"column":1}},"children":[{"type":"text","value":"Select subset","position":{"start":{"line":1460,"column":1},"end":{"line":1460,"column":1}},"key":"SGRSfU4Psn"}],"key":"kwZdnG68CX"},{"type":"tableCell","position":{"start":{"line":1460,"column":1},"end":{"line":1460,"column":1}},"children":[{"type":"inlineCode","value":"[x for x in data if condition(x)]","position":{"start":{"line":1460,"column":1},"end":{"line":1460,"column":1}},"key":"RBReBuy0Le"}],"key":"tJU1J1EOvc"}],"key":"vsyz7avIyf"},{"type":"tableRow","position":{"start":{"line":1461,"column":1},"end":{"line":1461,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1461,"column":1},"end":{"line":1461,"column":1}},"children":[{"type":"text","value":"Map","position":{"start":{"line":1461,"column":1},"end":{"line":1461,"column":1}},"key":"UOgLESSxpL"}],"key":"CuWlEZE6Ds"},{"type":"tableCell","position":{"start":{"line":1461,"column":1},"end":{"line":1461,"column":1}},"children":[{"type":"text","value":"Transform all","position":{"start":{"line":1461,"column":1},"end":{"line":1461,"column":1}},"key":"usj3lkVvGv"}],"key":"zYuYHtC6Ci"},{"type":"tableCell","position":{"start":{"line":1461,"column":1},"end":{"line":1461,"column":1}},"children":[{"type":"inlineCode","value":"[f(x) for x in data]","position":{"start":{"line":1461,"column":1},"end":{"line":1461,"column":1}},"key":"W9f7K2S1BQ"}],"key":"ZTI6NER1TY"}],"key":"vMAlnHZB8d"},{"type":"tableRow","position":{"start":{"line":1462,"column":1},"end":{"line":1462,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1462,"column":1},"end":{"line":1462,"column":1}},"children":[{"type":"text","value":"Search","position":{"start":{"line":1462,"column":1},"end":{"line":1462,"column":1}},"key":"gnr9Sv4pbf"}],"key":"KoT6vE78Z8"},{"type":"tableCell","position":{"start":{"line":1462,"column":1},"end":{"line":1462,"column":1}},"children":[{"type":"text","value":"Find first match","position":{"start":{"line":1462,"column":1},"end":{"line":1462,"column":1}},"key":"IQLFvJX6cM"}],"key":"X3ErDtoqrk"},{"type":"tableCell","position":{"start":{"line":1462,"column":1},"end":{"line":1462,"column":1}},"children":[{"type":"inlineCode","value":"for x in data: if condition(x): return x","position":{"start":{"line":1462,"column":1},"end":{"line":1462,"column":1}},"key":"WcnMSDzcc3"}],"key":"SKksKYFYtg"}],"key":"dnWjY0oSFa"},{"type":"tableRow","position":{"start":{"line":1463,"column":1},"end":{"line":1463,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1463,"column":1},"end":{"line":1463,"column":1}},"children":[{"type":"text","value":"Convergence","position":{"start":{"line":1463,"column":1},"end":{"line":1463,"column":1}},"key":"rXl38DngTF"}],"key":"Qpa4vZKTy3"},{"type":"tableCell","position":{"start":{"line":1463,"column":1},"end":{"line":1463,"column":1}},"children":[{"type":"text","value":"Iterate to solution","position":{"start":{"line":1463,"column":1},"end":{"line":1463,"column":1}},"key":"paoanrTkQi"}],"key":"uY6rZjZjzC"},{"type":"tableCell","position":{"start":{"line":1463,"column":1},"end":{"line":1463,"column":1}},"children":[{"type":"inlineCode","value":"while not converged and iter < max: ...","position":{"start":{"line":1463,"column":1},"end":{"line":1463,"column":1}},"key":"o9cPgbrYfM"}],"key":"lM7CqXsruC"}],"key":"ryooAdBWzJ"},{"type":"tableRow","position":{"start":{"line":1464,"column":1},"end":{"line":1464,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1464,"column":1},"end":{"line":1464,"column":1}},"children":[{"type":"text","value":"Guard clause","position":{"start":{"line":1464,"column":1},"end":{"line":1464,"column":1}},"key":"rXWTwkQQCB"}],"key":"owfidVA8vk"},{"type":"tableCell","position":{"start":{"line":1464,"column":1},"end":{"line":1464,"column":1}},"children":[{"type":"text","value":"Handle special cases","position":{"start":{"line":1464,"column":1},"end":{"line":1464,"column":1}},"key":"zPKhuKU7yI"}],"key":"q3ivj5NWpX"},{"type":"tableCell","position":{"start":{"line":1464,"column":1},"end":{"line":1464,"column":1}},"children":[{"type":"inlineCode","value":"if bad_input: return None","position":{"start":{"line":1464,"column":1},"end":{"line":1464,"column":1}},"key":"KxcH5swd5C"}],"key":"RiwDxoap4S"}],"key":"Hpwj6vIHNK"},{"type":"tableRow","position":{"start":{"line":1465,"column":1},"end":{"line":1465,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":1465,"column":1},"end":{"line":1465,"column":1}},"children":[{"type":"text","value":"Adaptive refinement","position":{"start":{"line":1465,"column":1},"end":{"line":1465,"column":1}},"key":"gmMyhoMmgJ"}],"key":"PlGtgqolx8"},{"type":"tableCell","position":{"start":{"line":1465,"column":1},"end":{"line":1465,"column":1}},"children":[{"type":"text","value":"Adjust parameters","position":{"start":{"line":1465,"column":1},"end":{"line":1465,"column":1}},"key":"LIxcRnoRWr"}],"key":"DGYZyfIRGy"},{"type":"tableCell","position":{"start":{"line":1465,"column":1},"end":{"line":1465,"column":1}},"children":[{"type":"inlineCode","value":"while quality < target: refine()","position":{"start":{"line":1465,"column":1},"end":{"line":1465,"column":1}},"key":"jMkNT6Njwa"}],"key":"JzS1oTbF7L"}],"key":"tjtoWhnIwT"}],"key":"eHS2sS9ugf"},{"type":"heading","depth":2,"position":{"start":{"line":1467,"column":1},"end":{"line":1467,"column":1}},"children":[{"type":"text","value":"Next Chapter Preview","position":{"start":{"line":1467,"column":1},"end":{"line":1467,"column":1}},"key":"BMP3G2oIaF"}],"identifier":"next-chapter-preview","label":"Next Chapter Preview","html_id":"next-chapter-preview","implicit":true,"key":"Q8st9MRCJJ"},{"type":"paragraph","position":{"start":{"line":1469,"column":1},"end":{"line":1469,"column":1}},"children":[{"type":"text","value":"You’ve conquered control flow - now get ready for the next level! Chapter 4 will reveal how to organize data efficiently using Python’s powerful data structures. You’ll discover when to use lists versus dictionaries versus sets, and more importantly, you’ll understand why these choices can make your algorithms run 100 times faster or 100 times slower.","position":{"start":{"line":1469,"column":1},"end":{"line":1469,"column":1}},"key":"Pvopyeviol"}],"key":"CCVssU7bhC"},{"type":"paragraph","position":{"start":{"line":1471,"column":1},"end":{"line":1471,"column":1}},"children":[{"type":"text","value":"Imagine trying to find a specific star in a catalog of millions. With a list, you’d check each star one by one - taking minutes or hours. With a dictionary, you’ll find it instantly - in microseconds! The data structures you’ll learn next are the difference between simulations that finish in minutes and ones that run for days.","position":{"start":{"line":1471,"column":1},"end":{"line":1471,"column":1}},"key":"Y854ollGGq"}],"key":"hJ9xZl31Ph"},{"type":"paragraph","position":{"start":{"line":1473,"column":1},"end":{"line":1473,"column":1}},"children":[{"type":"text","value":"The control flow patterns you’ve mastered here will operate on the data structures you’ll learn next. Your loops will iterate through dictionaries of astronomical objects. Your conditionals will filter sets of observations. Your comprehensions will transform lists of measurements into meaningful results. Together, control flow and data structures give you the power to handle the massive datasets of modern astronomy - from Gaia’s billion-star catalog to the petabytes of data from the Square Kilometre Array.","position":{"start":{"line":1473,"column":1},"end":{"line":1473,"column":1}},"key":"uYHc511TT8"}],"key":"GNYRol1vng"},{"type":"paragraph","position":{"start":{"line":1475,"column":1},"end":{"line":1475,"column":1}},"children":[{"type":"text","value":"Get excited - Chapter 4 is where your code goes from processing dozens of data points to handling millions efficiently!","position":{"start":{"line":1475,"column":1},"end":{"line":1475,"column":1}},"key":"mJuYFCzAeX"}],"key":"wWIM86z1ZF"}],"key":"JfNDKHb04n"}],"key":"UTkbDL2waz"},"references":{"cite":{"order":[],"data":{}}}}