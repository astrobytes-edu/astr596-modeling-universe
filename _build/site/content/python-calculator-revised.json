{"version":2,"kind":"Article","sha256":"b11b8b42d7b916e3907ec6c1a4db9ac2be1094776fa6d37fcfb610b5de53b9ef","slug":"python-calculator-revised","location":"/03-scientific-computing-with-python/01-python-fundamentals/02-python-calculator-REVISED.md","dependencies":[],"frontmatter":{"title":"Chapter 2: Python as Your Astronomical Calculator","content_includes_title":false,"authors":[{"nameParsed":{"literal":"Anna Rosen","given":"Anna","family":"Rosen"},"name":"Anna Rosen","orcid":"0000-0003-4423-0660","email":"alrosen@sdsu.edu","affiliations":["San Diego State University"],"id":"contributors-myst-generated-uid-0","corresponding":true}],"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"MIT","url":"https://opensource.org/licenses/MIT","name":"MIT License","free":true,"osi":true}},"github":"https://github.com/astrobytes-edu/astr596-modeling-universe","subject":"Modeling the Universe","venue":{"title":"ASTR 596 - Fall 2025","url":"https://www.anna-rosen.com"},"keywords":["computational astrophysics","python","numerical methods","machine learning","monte carlo","neural networks","radiative transfer","bayesian inference","JAX"],"affiliations":[{"id":"San Diego State University","name":"San Diego State University"}],"numbering":{"title":{"offset":2}},"edit_url":"https://github.com/astrobytes-edu/astr596-modeling-universe/blob/main/03-scientific-computing-with-python/01-python-fundamentals/02-python-calculator-REVISED.md","exports":[{"format":"md","filename":"02-python-calculator-REVISED.md","url":"/02-python-calculator-a94ace018cdb039656531e9eda7fe63c.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Learning Objectives","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"HsNVJbH9am"}],"identifier":"learning-objectives","label":"Learning Objectives","html_id":"learning-objectives","implicit":true,"key":"UOjvhgHtcf"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"By the end of this chapter, you will be able to:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"BEJesUXAxE"}],"key":"BctcFKXfUV"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Use Python as an interactive scientific calculator with proper operator precedence","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"E8h3JcMNrM"}],"key":"fcYyyUl4cs"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Understand how computers represent integers, floats, and complex numbers in memory","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"w3aTD2BEnN"}],"key":"V7DI1JDDY3"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Explain why 0.1 + 0.2 ≠ 0.3 and handle floating-point comparisons correctly","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"QCNOVOVGga"}],"key":"dr52dPA6eX"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Recognize and avoid catastrophic cancellation and numerical overflow/underflow","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"jtspLtVvaE"}],"key":"lqIivzSc06"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Choose appropriate numeric types for different astronomical calculations","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"aR7tMJgwEc"}],"key":"dqngBcJF5t"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Format output elegantly using f-strings with scientific notation and alignment","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"mWzvbzKkBU"}],"key":"zjzqQuIKcP"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Convert between data types safely and understand when conversions lose information","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"nslf0b0pLf"}],"key":"GphoiBdhn6"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Create defensive numerical code that catches precision problems early","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"SCd1sf0snZ"}],"key":"UyCljH4QR4"}],"key":"ppl6UdjCDO"},{"type":"heading","depth":2,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Prerequisites Check","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"bGscO2A1ny"}],"identifier":"prerequisites-check","label":"Prerequisites Check","html_id":"prerequisites-check","implicit":true,"key":"wEWUDxsh6V"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Before starting this chapter, verify you can:","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"I6vGqrqBmE"}],"key":"Sp5cUneapU"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":18,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"✓ Launch IPython and use basic magic commands (Chapter 1)","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"LTOYntqsfj"}],"key":"D1yPpkEDaM"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"✓ Understand the difference between scripts and interactive sessions (Chapter 1)","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"inW5EX4PN3"}],"key":"iLHTeB7ZF3"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"✓ Navigate your file system and activate your conda environment (Chapter 1)","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"D5rppfmSuo"}],"key":"M0JLlU7odj"}],"key":"MFoDJxTOUQ"},{"type":"heading","depth":2,"position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Chapter Overview","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"p3wgjzqXc6"}],"identifier":"chapter-overview","label":"Chapter Overview","html_id":"chapter-overview","implicit":true,"key":"NcHocFpt5E"},{"type":"paragraph","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Welcome to the foundation of all computational astronomy—understanding how Python handles numbers. This chapter transforms Python into your personal astronomical calculator, but more importantly, it reveals the hidden complexity of numerical computation that can make the difference between discovering an exoplanet and missing it entirely due to numerical errors.","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"iWbBXwqAX5"}],"key":"bEGeMq3852"},{"type":"paragraph","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"You’re about to learn why spacecraft have crashed, why some astronomical calculations fail catastrophically, and how to write code that handles the extreme scales of the universe—from the quantum foam at ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"r2PTjMttI4"},{"type":"span","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"10","key":"pyioV5Jfx9"},{"type":"superscript","children":[{"type":"text","value":"-35","key":"xUyUoPrutD"}],"key":"MGVAyUTbOW"}],"key":"NbFcMQytmo"},{"type":"text","value":" meters to the observable universe at ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"mDglg7Wjcd"},{"type":"span","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"10","key":"QTzxnKgZrN"},{"type":"superscript","children":[{"type":"text","value":"26","key":"PGaSIaQRFH"}],"key":"V8R8hHmz1I"}],"key":"q6yaqsbYVZ"},{"type":"text","value":" meters. The floating-point precision issues we explore here aren’t academic exercises; they’re the source of real bugs that have corrupted simulations, led to incorrect published results, and caused spacecraft navigation errors.","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"oqooxycYAq"}],"key":"HKAQVMmKi8"},{"type":"paragraph","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"By mastering these fundamentals now, you’ll develop the numerical intuition that separates computational scientists from programmers who just happen to work with scientific data. Every orbital integrator you build, every spectrum you analyze, and every statistical test you run will rely on the concepts in this chapter. Let’s begin your journey from calculator user to numerical computing expert.","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"PmeKDQNMSW"}],"key":"PpDGwikW5A"},{"type":"heading","depth":2,"position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"2.1 Python as Your Scientific Calculator","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"a9ynaDbAwC"}],"identifier":"id-2-1-python-as-your-scientific-calculator","label":"2.1 Python as Your Scientific Calculator","html_id":"id-2-1-python-as-your-scientific-calculator","implicit":true,"key":"vFtv2hGecD"},{"type":"paragraph","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"text","value":"Fire up IPython (remember, not the basic Python interpreter—we want the enhanced features) and let’s start with the basics. Python handles arithmetic operations naturally, but there are subtleties that matter for scientific work:","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"Z0VpeTwcnM"}],"key":"udU3OWjDfY"}],"key":"BRELxzipZu"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Basic arithmetic - but watch the precision!\n2 + 2  # Addition","key":"av4gPwE6ec"},{"type":"output","id":"ObHrWddTQIX7FRU0e1Fjv","data":[],"key":"Z7sZ9D0c7u"}],"key":"ot75pg3PIt"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"10 / 3  # Division always gives a float","key":"GBoLWmTlwW"},{"type":"output","id":"1Z3Ii5TmTTiXIoyrNx0zi","data":[],"key":"BXP6WWYPqY"}],"key":"fcRW6vJbRP"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"2 ** 10  # Exponentiation - the power operator","key":"AVRgzrWShS"},{"type":"output","id":"0fcKXRAJtxF-2hPGLvNv3","data":[],"key":"TwdjbJOZJ2"}],"key":"J8M3Dm9AT8"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"text","value":"Notice that ","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"eo0h3mmwT0"},{"type":"inlineCode","value":"10 / 3","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"FJuAPKNGCP"},{"type":"text","value":" gives us ","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"mMJ9FWdd76"},{"type":"inlineCode","value":"3.3333333333333335","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"ZnJ8tco1GU"},{"type":"text","value":"—not exactly 1/3! This tiny imprecision at the end might seem trivial, but it’s your first glimpse into a fundamental challenge of computational science.","position":{"start":{"line":47,"column":1},"end":{"line":47,"column":1}},"key":"phT0fvSeI1"}],"key":"jLZGgyKgaS"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🌟 Why This Matters: The Pale Blue Dot","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"key":"oIk3AiqspE"}],"key":"VnzXzy63IR"},{"type":"paragraph","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"children":[{"type":"text","value":"When Voyager 1 took the famous “Pale Blue Dot” photo of Earth from 6 billion kilometers away, the spacecraft’s position had to be known to extraordinary precision. A tiny numerical error in trajectory calculations could have pointed the camera at empty space. Every arithmetic operation in trajectory calculations compounds these errors—understanding numerical precision literally determines whether we can aim a camera across the solar system.","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"RVZ8PbFtdL"}],"key":"bfuYkrmwdP"}],"class":"tip","key":"WsKAYYnBFp"},{"type":"heading","depth":3,"position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"children":[{"type":"text","value":"Operator Precedence: A Source of Real Bugs","position":{"start":{"line":54,"column":1},"end":{"line":54,"column":1}},"key":"cBNZmzQOm8"}],"identifier":"operator-precedence-a-source-of-real-bugs","label":"Operator Precedence: A Source of Real Bugs","html_id":"operator-precedence-a-source-of-real-bugs","implicit":true,"key":"t6zllaA4YM"},{"type":"paragraph","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"children":[{"type":"text","value":"Python follows PEMDAS (Parentheses, Exponents, Multiplication/Division, Addition/Subtraction), but relying on memorized rules causes expensive errors. Let’s see this with a real astronomical calculation:","position":{"start":{"line":56,"column":1},"end":{"line":56,"column":1}},"key":"dN0PJNLkhe"}],"key":"zU6Daxgil0"}],"key":"FpkDHal7Ge"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Calculate orbital velocity: v = sqrt(GM/r)\n# Using CGS units (standard in astrophysics)\nG = 6.67e-8   # Gravitational constant (cm³ g⁻¹ s⁻²)\nM = 1.989e33  # Solar mass (grams)\nr = 1.496e13  # 1 AU (cm)\n\n# WRONG - operator precedence error!\nv_wrong = G * M / r ** 0.5\nprint(f\"Wrong velocity: {v_wrong:.2e} cm/s\")\n\n# CORRECT - parentheses clarify intent\nv_right = (G * M / r) ** 0.5\nprint(f\"Correct velocity: {v_right:.2e} cm/s\")\nprint(f\"That's {v_right/1e5:.1f} km/s - Earth's orbital speed!\")","key":"qcRKMSMd9E"},{"type":"output","id":"voYQT5yI_Dkq4U_Gxsowt","data":[],"key":"nz23RQQrJq"}],"key":"GrfdVeqLb2"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"children":[{"type":"text","value":"The wrong version calculated ","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"W59FOnABlI"},{"type":"inlineMath","value":"(GM/\\sqrt{r})","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>G</mi><mi>M</mi><mi mathvariant=\"normal\">/</mi><msqrt><mi>r</mi></msqrt><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(GM/\\sqrt{r})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0503em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">GM</span><span class=\"mord\">/</span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8003em;\"><span class=\"svg-align\" style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\" style=\"padding-left:0.833em;\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span><span style=\"top:-2.7603em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"hide-tail\" style=\"min-width:0.853em;height:1.08em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2397em;\"><span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>","key":"sc27mrnvXC"},{"type":"text","value":" instead of ","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"SBVwAcoEG7"},{"type":"inlineMath","value":"\\sqrt{GM/r}","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msqrt><mrow><mi>G</mi><mi>M</mi><mi mathvariant=\"normal\">/</mi><mi>r</mi></mrow></msqrt></mrow><annotation encoding=\"application/x-tex\">\\sqrt{GM/r}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.24em;vertical-align:-0.305em;\"></span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.935em;\"><span class=\"svg-align\" style=\"top:-3.2em;\"><span class=\"pstrut\" style=\"height:3.2em;\"></span><span class=\"mord\" style=\"padding-left:1em;\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">GM</span><span class=\"mord\">/</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span><span style=\"top:-2.895em;\"><span class=\"pstrut\" style=\"height:3.2em;\"></span><span class=\"hide-tail\" style=\"min-width:1.02em;height:1.28em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width='400em' height='1.28em' viewBox='0 0 400000 1296' preserveAspectRatio='xMinYMin slice'><path d='M263,681c0.7,0,18,39.7,52,119\nc34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120\nc340,-704.7,510.7,-1060.3,512,-1067\nl0 -0\nc4.7,-7.3,11,-11,19,-11\nH40000v40H1012.3\ns-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232\nc-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1\ns-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26\nc-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z\nM1001 80h400000v40h-400000z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.305em;\"><span></span></span></span></span></span></span></span></span>","key":"rLsVe362pD"},{"type":"text","value":"—a factor of ","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"rE5YGSeaKC"},{"type":"inlineMath","value":"\\sqrt{r}","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msqrt><mi>r</mi></msqrt></mrow><annotation encoding=\"application/x-tex\">\\sqrt{r}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.04em;vertical-align:-0.2397em;\"></span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8003em;\"><span class=\"svg-align\" style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\" style=\"padding-left:0.833em;\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span></span><span style=\"top:-2.7603em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"hide-tail\" style=\"min-width:0.853em;height:1.08em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2397em;\"><span></span></span></span></span></span></span></span></span>","key":"IsgPSRBi1e"},{"type":"text","value":" error, which for Earth’s orbit is about 12,000 times too large!","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"GMP4y8pZSZ"}],"key":"mtxiTOFBNJ"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🤔 Check Your Understanding: Precedence Prediction","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"key":"eA7huy1r4H"}],"key":"J9TIhmWxPI"},{"type":"paragraph","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"children":[{"type":"text","value":"Before running this code, predict the result of: ","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"ZyJJRthIsa"},{"type":"inlineCode","value":"-2**2 + 3*4//2","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"x0IrppkGB1"}],"key":"Ys7eo8Rh7s"},{"type":"paragraph","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"children":[{"type":"text","value":"Work through it step by step:","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"xCVJ1smPSD"}],"key":"F6XALGyiLi"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":82,"column":1},"end":{"line":85,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"children":[{"type":"text","value":"First, identify the operations: negation, exponentiation, multiplication, floor division, addition","position":{"start":{"line":82,"column":1},"end":{"line":82,"column":1}},"key":"B1qnp6MDSB"}],"key":"BHqFhmfYUh"},{"type":"listItem","spread":true,"position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"text","value":"Apply PEMDAS rules (remember: exponentiation before negation!)","position":{"start":{"line":83,"column":1},"end":{"line":83,"column":1}},"key":"a93UiXO99G"}],"key":"AdU7Ym2YGD"},{"type":"listItem","spread":true,"position":{"start":{"line":84,"column":1},"end":{"line":85,"column":1}},"children":[{"type":"text","value":"Write your predicted answer","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"rdvHSMPXYj"}],"key":"fYwgXXJsu6"}],"key":"ei5540pt4r"},{"type":"paragraph","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"children":[{"type":"text","value":"Now test it in IPython. Did you get -4 + 6 = 2? Or something else? This exercise reveals why explicit parentheses prevent expensive mistakes in orbital calculations.","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"key":"urntKD7lpx"}],"key":"LYbNFxEqsi"}],"class":"note","key":"wnLE468WAm"},{"type":"heading","depth":3,"position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"children":[{"type":"text","value":"Complete Arithmetic Operators","position":{"start":{"line":89,"column":1},"end":{"line":89,"column":1}},"key":"EpTkDwnq16"}],"identifier":"complete-arithmetic-operators","label":"Complete Arithmetic Operators","html_id":"complete-arithmetic-operators","implicit":true,"key":"PMR4aL8Jtp"},{"type":"paragraph","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"children":[{"type":"text","value":"Python provides operators beyond basic arithmetic that prove essential for astronomical calculations:","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"JkY5zwTq2o"}],"key":"TVQc8P8T6w"}],"key":"Rtpg2XOXoX"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Integer division - useful for time calculations\ndays = 17\nweeks = days // 7  # Floor division\nremaining_days = days % 7  # Modulo (remainder)\nprint(f\"{days} days = {weeks} weeks and {remaining_days} days\")\n\n# Warning: Floor division rounds toward negative infinity!\nprint(f\"17 // 3 = {17 // 3}\")    # Result: 5\nprint(f\"-17 // 3 = {-17 // 3}\")  # Result: -6, not -5!","key":"jWWaFRYWGc"},{"type":"output","id":"oCC21iyIHqkZ8e5us_AqB","data":[],"key":"JcuIUiCKM7"}],"key":"kimphJjSWA"},{"type":"block","children":[{"type":"admonition","kind":"warning","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Common Bug Alert: Negative Floor Division","position":{"start":{"line":106,"column":1},"end":{"line":106,"column":1}},"key":"y62LzNeulV"}],"key":"LFNXpwgB3o"},{"type":"paragraph","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"children":[{"type":"text","value":"Floor division with negative numbers often surprises astronomers calculating phases or time intervals before an epoch. When working with Julian dates or phases that can be negative, always test your edge cases or use ","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"key":"DgrTTDXLD3"},{"type":"inlineCode","value":"int(a/b)","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"key":"p4cMQcJE77"},{"type":"text","value":" for truncation toward zero.","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"key":"w58QMXC2T3"}],"key":"xiaDCZQPFv"}],"key":"MTJkffsejZ"},{"type":"heading","depth":2,"position":{"start":{"line":111,"column":1},"end":{"line":111,"column":1}},"children":[{"type":"text","value":"2.2 How Python Stores Numbers: Critical for Scientific Computing","position":{"start":{"line":111,"column":1},"end":{"line":111,"column":1}},"key":"etAAjtFs3M"}],"identifier":"id-2-2-how-python-stores-numbers-critical-for-scientific-computing","label":"2.2 How Python Stores Numbers: Critical for Scientific Computing","html_id":"id-2-2-how-python-stores-numbers-critical-for-scientific-computing","implicit":true,"key":"vsGZptftMo"},{"type":"paragraph","position":{"start":{"line":113,"column":1},"end":{"line":113,"column":1}},"children":[{"type":"text","value":"Here’s where your journey gets fascinating! You’re about to peek behind the curtain and see how computers really think about numbers. This knowledge is your superpower—it’s what lets you calculate the trajectory to send New Horizons to Pluto, 3 billion miles away, and arrive within 72 seconds of the predicted time. Understanding number representation prevents subtle bugs that can invalidate months of computational work, but more excitingly, it enables calculations that seem impossible at first glance.","position":{"start":{"line":113,"column":1},"end":{"line":113,"column":1}},"key":"vLvfTbzyEN"}],"key":"dRFG8yObF0"},{"type":"heading","depth":3,"position":{"start":{"line":115,"column":1},"end":{"line":115,"column":1}},"children":[{"type":"text","value":"Integers: Arbitrary Precision Power","position":{"start":{"line":115,"column":1},"end":{"line":115,"column":1}},"key":"psj6nf6SeB"}],"identifier":"integers-arbitrary-precision-power","label":"Integers: Arbitrary Precision Power","html_id":"integers-arbitrary-precision-power","implicit":true,"key":"Jz2ZDNx6Rm"},{"type":"aside","children":[{"type":"paragraph","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"children":[{"type":"strong","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"children":[{"type":"text","value":"Arbitrary Precision","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"GfWcR0e9RP"}],"key":"pSyHcTchE2"},{"type":"text","value":": Python integers can grow to any size limited only by available memory, unlike fixed-size integers in compiled languages.","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"RqBdIK30Cz"}],"key":"ZwrjkE2Rrm"}],"key":"E2ZbIwJLLs"},{"type":"paragraph","position":{"start":{"line":121,"column":1},"end":{"line":121,"column":1}},"children":[{"type":"text","value":"Unlike many languages, Python integers have unlimited precision—a huge advantage for astronomy where we routinely deal with enormous numbers:","position":{"start":{"line":121,"column":1},"end":{"line":121,"column":1}},"key":"ALlPSxcOaX"}],"key":"vbTWRTzO5w"}],"key":"EJyMbX2Tx8"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Number of atoms in the observable universe (approximate)\natoms_in_universe = 10 ** 80\nprint(f\"Atoms in universe: {atoms_in_universe}\")\n\n# Python handles it perfectly!\natoms_squared = atoms_in_universe ** 2\nprint(f\"Can even square it: {atoms_squared}\")\n\n# Memory usage scales with size\nimport sys\nprint(f\"Small integer (42) uses: {sys.getsizeof(42)} bytes\")\nprint(f\"Universe atoms uses: {sys.getsizeof(atoms_in_universe)} bytes\")","key":"eZwh6WoaQo"},{"type":"output","id":"pQ0DgqBQfDhBxwAWYksEN","data":[],"key":"UZkmI2Aaom"}],"key":"EjkkP1HXHT"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":138,"column":1},"end":{"line":138,"column":1}},"children":[{"type":"text","value":"This arbitrary precision is wonderful but comes with a cost—Python integers use more memory than fixed-size integers in compiled languages. This is why specialized numerical libraries become essential for large datasets.","position":{"start":{"line":138,"column":1},"end":{"line":138,"column":1}},"key":"zobXzEppfC"}],"key":"gXPN0gnRM2"},{"type":"heading","depth":3,"position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"children":[{"type":"text","value":"Floating-Point Numbers: The Heart of Numerical Computing","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"ho01qCKF2U"}],"identifier":"floating-point-numbers-the-heart-of-numerical-computing","label":"Floating-Point Numbers: The Heart of Numerical Computing","html_id":"floating-point-numbers-the-heart-of-numerical-computing","implicit":true,"key":"EMkX3jLmXb"},{"type":"paragraph","position":{"start":{"line":142,"column":1},"end":{"line":142,"column":1}},"children":[{"type":"text","value":"This is it—the concept that separates casual programmers from computational scientists! Don’t worry if this seems complex at first; every professional astronomer had to learn these same lessons. Once you understand floating-point representation, you’ll see why some calculations that seem simple to humans are tricky for computers, and more importantly, you’ll know how to handle them perfectly.","position":{"start":{"line":142,"column":1},"end":{"line":142,"column":1}},"key":"LYVdiDBZnA"}],"key":"ACirsyFUDC"},{"type":"aside","children":[{"type":"paragraph","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"children":[{"type":"strong","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"children":[{"type":"text","value":"IEEE 754","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"FAcMP2MUHi"}],"key":"yM83WOp3Gu"},{"type":"text","value":": The international standard for floating-point arithmetic, defining how real numbers are represented in binary with limited precision.","position":{"start":{"line":145,"column":1},"end":{"line":145,"column":1}},"key":"XOLHzxKWWo"}],"key":"v6rgzQbKNi"}],"key":"fKVYUkMAiV"},{"type":"paragraph","position":{"start":{"line":148,"column":1},"end":{"line":148,"column":1}},"children":[{"type":"text","value":"Floating-point numbers use IEEE 754 representation: 64 bits split into sign (1 bit), exponent (11 bits), and mantissa (52 bits). Think of it like scientific notation that computers use—and just like scientific notation, it’s incredibly powerful but has limits. This creates fundamental limitations that every computational scientist must understand:","position":{"start":{"line":148,"column":1},"end":{"line":148,"column":1}},"key":"MTMbr8ts15"}],"key":"bR4kUCEmnw"}],"key":"JkO7HGzObX"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# The famous example that confuses beginners\nresult = 0.1 + 0.2\nprint(f\"0.1 + 0.2 = {result}\")\nprint(f\"0.1 + 0.2 == 0.3? {result == 0.3}\")\nprint(f\"Actual stored value: {result:.17f}\")","key":"P55k1RtcNk"},{"type":"output","id":"LKxy_a6ebN2jMR4TwwSiW","data":[],"key":"e5MfccHhdN"}],"key":"gj4QcdH6xF"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":158,"column":1},"end":{"line":158,"column":1}},"children":[{"type":"text","value":"Why does this happen? It’s not a Python bug—it’s mathematics meeting finite hardware:","position":{"start":{"line":158,"column":1},"end":{"line":158,"column":1}},"key":"AyFC7i2Syw"}],"key":"CrNJthqZMO"}],"key":"UrGz7Dz8X3"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Let's see what's really stored\nfrom decimal import Decimal\nprint(f\"What 0.1 really is: {Decimal(0.1)}\")\nprint(f\"What 0.3 really is: {Decimal(0.3)}\")","key":"TS2zca1tJT"},{"type":"output","id":"8Z00bokdF1dVXcKfXVXDr","data":[],"key":"AnkKfXogkl"}],"key":"q7NvyEp8M2"},{"type":"block","children":[{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🤔 Check Your Understanding: Float Equality Prediction","position":{"start":{"line":167,"column":1},"end":{"line":167,"column":1}},"key":"S11mp1vN3a"}],"key":"B6SwnsPpoH"},{"type":"paragraph","position":{"start":{"line":169,"column":1},"end":{"line":169,"column":1}},"children":[{"type":"text","value":"Will this return True or False? Think carefully before testing:","position":{"start":{"line":169,"column":1},"end":{"line":169,"column":1}},"key":"tmBRRb8wFH"}],"key":"KB4cvozY2C"},{"type":"code","lang":"python","value":"result = 0.1 * 3 == 0.3\nprint(result)","position":{"start":{"line":171,"column":1},"end":{"line":174,"column":1}},"key":"gtLar8BAk1"},{"type":"paragraph","position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"children":[{"type":"text","value":"Make your prediction, then test it. If you predicted False, you’re right! But do you know why? Try printing ","position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"key":"jU6FLmkPX1"},{"type":"inlineCode","value":"0.1 * 3","position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"key":"Vb65eCERs1"},{"type":"text","value":" with 17 decimal places to see what Python actually computed. This isn’t a quirk—it’s fundamental to how every computer on Earth handles decimals.","position":{"start":{"line":176,"column":1},"end":{"line":176,"column":1}},"key":"w21rS0xPAU"}],"key":"WtxZCqhPjE"}],"class":"note","key":"SIF685wtmh"},{"type":"paragraph","position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"children":[{"type":"text","value":"Just as 1/3 can’t be exactly represented in decimal (0.33333...), 1/10 can’t be exactly represented in binary. This has crashed spacecraft and corrupted years of simulations!","position":{"start":{"line":179,"column":1},"end":{"line":179,"column":1}},"key":"TCO7vlghM3"}],"key":"Pa3zWzteaB"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"💡 Computational Thinking: Representation Limits","position":{"start":{"line":181,"column":1},"end":{"line":181,"column":1}},"key":"bZiUaEMClI"}],"key":"Pv8qSScvCv"},{"type":"paragraph","position":{"start":{"line":183,"column":1},"end":{"line":183,"column":1}},"children":[{"type":"text","value":"Every number system has values it cannot represent exactly. In base 10, we can’t write 1/3 exactly. In base 2 (binary), we can’t write 1/10 exactly. This isn’t a flaw—it’s a fundamental property of finite representation. The key insight: always assume floating-point arithmetic is approximate, never exact.","position":{"start":{"line":183,"column":1},"end":{"line":183,"column":1}},"key":"yck2UdVMr7"}],"key":"yryKwKA6Uj"},{"type":"paragraph","position":{"start":{"line":185,"column":1},"end":{"line":185,"column":1}},"children":[{"type":"text","value":"This pattern appears everywhere in computing: JPEG images lose information, MP3s approximate sound waves, and floating-point approximates real numbers. Understanding representation limits helps you choose the right tool for each task.","position":{"start":{"line":185,"column":1},"end":{"line":185,"column":1}},"key":"GxOgfegZN3"}],"key":"kOjRTzLSgi"}],"class":"important","key":"S8ZiZBoqU3"},{"type":"heading","depth":3,"position":{"start":{"line":188,"column":1},"end":{"line":188,"column":1}},"children":[{"type":"text","value":"Machine Epsilon: The Smallest Distinguishable Difference","position":{"start":{"line":188,"column":1},"end":{"line":188,"column":1}},"key":"wOA0em6BEE"}],"identifier":"machine-epsilon-the-smallest-distinguishable-difference","label":"Machine Epsilon: The Smallest Distinguishable Difference","html_id":"machine-epsilon-the-smallest-distinguishable-difference","implicit":true,"key":"sUVs7vqfIS"},{"type":"paragraph","position":{"start":{"line":190,"column":1},"end":{"line":190,"column":1}},"children":[{"type":"text","value":"Ready for something mind-blowing? Your computer literally cannot tell the difference between some numbers that are mathematically different! This isn’t a flaw—it’s a fundamental property of finite systems, and understanding it will make you a numerical computing expert.","position":{"start":{"line":190,"column":1},"end":{"line":190,"column":1}},"key":"zDTttFkmQc"}],"key":"eovOcjtnKg"},{"type":"aside","children":[{"type":"paragraph","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"children":[{"type":"strong","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"children":[{"type":"text","value":"Machine Epsilon","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"MkqGXu0mJl"}],"key":"iDMQFIsQds"},{"type":"text","value":": The smallest positive floating-point number that, when added to 1.0, produces a result different from 1.0.","position":{"start":{"line":193,"column":1},"end":{"line":193,"column":1}},"key":"PpYqK7HnFS"}],"key":"Xei6t5s9dV"}],"key":"qUiTdLHzQ8"},{"type":"paragraph","position":{"start":{"line":196,"column":1},"end":{"line":196,"column":1}},"children":[{"type":"text","value":"Machine epsilon defines the precision limit of floating-point arithmetic—crucial for convergence tests and numerical algorithms. When the Kepler Space Telescope searched for exoplanets by detecting brightness dips of 0.01%, understanding machine epsilon was essential to distinguish real planetary transits from numerical noise:","position":{"start":{"line":196,"column":1},"end":{"line":196,"column":1}},"key":"qo6GsQN9ta"}],"key":"J32Q3TXVJi"}],"key":"IymGqvNi43"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import sys\nepsilon = sys.float_info.epsilon\nprint(f\"Machine epsilon: {epsilon}\")\nprint(f\"That's about {epsilon:.2e}\")\n\n# Numbers closer than epsilon to 1.0 cannot be distinguished\nprint(f\"1.0 + epsilon/2 == 1.0? {1.0 + epsilon/2 == 1.0}\")\nprint(f\"1.0 + epsilon == 1.0? {1.0 + epsilon == 1.0}\")","key":"h0IdzEBaZc"},{"type":"output","id":"kDo6B26JKPbK3AZCq5qIN","data":[],"key":"nqNIK1C66S"}],"key":"lvY14nppvh"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":209,"column":1},"end":{"line":209,"column":1}},"children":[{"type":"text","value":"This means you literally cannot represent numbers between 1.0 and ","position":{"start":{"line":209,"column":1},"end":{"line":209,"column":1}},"key":"xI7X329x7V"},{"type":"inlineMath","value":"1.0 + \\epsilon","position":{"start":{"line":209,"column":1},"end":{"line":209,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1.0</mn><mo>+</mo><mi>ϵ</mi></mrow><annotation encoding=\"application/x-tex\">1.0 + \\epsilon</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">1.0</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">ϵ</span></span></span></span>","key":"kGsSGe9j75"},{"type":"text","value":". For astronomical calculations, this limits how precisely we can track small changes in large quantities. But here’s the exciting part: knowing this limit means you can work around it! Every successful space mission has dealt with these same constraints and succeeded brilliantly.","position":{"start":{"line":209,"column":1},"end":{"line":209,"column":1}},"key":"JycRT7KOBh"}],"key":"bal1BsEOt2"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🌟 Why This Matters: Patriot Missile Timing Disaster","position":{"start":{"line":211,"column":1},"end":{"line":211,"column":1}},"key":"NEd21ApIin"}],"key":"ytuRT1h7iU"},{"type":"paragraph","position":{"start":{"line":213,"column":1},"end":{"line":213,"column":1}},"children":[{"type":"text","value":"On February 25, 1991, a Patriot missile battery failed to intercept an Iraqi Scud missile that killed 28 American soldiers. The cause? Accumulated floating-point error in the system clock. The system measured time in tenths of seconds using 24-bit floats. After running for 100 hours, the accumulated error in converting 0.1 seconds (which can’t be exactly represented in binary) had grown to 0.34 seconds.","position":{"start":{"line":213,"column":1},"end":{"line":213,"column":1}},"key":"mZHrDOjPhi"}],"key":"YHxzk0joky"},{"type":"paragraph","position":{"start":{"line":215,"column":1},"end":{"line":215,"column":1}},"children":[{"type":"text","value":"In that third of a second, a Scud missile travels over 500 meters—enough to completely miss the intercept. The software had been running continuously, accumulating tiny errors with each time increment. The lesson: never use floating-point for precise time accumulation. Use integer counters and convert to float only for display. This tragedy shows that numerical errors aren’t just about wrong answers—they can cost lives.","position":{"start":{"line":215,"column":1},"end":{"line":215,"column":1}},"key":"JQvVEvMMDO"}],"key":"UKkVimupFP"}],"class":"tip","key":"QM2lBnRlCQ"},{"type":"heading","depth":3,"position":{"start":{"line":218,"column":1},"end":{"line":218,"column":1}},"children":[{"type":"text","value":"Safe Floating-Point Comparisons","position":{"start":{"line":218,"column":1},"end":{"line":218,"column":1}},"key":"Q7HyBXS9Ju"}],"identifier":"safe-floating-point-comparisons","label":"Safe Floating-Point Comparisons","html_id":"safe-floating-point-comparisons","implicit":true,"key":"uYQkHMydEB"},{"type":"paragraph","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"children":[{"type":"text","value":"Never use ","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"onmPG4xYKl"},{"type":"inlineCode","value":"==","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"aAj47vkEIa"},{"type":"text","value":" with floating-point numbers! Here’s how to compare them safely:","position":{"start":{"line":220,"column":1},"end":{"line":220,"column":1}},"key":"jVBnmg57FK"}],"key":"xbIAfvEEei"},{"type":"admonition","kind":"warning","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Common Bug Alert: The Float Comparison Trap","position":{"start":{"line":223,"column":1},"end":{"line":223,"column":1}},"key":"jHusMFtjxi"}],"key":"uJVTyYX9DH"},{"type":"paragraph","position":{"start":{"line":225,"column":1},"end":{"line":225,"column":1}},"children":[{"type":"text","value":"This actual code from a published exoplanet detection pipeline failed intermittently:","position":{"start":{"line":225,"column":1},"end":{"line":225,"column":1}},"key":"KkCUnYfznW"}],"key":"OlQ64BNzzU"},{"type":"code","lang":"python","value":"# REAL BUG that made it to production!\ndef check_transit_depth(observed, expected):\n    if observed == expected:  # BUG: Float comparison with ==\n        return \"Perfect match!\"\n    elif observed > expected:\n        return \"Deeper than expected\"\n    else:\n        return \"Shallower than expected\"\n\n# This failed even when values looked identical!\ndepth1 = 0.001 * 3  # From three measurements\ndepth2 = 0.003      # Expected value\nprint(check_transit_depth(depth1, depth2))  # Returns \"Shallower\" not \"Perfect\"!","position":{"start":{"line":227,"column":1},"end":{"line":241,"column":1}},"key":"Z3ETd8pdjg"},{"type":"paragraph","position":{"start":{"line":243,"column":1},"end":{"line":243,"column":1}},"children":[{"type":"text","value":"The fix: Always use tolerance-based comparison. The team lost three months of observations before finding this bug. Remember: even expert astronomers make this mistake—the key is learning to avoid it!","position":{"start":{"line":243,"column":1},"end":{"line":243,"column":1}},"key":"gojL9iSGQK"}],"key":"ufuAuqK27W"}],"key":"w7GrXGJy57"}],"key":"PvOHZOrDnI"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import math\n\n# WRONG - will fail due to rounding\nvelocity = 299792458.0  # Speed of light in m/s\nif velocity == 299792458.0:\n    print(\"At light speed!\")\n\n# CORRECT - use tolerance-based comparison\ndef safe_compare(a, b, rel_tol=1e-9, abs_tol=1e-15):\n    \"\"\"Compare floats safely with relative and absolute tolerance.\"\"\"\n    return abs(a - b) <= max(rel_tol * max(abs(a), abs(b)), abs_tol)\n\n# Better - use Python's built-in\nif math.isclose(velocity, 299792458.0, rel_tol=1e-9):\n    print(\"At light speed (within tolerance)!\")","key":"FcUnQRwozU"},{"type":"output","id":"8YMXHeGq2ET0qvcjP6h5T","data":[],"key":"RWWkHeImXi"}],"key":"tjK5STYO5j"},{"type":"block","children":[{"type":"details","children":[{"type":"summary","children":[{"type":"text","value":"🔍 Check Your Understanding: Precision Limits","position":{"start":{"line":264,"column":1},"end":{"line":264,"column":1}},"key":"cB2fFttj43"}],"key":"RVEwJUL3DQ"},{"type":"paragraph","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"children":[{"type":"text","value":"Which of these will print “Equal”?","position":{"start":{"line":265,"column":1},"end":{"line":265,"column":1}},"key":"sKqwhxTs4m"}],"key":"INlKFRqEpQ"},{"type":"code","lang":"python","value":"a = 1e16\nb = 1e16 + 1\nif a == b:\n    print(\"Equal\")\nelse:\n    print(\"Different\")","position":{"start":{"line":267,"column":1},"end":{"line":274,"column":1}},"key":"pUbelyEtFC"},{"type":"paragraph","position":{"start":{"line":276,"column":1},"end":{"line":276,"column":1}},"children":[{"type":"text","value":"Think about it: Can floating-point distinguish between 10,000,000,000,000,000 and 10,000,000,000,000,001? Test it and see! This demonstrates why tracking small changes in large numbers requires special techniques.","position":{"start":{"line":276,"column":1},"end":{"line":276,"column":1}},"key":"v7sCdqYDa1"}],"key":"O2jnsTPbhr"}],"key":"XHzBjmD33U"},{"type":"heading","depth":2,"position":{"start":{"line":279,"column":1},"end":{"line":279,"column":1}},"children":[{"type":"text","value":"2.3 Numerical Hazards in Astronomical Computing","position":{"start":{"line":279,"column":1},"end":{"line":279,"column":1}},"key":"VhaemET5nk"}],"identifier":"id-2-3-numerical-hazards-in-astronomical-computing","label":"2.3 Numerical Hazards in Astronomical Computing","html_id":"id-2-3-numerical-hazards-in-astronomical-computing","implicit":true,"key":"mr1wHOM2AE"},{"type":"paragraph","position":{"start":{"line":281,"column":1},"end":{"line":281,"column":1}},"children":[{"type":"text","value":"You’ve mastered how Python stores numbers—now let’s see these concepts in action with real astronomical calculations! This is where things get exciting: you’re about to learn the techniques that enabled Cassini to thread the gap between Saturn’s rings, that allow LIGO to detect gravitational waves smaller than a proton’s width, and that help the Event Horizon Telescope image black holes. These aren’t just theoretical concerns—they’re the skills that make modern astronomy possible.","position":{"start":{"line":281,"column":1},"end":{"line":281,"column":1}},"key":"DVQKT18fNd"}],"key":"djqyd8ajdF"},{"type":"paragraph","position":{"start":{"line":283,"column":1},"end":{"line":283,"column":1}},"children":[{"type":"text","value":"Astronomical calculations push numerical computing to its limits in the most spectacular ways. The universe gives us scales from quantum foam at ","position":{"start":{"line":283,"column":1},"end":{"line":283,"column":1}},"key":"J45rlPkVUZ"},{"type":"span","position":{"start":{"line":283,"column":1},"end":{"line":283,"column":1}},"children":[{"type":"text","value":"10","key":"Jz9d7bSGaL"},{"type":"superscript","children":[{"type":"text","value":"-35","key":"zZ3I5IAK1d"}],"key":"u9KJSU4WSt"}],"key":"ylNBx3foUs"},{"type":"text","value":" meters to the cosmic web at ","position":{"start":{"line":283,"column":1},"end":{"line":283,"column":1}},"key":"ah3GadSy9h"},{"type":"span","position":{"start":{"line":283,"column":1},"end":{"line":283,"column":1}},"children":[{"type":"text","value":"10","key":"OuLXpI76TG"},{"type":"superscript","children":[{"type":"text","value":"26","key":"IzNE8PGVeW"}],"key":"W8ScMImHYk"}],"key":"x6nzedyYTF"},{"type":"text","value":" meters—a range of 61 orders of magnitude! Let’s explore how to handle these extremes with confidence.","position":{"start":{"line":283,"column":1},"end":{"line":283,"column":1}},"key":"efmOJQdN6X"}],"key":"zEOEuFgZT7"},{"type":"heading","depth":3,"position":{"start":{"line":285,"column":1},"end":{"line":285,"column":1}},"children":[{"type":"text","value":"Catastrophic Cancellation: When Subtraction Destroys Precision","position":{"start":{"line":285,"column":1},"end":{"line":285,"column":1}},"key":"euJKC9De4Q"}],"identifier":"catastrophic-cancellation-when-subtraction-destroys-precision","label":"Catastrophic Cancellation: When Subtraction Destroys Precision","html_id":"catastrophic-cancellation-when-subtraction-destroys-precision","implicit":true,"key":"vfhl4OykPM"},{"type":"aside","children":[{"type":"paragraph","position":{"start":{"line":288,"column":1},"end":{"line":288,"column":1}},"children":[{"type":"strong","position":{"start":{"line":288,"column":1},"end":{"line":288,"column":1}},"children":[{"type":"text","value":"Catastrophic Cancellation","position":{"start":{"line":288,"column":1},"end":{"line":288,"column":1}},"key":"sutDHS4u3T"}],"key":"RMLuDb7NXa"},{"type":"text","value":": Loss of significant digits when subtracting nearly equal floating-point numbers, leaving mostly rounding errors.","position":{"start":{"line":288,"column":1},"end":{"line":288,"column":1}},"key":"ppvRrhJa6M"}],"key":"OSQgJ4jzrJ"}],"key":"NgfY7DDADZ"},{"type":"paragraph","position":{"start":{"line":291,"column":1},"end":{"line":291,"column":1}},"children":[{"type":"text","value":"Here’s a numerical phenomenon that sounds scary but becomes fascinating once you understand it! Catastrophic cancellation happens when you subtract nearly equal numbers, eliminating most significant digits and leaving only rounding errors. Think of it like trying to measure the thickness of a human hair by measuring the height of two skyscrapers and subtracting—any tiny error in either measurement overwhelms your result.","position":{"start":{"line":291,"column":1},"end":{"line":291,"column":1}},"key":"XV6XlYPVmM"}],"key":"htyzhKBiyS"},{"type":"paragraph","position":{"start":{"line":293,"column":1},"end":{"line":293,"column":1}},"children":[{"type":"text","value":"The good news? Once you recognize this pattern, you can avoid it entirely using clever mathematical transformations. This is exactly the kind of problem-solving that makes computational astronomy so rewarding!","position":{"start":{"line":293,"column":1},"end":{"line":293,"column":1}},"key":"kerullwztE"}],"key":"xToSgK2kYV"}],"key":"P5l5BftaJx"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import math\n\n# Computing 1 - cos(x) for small x (common in orbital calculations)\nx = 1e-8  # Small angle in radians\n\n# Direct computation - catastrophic cancellation!\ncos_x = math.cos(x)\nresult_bad = 1 - cos_x\nprint(f\"Direct: 1 - cos({x}) = {result_bad}\")\nprint(f\"Completely wrong! Lost all precision!\")\n\n# Better: use mathematical identity\nresult_good = 2 * math.sin(x/2) ** 2\nprint(f\"Using identity: {result_good:.6e}\")\nprint(f\"Much better! Preserved precision!\")","key":"wJV4coPRHU"},{"type":"output","id":"q6o57F1THUlaaJev0zEHf","data":[],"key":"o3YKIRDZqV"}],"key":"mtXUIoRKVb"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":313,"column":1},"end":{"line":313,"column":1}},"children":[{"type":"text","value":"This exact issue has caused spacecraft to miss orbital insertion burns because the calculated change in velocity was corrupted by cancellation. But don’t let that scare you—it’s actually taught us brilliant solutions! By using mathematical identities and clever reformulations, we can maintain precision even in these tricky situations. You’re learning the same techniques NASA engineers use every day.","position":{"start":{"line":313,"column":1},"end":{"line":313,"column":1}},"key":"MWQ1zJiO9e"}],"key":"bhjN8PcPus"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🌟 Why This Matters: Mars Climate Orbiter","position":{"start":{"line":315,"column":1},"end":{"line":315,"column":1}},"key":"SIFkE61s1Q"}],"key":"j8qyQVuHUS"},{"type":"paragraph","position":{"start":{"line":317,"column":1},"end":{"line":317,"column":1}},"children":[{"type":"text","value":"The Mars Climate Orbiter crashed into Mars in 1999, destroying the $327 million mission. While the famous cause was a unit conversion error, the navigation software also struggled with numerical precision when computing small trajectory corrections far from Earth. When you’re calculating a 1 m/s correction on a spacecraft moving at 20,000 m/s, catastrophic cancellation can make your correction disappear entirely into rounding error.","position":{"start":{"line":317,"column":1},"end":{"line":317,"column":1}},"key":"RzAAL77Stb"}],"key":"N1DocoXYI3"}],"class":"tip","key":"qmMsxy69jE"},{"type":"heading","depth":3,"position":{"start":{"line":320,"column":1},"end":{"line":320,"column":1}},"children":[{"type":"text","value":"Overflow and Underflow in Astronomical Scales","position":{"start":{"line":320,"column":1},"end":{"line":320,"column":1}},"key":"Q9TtiPpDrp"}],"identifier":"overflow-and-underflow-in-astronomical-scales","label":"Overflow and Underflow in Astronomical Scales","html_id":"overflow-and-underflow-in-astronomical-scales","implicit":true,"key":"qAnxATR9wV"},{"type":"paragraph","position":{"start":{"line":322,"column":1},"end":{"line":322,"column":1}},"children":[{"type":"text","value":"Get ready to work with numbers that break normal intuition! Astronomy deals with scales that push Python to its limits—from subatomic particles in neutron stars to galaxy clusters spanning millions of light-years. The amazing thing is that Python gives us tools to handle these extremes elegantly. You’re about to learn the same techniques used to calculate the energy output of quasars and the quantum behavior of particles in stellar cores.","position":{"start":{"line":322,"column":1},"end":{"line":322,"column":1}},"key":"mjrH4mEaXu"}],"key":"fa5hkNNZQW"},{"type":"paragraph","position":{"start":{"line":324,"column":1},"end":{"line":324,"column":1}},"children":[{"type":"text","value":"Python floats can overflow to infinity or underflow to zero, but we can outsmart these limits:","position":{"start":{"line":324,"column":1},"end":{"line":324,"column":1}},"key":"GgpZH5XGzj"}],"key":"C1Fr9uFB9y"}],"key":"hi5oza05bW"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Overflow example - calculating total luminosity\nL_sun = 3.828e33  # Solar luminosity (erg/s)\nn_stars_galaxy = 1e11  # Stars in a galaxy\nn_galaxies = 2e12  # Galaxies in observable universe\n\n# This will overflow!\ntry:\n    L_universe = L_sun * n_stars_galaxy * n_galaxies\n    print(f\"Universe luminosity: {L_universe}\")\nexcept OverflowError:\n    print(\"Overflow! Number too large!\")\n\n# When direct calculation fails, work in log space\nimport math\nlog_L_universe = math.log10(L_sun) + math.log10(n_stars_galaxy) + math.log10(n_galaxies)\nprint(f\"Universe luminosity: 10^{log_L_universe:.1f} erg/s\")","key":"AbGh7JSlly"},{"type":"output","id":"b-IBzz4jJhO-maR9r80FR","data":[],"key":"TcdCbS2klI"}],"key":"VZkL8OeJJw"},{"type":"block","children":[{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🌟 Why This Matters: Ariane 5 Flight 501 Disaster","position":{"start":{"line":345,"column":1},"end":{"line":345,"column":1}},"key":"wxeQxz7hz5"}],"key":"IeVdURgtZU"},{"type":"paragraph","position":{"start":{"line":347,"column":1},"end":{"line":347,"column":1}},"children":[{"type":"text","value":"On June 4, 1996, the Ariane 5 rocket exploded 39 seconds after launch, destroying $370 million worth of satellites. The cause? A floating-point to integer conversion overflow. The horizontal velocity value exceeded what a 16-bit integer could store (32,767), causing the guidance system to shut down.","position":{"start":{"line":347,"column":1},"end":{"line":347,"column":1}},"key":"zmxAyyBDwB"}],"key":"oWC79HCCnM"},{"type":"paragraph","position":{"start":{"line":349,"column":1},"end":{"line":349,"column":1}},"children":[{"type":"text","value":"The tragic irony: the code that failed was reused from Ariane 4, where velocities never exceeded the limit. One unchecked type conversion destroyed years of work. This disaster reminds us that numerical edge cases aren’t academic—they destroy missions. Every overflow check you write could save a spacecraft.","position":{"start":{"line":349,"column":1},"end":{"line":349,"column":1}},"key":"f65au4GNh6"}],"key":"CcxF933bdW"}],"class":"tip","key":"JOc9ay4nmM"},{"type":"paragraph","position":{"start":{"line":352,"column":1},"end":{"line":352,"column":1}},"children":[{"type":"text","value":"Working in log space is a crucial technique—and it’s actually quite elegant! When the numbers get too big or too small for direct calculation, we just work with their logarithms instead. It’s like switching to a map with a different scale when you need to see either fine details or the big picture. This technique has enabled discoveries from exoplanets to dark energy!","position":{"start":{"line":352,"column":1},"end":{"line":352,"column":1}},"key":"P18aPtv1d9"}],"key":"nWZX0H3VVY"},{"type":"admonition","kind":"warning","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Common Bug Alert: Silent Underflow","position":{"start":{"line":355,"column":1},"end":{"line":355,"column":1}},"key":"c8zSZCLOrB"}],"key":"HNV3bNhkqn"},{"type":"paragraph","position":{"start":{"line":357,"column":1},"end":{"line":357,"column":1}},"children":[{"type":"text","value":"Unlike overflow, underflow to zero is silent—no error is raised! When calculating probabilities or small perturbations, always check for unexpected zeros:","position":{"start":{"line":357,"column":1},"end":{"line":357,"column":1}},"key":"RaB9Jurr4O"}],"key":"oDvZTacSb9"},{"type":"code","lang":"python","value":"tiny = 1e-200\ntinier = tiny * tiny  # Underflows to 0.0 silently!\nif tinier == 0:\n    print(\"Warning: Underflow detected!\")","position":{"start":{"line":359,"column":1},"end":{"line":364,"column":1}},"key":"qLmpmi3e1k"},{"type":"paragraph","position":{"start":{"line":366,"column":1},"end":{"line":366,"column":1}},"children":[{"type":"text","value":"For probability calculations, always work in log space to avoid underflow.","position":{"start":{"line":366,"column":1},"end":{"line":366,"column":1}},"key":"EJ6Pbf9wpf"}],"key":"DqxUgs3uId"}],"key":"H3xu10wGbb"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"💡 Computational Thinking: Working in Transformed Space","position":{"start":{"line":369,"column":1},"end":{"line":369,"column":1}},"key":"uHLtGCRNwC"}],"key":"CRgxs8PfrJ"},{"type":"paragraph","position":{"start":{"line":371,"column":1},"end":{"line":371,"column":1}},"children":[{"type":"text","value":"When direct calculation fails, transform your problem into a space where it succeeds. This universal pattern appears throughout computational science. Working in log space to avoid overflow is just one example. Other transformations include working in Fourier space for convolutions where multiplication replaces expensive convolution operations, using spherical coordinates for problems with radial symmetry where 3D problems become 1D, and employing standardized variables in statistics where different scales become comparable.","position":{"start":{"line":371,"column":1},"end":{"line":371,"column":1}},"key":"dqOTjuClA2"}],"key":"cBmnjqNtdU"},{"type":"paragraph","position":{"start":{"line":373,"column":1},"end":{"line":373,"column":1}},"children":[{"type":"text","value":"The key insight is that the same problem can be easy or impossible depending on your representation. When you hit numerical limits, ask yourself whether there’s a transformation that makes the problem tractable. In astronomy, we constantly switch between linear and log space, between time and frequency domains, and between Cartesian and spherical coordinates. The ability to recognize when and how to transform your problem is what separates computational scientists from programmers.","position":{"start":{"line":373,"column":1},"end":{"line":373,"column":1}},"key":"Nn9jhg1Vil"}],"key":"hbH5fVye8L"},{"type":"paragraph","position":{"start":{"line":375,"column":1},"end":{"line":375,"column":1}},"children":[{"type":"text","value":"Remember that transforming to a different space isn’t cheating or a workaround. It’s often the mathematically correct approach that reveals the true structure of your problem.","position":{"start":{"line":375,"column":1},"end":{"line":375,"column":1}},"key":"F6m4WHD9I6"}],"key":"YbAPVHlIT8"}],"class":"important","key":"do0Z4m5PSh"},{"type":"heading","depth":3,"position":{"start":{"line":378,"column":1},"end":{"line":378,"column":1}},"children":[{"type":"text","value":"Defensive Programming with Numerical Checks","position":{"start":{"line":378,"column":1},"end":{"line":378,"column":1}},"key":"Fb6X3MvGoI"}],"identifier":"defensive-programming-with-numerical-checks","label":"Defensive Programming with Numerical Checks","html_id":"defensive-programming-with-numerical-checks","implicit":true,"key":"gjRobwNC8H"},{"type":"paragraph","position":{"start":{"line":380,"column":1},"end":{"line":380,"column":1}},"children":[{"type":"text","value":"You’ve seen the challenges—now here’s your toolkit for conquering them! Defensive programming might sound cautious, but it’s actually incredibly empowering. Think of it as giving your code a sophisticated immune system that catches problems before they spread. The validation techniques you’re about to learn are the same ones protecting every major astronomical data pipeline, from the Hubble Space Telescope to the Large Hadron Collider.","position":{"start":{"line":380,"column":1},"end":{"line":380,"column":1}},"key":"BbJxT9uogo"}],"key":"etPCj1B0T5"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"💡 Computational Thinking: Defensive Programming Pattern","position":{"start":{"line":382,"column":1},"end":{"line":382,"column":1}},"key":"Bg6vRp1AIV"}],"key":"hKe7iS0KJ6"},{"type":"paragraph","position":{"start":{"line":384,"column":1},"end":{"line":384,"column":1}},"children":[{"type":"text","value":"Input validation isn’t just good practice—it’s a universal pattern that appears everywhere in robust software. The pattern is simple but powerful: Never trust input, always validate. This same pattern appears in web security (validating user input), operating systems (checking system calls), databases (SQL injection prevention), and scientific computing (numerical validation).","position":{"start":{"line":384,"column":1},"end":{"line":384,"column":1}},"key":"fnTadfBZF9"}],"key":"HyIbGTXlUx"},{"type":"paragraph","position":{"start":{"line":386,"column":1},"end":{"line":386,"column":1}},"children":[{"type":"text","value":"The key insight is that validation should happen at boundaries—where data enters your code. Once validated, you can trust it internally. This pattern prevents cascading failures where bad input corrupts an entire calculation. In astronomy, where calculations can run for days, catching bad input early saves computational resources and human time.","position":{"start":{"line":386,"column":1},"end":{"line":386,"column":1}},"key":"w17Bt3vJby"}],"key":"MG69EJC8nz"},{"type":"paragraph","position":{"start":{"line":388,"column":1},"end":{"line":388,"column":1}},"children":[{"type":"text","value":"Every time you write a function, ask yourself: “What could go wrong with these inputs?” Then add checks to catch those cases. It’s not paranoia—it’s professionalism.","position":{"start":{"line":388,"column":1},"end":{"line":388,"column":1}},"key":"jqG1qjWzEh"}],"key":"uaXV2C5Pn6"}],"class":"important","key":"aU37vCGDxJ"},{"type":"paragraph","position":{"start":{"line":391,"column":1},"end":{"line":391,"column":1}},"children":[{"type":"text","value":"Professional astronomical code constantly validates numerical results, and now you’ll know how to do the same. These safeguards have saved countless hours of computation time and prevented numerous published retractions. Let’s build these powerful shields into your code:","position":{"start":{"line":391,"column":1},"end":{"line":391,"column":1}},"key":"g1Yp2BvNTc"}],"key":"zoBN6qKm1Y"}],"key":"k0ATvvfyxB"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def safe_divide(a, b, epsilon=1e-15):\n    \"\"\"Division with protection against near-zero denominators.\"\"\"\n    if abs(b) < epsilon:\n        raise ValueError(f\"Division by near-zero: {b:.2e}\")\n    return a / b\n\ndef validate_magnitude(value, name=\"value\", max_exp=100):\n    \"\"\"Ensure value is reasonable for astronomical calculations.\"\"\"\n    if value == 0:\n        return value\n    \n    if not math.isfinite(value):\n        raise ValueError(f\"{name} is not finite: {value}\")\n    \n    log_val = abs(math.log10(abs(value)))\n    if log_val > max_exp:\n        raise ValueError(f\"{name} has unreasonable magnitude: {value:.2e}\")\n    \n    return value\n\n# Example: Calculating gravitational force\ndef gravitational_force(m1, m2, r):\n    \"\"\"Calculate gravitational force with validation.\"\"\"\n    G = 6.67e-8  # CGS units\n    \n    # Validate inputs\n    m1 = validate_magnitude(m1, \"mass1\")\n    m2 = validate_magnitude(m2, \"mass2\")\n    r = validate_magnitude(r, \"distance\")\n    \n    # Safe calculation\n    return safe_divide(G * m1 * m2, r * r)","key":"i4ZgfNT2qI"},{"type":"output","id":"3WBNHT0ZDmNpY021sNHVU","data":[],"key":"W48AGqyav5"}],"key":"IEM3VH2rzv"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":428,"column":1},"end":{"line":428,"column":1}},"children":[{"type":"text","value":"This might seem like overkill, but when your code runs for days on a supercomputer, finding out it produced NaN (Not a Number) values after a week of computation is devastating. But here’s the empowering part: with these simple checks, your code becomes bulletproof! You’ve got this—these patterns will become second nature with practice.","position":{"start":{"line":428,"column":1},"end":{"line":428,"column":1}},"key":"L9CTGgFBsh"}],"key":"Yx3eLnVhXx"},{"type":"heading","depth":2,"position":{"start":{"line":430,"column":1},"end":{"line":430,"column":1}},"children":[{"type":"text","value":"2.4 Complex Numbers for Wave Physics","position":{"start":{"line":430,"column":1},"end":{"line":430,"column":1}},"key":"oS3tNwOHcg"}],"identifier":"id-2-4-complex-numbers-for-wave-physics","label":"2.4 Complex Numbers for Wave Physics","html_id":"id-2-4-complex-numbers-for-wave-physics","implicit":true,"key":"rEM49fICue"},{"type":"paragraph","position":{"start":{"line":432,"column":1},"end":{"line":432,"column":1}},"children":[{"type":"text","value":"Welcome to one of the most elegant corners of mathematics! Complex numbers might sound intimidating, but they’re actually your gateway to understanding everything from stellar oscillations to gravitational waves. Python handles complex numbers as naturally as integers, making wave calculations not just possible but beautiful. This is the same mathematics that enabled LIGO to detect ripples in spacetime smaller than a proton!","position":{"start":{"line":432,"column":1},"end":{"line":432,"column":1}},"key":"KTDBo9Iu4U"}],"key":"z9hjTgLnTR"},{"type":"paragraph","position":{"start":{"line":434,"column":1},"end":{"line":434,"column":1}},"children":[{"type":"text","value":"Many astronomical phenomena involve waves—light, gravitational waves, plasma oscillations. The complex numbers you’re about to master are what allow radio telescopes to combine signals from dishes thousands of kilometers apart, creating images of black holes at the centers of distant galaxies:","position":{"start":{"line":434,"column":1},"end":{"line":434,"column":1}},"key":"ckdN8lrrbY"}],"key":"WTmSkW80e7"}],"key":"xYUczUbCyH"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Complex numbers in Python use 'j' for the imaginary unit\nz = 3 + 4j\nprint(f\"Complex number: {z}\")\nprint(f\"Real part: {z.real}\")\nprint(f\"Imaginary part: {z.imag}\")\nprint(f\"Magnitude: {abs(z)}\")\n\n# Euler's formula - the most beautiful equation in mathematics\nimport cmath\neuler = cmath.exp(1j * math.pi)\nprint(f\"e^(iπ) = {euler.real:.0f} (should be -1)\")\nprint(f\"Tiny imaginary part {euler.imag:.2e} is just rounding error\")","key":"NuIAMzo55n"},{"type":"output","id":"om-WlkWEGUF8Cy3SzJNe6","data":[],"key":"V0nwA2aYCC"}],"key":"A5KkiDljB1"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":451,"column":1},"end":{"line":451,"column":1}},"children":[{"type":"text","value":"Complex numbers aren’t just mathematical abstractions—they’re essential for Fourier transforms (spectral analysis), quantum mechanics (wave functions), and signal processing (interferometry). Every spectrum you’ve ever seen from a telescope was processed using complex numbers. Pretty amazing, right?","position":{"start":{"line":451,"column":1},"end":{"line":451,"column":1}},"key":"I3AcHoengZ"}],"key":"cRFq73Iq4E"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"💡 Computational Thinking: Complex Numbers as 2D Vectors","position":{"start":{"line":453,"column":1},"end":{"line":453,"column":1}},"key":"IeRKLoVBBu"}],"key":"woyX2L9eja"},{"type":"paragraph","position":{"start":{"line":455,"column":1},"end":{"line":455,"column":1}},"children":[{"type":"text","value":"Think of complex numbers as 2D vectors that know how to multiply. This perspective makes many calculations intuitive:","position":{"start":{"line":455,"column":1},"end":{"line":455,"column":1}},"key":"T7lQUseLBN"}],"key":"ii2Lw2iAYy"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":456,"column":1},"end":{"line":460,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":456,"column":1},"end":{"line":456,"column":1}},"children":[{"type":"text","value":"Addition: vector addition","position":{"start":{"line":456,"column":1},"end":{"line":456,"column":1}},"key":"XPoDGhRQbh"}],"key":"G2X6YYIKO5"},{"type":"listItem","spread":true,"position":{"start":{"line":457,"column":1},"end":{"line":457,"column":1}},"children":[{"type":"text","value":"Multiplication: rotation and scaling","position":{"start":{"line":457,"column":1},"end":{"line":457,"column":1}},"key":"lTeWrnMmNT"}],"key":"rDcjQnCBDI"},{"type":"listItem","spread":true,"position":{"start":{"line":458,"column":1},"end":{"line":458,"column":1}},"children":[{"type":"text","value":"Magnitude: vector length","position":{"start":{"line":458,"column":1},"end":{"line":458,"column":1}},"key":"QvYDMQ8xM3"}],"key":"liGUaDALc0"},{"type":"listItem","spread":true,"position":{"start":{"line":459,"column":1},"end":{"line":460,"column":1}},"children":[{"type":"text","value":"Phase: angle from positive real axis","position":{"start":{"line":459,"column":1},"end":{"line":459,"column":1}},"key":"hXADkyar4G"}],"key":"FhMnaQmBGA"}],"key":"guAPXZVBcp"},{"type":"paragraph","position":{"start":{"line":461,"column":1},"end":{"line":461,"column":1}},"children":[{"type":"text","value":"This pattern—representing compound data as single objects with rich behavior—appears throughout scientific computing. Just as complex numbers combine real and imaginary parts, objects in programming combine data and behavior. Master this concept here, and you’ll recognize it everywhere!","position":{"start":{"line":461,"column":1},"end":{"line":461,"column":1}},"key":"ZAUa9kZQlI"}],"key":"zekv3ALRmj"}],"class":"important","key":"nYGS9cbiUh"},{"type":"heading","depth":2,"position":{"start":{"line":464,"column":1},"end":{"line":464,"column":1}},"children":[{"type":"text","value":"2.5 Variables and Dynamic Typing","position":{"start":{"line":464,"column":1},"end":{"line":464,"column":1}},"key":"i6KckfNh0H"}],"identifier":"id-2-5-variables-and-dynamic-typing","label":"2.5 Variables and Dynamic Typing","html_id":"id-2-5-variables-and-dynamic-typing","implicit":true,"key":"pT4FiJR3gN"},{"type":"paragraph","position":{"start":{"line":466,"column":1},"end":{"line":466,"column":1}},"children":[{"type":"text","value":"Now that you understand how Python represents numbers, let’s see how it manages them! This section reveals why Python is so flexible for scientific exploration—you can try ideas quickly without fighting the language. This flexibility is what makes Python perfect for everything from quick calculations to massive simulations.","position":{"start":{"line":466,"column":1},"end":{"line":466,"column":1}},"key":"mV02randOS"}],"key":"pZwe8lKmR2"},{"type":"paragraph","position":{"start":{"line":468,"column":1},"end":{"line":468,"column":1}},"children":[{"type":"text","value":"Variables in Python are names that refer to objects, not containers that hold values. This distinction matters more than you might think:","position":{"start":{"line":468,"column":1},"end":{"line":468,"column":1}},"key":"vtse0WV5IL"}],"key":"MV3Ov2NhqK"}],"key":"aQMoSFnshK"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Variables are references, not containers\nstellar_mass = 1.989e33  # Solar mass in grams\nsolar_mass = stellar_mass  # Both names refer to the SAME number\n\n# But numbers are immutable, so this is safe\nstellar_mass = stellar_mass * 2  # Creates NEW number, doesn't modify original\nprint(f\"Stellar mass (2 solar): {stellar_mass:.2e} g\")\nprint(f\"Solar mass (unchanged): {solar_mass:.2e} g\")\n\n# This becomes important with mutable objects (Chapter 4)\n# For now, just remember: assignment creates references","key":"vJdlvzWBZJ"},{"type":"output","id":"iuPO7hdN4Gc9-oJk7L9rn","data":[],"key":"rhKfwuQ8xe"}],"key":"VzB2dWsg27"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":484,"column":1},"end":{"line":484,"column":1}},"children":[{"type":"text","value":"Python is dynamically typed—variables can refer to any type of object and can change type during execution:","position":{"start":{"line":484,"column":1},"end":{"line":484,"column":1}},"key":"UlUeEOPgtf"}],"key":"lJsN7Tib24"}],"key":"sDNP53u08H"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Dynamic typing in action\nobservation = 42  # Integer\nprint(f\"Type: {type(observation)}, Value: {observation}\")\n\nobservation = 42.0  # Now a float\nprint(f\"Type: {type(observation)}, Value: {observation}\")\n\nobservation = \"42 measurements\"  # Now a string\nprint(f\"Type: {type(observation)}, Value: {observation}\")","key":"sRUCZQeXQg"},{"type":"output","id":"dc2AHJDnlgvMCDtU-yOzE","data":[],"key":"rVUAYNw6tI"}],"key":"ZGsOBCfjRv"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":498,"column":1},"end":{"line":498,"column":1}},"children":[{"type":"text","value":"This flexibility is powerful but requires discipline. In scientific code, changing a variable’s type unexpectedly is usually a bug waiting to happen. But don’t worry—with practice, you’ll develop an intuition for when dynamic typing helps and when it might cause trouble.","position":{"start":{"line":498,"column":1},"end":{"line":498,"column":1}},"key":"LbuckxyCdU"}],"key":"Yw9js9FPU9"},{"type":"heading","depth":2,"position":{"start":{"line":500,"column":1},"end":{"line":500,"column":1}},"children":[{"type":"text","value":"2.6 Strings and Scientific Output Formatting","position":{"start":{"line":500,"column":1},"end":{"line":500,"column":1}},"key":"H3qszeEco1"}],"identifier":"id-2-6-strings-and-scientific-output-formatting","label":"2.6 Strings and Scientific Output Formatting","html_id":"id-2-6-strings-and-scientific-output-formatting","implicit":true,"key":"qTQCbd2KXs"},{"type":"paragraph","position":{"start":{"line":502,"column":1},"end":{"line":502,"column":1}},"children":[{"type":"text","value":"Time to make your results shine! Clear output formatting isn’t just about aesthetics—it’s about scientific communication. The formatting skills you learn here will help you create publication-quality output, readable log files for long-running simulations, and clear terminal output for real-time observations. When the Transiting Exoplanet Survey Satellite (TESS) reports a potential new world, it uses these same formatting techniques to present the discovery clearly.","position":{"start":{"line":502,"column":1},"end":{"line":502,"column":1}},"key":"BxIrfOywd5"}],"key":"nxutKMYXoA"},{"type":"paragraph","position":{"start":{"line":504,"column":1},"end":{"line":504,"column":1}},"children":[{"type":"text","value":"Python’s f-strings make this elegant and powerful:","position":{"start":{"line":504,"column":1},"end":{"line":504,"column":1}},"key":"XKZMM8qMtM"}],"key":"upwYAwr1B7"}],"key":"OtKAm72pbi"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Basic f-string formatting\nstar_name = \"Betelgeuse\"\ndistance_ly = 548\nluminosity = 1.2e5  # Solar luminosities\n\nprint(f\"{star_name} is {distance_ly} light-years away\")\nprint(f\"Luminosity: {luminosity:.2e} L☉\")","key":"mQvhgPH7jF"},{"type":"output","id":"AENItvyruhcvElUi4_MRz","data":[],"key":"IaL4bH542J"}],"key":"zOEIRuxndp"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":516,"column":1},"end":{"line":516,"column":1}},"children":[{"type":"text","value":"Format Specifications for Scientific Data","position":{"start":{"line":516,"column":1},"end":{"line":516,"column":1}},"key":"ZSd5CHkj2R"}],"identifier":"format-specifications-for-scientific-data","label":"Format Specifications for Scientific Data","html_id":"format-specifications-for-scientific-data","implicit":true,"key":"Mf2cpPVoQ9"},{"type":"paragraph","position":{"start":{"line":518,"column":1},"end":{"line":518,"column":1}},"children":[{"type":"text","value":"F-strings support sophisticated formatting perfect for scientific output:","position":{"start":{"line":518,"column":1},"end":{"line":518,"column":1}},"key":"uGWVFVOFt4"}],"key":"bhW9q067D7"}],"key":"WN52j6u8wM"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Comprehensive formatting examples\nvalue = 1234.56789\n\nprint(f\"{value:.2f}\")     # Fixed-point: 2 decimals\nprint(f\"{value:.2e}\")     # Scientific notation\nprint(f\"{value:10.2f}\")   # Width 10, 2 decimals\nprint(f\"{value:,.0f}\")    # Thousands separator\n\n# Create a formatted table of stellar data\nstars = [\n    (\"Sirius\", -1.46, 8.6),\n    (\"Canopus\", -0.74, 310),\n    (\"Arcturus\", -0.05, 37),\n]\n\nprint(f\"{'Star':<10} {'Magnitude':>10} {'Distance (ly)':>15}\")\nprint(\"-\" * 37)\nfor name, mag, dist in stars:\n    print(f\"{name:<10} {mag:>10.2f} {dist:>15.1f}\")","key":"rIA247uQ9Q"},{"type":"output","id":"OQnsEBJAZ6HrtcZFyWavB","data":[],"key":"A8bi5ygg3N"}],"key":"sJ1cljIUb3"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":542,"column":1},"end":{"line":542,"column":1}},"children":[{"type":"text","value":"Professional-looking output makes your results more credible and easier to interpret. Always format numerical output appropriately for your audience. The tables you create here could end up in research papers, mission reports, or press releases announcing new discoveries!","position":{"start":{"line":542,"column":1},"end":{"line":542,"column":1}},"key":"H7m7wXtyWm"}],"key":"Rh3PVRycYL"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🔍 Check Your Understanding: Format Specifiers","position":{"start":{"line":544,"column":1},"end":{"line":544,"column":1}},"key":"eqMQ4zhnNy"}],"key":"nYmd87DdYM"},{"type":"paragraph","position":{"start":{"line":546,"column":1},"end":{"line":546,"column":1}},"children":[{"type":"text","value":"What will this print?","position":{"start":{"line":546,"column":1},"end":{"line":546,"column":1}},"key":"Svj9C206k3"}],"key":"RTXdPSQc08"},{"type":"code","lang":"python","value":"redshift = 0.00123456\nprint(f\"z = {redshift:.2e}\")","position":{"start":{"line":547,"column":1},"end":{"line":550,"column":1}},"key":"UueqVoLovS"},{"type":"paragraph","position":{"start":{"line":552,"column":1},"end":{"line":555,"column":1}},"children":[{"type":"text","value":"Before running it, predict:\na) z = 1.23e-03\nb) z = 0.00\nc) z = 1.2e-3","position":{"start":{"line":552,"column":1},"end":{"line":552,"column":1}},"key":"aoGttcaLNd"}],"key":"ZTVhusH2T3"},{"type":"paragraph","position":{"start":{"line":557,"column":1},"end":{"line":557,"column":1}},"children":[{"type":"text","value":"Understanding format specifiers helps you control exactly how your data appears. This same formatting is used in every astronomical paper you’ve ever read!","position":{"start":{"line":557,"column":1},"end":{"line":557,"column":1}},"key":"rFHQTTIuQ2"}],"key":"hbxG1cZ2OD"}],"class":"note","key":"Ep8OJQvjID"},{"type":"heading","depth":2,"position":{"start":{"line":560,"column":1},"end":{"line":560,"column":1}},"children":[{"type":"text","value":"2.7 Type System and Conversions","position":{"start":{"line":560,"column":1},"end":{"line":560,"column":1}},"key":"oWSzGqwDNB"}],"identifier":"id-2-7-type-system-and-conversions","label":"2.7 Type System and Conversions","html_id":"id-2-7-type-system-and-conversions","implicit":true,"key":"MoKcyRj6x9"},{"type":"paragraph","position":{"start":{"line":562,"column":1},"end":{"line":562,"column":1}},"children":[{"type":"text","value":"Python’s type system strikes a perfect balance—flexible enough for rapid exploration but strong enough to catch errors. Understanding types and conversions is like learning the grammar of computational astronomy. Once you master this, you can confidently handle data from any source, whether it’s telescope observations, simulation output, or catalog queries.","position":{"start":{"line":562,"column":1},"end":{"line":562,"column":1}},"key":"BpMfkGppsl"}],"key":"lO4yX6uSwB"},{"type":"paragraph","position":{"start":{"line":564,"column":1},"end":{"line":564,"column":1}},"children":[{"type":"text","value":"Python’s type system is both dynamic (types determined at runtime) and strong (types not automatically converted):","position":{"start":{"line":564,"column":1},"end":{"line":564,"column":1}},"key":"I7Zlfen91p"}],"key":"HqRJAuP3E5"}],"key":"yVXagDKV5a"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"# Type checking\nvalue = 3.14159\nprint(f\"Type of {value}: {type(value)}\")\nprint(f\"Is it a float? {isinstance(value, float)}\")\n\n# Type conversion\ntext = \"2.718\"\nnumber = float(text)\nprint(f\"Converted '{text}' to {number}\")\n\n# Dangerous conversion - truncation!\nprint(f\"int(3.9) = {int(3.9)}\")  # Truncates, doesn't round!\nprint(f\"round(3.9) = {round(3.9)}\")  # Use this for rounding","key":"jlhgoy3vcM"},{"type":"output","id":"ImShMtbX6l110_wlYBN-0","data":[],"key":"XIwewfQZl3"}],"key":"REIvBBCoTx"},{"type":"block","children":[{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🤔 Check Your Understanding: Type Conversion Surprise","position":{"start":{"line":582,"column":1},"end":{"line":582,"column":1}},"key":"WXCGytfN4K"}],"key":"ut40srNQRQ"},{"type":"paragraph","position":{"start":{"line":584,"column":1},"end":{"line":584,"column":1}},"children":[{"type":"text","value":"What happens when you convert -3.7 to an integer? Before testing, predict the result:","position":{"start":{"line":584,"column":1},"end":{"line":584,"column":1}},"key":"poDPQsxJrF"}],"key":"qnkVSz3HSH"},{"type":"paragraph","position":{"start":{"line":586,"column":1},"end":{"line":589,"column":1}},"children":[{"type":"text","value":"a) -4 (rounds to nearest integer)\nb) -3 (truncates toward zero)","position":{"start":{"line":586,"column":1},"end":{"line":586,"column":1}},"key":"yOUCnqEVYg"},{"type":"break","position":{"start":{"line":586,"column":1},"end":{"line":586,"column":1}},"key":"txEt4GRzrN"},{"type":"text","value":"c) -3 (floors toward negative infinity)\nd) Error","position":{"start":{"line":586,"column":1},"end":{"line":586,"column":1}},"key":"BmIYQMm1dB"}],"key":"VPlLRnq0vm"},{"type":"paragraph","position":{"start":{"line":591,"column":1},"end":{"line":591,"column":1}},"children":[{"type":"text","value":"Test it with ","position":{"start":{"line":591,"column":1},"end":{"line":591,"column":1}},"key":"FBCILp2ljN"},{"type":"inlineCode","value":"int(-3.7)","position":{"start":{"line":591,"column":1},"end":{"line":591,"column":1}},"key":"OfIXN6iveH"},{"type":"text","value":". Surprised? Python’s ","position":{"start":{"line":591,"column":1},"end":{"line":591,"column":1}},"key":"dleSMYBv88"},{"type":"inlineCode","value":"int()","position":{"start":{"line":591,"column":1},"end":{"line":591,"column":1}},"key":"sTa4tDkAtI"},{"type":"text","value":" truncates toward zero, not toward negative infinity like floor division! This means ","position":{"start":{"line":591,"column":1},"end":{"line":591,"column":1}},"key":"vxIxWwlKU6"},{"type":"inlineCode","value":"int(-3.7)","position":{"start":{"line":591,"column":1},"end":{"line":591,"column":1}},"key":"d5Oh3CFJyv"},{"type":"text","value":" gives -3, but ","position":{"start":{"line":591,"column":1},"end":{"line":591,"column":1}},"key":"kUNuR3qqJt"},{"type":"inlineCode","value":"-3.7 // 1","position":{"start":{"line":591,"column":1},"end":{"line":591,"column":1}},"key":"oIk7ENxu7p"},{"type":"text","value":" gives -4.0. This inconsistency has caused numerous bugs in astronomical calculations where negative values represent positions before an epoch.","position":{"start":{"line":591,"column":1},"end":{"line":591,"column":1}},"key":"epbpkwVtmd"}],"key":"g6iMbjRSvJ"}],"class":"note","key":"lakR684wqZ"},{"type":"admonition","kind":"warning","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"Common Bug Alert: Silent Type Conversion Errors","position":{"start":{"line":595,"column":1},"end":{"line":595,"column":1}},"key":"t3Cxe554hV"}],"key":"RfUxWttj2c"},{"type":"paragraph","position":{"start":{"line":597,"column":1},"end":{"line":597,"column":1}},"children":[{"type":"text","value":"This bug appeared in actual pulsar timing software and went undetected for months:","position":{"start":{"line":597,"column":1},"end":{"line":597,"column":1}},"key":"OQwniSRtSs"}],"key":"qp3MNz6nT9"},{"type":"code","lang":"python","value":"# REAL BUG: Calculating rotation phase\nperiod_ms = \"2.3\"  # Read from config file as string\nrotations = 1000 / int(period_ms)  # BUG: int(\"2.3\") raises ValueError!\n\n# Even worse - this \"fix\" introduced a silent error:\nperiod_ms = \"2.3\"\nrotations = 1000 / int(float(period_ms))  # Now gets 500 instead of 434.78!\n\n# The truncation from 2.3 to 2 caused all phase calculations to be wrong\n# The team published incorrect rotation rates for 17 pulsars before catching this","position":{"start":{"line":599,"column":1},"end":{"line":610,"column":1}},"key":"Ppiy8fZ3Tf"},{"type":"paragraph","position":{"start":{"line":612,"column":1},"end":{"line":612,"column":1}},"children":[{"type":"text","value":"Always use ","position":{"start":{"line":612,"column":1},"end":{"line":612,"column":1}},"key":"TlLUczXsmO"},{"type":"inlineCode","value":"float()","position":{"start":{"line":612,"column":1},"end":{"line":612,"column":1}},"key":"P2EmFOlKfY"},{"type":"text","value":" for decimal strings, then explicitly round or truncate if needed. Better yet, validate that config values are the expected type when loaded!","position":{"start":{"line":612,"column":1},"end":{"line":612,"column":1}},"key":"mXRqGediNV"}],"key":"Nar2VMOJpY"}],"key":"m3HFHEb1wZ"},{"type":"admonition","children":[{"type":"admonitionTitle","children":[{"type":"text","value":"🛠️ Debug This! Magnitude Calculation Crisis","position":{"start":{"line":615,"column":1},"end":{"line":615,"column":1}},"key":"Ggb9cSnHGx"}],"key":"qGB3Cg1wAi"},{"type":"paragraph","position":{"start":{"line":617,"column":1},"end":{"line":617,"column":1}},"children":[{"type":"text","value":"This magnitude calculator has THREE numerical bugs that compound into disaster. Can you find and fix them all?","position":{"start":{"line":617,"column":1},"end":{"line":617,"column":1}},"key":"lq5wyd5a87"}],"key":"LBEy3TgRA7"},{"type":"code","lang":"python","value":"def calculate_combined_magnitude(magnitudes):\n    \"\"\"Calculate combined magnitude of multiple stars.\"\"\"\n    # Convert magnitudes to fluxes\n    fluxes = []\n    for mag in magnitudes:\n        flux = 10 ** (mag / -2.5)  # Bug #1: Wrong formula!\n        fluxes.append(flux)\n    \n    # Sum the fluxes\n    total_flux = sum(fluxes)\n    \n    # Convert back to magnitude\n    if total_flux == 0.0:  # Bug #2: Float comparison with ==\n        return float('inf')\n    \n    combined_mag = -2.5 * math.log10(total_flux)  # Bug #3: Can overflow!\n    return combined_mag\n\n# Test with bright stars - seems to work\nmags1 = [1.0, 1.5, 2.0]\nprint(f\"Combined: {calculate_combined_magnitude(mags1)}\")\n\n# Test with faint stars - disaster!\nmags2 = [25.0, 25.5, 26.0]  # Faint galaxies\nprint(f\"Combined: {calculate_combined_magnitude(mags2)}\")  # Overflow!","position":{"start":{"line":619,"column":1},"end":{"line":645,"column":1}},"key":"ZGfxJ391do"},{"type":"paragraph","position":{"start":{"line":647,"column":1},"end":{"line":647,"column":1}},"children":[{"type":"text","value":"Hints:","position":{"start":{"line":647,"column":1},"end":{"line":647,"column":1}},"key":"o1JKfK9wzL"}],"key":"guEbVsCsBJ"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":648,"column":1},"end":{"line":651,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":648,"column":1},"end":{"line":648,"column":1}},"children":[{"type":"text","value":"Check the magnitude-to-flux formula (is the sign right?)","position":{"start":{"line":648,"column":1},"end":{"line":648,"column":1}},"key":"VyQA29UkGP"}],"key":"J4kmSvjPEs"},{"type":"listItem","spread":true,"position":{"start":{"line":649,"column":1},"end":{"line":649,"column":1}},"children":[{"type":"text","value":"How should you compare floats to zero?","position":{"start":{"line":649,"column":1},"end":{"line":649,"column":1}},"key":"bthGtevghY"}],"key":"ka2QxIoHzs"},{"type":"listItem","spread":true,"position":{"start":{"line":650,"column":1},"end":{"line":651,"column":1}},"children":[{"type":"text","value":"What happens with very faint objects (large magnitudes)?","position":{"start":{"line":650,"column":1},"end":{"line":650,"column":1}},"key":"lT468jz1gC"}],"key":"hXyogtoMWi"}],"key":"ZiigZSeL2o"},{"type":"paragraph","position":{"start":{"line":652,"column":1},"end":{"line":652,"column":1}},"children":[{"type":"text","value":"This combination of bugs once caused an automated survey to miss a supernova because the combined magnitude calculation failed!","position":{"start":{"line":652,"column":1},"end":{"line":652,"column":1}},"key":"nYiRU95QAN"}],"key":"XahUfc25ou"}],"class":"warning","key":"NBXrKHHwgg"},{"type":"heading","depth":2,"position":{"start":{"line":655,"column":1},"end":{"line":655,"column":1}},"children":[{"type":"text","value":"2.8 The Math Module: Your Scientific Calculator","position":{"start":{"line":655,"column":1},"end":{"line":655,"column":1}},"key":"mQyDfxnUyw"}],"identifier":"id-2-8-the-math-module-your-scientific-calculator","label":"2.8 The Math Module: Your Scientific Calculator","html_id":"id-2-8-the-math-module-your-scientific-calculator","implicit":true,"key":"FIZLlaAL4H"},{"type":"paragraph","position":{"start":{"line":657,"column":1},"end":{"line":657,"column":1}},"children":[{"type":"text","value":"Here comes the fun part—Python’s math module transforms your computer into a scientific calculator more powerful than anything that existed when we sent humans to the Moon! These functions are the building blocks for every astronomical calculation you’ll ever perform. With these tools, you can calculate planetary positions, predict eclipses, determine stellar distances, and even work out the physics of black hole mergers. The same functions you’re learning here computed the trajectory for every space mission ever launched!","position":{"start":{"line":657,"column":1},"end":{"line":657,"column":1}},"key":"wcvCaxobMb"}],"key":"J5qd0uox8Q"}],"key":"fhpE9XyRcK"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import math\n\n# Fundamental constants\nprint(f\"π = {math.pi}\")\nprint(f\"e = {math.e}\")\nprint(f\"τ = {math.tau}\")  # tau = 2π, useful for circular motion\n\n# Trigonometry (always in radians!)\nangle_degrees = 30\nangle_radians = math.radians(angle_degrees)\nprint(f\"sin(30°) = {math.sin(angle_radians):.4f}\")\n\n# Logarithms for magnitude calculations\nflux_ratio = 100\nmagnitude_diff = 2.5 * math.log10(flux_ratio)\nprint(f\"Flux ratio {flux_ratio} = {magnitude_diff:.1f} magnitudes\")\n\n# Special functions\nprint(f\"Gamma(5) = {math.gamma(5)} = 4!\")\nprint(f\"Error function: erf(1) = {math.erf(1):.4f}\")","key":"ZONHJGNAzU"},{"type":"output","id":"MCdM0NjctpcTfETVRljas","data":[],"key":"TKf4oXK7iu"}],"key":"CzyH876Gth"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":682,"column":1},"end":{"line":682,"column":1}},"children":[{"type":"text","value":"Remember: trigonometric functions use radians, not degrees! This is a constant source of bugs in astronomical code. But here’s a pro tip: thinking in radians becomes natural once you realize that ","position":{"start":{"line":682,"column":1},"end":{"line":682,"column":1}},"key":"OOvKjAMigu"},{"type":"inlineMath","value":"2\\pi","position":{"start":{"line":682,"column":1},"end":{"line":682,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn><mi>π</mi></mrow><annotation encoding=\"application/x-tex\">2\\pi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span></span></span></span>","key":"DfR523NmDB"},{"type":"text","value":" radians is just one full rotation—perfect for orbital calculations!","position":{"start":{"line":682,"column":1},"end":{"line":682,"column":1}},"key":"BmbQ8Nmn5t"}],"key":"pxE3oZGYst"},{"type":"heading","depth":2,"position":{"start":{"line":684,"column":1},"end":{"line":684,"column":1}},"children":[{"type":"text","value":"2.9 From Interactive to Script","position":{"start":{"line":684,"column":1},"end":{"line":684,"column":1}},"key":"SIS77o5RsD"}],"identifier":"id-2-9-from-interactive-to-script","label":"2.9 From Interactive to Script","html_id":"id-2-9-from-interactive-to-script","implicit":true,"key":"kLKw7PZqFu"},{"type":"paragraph","position":{"start":{"line":686,"column":1},"end":{"line":686,"column":1}},"children":[{"type":"text","value":"Congratulations! You’ve been exploring Python interactively, testing ideas and learning how numbers behave. Now comes an exciting milestone: transforming your interactive explorations into reusable scripts that can process real astronomical data. This is the moment when you transition from calculator user to computational scientist!","position":{"start":{"line":686,"column":1},"end":{"line":686,"column":1}},"key":"rPP4YhRg8B"}],"key":"x2rhlGIiVk"},{"type":"paragraph","position":{"start":{"line":688,"column":1},"end":{"line":688,"column":1}},"children":[{"type":"text","value":"Every professional astronomer started exactly where you are now—experimenting in IPython, then capturing that knowledge in scripts. The script you’re about to write could be the foundation for your first research project. Let’s consolidate everything you’ve learned into a powerful, reusable tool:","position":{"start":{"line":688,"column":1},"end":{"line":688,"column":1}},"key":"lqJlzg5bJL"}],"key":"eqRMVPnOHF"}],"key":"merR6NliHo"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"#!/usr/bin/env python\n\"\"\"\nstellar_calculations.py\nDemonstrate numerical calculations for stellar physics.\n\"\"\"\n\nimport math\nimport sys\n\ndef schwarzschild_radius(mass_grams):\n    \"\"\"\n    Calculate Schwarzschild radius in cm.\n    \n    Rs = 2GM/c^2\n    \n    Safe implementation with validation.\n    \"\"\"\n    G = 6.67e-8  # cm^3 g^-1 s^-2\n    c = 2.998e10  # cm/s\n    \n    # Validate input\n    if mass_grams <= 0:\n        raise ValueError(f\"Mass must be positive: {mass_grams}\")\n    \n    # Check for overflow potential\n    if mass_grams > 1e45:  # Milky Way mass\n        # Work in log space for extreme masses\n        log_rs = math.log10(2*G) + math.log10(mass_grams) - 2*math.log10(c)\n        return 10**log_rs\n    \n    # Normal calculation for reasonable masses\n    rs = 2 * G * mass_grams / c**2\n    \n    # Validate result\n    if not math.isfinite(rs):\n        raise ValueError(f\"Calculation failed for mass {mass_grams:.2e}\")\n    \n    return rs\n\nif __name__ == \"__main__\":\n    # Test with various masses\n    test_masses = {\n        \"Earth\": 5.972e27,\n        \"Sun\": 1.989e33,\n        \"Sgr A*\": 8.2e39,  # Milky Way's black hole\n    }\n    \n    for name, mass in test_masses.items():\n        rs = schwarzschild_radius(mass)\n        print(f\"{name}:\")\n        print(f\"  Mass: {mass:.2e} g\")\n        print(f\"  Schwarzschild radius: {rs:.2e} cm\")\n        print(f\"  That's {rs/1e5:.2f} km\\n\")","key":"YQ0Ie3NlUD"},{"type":"output","id":"9xvpOYvSbxQfUoqQAzcNQ","data":[],"key":"FVFd4Uk7ll"}],"key":"Isg6qqzKCp"},{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":746,"column":1},"end":{"line":746,"column":1}},"children":[{"type":"text","value":"This script demonstrates defensive programming, appropriate use of log space for extreme values, and clear scientific documentation. Notice how we’ve applied every concept from this chapter: validation to catch errors early, log space for extreme masses, and careful handling of floating-point calculations. You’ve just written production-quality astronomical code! This same approach scales from simple calculations to complex simulations processing terabytes of data.","position":{"start":{"line":746,"column":1},"end":{"line":746,"column":1}},"key":"BCBXobLKRQ"}],"key":"XtQNyT1gL4"},{"type":"heading","depth":2,"position":{"start":{"line":748,"column":1},"end":{"line":748,"column":1}},"children":[{"type":"text","value":"Practice Exercises","position":{"start":{"line":748,"column":1},"end":{"line":748,"column":1}},"key":"xK4J9H8BVF"}],"identifier":"practice-exercises","label":"Practice Exercises","html_id":"practice-exercises","implicit":true,"key":"afTEKUMB75"},{"type":"heading","depth":3,"position":{"start":{"line":750,"column":1},"end":{"line":750,"column":1}},"children":[{"type":"text","value":"Exercise 2.1: Convert Magnitude to Flux (Quick Practice - 5-10 lines)","position":{"start":{"line":750,"column":1},"end":{"line":750,"column":1}},"key":"TlvYXmF66z"}],"identifier":"exercise-2-1-convert-magnitude-to-flux-quick-practice-5-10-lines","label":"Exercise 2.1: Convert Magnitude to Flux (Quick Practice - 5-10 lines)","html_id":"exercise-2-1-convert-magnitude-to-flux-quick-practice-5-10-lines","implicit":true,"key":"lBs0MT26V7"},{"type":"paragraph","position":{"start":{"line":752,"column":1},"end":{"line":752,"column":1}},"children":[{"type":"text","value":"The magnitude system is logarithmic, where a difference of 5 magnitudes corresponds to a factor of 100 in flux. The relationship is: ","position":{"start":{"line":752,"column":1},"end":{"line":752,"column":1}},"key":"uQZcgN6MBU"},{"type":"inlineMath","value":"m = -2.5 \\log_{10}(F/F_0)","position":{"start":{"line":752,"column":1},"end":{"line":752,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mo>=</mo><mo>−</mo><mn>2.5</mn><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>10</mn></msub><mo stretchy=\"false\">(</mo><mi>F</mi><mi mathvariant=\"normal\">/</mi><msub><mi>F</mi><mn>0</mn></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">m = -2.5 \\log_{10}(F/F_0)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">m</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">−</span><span class=\"mord\">2.5</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\"><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.207em;\"><span style=\"top:-2.4559em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">10</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2441em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord\">/</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>","key":"rpTFuo9WG1"},{"type":"text","value":", where ","position":{"start":{"line":752,"column":1},"end":{"line":752,"column":1}},"key":"LR9VMTasJ1"},{"type":"inlineMath","value":"F_0","position":{"start":{"line":752,"column":1},"end":{"line":752,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>F</mi><mn>0</mn></msub></mrow><annotation encoding=\"application/x-tex\">F_0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"iK8umc1oZe"},{"type":"text","value":" is a reference flux. Write functions to convert between magnitude and flux, demonstrating the numerical precision concepts from this chapter.","position":{"start":{"line":752,"column":1},"end":{"line":752,"column":1}},"key":"UVOtFQhapN"}],"key":"Gqqcm4NCQz"},{"type":"code","lang":"python","value":"import math\n\ndef mag_to_flux(magnitude, zero_point=0.0):\n    \"\"\"Convert magnitude to relative flux.\"\"\"\n    # Your code here: F = 10^((zero_point - magnitude) / 2.5)\n    pass\n\ndef flux_to_mag(flux, zero_point=0.0):\n    \"\"\"Convert flux to magnitude, handling edge cases.\"\"\"\n    # Your code here: Check for non-positive flux!\n    pass\n\n# Test with m = 12.5\n# Verify: mag_to_flux(flux_to_mag(m)) ≈ m within machine epsilon","position":{"start":{"line":754,"column":1},"end":{"line":769,"column":1}},"key":"fiHw1udB6T"},{"type":"paragraph","position":{"start":{"line":771,"column":1},"end":{"line":771,"column":1}},"children":[{"type":"text","value":"Requirements:","position":{"start":{"line":771,"column":1},"end":{"line":771,"column":1}},"key":"qDlburMYrR"}],"key":"qMH6dgjMW2"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":772,"column":1},"end":{"line":776,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":772,"column":1},"end":{"line":772,"column":1}},"children":[{"type":"text","value":"Handle the case where flux ≤ 0 (return inf or raise error)","position":{"start":{"line":772,"column":1},"end":{"line":772,"column":1}},"key":"DFYsEWUDqS"}],"key":"Rz6FAFBzYt"},{"type":"listItem","spread":true,"position":{"start":{"line":773,"column":1},"end":{"line":773,"column":1}},"children":[{"type":"text","value":"Use ","position":{"start":{"line":773,"column":1},"end":{"line":773,"column":1}},"key":"cRZNruqnM1"},{"type":"inlineCode","value":"math.log10()","position":{"start":{"line":773,"column":1},"end":{"line":773,"column":1}},"key":"dZafXP9zOl"},{"type":"text","value":" for the logarithm","position":{"start":{"line":773,"column":1},"end":{"line":773,"column":1}},"key":"E2d4o1rV0F"}],"key":"m7N5T5WYk3"},{"type":"listItem","spread":true,"position":{"start":{"line":774,"column":1},"end":{"line":774,"column":1}},"children":[{"type":"text","value":"Test the round-trip conversion precision","position":{"start":{"line":774,"column":1},"end":{"line":774,"column":1}},"key":"AMnAFtJxzB"}],"key":"fyzYVaWMCu"},{"type":"listItem","spread":true,"position":{"start":{"line":775,"column":1},"end":{"line":776,"column":1}},"children":[{"type":"text","value":"Print the difference between original and round-trip magnitude","position":{"start":{"line":775,"column":1},"end":{"line":775,"column":1}},"key":"Nx4oaEynj5"}],"key":"z0V2Sebi5u"}],"key":"ojSwop4gjq"},{"type":"paragraph","position":{"start":{"line":777,"column":1},"end":{"line":777,"column":1}},"children":[{"type":"text","value":"This exercise demonstrates why we can’t use ","position":{"start":{"line":777,"column":1},"end":{"line":777,"column":1}},"key":"Ee3Z0P3lNz"},{"type":"inlineCode","value":"==","position":{"start":{"line":777,"column":1},"end":{"line":777,"column":1}},"key":"pFA8FzU9Cf"},{"type":"text","value":" to compare calculated magnitudes—there’s always small numerical error in the conversion!","position":{"start":{"line":777,"column":1},"end":{"line":777,"column":1}},"key":"rzHFpQqtXv"}],"key":"TjJVbexaQw"},{"type":"heading","depth":3,"position":{"start":{"line":779,"column":1},"end":{"line":779,"column":1}},"children":[{"type":"text","value":"Exercise 2.2: Calculate Magnitude Statistics Safely (Synthesis - 15-30 lines)","position":{"start":{"line":779,"column":1},"end":{"line":779,"column":1}},"key":"Hhg6z1ELPb"}],"identifier":"exercise-2-2-calculate-magnitude-statistics-safely-synthesis-15-30-lines","label":"Exercise 2.2: Calculate Magnitude Statistics Safely (Synthesis - 15-30 lines)","html_id":"exercise-2-2-calculate-magnitude-statistics-safely-synthesis-15-30-lines","implicit":true,"key":"rdlo324uu8"},{"type":"paragraph","position":{"start":{"line":781,"column":1},"end":{"line":781,"column":1}},"children":[{"type":"text","value":"Averaging magnitudes directly gives wrong results because the magnitude scale is logarithmic. Read magnitude data from the file ‘cepheid_simple.txt’ (from Chapter 1) and calculate the mean magnitude correctly.","position":{"start":{"line":781,"column":1},"end":{"line":781,"column":1}},"key":"H67Rizel2j"}],"key":"g0QPrlmJpp"},{"type":"code","lang":"python","value":"def calculate_mean_magnitude_wrong(magnitudes):\n    \"\"\"INCORRECT: Simple average of magnitudes.\"\"\"\n    return sum(magnitudes) / len(magnitudes)\n\ndef calculate_mean_magnitude_correct(magnitudes):\n    \"\"\"CORRECT: Convert to flux, average, convert back.\"\"\"\n    if not magnitudes:\n        raise ValueError(\"Empty magnitude list\")\n    \n    # Check for unreasonable values\n    for mag in magnitudes:\n        if mag < -30 or mag > 40:  # Reasonable astronomy range\n            raise ValueError(f\"Magnitude {mag} outside reasonable range\")\n    \n    # Your code here:\n    # 1. Convert each magnitude to flux\n    # 2. Calculate mean flux\n    # 3. Convert mean flux back to magnitude\n    # 4. Handle potential overflow for very faint objects\n    pass\n\n# Read data from cepheid_simple.txt\n# Compare the two methods\n# For magnitudes [10.0, 10.5, 11.0], wrong gives 10.5, correct gives 10.42","position":{"start":{"line":783,"column":1},"end":{"line":808,"column":1}},"key":"xVSENvyFYU"},{"type":"paragraph","position":{"start":{"line":810,"column":1},"end":{"line":810,"column":1}},"children":[{"type":"text","value":"This difference might seem small, but when combining thousands of faint galaxy observations, the error compounds significantly. NASA’s WISE mission had to reprocess early data releases because of similar averaging errors!","position":{"start":{"line":810,"column":1},"end":{"line":810,"column":1}},"key":"gGsG9eSfTE"}],"key":"Dkr9ii7KKX"},{"type":"paragraph","position":{"start":{"line":812,"column":1},"end":{"line":812,"column":1}},"children":[{"type":"text","value":"Key challenges:","position":{"start":{"line":812,"column":1},"end":{"line":812,"column":1}},"key":"afjuIlX4s8"}],"key":"BHCMYRuhvt"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":813,"column":1},"end":{"line":816,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":813,"column":1},"end":{"line":813,"column":1}},"children":[{"type":"text","value":"Very faint magnitudes (>30) can cause underflow when converted to flux","position":{"start":{"line":813,"column":1},"end":{"line":813,"column":1}},"key":"IDsdsTKamo"}],"key":"WtCTFCQGsz"},{"type":"listItem","spread":true,"position":{"start":{"line":814,"column":1},"end":{"line":814,"column":1}},"children":[{"type":"text","value":"Empty or invalid data should raise appropriate errors","position":{"start":{"line":814,"column":1},"end":{"line":814,"column":1}},"key":"dbZnnqx7tt"}],"key":"Wg3xwFHG6g"},{"type":"listItem","spread":true,"position":{"start":{"line":815,"column":1},"end":{"line":816,"column":1}},"children":[{"type":"text","value":"The difference between methods increases with magnitude variance","position":{"start":{"line":815,"column":1},"end":{"line":815,"column":1}},"key":"CmIXHxNXCb"}],"key":"UXVcRxLPt4"}],"key":"OwllchM0MO"},{"type":"heading","depth":3,"position":{"start":{"line":817,"column":1},"end":{"line":817,"column":1}},"children":[{"type":"text","value":"Exercise 2.3: Implement Robust Magnitude System Conversions (Challenge - Optional)","position":{"start":{"line":817,"column":1},"end":{"line":817,"column":1}},"key":"WslHS5TtJ5"}],"identifier":"exercise-2-3-implement-robust-magnitude-system-conversions-challenge-optional","label":"Exercise 2.3: Implement Robust Magnitude System Conversions (Challenge - Optional)","html_id":"exercise-2-3-implement-robust-magnitude-system-conversions-challenge-optional","implicit":true,"key":"lxQu1mPcxj"},{"type":"paragraph","position":{"start":{"line":819,"column":1},"end":{"line":819,"column":1}},"children":[{"type":"text","value":"Different magnitude systems (Vega, AB, ST) use different zero points, and observations often need extinction corrections. Create a robust converter that handles the extreme values encountered in modern surveys.","position":{"start":{"line":819,"column":1},"end":{"line":819,"column":1}},"key":"hVKWL2GRvu"}],"key":"rrwERF9qpK"},{"type":"details","children":[{"type":"summary","children":[{"type":"text","value":"Hints for Challenge Exercise","position":{"start":{"line":821,"column":1},"end":{"line":821,"column":1}},"key":"ymSSIiNebX"}],"key":"gKeZwZUq7v"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":822,"column":1},"end":{"line":825,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":822,"column":1},"end":{"line":822,"column":1}},"children":[{"type":"text","value":"Remember to validate all inputs before processing","position":{"start":{"line":822,"column":1},"end":{"line":822,"column":1}},"key":"APTf7BUIw4"}],"key":"x5iJQryb4M"},{"type":"listItem","spread":true,"position":{"start":{"line":823,"column":1},"end":{"line":823,"column":1}},"children":[{"type":"text","value":"Use log space for very faint magnitudes to avoid underflow","position":{"start":{"line":823,"column":1},"end":{"line":823,"column":1}},"key":"t7GgdsNhL5"}],"key":"xGbF2npiZw"},{"type":"listItem","spread":true,"position":{"start":{"line":824,"column":1},"end":{"line":824,"column":1}},"children":[{"type":"text","value":"Consider what happens at magnitude boundaries (very bright/very faint)","position":{"start":{"line":824,"column":1},"end":{"line":824,"column":1}},"key":"lzZ7yvd2tl"}],"key":"fVGC7WDR9n"},{"type":"listItem","spread":true,"position":{"start":{"line":825,"column":1},"end":{"line":825,"column":1}},"children":[{"type":"text","value":"Think about error propagation in logarithmic quantities","position":{"start":{"line":825,"column":1},"end":{"line":825,"column":1}},"key":"rEQ6b4shvA"}],"key":"hDkrBtcnw4"}],"key":"sfR6ToeA2Y"}],"key":"KaAjDFBcSU"},{"type":"code","lang":"python","value":"import math\n\nclass MagnitudeConverter:\n    \"\"\"Convert between magnitude systems with defensive programming.\"\"\"\n    \n    # Zero point differences (example values)\n    VEGA_TO_AB = {'U': 0.79, 'B': -0.09, 'V': 0.02, 'R': 0.21, 'I': 0.45}\n    \n    def __init__(self):\n        self.conversion_count = 0  # Track for debugging\n    \n    def vega_to_ab(self, mag_vega, band, extinction=0.0):\n        \"\"\"\n        Convert Vega magnitude to AB magnitude with extinction correction.\n        Work in log space to maintain precision for extreme values.\n        \"\"\"\n        # Validate inputs\n        if band not in self.VEGA_TO_AB:\n            raise ValueError(f\"Unknown band: {band}\")\n        \n        # Check for extreme values that might cause problems\n        if mag_vega < -30:  # Brighter than anything real\n            raise ValueError(f\"Unreasonably bright magnitude: {mag_vega}\")\n        \n        if mag_vega > 40:  # Fainter than we can detect\n            # Work in log space to avoid underflow\n            # Your code here\n            pass\n        \n        # Apply conversions\n        # mag_AB = mag_Vega + offset + extinction\n        # But handle numerical edge cases!\n        pass\n    \n    def propagate_error(self, mag, mag_err, extinction_err=0.0):\n        \"\"\"\n        Propagate uncertainties through magnitude conversion.\n        Remember: magnitudes are logarithmic!\n        \"\"\"\n        # Your code here: proper error propagation\n        pass\n\n# Test cases:\n# 1. Bright quasar: mag = -27 (should trigger validation)\n# 2. Faint galaxy: mag = 35 (needs log space handling)\n# 3. Normal star: mag = 10.5 ± 0.02 (standard case)","position":{"start":{"line":828,"column":1},"end":{"line":875,"column":1}},"key":"YlRzleZhFX"},{"type":"paragraph","position":{"start":{"line":877,"column":1},"end":{"line":877,"column":1}},"children":[{"type":"text","value":"Real-world context: The Sloan Digital Sky Survey (SDSS) uses AB magnitudes, while many older catalogs use Vega magnitudes. Converting between them incorrectly has led to incorrect color measurements and missed scientific discoveries. The James Webb Space Telescope can detect objects as faint as magnitude 34—at these levels, numerical precision becomes critical for measuring galaxy properties at the edge of the observable universe!","position":{"start":{"line":877,"column":1},"end":{"line":877,"column":1}},"key":"duSrfe1gqp"}],"key":"F6JtR118jZ"},{"type":"heading","depth":2,"position":{"start":{"line":879,"column":1},"end":{"line":879,"column":1}},"children":[{"type":"text","value":"Main Takeaways","position":{"start":{"line":879,"column":1},"end":{"line":879,"column":1}},"key":"t6lmphL3vz"}],"identifier":"main-takeaways","label":"Main Takeaways","html_id":"main-takeaways","implicit":true,"key":"pfQdNP8O4p"},{"type":"paragraph","position":{"start":{"line":881,"column":1},"end":{"line":881,"column":1}},"children":[{"type":"text","value":"You’ve just built the foundation for all numerical astronomy you’ll ever do. The seemingly simple act of adding two numbers opens a universe of complexity that affects every calculation from orbital mechanics to cosmological simulations. The key insight isn’t that floating-point arithmetic is broken—it’s that it’s approximate by design, and understanding these approximations separates successful computational scientists from those who publish retracted papers due to numerical errors.","position":{"start":{"line":881,"column":1},"end":{"line":881,"column":1}},"key":"vFKRc8PfKS"}],"key":"fkyMihdEOj"},{"type":"paragraph","position":{"start":{"line":883,"column":1},"end":{"line":883,"column":1}},"children":[{"type":"text","value":"The defensive programming techniques you learned here might seem cautious at first, but they’re battle-tested practices from real astronomical software. That ","position":{"start":{"line":883,"column":1},"end":{"line":883,"column":1}},"key":"RfP9VE9qTX"},{"type":"inlineCode","value":"safe_divide","position":{"start":{"line":883,"column":1},"end":{"line":883,"column":1}},"key":"bljQGltaFW"},{"type":"text","value":" function has prevented countless divide-by-zero errors in production code running on telescopes worldwide. The validation checks have caught bugs that would have wasted weeks of supercomputer time at national facilities. Working in log space isn’t just a clever trick—for many astronomical calculations involving the extreme scales of our universe, from quarks to quasars, it’s the only way to get meaningful answers at all.","position":{"start":{"line":883,"column":1},"end":{"line":883,"column":1}},"key":"JpxvZ6zQKx"}],"key":"RKS9iTtPYn"},{"type":"paragraph","position":{"start":{"line":885,"column":1},"end":{"line":885,"column":1}},"children":[{"type":"text","value":"Perhaps most importantly, you’ve learned to think about numbers the way computers do. When you see 0.1 + 0.2, you now know it’s not exactly 0.3, and more crucially, you know why. When you calculate the distance to a galaxy, you instinctively think about whether the number might overflow. When you subtract two nearly-equal values, alarm bells ring about catastrophic cancellation, and you know to reach for mathematical identities instead. This numerical awareness isn’t paranoia—it’s the professional intuition that will serve you throughout your career.","position":{"start":{"line":885,"column":1},"end":{"line":885,"column":1}},"key":"cOYuYVcHrF"}],"key":"KvN7ZwJxIA"},{"type":"paragraph","position":{"start":{"line":887,"column":1},"end":{"line":887,"column":1}},"children":[{"type":"text","value":"The disasters we discussed—Ariane 5, Mars Climate Orbiter, the Patriot missile—weren’t caused by incompetent programmers but by the subtle numerical issues you now understand. The successes—New Horizons reaching Pluto, LIGO detecting gravitational waves, the Event Horizon Telescope imaging black holes—all required mastery of exactly these concepts. You’re now equipped with the same numerical tools that enabled these triumphs.","position":{"start":{"line":887,"column":1},"end":{"line":887,"column":1}},"key":"k0Zw7VHDda"}],"key":"twIWZRBYvX"},{"type":"paragraph","position":{"start":{"line":889,"column":1},"end":{"line":889,"column":1}},"children":[{"type":"text","value":"The tools themselves are elegantly simple: Python’s basic arithmetic, the math module for scientific functions, f-strings for beautiful formatting. But combined with your new understanding of numerical hazards and defensive practices, they’re sufficient for serious scientific work. You’re no longer just using Python as a calculator; you’re wielding it as a precision instrument for astronomical computation. Every subsequent chapter builds on this foundation, so when you implement a periodogram, fit a spectrum, or integrate an orbit, you’ll know exactly why your numbers behave as they do and how to handle them with confidence.","position":{"start":{"line":889,"column":1},"end":{"line":889,"column":1}},"key":"IoLp9fbZVl"}],"key":"y7ayzB9JIj"},{"type":"heading","depth":2,"position":{"start":{"line":891,"column":1},"end":{"line":891,"column":1}},"children":[{"type":"text","value":"Definitions","position":{"start":{"line":891,"column":1},"end":{"line":891,"column":1}},"key":"yaDVizgbxg"}],"identifier":"definitions","label":"Definitions","html_id":"definitions","implicit":true,"key":"Dwrjl39wNp"},{"type":"glossary","children":[{"type":"paragraph","position":{"start":{"line":894,"column":1},"end":{"line":895,"column":1}},"children":[{"type":"text","value":"Catastrophic Cancellation\nLoss of precision when subtracting nearly equal floating-point numbers, leaving only rounding errors.","position":{"start":{"line":894,"column":1},"end":{"line":894,"column":1}},"key":"YMHhGUIMPU"}],"key":"tH08mmM5D6"},{"type":"paragraph","position":{"start":{"line":897,"column":1},"end":{"line":898,"column":1}},"children":[{"type":"text","value":"CGS Units\nCentimeter-gram-second unit system, standard in astrophysics (vs. SI/MKS).","position":{"start":{"line":897,"column":1},"end":{"line":897,"column":1}},"key":"NOnBBuWrZg"}],"key":"ypgjYWRDR7"},{"type":"paragraph","position":{"start":{"line":900,"column":1},"end":{"line":901,"column":1}},"children":[{"type":"text","value":"Complex Number\nNumber with real and imaginary parts, written as ","position":{"start":{"line":900,"column":1},"end":{"line":900,"column":1}},"key":"xZIcc43sKV"},{"type":"inlineCode","value":"a + bj","position":{"start":{"line":900,"column":1},"end":{"line":900,"column":1}},"key":"eoZbZavITi"},{"type":"text","value":" in Python.","position":{"start":{"line":900,"column":1},"end":{"line":900,"column":1}},"key":"kh0mh4kBJQ"}],"key":"owMkPnTd01"},{"type":"paragraph","position":{"start":{"line":903,"column":1},"end":{"line":904,"column":1}},"children":[{"type":"text","value":"Dynamic Typing\nPython’s ability to determine and change variable types at runtime.","position":{"start":{"line":903,"column":1},"end":{"line":903,"column":1}},"key":"lHwDKzGgIQ"}],"key":"NTi9H66jnI"},{"type":"paragraph","position":{"start":{"line":906,"column":1},"end":{"line":907,"column":1}},"children":[{"type":"text","value":"F-string\nFormatted string literal (f\"...{variable}...\") for elegant output formatting.","position":{"start":{"line":906,"column":1},"end":{"line":906,"column":1}},"key":"UAJeGIw21u"}],"key":"YHQYTq1OmU"},{"type":"paragraph","position":{"start":{"line":909,"column":1},"end":{"line":910,"column":1}},"children":[{"type":"text","value":"Float/Floating-Point Number\nNumber with decimal point, stored in IEEE 754 format with limited precision.","position":{"start":{"line":909,"column":1},"end":{"line":909,"column":1}},"key":"yQTMYKk1UD"}],"key":"TLG0LzkRYo"},{"type":"paragraph","position":{"start":{"line":912,"column":1},"end":{"line":913,"column":1}},"children":[{"type":"text","value":"Floor Division\nDivision that rounds toward negative infinity, operator ","position":{"start":{"line":912,"column":1},"end":{"line":912,"column":1}},"key":"wQfxS4xazb"},{"type":"inlineCode","value":"//","position":{"start":{"line":912,"column":1},"end":{"line":912,"column":1}},"key":"qycOywQ5ez"},{"type":"text","value":".","position":{"start":{"line":912,"column":1},"end":{"line":912,"column":1}},"key":"ZXn0I28vsC"}],"key":"lrlwHGZD3S"},{"type":"paragraph","position":{"start":{"line":915,"column":1},"end":{"line":916,"column":1}},"children":[{"type":"text","value":"Integer\nWhole number with unlimited precision in Python.","position":{"start":{"line":915,"column":1},"end":{"line":915,"column":1}},"key":"qOBr55qCFd"}],"key":"GbBO0yk62N"},{"type":"paragraph","position":{"start":{"line":918,"column":1},"end":{"line":919,"column":1}},"children":[{"type":"text","value":"Machine Epsilon\nSmallest distinguishable difference near 1.0 in floating-point arithmetic (~2.2e-16).","position":{"start":{"line":918,"column":1},"end":{"line":918,"column":1}},"key":"ypG0MNlDrd"}],"key":"HXZ5NoX3ps"},{"type":"paragraph","position":{"start":{"line":921,"column":1},"end":{"line":922,"column":1}},"children":[{"type":"text","value":"Modulo\nRemainder after division, operator ","position":{"start":{"line":921,"column":1},"end":{"line":921,"column":1}},"key":"RbEy5V2d0r"},{"type":"inlineCode","value":"%","position":{"start":{"line":921,"column":1},"end":{"line":921,"column":1}},"key":"qZMZpuS6fX"},{"type":"text","value":".","position":{"start":{"line":921,"column":1},"end":{"line":921,"column":1}},"key":"vKId6n5syx"}],"key":"ofsR0UKdow"},{"type":"paragraph","position":{"start":{"line":924,"column":1},"end":{"line":925,"column":1}},"children":[{"type":"text","value":"Overflow\nWhen a calculation exceeds the maximum representable floating-point value (~1.8e308).","position":{"start":{"line":924,"column":1},"end":{"line":924,"column":1}},"key":"bMA1u5P0Lg"}],"key":"yopS6fH54r"},{"type":"paragraph","position":{"start":{"line":927,"column":1},"end":{"line":928,"column":1}},"children":[{"type":"text","value":"Type Conversion\nChanging data from one type to another (e.g., string to float).","position":{"start":{"line":927,"column":1},"end":{"line":927,"column":1}},"key":"mbO4IKt1c3"}],"key":"NJPUn8Lzh2"},{"type":"paragraph","position":{"start":{"line":930,"column":1},"end":{"line":931,"column":1}},"children":[{"type":"text","value":"Underflow\nWhen a calculation produces a value smaller than the minimum representable positive float, resulting in zero.","position":{"start":{"line":930,"column":1},"end":{"line":930,"column":1}},"key":"Glj0NX4CqJ"}],"key":"JUrvHkaUDf"},{"type":"paragraph","position":{"start":{"line":933,"column":1},"end":{"line":934,"column":1}},"children":[{"type":"text","value":"Variable\nName that refers to an object in memory, not a container holding a value.","position":{"start":{"line":933,"column":1},"end":{"line":933,"column":1}},"key":"yLI8gVZhBo"}],"key":"Hte61jqSAs"}],"key":"nau7GPI5x5"},{"type":"heading","depth":2,"position":{"start":{"line":937,"column":1},"end":{"line":937,"column":1}},"children":[{"type":"text","value":"Key Takeaways","position":{"start":{"line":937,"column":1},"end":{"line":937,"column":1}},"key":"GGG2g4fd2O"}],"identifier":"key-takeaways","label":"Key Takeaways","html_id":"key-takeaways","implicit":true,"key":"Xz7qXpmfdD"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":939,"column":1},"end":{"line":949,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":939,"column":1},"end":{"line":939,"column":1}},"children":[{"type":"text","value":"Floating-point arithmetic is approximate by design—never use ","position":{"start":{"line":939,"column":1},"end":{"line":939,"column":1}},"key":"fLXiWHIndd"},{"type":"inlineCode","value":"==","position":{"start":{"line":939,"column":1},"end":{"line":939,"column":1}},"key":"rG6Lt5Mn7p"},{"type":"text","value":" to compare floats","position":{"start":{"line":939,"column":1},"end":{"line":939,"column":1}},"key":"Lvs1TCcHvj"}],"key":"QfFViF8aUB"},{"type":"listItem","spread":true,"position":{"start":{"line":940,"column":1},"end":{"line":940,"column":1}},"children":[{"type":"text","value":"Machine epsilon (~2.2e-16) sets the fundamental precision limit for calculations","position":{"start":{"line":940,"column":1},"end":{"line":940,"column":1}},"key":"GVfVy4Kk0B"}],"key":"b091SScz6z"},{"type":"listItem","spread":true,"position":{"start":{"line":941,"column":1},"end":{"line":941,"column":1}},"children":[{"type":"text","value":"Catastrophic cancellation occurs when subtracting nearly equal numbers—use mathematical identities to avoid it","position":{"start":{"line":941,"column":1},"end":{"line":941,"column":1}},"key":"qJaGwOp4tv"}],"key":"QkBzmIywHR"},{"type":"listItem","spread":true,"position":{"start":{"line":942,"column":1},"end":{"line":942,"column":1}},"children":[{"type":"text","value":"Work in log space to handle astronomical scales without overflow/underflow","position":{"start":{"line":942,"column":1},"end":{"line":942,"column":1}},"key":"A7mal6NipY"}],"key":"ltjjvnaVSK"},{"type":"listItem","spread":true,"position":{"start":{"line":943,"column":1},"end":{"line":943,"column":1}},"children":[{"type":"text","value":"Python integers have unlimited precision but use more memory than floats","position":{"start":{"line":943,"column":1},"end":{"line":943,"column":1}},"key":"CSxT4mYFbH"}],"key":"NXzHjDrzgi"},{"type":"listItem","spread":true,"position":{"start":{"line":944,"column":1},"end":{"line":944,"column":1}},"children":[{"type":"text","value":"Variables are references to objects, not containers holding values","position":{"start":{"line":944,"column":1},"end":{"line":944,"column":1}},"key":"XAkiFlRNg8"}],"key":"kmS2pmTH0q"},{"type":"listItem","spread":true,"position":{"start":{"line":945,"column":1},"end":{"line":945,"column":1}},"children":[{"type":"text","value":"Defensive programming with validation prevents numerical disasters in long-running code","position":{"start":{"line":945,"column":1},"end":{"line":945,"column":1}},"key":"VKSGlBAIp5"}],"key":"R1CrGzfAC5"},{"type":"listItem","spread":true,"position":{"start":{"line":946,"column":1},"end":{"line":946,"column":1}},"children":[{"type":"text","value":"F-strings provide powerful formatting for scientific output","position":{"start":{"line":946,"column":1},"end":{"line":946,"column":1}},"key":"pJcBJbgbJX"}],"key":"GjnwIgOEqP"},{"type":"listItem","spread":true,"position":{"start":{"line":947,"column":1},"end":{"line":947,"column":1}},"children":[{"type":"text","value":"Complex numbers are essential for wave physics and spectral analysis","position":{"start":{"line":947,"column":1},"end":{"line":947,"column":1}},"key":"vJ5sCqWkhP"}],"key":"PyyPnZjvRd"},{"type":"listItem","spread":true,"position":{"start":{"line":948,"column":1},"end":{"line":949,"column":1}},"children":[{"type":"text","value":"Always use radians with trigonometric functions","position":{"start":{"line":948,"column":1},"end":{"line":948,"column":1}},"key":"kijTCrXQ23"}],"key":"FsjyTbrWAr"}],"key":"TWTzeEpI1G"},{"type":"heading","depth":2,"position":{"start":{"line":950,"column":1},"end":{"line":950,"column":1}},"children":[{"type":"text","value":"Quick Reference: Operators and Functions","position":{"start":{"line":950,"column":1},"end":{"line":950,"column":1}},"key":"lZZ2LlhSRq"}],"identifier":"quick-reference-operators-and-functions","label":"Quick Reference: Operators and Functions","html_id":"quick-reference-operators-and-functions","implicit":true,"key":"nc9XpIKuHk"},{"type":"table","position":{"start":{"line":952,"column":1},"end":{"line":967,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":952,"column":1},"end":{"line":952,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":952,"column":1},"end":{"line":952,"column":1}},"children":[{"type":"text","value":"Operation","position":{"start":{"line":952,"column":1},"end":{"line":952,"column":1}},"key":"JcQv124izq"}],"key":"huZ7wUJABN"},{"type":"tableCell","header":true,"position":{"start":{"line":952,"column":1},"end":{"line":952,"column":1}},"children":[{"type":"text","value":"Symbol/Function","position":{"start":{"line":952,"column":1},"end":{"line":952,"column":1}},"key":"k98dYq3B80"}],"key":"Yp0NQ5Acml"},{"type":"tableCell","header":true,"position":{"start":{"line":952,"column":1},"end":{"line":952,"column":1}},"children":[{"type":"text","value":"Example","position":{"start":{"line":952,"column":1},"end":{"line":952,"column":1}},"key":"QJbBfVL1ul"}],"key":"XvxzCAmSB7"},{"type":"tableCell","header":true,"position":{"start":{"line":952,"column":1},"end":{"line":952,"column":1}},"children":[{"type":"text","value":"Result","position":{"start":{"line":952,"column":1},"end":{"line":952,"column":1}},"key":"g7iqhNzQKC"}],"key":"SPMhwgTNnC"}],"key":"Zu5BOlqzC7"},{"type":"tableRow","position":{"start":{"line":954,"column":1},"end":{"line":954,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":954,"column":1},"end":{"line":954,"column":1}},"children":[{"type":"text","value":"Exponentiation","position":{"start":{"line":954,"column":1},"end":{"line":954,"column":1}},"key":"Plr8YvrwY5"}],"key":"VAuxLualS8"},{"type":"tableCell","position":{"start":{"line":954,"column":1},"end":{"line":954,"column":1}},"children":[{"type":"inlineCode","value":"**","position":{"start":{"line":954,"column":1},"end":{"line":954,"column":1}},"key":"aV4F5tBjzy"}],"key":"fZIn6AWggi"},{"type":"tableCell","position":{"start":{"line":954,"column":1},"end":{"line":954,"column":1}},"children":[{"type":"inlineCode","value":"2**10","position":{"start":{"line":954,"column":1},"end":{"line":954,"column":1}},"key":"VJlGqL88mP"}],"key":"R9PzSQbzX0"},{"type":"tableCell","position":{"start":{"line":954,"column":1},"end":{"line":954,"column":1}},"children":[{"type":"inlineCode","value":"1024","position":{"start":{"line":954,"column":1},"end":{"line":954,"column":1}},"key":"sWiokL5zTc"}],"key":"focbnfS5uT"}],"key":"kzBmtIPkH9"},{"type":"tableRow","position":{"start":{"line":955,"column":1},"end":{"line":955,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":955,"column":1},"end":{"line":955,"column":1}},"children":[{"type":"text","value":"Floor Division","position":{"start":{"line":955,"column":1},"end":{"line":955,"column":1}},"key":"Clto3vfKnC"}],"key":"awExpJbP4v"},{"type":"tableCell","position":{"start":{"line":955,"column":1},"end":{"line":955,"column":1}},"children":[{"type":"inlineCode","value":"//","position":{"start":{"line":955,"column":1},"end":{"line":955,"column":1}},"key":"qXbR4R81qH"}],"key":"MLaB94iewv"},{"type":"tableCell","position":{"start":{"line":955,"column":1},"end":{"line":955,"column":1}},"children":[{"type":"inlineCode","value":"17//3","position":{"start":{"line":955,"column":1},"end":{"line":955,"column":1}},"key":"Dfw2cmDEMN"}],"key":"kj8XqKvzBm"},{"type":"tableCell","position":{"start":{"line":955,"column":1},"end":{"line":955,"column":1}},"children":[{"type":"inlineCode","value":"5","position":{"start":{"line":955,"column":1},"end":{"line":955,"column":1}},"key":"XD9XGlIJBi"}],"key":"zIbgqrJYBT"}],"key":"otekVLJ6Pe"},{"type":"tableRow","position":{"start":{"line":956,"column":1},"end":{"line":956,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":956,"column":1},"end":{"line":956,"column":1}},"children":[{"type":"text","value":"Modulo","position":{"start":{"line":956,"column":1},"end":{"line":956,"column":1}},"key":"hwwVldgD3k"}],"key":"yQoQb2Mb0q"},{"type":"tableCell","position":{"start":{"line":956,"column":1},"end":{"line":956,"column":1}},"children":[{"type":"inlineCode","value":"%","position":{"start":{"line":956,"column":1},"end":{"line":956,"column":1}},"key":"qb5CpNDMaX"}],"key":"Ae21b3eKHJ"},{"type":"tableCell","position":{"start":{"line":956,"column":1},"end":{"line":956,"column":1}},"children":[{"type":"inlineCode","value":"17%3","position":{"start":{"line":956,"column":1},"end":{"line":956,"column":1}},"key":"X0qE8DCcl9"}],"key":"FzkrcdBqop"},{"type":"tableCell","position":{"start":{"line":956,"column":1},"end":{"line":956,"column":1}},"children":[{"type":"inlineCode","value":"2","position":{"start":{"line":956,"column":1},"end":{"line":956,"column":1}},"key":"vVRrZVlk9O"}],"key":"RUXSINNhAO"}],"key":"fcqBcjaU9o"},{"type":"tableRow","position":{"start":{"line":957,"column":1},"end":{"line":957,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":957,"column":1},"end":{"line":957,"column":1}},"children":[{"type":"text","value":"Absolute Value","position":{"start":{"line":957,"column":1},"end":{"line":957,"column":1}},"key":"FWwHwzvNxa"}],"key":"ZiE2UsCnNe"},{"type":"tableCell","position":{"start":{"line":957,"column":1},"end":{"line":957,"column":1}},"children":[{"type":"inlineCode","value":"abs()","position":{"start":{"line":957,"column":1},"end":{"line":957,"column":1}},"key":"NJXjZp4B6i"}],"key":"TBztR9rg9a"},{"type":"tableCell","position":{"start":{"line":957,"column":1},"end":{"line":957,"column":1}},"children":[{"type":"inlineCode","value":"abs(-3.14)","position":{"start":{"line":957,"column":1},"end":{"line":957,"column":1}},"key":"B8xlWv6liE"}],"key":"PhOpArhSjd"},{"type":"tableCell","position":{"start":{"line":957,"column":1},"end":{"line":957,"column":1}},"children":[{"type":"inlineCode","value":"3.14","position":{"start":{"line":957,"column":1},"end":{"line":957,"column":1}},"key":"dHEsrOLjo7"}],"key":"SXMM92xNLQ"}],"key":"jAw7HI8OXe"},{"type":"tableRow","position":{"start":{"line":958,"column":1},"end":{"line":958,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":958,"column":1},"end":{"line":958,"column":1}},"children":[{"type":"text","value":"Round","position":{"start":{"line":958,"column":1},"end":{"line":958,"column":1}},"key":"KPaTsNfzdl"}],"key":"xWqSQxOc8H"},{"type":"tableCell","position":{"start":{"line":958,"column":1},"end":{"line":958,"column":1}},"children":[{"type":"inlineCode","value":"round()","position":{"start":{"line":958,"column":1},"end":{"line":958,"column":1}},"key":"knMa6udpss"}],"key":"ry4PpiYzK2"},{"type":"tableCell","position":{"start":{"line":958,"column":1},"end":{"line":958,"column":1}},"children":[{"type":"inlineCode","value":"round(3.7)","position":{"start":{"line":958,"column":1},"end":{"line":958,"column":1}},"key":"c3XR3jjpq2"}],"key":"Ry3KuqOPoS"},{"type":"tableCell","position":{"start":{"line":958,"column":1},"end":{"line":958,"column":1}},"children":[{"type":"inlineCode","value":"4","position":{"start":{"line":958,"column":1},"end":{"line":958,"column":1}},"key":"xvrsuKX6lO"}],"key":"e08WrmSSva"}],"key":"QVb2bmAz8f"},{"type":"tableRow","position":{"start":{"line":959,"column":1},"end":{"line":959,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":959,"column":1},"end":{"line":959,"column":1}},"children":[{"type":"text","value":"Type Check","position":{"start":{"line":959,"column":1},"end":{"line":959,"column":1}},"key":"EolHcOxKV5"}],"key":"i3KM5f1lW3"},{"type":"tableCell","position":{"start":{"line":959,"column":1},"end":{"line":959,"column":1}},"children":[{"type":"inlineCode","value":"type()","position":{"start":{"line":959,"column":1},"end":{"line":959,"column":1}},"key":"SMWLlHSiJO"}],"key":"FIlJd8ctYI"},{"type":"tableCell","position":{"start":{"line":959,"column":1},"end":{"line":959,"column":1}},"children":[{"type":"inlineCode","value":"type(3.14)","position":{"start":{"line":959,"column":1},"end":{"line":959,"column":1}},"key":"L1FdY2tmA5"}],"key":"EwOg2GIdyf"},{"type":"tableCell","position":{"start":{"line":959,"column":1},"end":{"line":959,"column":1}},"children":[{"type":"inlineCode","value":"<class 'float'>","position":{"start":{"line":959,"column":1},"end":{"line":959,"column":1}},"key":"QOQNdYTrL5"}],"key":"VOavNCmVca"}],"key":"HomxXXcxJd"},{"type":"tableRow","position":{"start":{"line":960,"column":1},"end":{"line":960,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":960,"column":1},"end":{"line":960,"column":1}},"children":[{"type":"text","value":"Instance Check","position":{"start":{"line":960,"column":1},"end":{"line":960,"column":1}},"key":"tAOudxFlMf"}],"key":"vUYClYDF8M"},{"type":"tableCell","position":{"start":{"line":960,"column":1},"end":{"line":960,"column":1}},"children":[{"type":"inlineCode","value":"isinstance()","position":{"start":{"line":960,"column":1},"end":{"line":960,"column":1}},"key":"iMC4PJwOHU"}],"key":"B0sqNLuvTC"},{"type":"tableCell","position":{"start":{"line":960,"column":1},"end":{"line":960,"column":1}},"children":[{"type":"inlineCode","value":"isinstance(3.14, float)","position":{"start":{"line":960,"column":1},"end":{"line":960,"column":1}},"key":"vPn2qO16gf"}],"key":"NkbEHmMfTc"},{"type":"tableCell","position":{"start":{"line":960,"column":1},"end":{"line":960,"column":1}},"children":[{"type":"inlineCode","value":"True","position":{"start":{"line":960,"column":1},"end":{"line":960,"column":1}},"key":"H2e8yrQiPv"}],"key":"weiBOQeycU"}],"key":"sHC686M0M0"},{"type":"tableRow","position":{"start":{"line":961,"column":1},"end":{"line":961,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":961,"column":1},"end":{"line":961,"column":1}},"children":[{"type":"text","value":"Float Conversion","position":{"start":{"line":961,"column":1},"end":{"line":961,"column":1}},"key":"JRQMt9rzPS"}],"key":"ukzpsBlwr3"},{"type":"tableCell","position":{"start":{"line":961,"column":1},"end":{"line":961,"column":1}},"children":[{"type":"inlineCode","value":"float()","position":{"start":{"line":961,"column":1},"end":{"line":961,"column":1}},"key":"SCkxepu8zM"}],"key":"PufNTVnocV"},{"type":"tableCell","position":{"start":{"line":961,"column":1},"end":{"line":961,"column":1}},"children":[{"type":"inlineCode","value":"float(\"3.14\")","position":{"start":{"line":961,"column":1},"end":{"line":961,"column":1}},"key":"M4BVIPdo6e"}],"key":"IYEfyrc4rs"},{"type":"tableCell","position":{"start":{"line":961,"column":1},"end":{"line":961,"column":1}},"children":[{"type":"inlineCode","value":"3.14","position":{"start":{"line":961,"column":1},"end":{"line":961,"column":1}},"key":"EE1ZegJgLv"}],"key":"yBq0GG3cD5"}],"key":"mukDpkEgwE"},{"type":"tableRow","position":{"start":{"line":962,"column":1},"end":{"line":962,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":962,"column":1},"end":{"line":962,"column":1}},"children":[{"type":"text","value":"Integer Conversion","position":{"start":{"line":962,"column":1},"end":{"line":962,"column":1}},"key":"QvaYngGsPy"}],"key":"o4oJPUhWiu"},{"type":"tableCell","position":{"start":{"line":962,"column":1},"end":{"line":962,"column":1}},"children":[{"type":"inlineCode","value":"int()","position":{"start":{"line":962,"column":1},"end":{"line":962,"column":1}},"key":"uGhBFaseaa"}],"key":"D2naHnRIME"},{"type":"tableCell","position":{"start":{"line":962,"column":1},"end":{"line":962,"column":1}},"children":[{"type":"inlineCode","value":"int(3.14)","position":{"start":{"line":962,"column":1},"end":{"line":962,"column":1}},"key":"BT4lZGpj6o"}],"key":"HJ0kyvyiWX"},{"type":"tableCell","position":{"start":{"line":962,"column":1},"end":{"line":962,"column":1}},"children":[{"type":"inlineCode","value":"3","position":{"start":{"line":962,"column":1},"end":{"line":962,"column":1}},"key":"dV3cvH7JSE"}],"key":"MSEg1MaXBB"}],"key":"wKSEfeEOVt"},{"type":"tableRow","position":{"start":{"line":963,"column":1},"end":{"line":963,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":963,"column":1},"end":{"line":963,"column":1}},"children":[{"type":"text","value":"Complex Creation","position":{"start":{"line":963,"column":1},"end":{"line":963,"column":1}},"key":"Uiu3DuwoFp"}],"key":"JTtm7V5Z9t"},{"type":"tableCell","position":{"start":{"line":963,"column":1},"end":{"line":963,"column":1}},"children":[{"type":"inlineCode","value":"complex()","position":{"start":{"line":963,"column":1},"end":{"line":963,"column":1}},"key":"wkaf5fw9Hx"}],"key":"Baz5H1lUlN"},{"type":"tableCell","position":{"start":{"line":963,"column":1},"end":{"line":963,"column":1}},"children":[{"type":"inlineCode","value":"complex(3,4)","position":{"start":{"line":963,"column":1},"end":{"line":963,"column":1}},"key":"mpyew96Bq0"}],"key":"IIxIja2DEV"},{"type":"tableCell","position":{"start":{"line":963,"column":1},"end":{"line":963,"column":1}},"children":[{"type":"inlineCode","value":"(3+4j)","position":{"start":{"line":963,"column":1},"end":{"line":963,"column":1}},"key":"vKWEdE7FKB"}],"key":"pah14ZJKBd"}],"key":"Jp7oabmDrK"},{"type":"tableRow","position":{"start":{"line":964,"column":1},"end":{"line":964,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":964,"column":1},"end":{"line":964,"column":1}},"children":[{"type":"text","value":"Safe Comparison","position":{"start":{"line":964,"column":1},"end":{"line":964,"column":1}},"key":"kUPcVrVthG"}],"key":"vIKV68fHYU"},{"type":"tableCell","position":{"start":{"line":964,"column":1},"end":{"line":964,"column":1}},"children":[{"type":"inlineCode","value":"math.isclose()","position":{"start":{"line":964,"column":1},"end":{"line":964,"column":1}},"key":"AwJMOPKe4p"}],"key":"u0pP2ERyqr"},{"type":"tableCell","position":{"start":{"line":964,"column":1},"end":{"line":964,"column":1}},"children":[{"type":"inlineCode","value":"math.isclose(0.1+0.2, 0.3)","position":{"start":{"line":964,"column":1},"end":{"line":964,"column":1}},"key":"Pd319sioc7"}],"key":"mL2tXoEBXn"},{"type":"tableCell","position":{"start":{"line":964,"column":1},"end":{"line":964,"column":1}},"children":[{"type":"inlineCode","value":"True","position":{"start":{"line":964,"column":1},"end":{"line":964,"column":1}},"key":"puQbbtsN4n"}],"key":"xdp8R19fMv"}],"key":"H5yap4i1cL"},{"type":"tableRow","position":{"start":{"line":965,"column":1},"end":{"line":965,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":965,"column":1},"end":{"line":965,"column":1}},"children":[{"type":"text","value":"Finite Check","position":{"start":{"line":965,"column":1},"end":{"line":965,"column":1}},"key":"lALeNwVps7"}],"key":"plbey0w2SL"},{"type":"tableCell","position":{"start":{"line":965,"column":1},"end":{"line":965,"column":1}},"children":[{"type":"inlineCode","value":"math.isfinite()","position":{"start":{"line":965,"column":1},"end":{"line":965,"column":1}},"key":"LN4EcKNxiy"}],"key":"iIDKnIYn3o"},{"type":"tableCell","position":{"start":{"line":965,"column":1},"end":{"line":965,"column":1}},"children":[{"type":"inlineCode","value":"math.isfinite(float('inf'))","position":{"start":{"line":965,"column":1},"end":{"line":965,"column":1}},"key":"cxybNi6bP3"}],"key":"ogtHElIyhK"},{"type":"tableCell","position":{"start":{"line":965,"column":1},"end":{"line":965,"column":1}},"children":[{"type":"inlineCode","value":"False","position":{"start":{"line":965,"column":1},"end":{"line":965,"column":1}},"key":"KhDVM7my4V"}],"key":"Vbnuq4ZzKY"}],"key":"Pqb9qcELAy"},{"type":"tableRow","position":{"start":{"line":966,"column":1},"end":{"line":966,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":966,"column":1},"end":{"line":966,"column":1}},"children":[{"type":"text","value":"Scientific Format","position":{"start":{"line":966,"column":1},"end":{"line":966,"column":1}},"key":"tgIApuUM6W"}],"key":"Vm2pucpsPp"},{"type":"tableCell","position":{"start":{"line":966,"column":1},"end":{"line":966,"column":1}},"children":[{"type":"inlineCode","value":":.2e","position":{"start":{"line":966,"column":1},"end":{"line":966,"column":1}},"key":"iN8rNGycBW"}],"key":"GPyYgYcYd8"},{"type":"tableCell","position":{"start":{"line":966,"column":1},"end":{"line":966,"column":1}},"children":[{"type":"inlineCode","value":"f\"{1234:.2e}\"","position":{"start":{"line":966,"column":1},"end":{"line":966,"column":1}},"key":"iJBUs9RP9h"}],"key":"hmsh12SlBo"},{"type":"tableCell","position":{"start":{"line":966,"column":1},"end":{"line":966,"column":1}},"children":[{"type":"inlineCode","value":"\"1.23e+03\"","position":{"start":{"line":966,"column":1},"end":{"line":966,"column":1}},"key":"KZJuicYFaB"}],"key":"KZgK2SW7qC"}],"key":"ivRFSuTIXM"},{"type":"tableRow","position":{"start":{"line":967,"column":1},"end":{"line":967,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":967,"column":1},"end":{"line":967,"column":1}},"children":[{"type":"text","value":"Fixed Decimals","position":{"start":{"line":967,"column":1},"end":{"line":967,"column":1}},"key":"EHNQyDm1ns"}],"key":"qQX5rxMXsp"},{"type":"tableCell","position":{"start":{"line":967,"column":1},"end":{"line":967,"column":1}},"children":[{"type":"inlineCode","value":":.2f","position":{"start":{"line":967,"column":1},"end":{"line":967,"column":1}},"key":"hU5mQl9kYk"}],"key":"EnUw4bTz45"},{"type":"tableCell","position":{"start":{"line":967,"column":1},"end":{"line":967,"column":1}},"children":[{"type":"inlineCode","value":"f\"{3.14159:.2f}\"","position":{"start":{"line":967,"column":1},"end":{"line":967,"column":1}},"key":"n4MJxOGr5f"}],"key":"ObXJSyK7Qm"},{"type":"tableCell","position":{"start":{"line":967,"column":1},"end":{"line":967,"column":1}},"children":[{"type":"inlineCode","value":"\"3.14\"","position":{"start":{"line":967,"column":1},"end":{"line":967,"column":1}},"key":"mxs3XJsbh5"}],"key":"HP96zJMvRg"}],"key":"iLgeA5dag7"}],"key":"yCg1vVuFFW"},{"type":"heading","depth":2,"position":{"start":{"line":969,"column":1},"end":{"line":969,"column":1}},"children":[{"type":"text","value":"Next Chapter Preview","position":{"start":{"line":969,"column":1},"end":{"line":969,"column":1}},"key":"oofRC2dNG8"}],"identifier":"next-chapter-preview","label":"Next Chapter Preview","html_id":"next-chapter-preview","implicit":true,"key":"SiCtPisJXh"},{"type":"paragraph","position":{"start":{"line":971,"column":1},"end":{"line":971,"column":1}},"children":[{"type":"text","value":"Armed with a deep understanding of Python’s numeric types and the perils of floating-point arithmetic, you’re ready for Chapter 3: Control Flow. You’ll learn to make your code dynamic with if-statements and loops, building algorithms that can adapt to data and iterate until convergence. The numerical foundations from this chapter become essential when you’re checking whether a calculation has converged, comparing values within tolerance, or detecting numerical instabilities in your simulations. Get ready to transform static calculations into intelligent algorithms that can make decisions and repeat tasks—the essence of computational thinking.","position":{"start":{"line":971,"column":1},"end":{"line":971,"column":1}},"key":"kkthDhM3fQ"}],"key":"eU0rF3ikYE"}],"key":"YGxhK7q5If"}],"key":"YgoOBNZ7OE"},"references":{"cite":{"order":[],"data":{}}}}